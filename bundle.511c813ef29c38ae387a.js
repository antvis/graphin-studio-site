!function(g){function I(I){for(var e,A,c=I[0],a=I[1],i=I[2],B=0,o=[];B<c.length;B++)A=c[B],Object.prototype.hasOwnProperty.call(C,A)&&C[A]&&o.push(C[A][0]),C[A]=0;for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(g[e]=a[e]);for(l&&l(I);o.length;)o.shift()();return t.push.apply(t,i||[]),n()}function n(){for(var g,I=0;I<t.length;I++){for(var n=t[I],e=!0,c=1;c<n.length;c++){var a=n[c];0!==C[a]&&(e=!1)}e&&(t.splice(I--,1),g=A(A.s=n[0]))}return g}var e={},C={0:0},t=[];function A(I){if(e[I])return e[I].exports;var n=e[I]={i:I,l:!1,exports:{}};return g[I].call(n.exports,n,n.exports,A),n.l=!0,n.exports}A.m=g,A.c=e,A.d=function(g,I,n){A.o(g,I)||Object.defineProperty(g,I,{enumerable:!0,get:n})},A.r=function(g){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},A.t=function(g,I){if(1&I&&(g=A(g)),8&I)return g;if(4&I&&"object"==typeof g&&g&&g.__esModule)return g;var n=Object.create(null);if(A.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:g}),2&I&&"string"!=typeof g)for(var e in g)A.d(n,e,function(I){return g[I]}.bind(null,e));return n},A.n=function(g){var I=g&&g.__esModule?function(){return g.default}:function(){return g};return A.d(I,"a",I),I},A.o=function(g,I){return Object.prototype.hasOwnProperty.call(g,I)},A.p="./";var c=window.webpackJsonp=window.webpackJsonp||[],a=c.push.bind(c);c.push=I,c=c.slice();for(var i=0;i<c.length;i++)I(c[i]);var l=a;t.push([126,1]),n()}([function(module,exports){eval("module.exports = window.React;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcIndpbmRvdy5SZWFjdFwiP2QzNWUiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSB3aW5kb3cuUmVhY3Q7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n")},function(module,exports){eval("module.exports = window.antd;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcIndpbmRvdy5hbnRkXCI/OGZhNCJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHdpbmRvdy5hbnRkOyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n")},,,function(module,exports){eval("module.exports = _;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcIl9cIj8yNzY1Il0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gXzsiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///4\n")},,,,function(module,exports){eval("module.exports = G6;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcIkc2XCI/ZjBlOCJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IEc2OyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///8\n")},function(module,exports){eval("module.exports = _.merge;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcIl8ubWVyZ2VcIj9iNGY1Il0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gXy5tZXJnZTsiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///9\n")},,,,,function(module,exports){eval("module.exports = _.map;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJfLm1hcFwiP2ZjYzEiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfLm1hcDsiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///14\n")},,,function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* WEBPACK VAR INJECTION */(function(module) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return index; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(4);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _antv_g6__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8);\n/* harmony import */ var _antv_g6__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_antv_g6__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var svg2marker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(36);\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nfunction _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }\n\nvar __signature__ = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal["default"].signature : function (a) {\n  return a;\n};\n\n\n\n\n\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError("Cannot call a class as a function");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if ("value" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== "function" && superClass !== null) {\n    throw new TypeError("Super expression must either be null or a function");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === "object" || typeof call === "function")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter);\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError("Invalid attempt to spread non-iterable instance");\n}\n\nvar initGraph = function initGraph(props, graphDOM, behaviorsMode) {\n  var clientWidth = graphDOM.clientWidth,\n      clientHeight = graphDOM.clientHeight;\n  var defaultOptions = {\n    // initial canvas\n    width: clientWidth,\n    height: clientHeight,\n    // initial viewport state:\n    zoom: 1,\n    pan: {\n      x: clientWidth / 2,\n      y: clientHeight / 2\n    },\n    // interaction options:\n    minZoom: 0.2,\n    maxZoom: 10,\n    disablePan: false,\n    disableZoom: false,\n    disableDrag: false,\n    delegateNode: false,\n    wheelSensitivity: 1,\n    // rendering options:\n    animate: true,\n    animateCfg: {\n      onFrame: null,\n      duration: 500,\n      easing: \'easeLinear\'\n    },\n    plugins: []\n  };\n\n  var options = _objectSpread2({}, defaultOptions, {}, props.options || {});\n\n  var pan = options.pan,\n      width = options.width,\n      height = options.height,\n      minZoom = options.minZoom,\n      maxZoom = options.maxZoom,\n      disableZoom = options.disableZoom,\n      disablePan = options.disablePan,\n      disableDrag = options.disableDrag,\n      wheelSensitivity = options.wheelSensitivity,\n      animate = options.animate,\n      animateCfg = options.animateCfg,\n      plugins = options.plugins;\n  var defaultModes = [\'click-select\'];\n\n  if (!disablePan) {\n    defaultModes.push(\'drag-canvas\');\n  }\n\n  if (!disableDrag) {\n    defaultModes.push({\n      type: \'drag-node\',\n      delegate: false\n    });\n  }\n\n  if (!disableZoom) {\n    defaultModes.push({\n      type: \'zoom-canvas\',\n      sensitivity: wheelSensitivity\n    });\n  }\n\n  var instance = new _antv_g6__WEBPACK_IMPORTED_MODULE_2___default.a.Graph({\n    container: graphDOM,\n    renderer: \'canvas\',\n    width: width,\n    height: height,\n    animate: animate,\n    animateCfg: animateCfg,\n    minZoom: minZoom,\n    maxZoom: maxZoom,\n    plugins: plugins,\n    modes: {\n      "default": [].concat(defaultModes, _toConsumableArray(behaviorsMode["default"]))\n    }\n  }); // 平移\n\n  if (pan) instance.moveTo(pan.x, pan.y); // TODO  缩放\n\n  return {\n    options: props.options || defaultOptions,\n    instance: instance,\n    width: clientWidth,\n    height: clientHeight\n  };\n};\n\nvar DEFAULT_MARKER = {\n  // 自然人icon\n  person: {\n    path: "<path d=\\"M914.285769 802.889143q0 68.534857-41.691429 108.251429t-110.884571 39.716571l-499.419429 0q-69.12 0-110.884571-39.716571t-41.691429-108.251429q0-30.281143 1.974857-59.172571t7.972571-62.317714 15.140571-62.025143 24.576-55.734857 35.401143-46.299429 48.859429-30.573714 63.707429-11.410286q5.12 0 23.990857 12.288t42.569143 27.428571 61.732571 27.428571 76.288 12.288 76.288-12.288 61.732571-27.428571 42.569143-27.428571 23.990857-12.288q34.889143 0 63.707429 11.410286t48.859429 30.573714 35.401143 46.299429 24.576 55.734857 15.140571 62.025143 7.972571 62.317714 1.974857 59.172571zM731.428626 292.571429q0 90.843429-64.292571 155.136t-155.136 64.292571-155.136-64.292571-64.292571-155.136 64.292571-155.136 155.136-64.292571 155.136 64.292571 64.292571 155.136z\\" p-id=\\"2551\\" />"\n  },\n  // 手机号\n  phone: {\n    path: "<path d=\\"M703.591573 64.021106 255.859295 64.021106c-35.322483 0-63.956637 28.634154-63.956637 63.956637l0 767.535931c0 35.322483 28.634154 63.956637 63.956637 63.956637l447.732278 0c35.322483 0 63.956637-28.634154 63.956637-63.956637L767.54821 127.977743C767.54821 92.65526 738.914056 64.021106 703.591573 64.021106zM703.58748 863.787088c0 17.520025-14.202467 31.722492-31.722492 31.722492L287.585881 895.509581c-17.520025 0-31.722492-14.202467-31.722492-31.722492L255.863389 159.704328c0-17.520025 14.202467-31.722492 31.722492-31.722492l384.279107 0c17.520025 0 31.722492 14.202467 31.722492 31.722492L703.58748 863.787088zM575.667042 224.180805c0 17.520025-14.202467 31.722492-31.722492 31.722492L415.507342 255.903298c-17.520025 0-31.722492-14.202467-31.722492-31.722492l0-0.515746c0-17.520025 14.202467-31.722492 31.722492-31.722492l128.437208 0c17.520025 0 31.722492 14.202467 31.722492 31.722492L575.667042 224.180805zM479.725946 831.54885m-31.980365 0a31.252 31.252 0 1 0 63.960731 0 31.252 31.252 0 1 0-63.960731 0ZM255.863389 735.49826l447.724091 0 0 31.722492-447.724091 0 0-31.722492Z\\" p-id=\\"4078\\"></path>"\n  },\n  // 邮箱\n  email: {\n    path: "<path d=\\"M512.012041 630.535466l415.548448-346.226152c-2.25174-0.409407-4.274694-1.348636-6.610724-1.348636L103.074318 282.960677c-2.287865 0-4.32286 0.927187-6.5746 1.348636L512.012041 630.535466zM958.133584 320.144497c0-3.901411-1.071684-7.513829-2.25174-11.06604L661.313264 554.602446l295.014111 295.074318c0.758608-2.974224 1.806209-5.840075 1.806209-9.055127L958.133584 320.144497zM68.15428 309.042333c-1.143932 3.576294-2.287865 7.140546-2.287865 11.102164l0 520.465099c0 3.251176 1.119849 6.104986 1.854374 9.07921l295.110442-295.098401L68.15428 309.042333zM632.582502 578.492568l-108.697648 90.539229c-3.407714 2.901976-7.622201 4.298777-11.872813 4.298777-4.214487 0-8.453057-1.396802-11.896896-4.298777l-108.601317-90.491063L94.079398 875.963123c2.926058 0.770649 5.828034 1.842333 8.99492 1.842333l817.887488 0c3.227093 0 6.129069-1.059643 9.115334-1.842333L632.582502 578.492568z\\" p-id=\\"16508\\"></path>"\n  },\n  // 找不到ICON的，先这样处理\n  device: {\n    path: "<path d=\\"M128 256h768V170.666667H128c-46.933333 0-85.333333 38.4-85.333333 85.333333v512c0 46.933333 38.4 85.333333 85.333333 85.333333h170.666667v-85.333333H128V256z m426.666667 256h-170.666667v75.946667c-26.026667 23.466667-42.666667 56.96-42.666667 94.72s16.64 71.253333 42.666667 94.72V853.333333h170.666667v-75.946666c26.026667-23.466667 42.666667-56.96 42.666666-94.72s-16.64-71.253333-42.666666-94.72V512z m-85.333334 234.666667c-35.413333 0-64-28.586667-64-64s28.586667-64 64-64 64 28.586667 64 64-28.586667 64-64 64z m469.333334-405.333334H682.666667c-21.333333 0-42.666667 21.333333-42.666667 42.666667v426.666667c0 21.333333 21.333333 42.666667 42.666667 42.666666h256c21.333333 0 42.666667-21.333333 42.666666-42.666666V384c0-21.333333-21.333333-42.666667-42.666666-42.666667z m-42.666667 426.666667h-170.666667V426.666667h170.666667v341.333333z\\" p-id=\\"12672\\"></path>"\n  },\n  company: {\n    path: "<path d=\\"M831.808 869.184V171.168l-97.856-65.312-356.704 159.2v123.2l-197.12 68.64v412.288H160v48.992h64.352V485.472l261.472-85.696v518.4h181.024v-53.056h-40.224V391.584l-94.912-57.152-106.24 36.992V293.6l257.472-114.304v738.848H864v-48.992h-32.192v0.032zM256.544 595.68l189.056-61.216v-81.632l-189.056 65.312v77.536z m0 106.144l189.056-40.832v-81.632l-189.056 48.992v73.472z m0 110.208l189.056-24.512v-81.632l-189.056 28.576v77.568z m0 106.112l189.056-4.096v-81.632l-189.056 8.192v77.536z\\" p-id=\\"818\\"></path>"\n  },\n  none: {\n    path: ""\n  }\n};\n\nvar registerInnerMarker = function registerInnerMarker(customIcons) {\n  var CUSTOM_ICONS = customIcons && customIcons.reduce(function (acc, curr) {\n    return _objectSpread2({}, acc, _defineProperty({}, curr.name, {\n      path: curr.path\n    }));\n  }, {});\n\n  var icons = _objectSpread2({}, DEFAULT_MARKER, {}, CUSTOM_ICONS);\n\n  Object.keys(icons).forEach(function (key) {\n    _antv_g6__WEBPACK_IMPORTED_MODULE_2___default.a.G.Marker.Symbols[key] = Object(svg2marker__WEBPACK_IMPORTED_MODULE_3__[/* default */ "a"])(icons[key].path);\n  });\n};\n\nvar reset = function reset(shapes, shapeComponents) {\n  shapes.forEach(function (shape, index) {\n    if (!shapeComponents[index].noReset) shape.attr(_objectSpread2({}, shapeComponents[index].attrs));\n  });\n};\n\nvar compiler = function compiler(extendNodeShape) {\n  var registerName = extendNodeShape.name,\n      renderNodeShape = extendNodeShape.render;\n\n  if (!renderNodeShape) {\n    return;\n  }\n  /** 设置初始化shapeComponent，按照节点ID进行分类 */\n\n\n  var initShapeComponentMap = {};\n  var initStateMap = {};\n  var initUpdateMap = {};\n  _antv_g6__WEBPACK_IMPORTED_MODULE_2___default.a.registerNode(registerName, {\n    /** 自定义Shape */\n    draw: function draw(inputCfg, group) {\n      /** 得到用户返回的shapeComponents，然后拼装 */\n      var _renderNodeShape = renderNodeShape(inputCfg),\n          shapeComponents = _renderNodeShape.shapeComponents,\n          RenderState = _renderNodeShape.state,\n          update = _renderNodeShape.update;\n      /** 每次draw后的shape就是初始化shape，这个在节点update后，用于setstate的reset */\n\n\n      initShapeComponentMap[inputCfg.data.id] = shapeComponents;\n      initStateMap[inputCfg.data.id] = RenderState;\n      initUpdateMap[inputCfg.data.id] = update;\n      var keyshapeIndex = 0;\n      var g6Shapes = shapeComponents.map(function (component, index) {\n        if (component.isKeyShape) keyshapeIndex = index;\n        return group.addShape(component.shape, {\n          attrs: _objectSpread2({}, component.attrs)\n        });\n      });\n      return g6Shapes[keyshapeIndex];\n    },\n\n    /** 设置各种交互状态 */\n    setState: function setState(name, value, node) {\n      var id = node.get(\'model\').data.id;\n      var initShapeComponent = initShapeComponentMap[id];\n      var initState = initStateMap[id];\n      var shapes = node.getContainer().get(\'children\'); // 顺序根据 draw 时确定\n\n      /** 如果为false，则重置到初始状态 */\n\n      if (!value || !name) {\n        reset(shapes, initShapeComponent);\n        return;\n      }\n      /** 如果为为selected状态，则不作高亮 */\n      // if (node.hasState(\'selected\') && name === \'highlight.light\' && value) return;\n\n\n      Object.keys(initState).forEach(function (key) {\n        /** state的key和behavior里触发的name匹配 */\n        if (name === key) {\n          shapes.forEach(function (g6Shape) {\n            var originAttrs = g6Shape.attr();\n            var customAttrs = initState[key][originAttrs.id];\n\n            if (customAttrs) {\n              var animate = customAttrs.animate,\n                  otherAttrs = _objectWithoutProperties(customAttrs, ["animate"]);\n\n              g6Shape.attr(otherAttrs);\n\n              if (animate) {\n                /** 如果有动画 */\n                var attrs = animate.attrs,\n                    duration = animate.duration,\n                    easing = animate.easing,\n                    callback = animate.callback,\n                    delay = animate.delay;\n                g6Shape.animate(attrs, duration, easing, callback, delay);\n              }\n            }\n          });\n        }\n      });\n    }\n  });\n};\n/** 默认节点样式 */\n\n\nvar defaultStyle = {\n  /** 节点的大小 */\n  nodeSize: 20,\n\n  /** 节点的主要颜色 */\n  primaryColor: \'#9900EF\',\n\n  /** 文本的字体大小 */\n  fontSize: 12,\n\n  /** 文本的字体颜色 */\n  fontColor: \'#3b3b3b\',\n\n  /** dark 置灰 */\n  dark: \'#eee\'\n};\n\nvar renderNodeShape = function renderNodeShape(node) {\n  var _defaultStyle$node$st = _objectSpread2({}, defaultStyle, {}, node.style),\n      primaryColor = _defaultStyle$node$st.primaryColor,\n      nodeSize = _defaultStyle$node$st.nodeSize,\n      fontColor = _defaultStyle$node$st.fontColor,\n      fontSize = _defaultStyle$node$st.fontSize,\n      dark = _defaultStyle$node$st.dark;\n\n  var iconSize = nodeSize / 2;\n  var fontPosition = nodeSize * 1.4;\n  return {\n    shape: \'CircleNode\',\n    shapeComponents: [{\n      shape: \'circle\',\n      attrs: {\n        id: \'circle-container\',\n        x: 0,\n        y: 0,\n        r: nodeSize,\n        fill: \'#fff\',\n        stroke: primaryColor,\n        cursor: \'pointer\',\n        lineWidth: 2\n      }\n    }, {\n      shape: \'Marker\',\n      attrs: {\n        id: \'node-icon\',\n        symbol: node.data.type,\n        x: 0,\n        y: 0,\n        r: iconSize,\n        fill: primaryColor\n      }\n    }, {\n      shape: \'text\',\n      attrs: {\n        id: \'text-desc\',\n        text: node.data.label,\n        x: 0,\n        y: fontPosition,\n        cursor: \'pointer\',\n        fontSize: fontSize,\n        fill: fontColor,\n        fontWeight: \'lighter\',\n        fontFamily: \'Courier New\',\n        textAlign: \'center\',\n        textBaseline: \'top\'\n      }\n    }],\n    state: {\n      selected: {\n        \'circle-container\': {\n          stroke: primaryColor,\n          // fill: \'#000\',\n          animate: {\n            attrs: {\n              lineWidth: 6,\n              shadowOffsetX: 0,\n              shadowOffsetY: 0,\n              shadowBlur: 2,\n              shadowColor: \'#fff\',\n              repeat: false\n            },\n            duration: 200,\n            easing: \'easeCubic\',\n            callback: null,\n            delay: 0\n          }\n        }\n      },\n      // \'highlight.light\': {\n      //     \'circle-container\': {\n      //         stroke: primaryColor,\n      //         fill: \'#ddd\',\n      //     },\n      // },\n      \'highlight.dark\': {\n        \'circle-container\': {\n          fill: dark,\n          stroke: dark\n        },\n        \'node-icon\': {\n          fill: dark\n        },\n        \'text-desc\': {\n          fill: dark\n        }\n      }\n    }\n  };\n};\n/**\r\n * https://github.com/misund/hex-to-rgba/blob/master/src/index.js\r\n */\n\n\nvar removeHash = function removeHash(hex) {\n  return hex.charAt(0) === \'#\' ? hex.slice(1) : hex;\n};\n\nvar parseHex = function parseHex(nakedHex) {\n  var isShort = nakedHex.length === 3 || nakedHex.length === 4;\n  var twoDigitHexR = isShort ? "".concat(nakedHex.slice(0, 1)).concat(nakedHex.slice(0, 1)) : nakedHex.slice(0, 2);\n  var twoDigitHexG = isShort ? "".concat(nakedHex.slice(1, 2)).concat(nakedHex.slice(1, 2)) : nakedHex.slice(2, 4);\n  var twoDigitHexB = isShort ? "".concat(nakedHex.slice(2, 3)).concat(nakedHex.slice(2, 3)) : nakedHex.slice(4, 6);\n  var twoDigitHexA = (isShort ? "".concat(nakedHex.slice(3, 4)).concat(nakedHex.slice(3, 4)) : nakedHex.slice(6, 8)) || \'ff\'; // const numericA = +((parseInt(a, 16) / 255).toFixed(2));\n\n  return {\n    r: twoDigitHexR,\n    g: twoDigitHexG,\n    b: twoDigitHexB,\n    a: twoDigitHexA\n  };\n};\n\nvar hexToDecimal = function hexToDecimal(hex) {\n  return parseInt(hex, 16);\n};\n\nvar hexesToDecimals = function hexesToDecimals(_ref) {\n  var r = _ref.r,\n      g = _ref.g,\n      b = _ref.b,\n      a = _ref.a;\n  return {\n    r: hexToDecimal(r),\n    g: hexToDecimal(g),\n    b: hexToDecimal(b),\n    a: +(hexToDecimal(a) / 255).toFixed(2)\n  };\n};\n\nvar isNumeric = function isNumeric(n) {\n  return !isNaN(parseFloat(String(n))) && isFinite(Number(n));\n}; // eslint-disable-line no-restricted-globals, max-len\n\n\nvar formatRgb = function formatRgb(decimalObject, parameterA) {\n  var r = decimalObject.r,\n      g = decimalObject.g,\n      b = decimalObject.b,\n      parsedA = decimalObject.a;\n  var a = isNumeric(parameterA) ? parameterA : parsedA;\n  return "rgba(".concat(r, ", ").concat(g, ", ").concat(b, ", ").concat(a, ")");\n};\n/**\r\n * Turns an old-fashioned css hex color value into a rgb color value.\r\n *\r\n * If you specify an alpha value, you\'ll get a rgba() value instead.\r\n *\r\n * @param The hex value to convert. (\'123456\'. \'#123456\', \'\'123\', \'#123\')\r\n * @param An alpha value to apply. (optional) (\'0.5\', \'0.25\')\r\n * @return An rgb or rgba value. (\'rgb(11, 22, 33)\'. \'rgba(11, 22, 33, 0.5)\')\r\n */\n\n\nvar hexToRgba = function hexToRgba(hex, a) {\n  var hashlessHex = removeHash(hex);\n  var hexObject = parseHex(hashlessHex);\n  var decimalObject = hexesToDecimals(hexObject);\n  return formatRgb(decimalObject, a);\n};\n/* eslint-disable no-underscore-dangle */\n\n\nvar reset$1 = function reset(shape, initStyle) {\n  var lineWidth = initStyle.lineWidth,\n      stroke = initStyle.stroke;\n  shape.stopAnimate();\n  shape.attr(\'lineWidth\', lineWidth);\n  shape.attr(\'stroke\', stroke);\n};\n\nvar cache = function cache(model) {\n  if (!model.initStyle) {\n    model.initStyle = model.style;\n  }\n\n  return model.initStyle;\n};\n\nvar setEdgeState = function setEdgeState(name, value, item) {\n  var group = item.getContainer();\n  var shape = group.get(\'children\')[0]; // 顺序根据 draw 时确定\n\n  var textShape = group.get(\'children\')[1];\n  var model = item.get(\'model\');\n  /** 设置缓存 */\n\n  var initStyle = cache(model);\n  /** 如果是false，则直接reset到初始状态 */\n\n  if (!value || !name) {\n    reset$1(shape, initStyle);\n\n    if (textShape) {\n      textShape.originFill = textShape.originFill || textShape._attrs.fillStyle;\n      textShape.attr(\'fill\', textShape.originFill);\n    }\n\n    return;\n  }\n  /** 状态设置 */\n\n\n  var lineWidth = initStyle.lineWidth,\n      stroke = initStyle.stroke;\n\n  if (name === \'selected\') {\n    shape.attr(\'lineWidth\', 5);\n    shape.attr(\'stroke\', \'#1890FF\');\n    shape.animate({\n      lineWidth: lineWidth + 3,\n      repeat: false\n    }, 200, \'easeCubic\', null, 0);\n  }\n\n  if (name === \'highlight.light\') {\n    shape.attr(\'lineWidth\', 3);\n  }\n\n  if (name === \'highlight.dark\') {\n    if (textShape) {\n      textShape.originFill = textShape.originFill || textShape._attrs.fillStyle;\n      textShape.attr(\'fill\', \'#ccc\');\n    }\n\n    shape.attr(\'lineWidth\', 1);\n    shape.attr(\'stroke\', hexToRgba(stroke, \'0.1\'));\n  }\n};\n\nvar RegisterLineEdge = function RegisterLineEdge(G6) {\n  G6.registerEdge(\'LineEdge\', {\n    // 设置状态\n    setState: function setState(name, value, item) {\n      setEdgeState(name, value, item);\n    }\n  }, \'line\');\n};\n\nvar graphinHighlight = {\n  getDefaultCfg: function getDefaultCfg() {\n    return {\n      multiple: true,\n      keyCode: 18\n    };\n  },\n  getEvents: function getEvents() {\n    return {\n      \'node:click\': \'onClick\',\n      \'edge:click\': \'onEdgeClick\',\n      keyup: \'onKeyUp\',\n      keydown: \'onKeyDown\',\n      \'canvas:click\': \'onCanvasClick\'\n    };\n  },\n  clearStates: function clearStates() {\n    // eslint-disable-next-line\n    var graph = this.graph;\n    graph.getNodes().forEach(function (node) {\n      graph.clearItemStates(node);\n    });\n    graph.getEdges().forEach(function (edge) {\n      graph.clearItemStates(edge);\n    });\n  },\n  onCanvasClick: function onCanvasClick() {\n    this.clearStates();\n  },\n  onEdgeClick: function onEdgeClick(e) {\n    // eslint-disable-next-line\n    var graph = this.graph;\n    var currentEdge = e.item;\n    var sourceNode = currentEdge.get(\'source\');\n    var targetNode = currentEdge.get(\'target\');\n    this.clearStates();\n    currentEdge.toFront();\n    graph.getNodes().forEach(function (node) {\n      var id = node.get(\'id\');\n\n      if (id === sourceNode.get(\'id\') || id === targetNode.get(\'id\')) {\n        graph.setItemState(sourceNode, \'highlight.source\', true);\n        graph.setItemState(targetNode, \'highlight.target\', true);\n        graph.setItemState(node, \'highlight.dark\', false);\n        graph.setItemState(node, \'highlight.light\', true);\n        graph.setItemState(currentEdge, \'selected\', true);\n      } else {\n        graph.setItemState(node, \'highlight.light\', false);\n        graph.setItemState(node, \'highlight.dark\', true);\n      }\n    });\n  },\n  process: function process(node) {\n    // eslint-disable-next-line\n    var graph = this.graph;\n    /** process Edges */\n\n    var allEdges = graph.getEdges();\n    var relativeEdges = node.getEdges();\n    var relativeEdgesIds = relativeEdges.map(function (edge) {\n      return edge.get(\'id\');\n    });\n    var unRelativeEdges = [];\n    var relativeNodeSet = new Set([node]);\n    allEdges.forEach(function (edge) {\n      var id = edge.get(\'id\');\n      var source = edge.get(\'source\');\n      var target = edge.get(\'target\');\n\n      if (relativeEdgesIds.indexOf(id) !== -1) {\n        relativeNodeSet.add(source);\n        relativeNodeSet.add(target);\n      } else {\n        unRelativeEdges.push(edge);\n      }\n    });\n    /** process Nodes */\n\n    var allNodes = graph.getNodes();\n\n    var relativeNodes = _toConsumableArray(relativeNodeSet);\n\n    var relativeNodesIds = relativeNodes.map(function (item) {\n      return item.get(\'id\');\n    });\n    var unRelativeNodes = allNodes.filter(function (item) {\n      return relativeNodesIds.indexOf(item.get(\'id\')) === -1;\n    });\n    return {\n      relativeEdges: relativeEdges,\n      unRelativeEdges: unRelativeEdges,\n      relativeNodes: relativeNodes,\n      unRelativeNodes: unRelativeNodes\n    };\n  },\n  onClick: function onClick(e) {\n    var keydown = this.keydown,\n        graph = this.graph; // eslint-disable-line\n\n    var currentNode = e.item;\n\n    var _this$process = this.process(currentNode),\n        relativeEdges = _this$process.relativeEdges,\n        unRelativeEdges = _this$process.unRelativeEdges,\n        relativeNodes = _this$process.relativeNodes,\n        unRelativeNodes = _this$process.unRelativeNodes; // 单选\n\n\n    if (!keydown) {\n      this.clearStates();\n      relativeNodes.forEach(function (node) {\n        if (currentNode.get(\'id\') === node.get(\'id\')) {\n          graph.setItemState(currentNode, \'selected\', true);\n        } else {\n          graph.setItemState(node, \'highlight.dark\', false);\n          graph.setItemState(node, \'highlight.light\', true);\n        }\n      });\n      unRelativeNodes.forEach(function (node) {\n        graph.setItemState(node, \'highlight.light\', false);\n        graph.setItemState(node, \'highlight.dark\', true);\n      });\n      relativeEdges.forEach(function (edge) {\n        edge.toFront();\n        graph.setItemState(edge, \'highlight.dark\', false);\n        graph.setItemState(edge, \'highlight.light\', true);\n      });\n      unRelativeEdges.forEach(function (edge) {\n        edge.toBack();\n        graph.setItemState(edge, \'highlight.light\', false);\n        graph.setItemState(edge, \'highlight.dark\', true);\n      });\n    } else {\n      //  按住ctrl 多选\n      relativeEdges.forEach(function (edge) {\n        graph.setItemState(edge, \'highlight.dark\', false);\n        graph.setItemState(edge, \'highlight.light\', true);\n      });\n      graph.setItemState(currentNode, \'highlight.dark\', false);\n      graph.setItemState(currentNode, \'highlight.light\', true);\n    }\n  },\n  onKeyDown: function onKeyDown(e) {\n    var ctx = this; // eslint-disable-line\n\n    var keyCode = this.keyCode; // eslint-disable-line\n\n    var code = e.keyCode || e.which;\n\n    if (code === keyCode) {\n      ctx.keydown = true;\n    } else {\n      ctx.keydown = false;\n    }\n  },\n  onKeyUp: function onKeyUp() {\n    var ctx = this; // eslint-disable-line\n\n    ctx.keydown = false;\n  }\n};\nvar innerRegister = {\n  nodeShape: function nodeShape() {\n    return [];\n  },\n  edgeShape: function edgeShape() {\n    return [{\n      name: \'LineEdge\',\n      register: function register() {\n        RegisterLineEdge(_antv_g6__WEBPACK_IMPORTED_MODULE_2___default.a);\n      }\n    }];\n  },\n  behavior: function behavior() {\n    return [{\n      name: \'graphin-highlight\',\n      mode: \'default\',\n      options: {},\n      register: function register() {\n        _antv_g6__WEBPACK_IMPORTED_MODULE_2___default.a.registerBehavior(\'graphin-highlight\', graphinHighlight);\n      }\n    }];\n  }\n};\n\nvar dumpRegister = function dumpRegister() {\n  return [];\n};\n\nvar dumpExtend = function dumpExtend() {\n  return [];\n};\n\nvar innerExtend = {\n  nodeShape: function nodeShape() {\n    return [{\n      name: \'CircleNode\',\n      render: renderNodeShape\n    }];\n  },\n  marker: function marker() {\n    return [];\n  }\n};\n\nvar toUpperCaseWithFirst = function toUpperCaseWithFirst(str) {\n  return "".concat(str[0].toUpperCase()).concat(str.slice(1));\n};\n\nvar graphinRegister = function graphinRegister(props) {\n  var _props$extend = props.extend,\n      extend = _props$extend === void 0 ? {} : _props$extend,\n      _props$register = props.register,\n      register = _props$register === void 0 ? {} : _props$register,\n      _props$options = props.options,\n      options = _props$options === void 0 ? {} : _props$options;\n  var innerBehaviors = innerRegister.behavior().filter(function (behavior) {\n    var behaviorName = behavior.name.split(\'-\')[1];\n    var disableName = "disable".concat(toUpperCaseWithFirst(behaviorName));\n    return !options[disableName];\n  });\n  /** 使用G6原生方法得到的 */\n\n  var _register$nodeShape = register.nodeShape,\n      nodeShape = _register$nodeShape === void 0 ? dumpRegister : _register$nodeShape,\n      _register$edgeShape = register.edgeShape,\n      edgeShape = _register$edgeShape === void 0 ? dumpRegister : _register$edgeShape,\n      _register$behavior = register.behavior,\n      behavior = _register$behavior === void 0 ? dumpRegister : _register$behavior;\n  var registerNodes = [].concat(_toConsumableArray(innerRegister.nodeShape()), _toConsumableArray(nodeShape(_antv_g6__WEBPACK_IMPORTED_MODULE_2___default.a)));\n  var registerEdges = [].concat(_toConsumableArray(innerRegister.edgeShape()), _toConsumableArray(edgeShape(_antv_g6__WEBPACK_IMPORTED_MODULE_2___default.a)));\n  var registerBehaviors = [].concat(_toConsumableArray(innerBehaviors), _toConsumableArray(behavior(_antv_g6__WEBPACK_IMPORTED_MODULE_2___default.a)));\n  registerNodes.forEach(function (item) {\n    item.register(_antv_g6__WEBPACK_IMPORTED_MODULE_2___default.a);\n  });\n  registerEdges.forEach(function (item) {\n    item.register(_antv_g6__WEBPACK_IMPORTED_MODULE_2___default.a);\n  });\n  var modes = [];\n  registerBehaviors.forEach(function (item) {\n    item.register(_antv_g6__WEBPACK_IMPORTED_MODULE_2___default.a);\n    var name = item.name,\n        mode = item.mode;\n\n    try {\n      modes.push(_objectSpread2({\n        mode: mode,\n        type: name\n      }, item.options)); // eslint-disable-next-line no-empty\n    } catch (error) {}\n  });\n  var behaviorMode = modes.reduce(function (acc, curr) {\n    var mode = curr.mode,\n        others = _objectWithoutProperties(curr, ["mode"]);\n\n    if (!acc[mode]) {\n      acc[mode] = [];\n    }\n\n    acc[mode].push(others);\n    return _objectSpread2({}, acc);\n  }, {\n    "default": []\n  });\n  /** 扩展得到的 */\n\n  var _extend$nodeShape = extend.nodeShape,\n      ExNodeShape = _extend$nodeShape === void 0 ? dumpExtend : _extend$nodeShape,\n      _extend$marker = extend.marker,\n      ExMarker = _extend$marker === void 0 ? dumpExtend : _extend$marker;\n  var extendNodes = [].concat(_toConsumableArray(innerExtend.nodeShape()), _toConsumableArray(ExNodeShape()));\n  var extendMarker = [].concat(_toConsumableArray(innerExtend.marker()), _toConsumableArray(ExMarker()));\n  extendNodes.forEach(function (item) {\n    compiler(item);\n  });\n  registerInnerMarker(extendMarker);\n  return behaviorMode;\n};\n\nvar HistoryController = function HistoryController() {\n  var _this = this;\n\n  _classCallCheck(this, HistoryController);\n\n  this.save = function (state) {\n    _this.history = _this.history.slice(0, _this.historyIndex + 1);\n    _this.history = _this.history.concat([_objectSpread2({}, state)]);\n    _this.historyIndex = _this.historyIndex + 1;\n  };\n\n  this.undo = function () {\n    if (_this.getHistoryInfo().disableUndo) {\n      console.warn(\'There is no more undo history\');\n      return;\n    }\n\n    _this.historyIndex = _this.historyIndex - 1;\n    return _this.history[_this.historyIndex];\n  };\n\n  this.redo = function () {\n    if (_this.getHistoryInfo().disableRedo) {\n      console.warn(\'There is no more redo history\');\n      return;\n    }\n\n    _this.historyIndex = _this.historyIndex + 1;\n    return _this.history[_this.historyIndex];\n  };\n\n  this.getHistoryInfo = function () {\n    return {\n      currentStep: _this.historyIndex + 1,\n      allStep: _this.history.length,\n      disableRedo: _this.historyIndex === _this.history.length - 1,\n      disableUndo: _this.historyIndex === 0\n    };\n  };\n\n  this.reset = function () {\n    _this.history = [];\n    _this.historyIndex = -1;\n  };\n\n  this.history = [];\n  this.historyIndex = -1;\n};\n/**\r\n *\r\n * @param Data 用户的数据\r\n *\r\n * @returns Data\r\n */\n\n\nvar dataChecking = function dataChecking() {\n  var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    nodes: [],\n    edges: []\n  };\n  var _data$edges = data.edges,\n      edges = _data$edges === void 0 ? [] : _data$edges,\n      _data$nodes = data.nodes,\n      nodes = _data$nodes === void 0 ? [] : _data$nodes;\n  /** nodes */\n\n  var nodeIds = [];\n  var graphinNodes = nodes.filter(function (node) {\n    var id = node.id;\n    /** 如果节点不存在，则忽略该节点 */\n\n    if (!id) {\n      console.warn("node requires an id\\uFF0Cthis \'".concat(JSON.stringify(node), "\' node will be automatically filtered"));\n      return false;\n    }\n\n    if (!node.data) {\n      console.warn("node requires an data field\\uFF0Cthis \'".concat(JSON.stringify(node), "\' node will be automatically filtered"));\n      return false;\n    }\n    /** 如果节点ID存在重复，则忽略后加入的节点 */\n\n\n    if (nodeIds.indexOf(id) !== -1) {\n      return false;\n    }\n\n    nodeIds.push(id);\n    return true;\n  }).map(function (node) {\n    return _objectSpread2({\n      shape: node.shape || \'CircleNode\'\n    }, node);\n  });\n  /** edges */\n\n  var graphinEdges = edges.filter(function (edge) {\n    var source = edge.source,\n        target = edge.target;\n\n    if (!source || !target) {\n      // eslint-disable-next-line no-console\n      console.log("edge requires  source and target\\uFF0Cthis \'".concat(JSON.stringify(edge), "\' edge will be automatically filtered"));\n      return false;\n    }\n\n    if (!edge.data) {\n      // eslint-disable-next-line no-console\n      console.log("edge requires an data field\\uFF0Cthis \'".concat(JSON.stringify(edge), "\' edge will be automatically filtered"));\n      return false;\n    }\n    /** 边是可以重复的，因为properties可能不一样 */\n\n\n    return true;\n  }).map(function (edge) {\n    var source = edge.source,\n        target = edge.target,\n        shape = edge.shape,\n        style = edge.style;\n    return _objectSpread2({\n      shape: shape || source === target ? \'loop\' : \'LineEdge\',\n      style: style || {\n        endArrow: true,\n        stroke: \'#ddd\',\n        cursor: \'pointer\',\n        lineWidth: 1.5,\n        lineAppendWidth: 10\n      },\n      loopCfg: {\n        position: \'top\',\n        dist: 20\n      }\n    }, edge);\n  });\n  return {\n    nodes: graphinNodes,\n    edges: graphinEdges\n  };\n};\n/**\r\n *\r\n * @param {*} data\r\n * 如果是nodes，则返回nodes，如果输入的是nodes和edges的对象，则返回对应的对象\r\n * @param {*} cfg\r\n */\n\n\nvar circleLayout = function circleLayout(data, cfg) {\n  var x = cfg.x,\n      y = cfg.y,\n      r = cfg.r;\n  var startX = x;\n  var startY = y;\n  var RR = r;\n  var edges = data.edges,\n      nodes = data.nodes;\n  var length = nodes.length;\n  var newNodes = nodes.map(function (node, index) {\n    var isCenterNode = node.x === startX && node.y === startY;\n    var isCenter = !!isCenterNode;\n    var R = isCenterNode ? 0 : RR;\n    var angle = index / length * 2 * Math.PI;\n    return _objectSpread2({}, node, {\n      x: isCenter ? startX : startX + R * Math.cos(angle),\n      y: isCenter ? startY : startY + R * Math.sin(angle),\n      layout: _objectSpread2({}, node.layout, {\n        circle: {\n          x: startX,\n          y: startY,\n          theta: angle,\n          isCenter: isCenter\n        }\n      })\n    });\n  });\n\n  if (edges) {\n    return {\n      nodes: newNodes,\n      edges: edges\n    };\n  }\n\n  return newNodes;\n};\n\nvar radialLayout = function radialLayout(data, options) {\n  var source = Object(lodash__WEBPACK_IMPORTED_MODULE_1__["cloneDeep"])(data); // eslint-disable-next-line new-cap\n\n  var layout = new _antv_g6__WEBPACK_IMPORTED_MODULE_2___default.a.Layout.radial(_objectSpread2({}, options));\n  layout.init(source);\n  layout.execute();\n  return {\n    nodes: layout.nodes,\n    edges: data.edges\n  };\n};\n\nvar getDegree = function getDegree(node, edges) {\n  var nodeId = node.data.id;\n  var index = 0;\n  edges.forEach(function (edge) {\n    if (edge.data.source === nodeId || edge.data.target === nodeId) {\n      index = index + 1;\n    }\n  });\n  return index;\n};\n/**\r\n *\r\n * @param {*} n n个圆沿着大圆排列,根据弧长公式  2*Math.PI*R = 2*r*n +gap*n\r\n * @param {*} r 小圆的半径r\r\n *\r\n */\n// export const getCircleR = (n: number, r: number, gap = 8) => {\n//     const R = (2 * r * n + gap * n) / (2 * Math.PI);\n//     return R;\n// };\n\n\nvar makeBoundingBox = function makeBoundingBox(bb) {\n  if (bb.x2 != null && bb.y2 != null && bb.x2 >= bb.x1 && bb.y2 >= bb.y1) {\n    return {\n      x1: bb.x1,\n      y1: bb.y1,\n      x2: bb.x2,\n      y2: bb.y2,\n      w: bb.x2 - bb.x1,\n      h: bb.y2 - bb.y1\n    };\n  }\n\n  if (bb.w >= 0 && bb.h >= 0) {\n    return {\n      x1: bb.x1,\n      y1: bb.y1,\n      x2: bb.x1 + bb.w,\n      y2: bb.y1 + bb.h,\n      w: bb.w,\n      h: bb.h\n    };\n  }\n};\n\nvar defaults = {\n  fit: true,\n  padding: 30,\n  startAngle: 3 / 2 * Math.PI,\n  sweep: undefined,\n  clockwise: true,\n  equidistant: false,\n  minNodeSpacing: 10,\n  boundingBox: undefined,\n  avoidOverlap: true,\n  nodeDimensionsIncludeLabels: false,\n  height: undefined,\n  width: undefined,\n  spacingFactor: undefined,\n  // concentric(node: any) {\n  //     // returns numeric value for each node, placing higher nodes in levels towards the centre\n  //     return node.degree();\n  // },\n  // levelWidth(nodes: any) {\n  //     // the letiation of concentric values in each level\n  //     return nodes.maxDegree() / 4;\n  // },\n  animate: false,\n  animationDuration: 500,\n  animationEasing: undefined,\n  // animateFilter() {\n  //     return true;\n  // }, // a function that determines whether the node should be animated.  All nodes animated by default on animate enabled.  Non-animated nodes are positioned immediately when the layout starts\n  ready: undefined,\n  stop: undefined\n};\n\nvar ConcentricLayout =\n/*#__PURE__*/\nfunction () {\n  function ConcentricLayout(options) {\n    _classCallCheck(this, ConcentricLayout);\n\n    var edges = options.data.edges;\n    this.options = _objectSpread2({}, defaults, {}, {\n      concentric: function concentric(node) {\n        return getDegree(node, edges);\n      }\n    }, {}, options);\n  }\n\n  _createClass(ConcentricLayout, [{\n    key: "run",\n    value: function run() {\n      var options = this.options;\n      var clockwise = options.counterclockwise !== undefined ? !options.counterclockwise : options.clockwise;\n      var nodes = this.options.data.nodes;\n      var bb = makeBoundingBox(options.boundingBox ? options.boundingBox : {\n        x1: 0,\n        y1: 0,\n        w: options.width,\n        h: options.height\n      });\n      var center = {\n        x: bb.x1 + bb.w / 2,\n        y: bb.y1 + bb.h / 2\n      };\n      var maxNodeSize = 0; // 计算每个节点的concentric权重value\n\n      var nodeValues = nodes.map(function (node) {\n        return {\n          value: options.concentric(node),\n          node: node\n        };\n      }).sort(function (a, b) {\n        return b.value - a.value;\n      }); // maxNodeSize = Math.max(maxNodeSize, nbb.w, nbb.h);\n\n      maxNodeSize = 50;\n      var maxDegree = nodeValues[0].value;\n      var levelWidth = options.levelWidth(nodes, maxDegree); // put the values into levels\n\n      var levels = [[]];\n      var currentLevel = levels[0];\n      nodeValues.forEach(function (node) {\n        if (currentLevel.length > 0) {\n          var firstItem = currentLevel[0].value;\n          var diff = Math.abs(firstItem - node.value);\n\n          if (diff >= levelWidth) {\n            currentLevel = [];\n            levels.push(currentLevel);\n          }\n        }\n\n        currentLevel.push(node);\n      }); // create positions from levels\n\n      var minDist = maxNodeSize + options.minNodeSpacing; // min dist between nodes\n\n      if (!options.avoidOverlap) {\n        // then strictly constrain to bb\n        var firstLvlHasMulti = levels.length > 0 && levels[0].length > 1;\n        var maxR = Math.min(bb.w, bb.h) / 2 - minDist;\n        var rStep = maxR / (levels.length + (firstLvlHasMulti ? 1 : 0));\n        minDist = Math.min(minDist, rStep);\n      } // find the metrics for each level\n\n\n      var r = 0;\n      levels.forEach(function (level) {\n        var sweep = options.sweep === undefined ? 2 * Math.PI - 2 * Math.PI / level.length : options.sweep;\n        level.dTheta = sweep / Math.max(1, level.length - 1);\n        var dTheta = level.dTheta; // calculate the radius\n\n        if (level.length > 1 && options.avoidOverlap) {\n          // but only if more than one node (can\'t overlap)\n          var dcos = Math.cos(dTheta) - Math.cos(0);\n          var dsin = Math.sin(dTheta) - Math.sin(0);\n          var rMin = Math.sqrt(minDist * minDist / (dcos * dcos + dsin * dsin)); // s.t. no nodes overlapping\n\n          r = Math.max(rMin, r);\n        }\n\n        level.r = r;\n        r += minDist;\n      });\n\n      if (options.equidistant) {\n        var rDeltaMax = 0;\n        var radius = 0;\n\n        for (var i = 0; i < levels.length; i++) {\n          var level = levels[i];\n          var rDelta = level.r - radius;\n          rDeltaMax = Math.max(rDeltaMax, rDelta);\n        }\n\n        radius = 0;\n\n        for (var _i = 0; _i < levels.length; _i++) {\n          var _level = levels[_i];\n\n          if (_i === 0) {\n            radius = _level.r;\n          }\n\n          _level.r = radius;\n          radius += rDeltaMax;\n        }\n      } // calculate the node positions\n\n\n      var pos = {}; // id => position\n\n      var outerR = [].concat(levels).pop().r;\n      var result = [];\n\n      for (var _i2 = 0; _i2 < levels.length; _i2++) {\n        var _level2 = levels[_i2];\n        var dTheta = _level2.dTheta;\n        var _radius = _level2.r;\n\n        for (var j = 0; j < _level2.length; j++) {\n          var val = _level2[j];\n          var theta = options.startAngle + (clockwise ? 1 : -1) * dTheta * j;\n          var p = {\n            x: center.x + _radius * Math.cos(theta),\n            y: center.y + _radius * Math.sin(theta)\n          };\n          pos[val.node.data.id] = p;\n          result.push(_objectSpread2({}, val.node, {\n            data: val.node.data,\n            degree: val.value,\n            layout: _objectSpread2({}, val.node.layout, {\n              concentric: {\n                outerR: outerR,\n                center: center,\n                theta: theta\n              }\n            }),\n            x: p.x,\n            y: p.y\n          }));\n        }\n      }\n\n      var edges = options.data.edges;\n      return {\n        outerR: outerR,\n        levels: levels,\n        nodes: result,\n        edges: edges\n      };\n    }\n  }]);\n\n  return ConcentricLayout;\n}();\n/**\r\n * 向量运算 Youtube教程：https://www.youtube.com/watch?v=Kti2mNKDOTw&list=PLA9470D64579500CE&index=6\r\n *\r\n * 向量有3个容易混淆概念\r\n * scalar Multip 系数积\r\n * dot Product 内积/点积\r\n * cross product 外积/有向积\r\n */\n\n\nvar Vector =\n/*#__PURE__*/\nfunction () {\n  function Vector(x, y) {\n    _classCallCheck(this, Vector);\n\n    this.x = x;\n    this.y = y;\n  }\n\n  _createClass(Vector, [{\n    key: "getvec",\n    value: function getvec() {\n      return this;\n    }\n  }, {\n    key: "add",\n    value: function add(v2) {\n      return new Vector(this.x + v2.x, this.y + v2.y);\n    }\n  }, {\n    key: "subtract",\n    value: function subtract(v2) {\n      return new Vector(this.x - v2.x, this.y - v2.y);\n    }\n  }, {\n    key: "magnitude",\n    value: function magnitude() {\n      return Math.sqrt(this.x * this.x + this.y * this.y);\n    }\n  }, {\n    key: "normalise",\n    value: function normalise() {\n      return this.divide(this.magnitude());\n    }\n  }, {\n    key: "divide",\n    value: function divide(n) {\n      return new Vector(this.x / n || 0, this.y / n || 0);\n    }\n  }, {\n    key: "scalarMultip",\n    value: function scalarMultip(n) {\n      return new Vector(this.x * n, this.y * n);\n    }\n  }]);\n\n  return Vector;\n}();\n\nvar Point =\n/*#__PURE__*/\nfunction () {\n  function Point(position, id, data) {\n    var mass = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1.0;\n\n    _classCallCheck(this, Point);\n\n    this.p = position; // 点的位置，用[x,y]向量来表示\n\n    this.m = mass; // 点的质量，默认为1.0\n\n    this.v = new Vector(0, 0); // 速度，初始值为向量零 [0,0] velocity, init with x=0, y=0\n\n    this.a = new Vector(0, 0); // 加速度，初始值为向量零 [0,0] acceleration, init with x=0, y=0\n\n    this.id = id; // 点的唯一ID  id of Point, defaults to -1\n\n    this.data = data;\n  }\n\n  _createClass(Point, [{\n    key: "updateAcc",\n    value: function updateAcc(force) {\n      /**\r\n       * 加速度也是一个向量，根据力的平行四边形法则进行力的合成，用向量运算就是加运算\r\n       */\n      this.a = this.a.add(force.divide(this.m)); // a = a + F/m\n    }\n  }]);\n\n  return Point;\n}();\n\nvar Node = function Node(data) {\n  _classCallCheck(this, Node);\n\n  this.id = data.id;\n  this.data = data || {};\n};\n\nvar Edge = function Edge(id, source, target, data) {\n  _classCallCheck(this, Edge);\n\n  this.id = id;\n  this.source = source;\n  this.target = target;\n  this.data = data || {};\n};\n\nvar Spring = function Spring(source, target, length) {\n  _classCallCheck(this, Spring);\n\n  this.source = source;\n  this.target = target;\n  this.length = length;\n};\n\nvar SPEED = 5; // 根据节点的大小可以自动设置速度的大小\n\nvar ForceLayout =\n/*#__PURE__*/\nfunction () {\n  function ForceLayout(options) {\n    var _this = this;\n\n    _classCallCheck(this, ForceLayout);\n\n    this.getMass = function (node) {\n      var _ref = node.layout || {},\n          _ref$degree = _ref.degree,\n          degree = _ref$degree === void 0 ? getDegree(node, _this.edges) : _ref$degree,\n          force = _ref.force;\n      /** 当你在layout.force.mass中制定了才使用 */\n\n\n      if (force && force.mass) {\n        // eslint-disable-next-line prefer-destructuring\n        return force.mass;\n      }\n      /** 默认质量都是通过节点的度数自动计算的 */\n\n\n      return degree < 5 ? 1 : degree * 10;\n    };\n\n    this.restart = function (dragNode, graph) {\n      /** 将位置更新到nodePoint中 */\n      var ignore = _this.props.ignore;\n      graph.getNodes().forEach(function (nodeItem) {\n        var node = nodeItem.get(\'model\');\n\n        if (ignore && ignore(node)) {\n          return;\n        }\n\n        var vec = new Vector(node.x, node.y);\n\n        var point = _this.nodePoints.get(node.id);\n\n        if (point) {\n          point.p = vec;\n\n          _this.nodePoints.set(node.id, point);\n        }\n      });\n\n      var changeNodePosition = function changeNodePosition(node) {\n        var vec = new Vector(node.x, node.y); // const mass = (node.layout && node.layout.force && node.layout.force.mass) || 100000;\n\n        var mass = _this.getMass(node);\n\n        _this.nodePoints.set(node.id, new Point(vec, node.id, node.data, mass));\n\n        _this.edges.forEach(function (edge) {\n          var source = _this.nodePoints.get(edge.source.id);\n\n          var target = _this.nodePoints.get(edge.target.id);\n\n          if (source.id === node.id || target.id === node.id) {\n            var length = _this.edgeSprings.get(edge.id).length || 100;\n\n            _this.edgeSprings.set(edge.id, new Spring(source, target, length));\n          }\n        });\n      }; // TODO:支持多点拖拽\n\n\n      dragNode.forEach(changeNodePosition);\n      if (_this.props.restartAnimation) _this.animation();else _this.slienceForce();\n    };\n\n    this.props = {\n      stiffness: 200.0,\n      defSpringLen: 200,\n      repulsion: 200.0 * SPEED,\n      damping: 0.9,\n      minEnergyThreshold: 0.1,\n      maxSpeed: 1000,\n      coulombDisScale: 0.005,\n      tickInterval: 0.02,\n      groupFactor: 4,\n      MaxIterations: 10000,\n      animation: true,\n      restartAnimation: true,\n      width: 200,\n      height: 200\n    };\n    this.updateOptions(options);\n    /** 存放器：节点与边 */\n\n    this.sourceData = {\n      nodes: [],\n      edges: []\n    };\n    this.nodes = [];\n    this.edges = [];\n    this.nodeSet = {};\n    this.edgeSet = {};\n    this.nodePoints = new Map();\n    this.edgeSprings = new Map();\n    this.registers = new Map();\n    this.done = false;\n    /** 计数器 */\n\n    this.iterations = 0;\n    this.nextEdgeId = 0; // 边属性计数自增\n\n    this.timer = 0;\n    this.center = new Vector(0, 0);\n  }\n  /**\r\n   * Iterate options to update this.props\r\n   * @param {*} options\r\n   */\n\n\n  _createClass(ForceLayout, [{\n    key: "updateOptions",\n    value: function updateOptions(options) {\n      var _this2 = this;\n\n      if (!options) {\n        return;\n      }\n\n      Object.keys(options).forEach(function (key) {\n        _this2.props[key] = options[key];\n      });\n    }\n  }, {\n    key: "setData",\n    value: function setData(data) {\n      // clean all data\n      this.nodes = [];\n      this.edges = [];\n      this.nodeSet = {};\n      this.edgeSet = {};\n      this.nodePoints = new Map();\n      this.edgeSprings = new Map();\n      this.sourceData = data; // add nodes and edges\n\n      if (\'nodes\' in data || \'edges\' in data) {\n        this.addNodes(data.nodes);\n        this.addEdges(data.edges);\n      }\n    }\n  }, {\n    key: "init",\n    value: function init() {\n      var _this3 = this;\n      /** 初始化点和边的信息 */\n\n\n      var _this$props = this.props,\n          width = _this$props.width,\n          height = _this$props.height;\n      this.nodes.forEach(function (node) {\n        var x = node.data.x || width / 2;\n        var y = node.data.y || height / 2;\n        var vec = new Vector(x, y);\n\n        if (!node.data.layout) {\n          node.data.layout = {};\n        }\n\n        var degree = getDegree(node, _this3.edges);\n        node.data.layout.degree = degree;\n\n        var mass = _this3.getMass(node.data);\n\n        _this3.nodePoints.set(node.id, new Point(vec, String(node.id), node.data, mass));\n      });\n      this.edges.forEach(function (edge) {\n        var source = _this3.nodePoints.get(edge.source.id);\n\n        var target = _this3.nodePoints.get(edge.target.id);\n\n        var length = source.p.subtract(target.p).magnitude(); // 相邻两点的向量\n\n        if (_this3.props.defSpringLen) {\n          length = _this3.props.defSpringLen;\n        }\n\n        if (edge.data.spring) {\n          length = edge.data.spring;\n        }\n\n        _this3.edgeSprings.set(edge.id, new Spring(source, target, length));\n      });\n      /** 其他参数设置 */\n\n      var size = this.nodePoints.size;\n      var vv = Math.pow(10, 2);\n      this.props.minEnergyThreshold = 1 / 2 * Math.pow(1, 2) * 1 * size * vv;\n    }\n  }, {\n    key: "start",\n    value: function start() {\n      /** 初始化节点 */\n      this.init();\n      if (this.props.animation) this.animation();else this.slienceForce();\n    }\n  }, {\n    key: "calTotalEnergy",\n    value: function calTotalEnergy() {\n      var _this4 = this;\n\n      var energy = 0.0;\n      this.nodes.forEach(function (node) {\n        var point = _this4.nodePoints.get(node.id);\n\n        var speed = point.v.magnitude();\n        var m = 1; // point.m;\n\n        energy += m * Math.pow(speed, 2) * 0.5; // p = 1/2*(mv^2)\n      });\n      return energy;\n    }\n  }, {\n    key: "slienceForce",\n    value: function slienceForce() {\n      for (var i = 0; i < this.props.MaxIterations; i++) {\n        this.tick(this.props.tickInterval);\n        var energy = this.calTotalEnergy();\n        /** 如果需要监控信息，则提供给用户 */\n\n        var monitor = this.registers.get(\'monitor\');\n\n        if (monitor) {\n          monitor(this.reportMointor(energy));\n        }\n\n        if (energy <= this.props.minEnergyThreshold || i === this.props.MaxIterations - 1 // 1000000次/(1000/60) = 60000s = 1min\n        ) {\n            this.render();\n\n            if (this.props.done) {\n              this.props.done();\n            }\n\n            break;\n          }\n      }\n    }\n  }, {\n    key: "animation",\n    value: function animation() {\n      var _this5 = this;\n\n      var step = function step() {\n        var _this5$props = _this5.props,\n            done = _this5$props.done,\n            tickInterval = _this5$props.tickInterval,\n            minEnergyThreshold = _this5$props.minEnergyThreshold,\n            MaxIterations = _this5$props.MaxIterations;\n\n        _this5.tick(tickInterval);\n\n        _this5.render();\n\n        _this5.iterations++;\n\n        var energy = _this5.calTotalEnergy();\n        /** 如果需要监控信息，则提供给用户 */\n\n\n        var monitor = _this5.registers.get(\'monitor\');\n\n        if (monitor) {\n          monitor(_this5.reportMointor(energy));\n        }\n\n        if (energy <= minEnergyThreshold || _this5.iterations === MaxIterations // 1000000次/(1000/60) = 60000s = 1min\n        ) {\n            window.cancelAnimationFrame(_this5.timer);\n            _this5.iterations = 0;\n            _this5.done = true;\n\n            if (done) {\n              done();\n            }\n          } else {\n          _this5.timer = window.requestAnimationFrame(step);\n        }\n      };\n\n      this.timer = window.requestAnimationFrame(step);\n    }\n  }, {\n    key: "render",\n    value: function render() {\n      var _this6 = this;\n\n      var render = this.registers.get(\'render\');\n      var nodes = [];\n      this.nodePoints.forEach(function (node) {\n        nodes.push(_objectSpread2({}, _this6.nodeSet[node.id] && _this6.nodeSet[node.id].data, {\n          x: node.p.x,\n          y: node.p.y\n        }));\n      });\n\n      if (render) {\n        render({\n          nodes: nodes,\n          edges: this.sourceData.edges\n        });\n      } else {\n        // eslint-disable-next-line no-console\n        console.error(\'need a render function\');\n      }\n    }\n  }, {\n    key: "reportMointor",\n    value: function reportMointor(energy) {\n      var params = {\n        energy: energy,\n        iterations: this.iterations,\n        nodes: this.nodes,\n        edges: this.edges\n      };\n      return params;\n    }\n  }, {\n    key: "tick",\n    value: function tick(interval) {\n      this.updateCoulombsLaw();\n      this.updateHookesLaw();\n      this.attractToCentre();\n      this.updateVelocity(interval);\n      this.updatePosition(interval);\n    }\n    /** 布局算法 */\n\n  }, {\n    key: "updateCoulombsLaw",\n    value: function updateCoulombsLaw() {\n      var len = this.nodes.length;\n\n      for (var i = 0; i < len; i++) {\n        for (var j = i + 1; j < len; j++) {\n          // eslint-disable-next-line no-continue\n          if (i === j) continue;\n          var iNode = this.nodes[i];\n          var jNode = this.nodes[j];\n          var coulombDisScale = this.props.coulombDisScale;\n          var repulsion = this.props.repulsion;\n          var v = this.nodePoints.get(iNode.id).p.subtract(this.nodePoints.get(jNode.id).p);\n          var dis = (v.magnitude() + 0.1) * coulombDisScale;\n          var direction = v.normalise(); // 向量的方向：基向量\n\n          var factor = 1;\n          this.nodePoints.get(iNode.id).updateAcc( // 得到库伦力\n          direction.scalarMultip(repulsion * factor).divide(Math.pow(dis, 2)));\n          this.nodePoints.get(jNode.id).updateAcc(direction.scalarMultip(repulsion * factor).divide(-Math.pow(dis, 2)));\n        }\n      }\n    }\n  }, {\n    key: "updateHookesLaw",\n    value: function updateHookesLaw() {\n      var _this7 = this;\n\n      this.edges.forEach(function (edge) {\n        var spring = _this7.edgeSprings.get(edge.id);\n\n        var v = spring.target.p.subtract(spring.source.p);\n        var displacement = spring.length - v.magnitude();\n        var direction = v.normalise();\n        spring.source.updateAcc(direction.scalarMultip(-_this7.props.stiffness * displacement));\n        spring.target.updateAcc(direction.scalarMultip(_this7.props.stiffness * displacement));\n      });\n    }\n  }, {\n    key: "attractToCentre",\n    value: function attractToCentre() {\n      var _this8 = this;\n\n      var implementForce = function implementForce(node, center) {\n        var radio = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 100;\n\n        var point = _this8.nodePoints.get(node.id);\n\n        var direction = point.p.subtract(center);\n        point.updateAcc(direction.scalarMultip(-_this8.props.repulsion / radio));\n      };\n\n      var getBaseLog = function getBaseLog(x, y) {\n        return Math.log(y) / Math.log(x);\n      };\n\n      this.nodes.forEach(function (node) {\n        // 默认的向心力指向画布中心\n        var degree = node.data && node.data.layout && node.data.layout.degree;\n        var leafNode = degree === 1;\n        var singleNode = degree === 0;\n        var MaxRadio = 600;\n\n        if (singleNode || leafNode) {\n          var center = new Vector(_this8.props.width / 2, _this8.props.height / 2);\n          implementForce(node, center, MaxRadio);\n        } else {\n          var radio = MaxRadio / 2 / getBaseLog(2, degree);\n\n          var _center = new Vector(_this8.props.width / 2, _this8.props.height / 2);\n\n          implementForce(node, _center, radio);\n        }\n      });\n    }\n  }, {\n    key: "updateVelocity",\n    value: function updateVelocity(interval) {\n      var _this9 = this;\n\n      this.nodes.forEach(function (node) {\n        var point = _this9.nodePoints.get(node.id);\n\n        point.v = point.v.add(point.a.scalarMultip(interval)) // 根据加速度求速度公式 V_curr= a*@t + V_pre\n        .scalarMultip(_this9.props.damping);\n\n        if (point.v.magnitude() > _this9.props.maxSpeed) {\n          point.v = point.v.normalise().scalarMultip(_this9.props.maxSpeed);\n        }\n\n        point.a = new Vector(0, 0);\n      });\n    }\n  }, {\n    key: "updatePosition",\n    value: function updatePosition(interval) {\n      var _this10 = this;\n\n      this.nodes.forEach(function (node) {\n        var point = _this10.nodePoints.get(node.id);\n\n        point.p = point.p.add(point.v.scalarMultip(interval)); // 路程公式 s = v * t\n      });\n    }\n    /**\r\n     * add one Node\r\n     * @param {[type]} node [description]\r\n     */\n\n  }, {\n    key: "addNode",\n    value: function addNode(node) {\n      var ignore = this.props.ignore;\n\n      if (ignore && ignore(node)) {\n        return;\n      }\n\n      if (!(node.id in this.nodeSet)) {\n        this.nodes.push(node);\n      }\n\n      this.nodeSet[node.id] = node;\n    }\n    /**\r\n     * add Nodes\r\n     * @param {[type]} data [description]\r\n     */\n\n  }, {\n    key: "addNodes",\n    value: function addNodes(data) {\n      var _this11 = this;\n\n      data.forEach(function (node) {\n        _this11.addNode(new Node(node));\n      });\n    }\n    /**\r\n     * add one Edge\r\n     * @param {[type]} edge [description]\r\n     */\n\n  }, {\n    key: "addEdge",\n    value: function addEdge(edge) {\n      if (!(edge.id in this.edgeSet)) {\n        this.edges.push(edge);\n      }\n\n      this.edgeSet[edge.id] = edge;\n      return edge;\n    }\n    /**\r\n     * add Edges\r\n     * @param {[type]} data [description]\r\n     */\n\n  }, {\n    key: "addEdges",\n    value: function addEdges(data) {\n      try {\n        var len = data.length;\n\n        for (var i = 0; i < len; i++) {\n          var e = data[i]; //   const edgeIds = this.register.get("edge").id(e);\n\n          var sourceId = e.source; // edgeIds.sourceId || e["source"];\n\n          var targetId = e.target; // edgeIds.targetId || e["target"];\n\n          var node1 = this.nodeSet[sourceId];\n\n          if (node1 === undefined) {\n            throw new TypeError("invalid node name: ".concat(e[0]));\n          }\n\n          var node2 = this.nodeSet[targetId];\n\n          if (node2 === undefined) {\n            throw new TypeError("invalid node name: ".concat(e[1]));\n          }\n\n          var attr = e.data;\n          var edge = new Edge(this.nextEdgeId++, node1, node2, attr);\n          this.addEdge(edge);\n        }\n      } catch (error) {\n        // eslint-disable-next-line no-console\n        console.error(error);\n      }\n    }\n  }, {\n    key: "register",\n    value: function register(type, options) {\n      this.registers.set(type, options); // 将用户的自定义函数注册进来\n    }\n  }, {\n    key: "stop",\n    value: function stop() {\n      window.cancelAnimationFrame(this.timer);\n      this.done = true;\n    }\n  }]);\n\n  return ForceLayout;\n}();\n/**\r\n *\r\n * @param {boolean} isOptimize 是否开启Shape的渲染优化，默认针对非KeyShape节点\r\n * @param {Item} node 单个Node\r\n */\n\n\nvar optimizeDrawingByNode = function optimizeDrawingByNode(isOptimize, node) {\n  var shapes = node.getContainer().get(\'children\');\n  var keyShape = shapes.find(function (item) {\n    return item.isKeyShape;\n  });\n  keyShape.show();\n  shapes.forEach(function (shape) {\n    if (isOptimize && shape !== keyShape) {\n      shape.hide();\n    } else {\n      shape.show();\n    }\n  });\n};\n/**\r\n *\r\n * @param {object} graph G6的Graph实例\r\n * @param {boolean} isOptimize 是否减少Shape的渲染，默认是非KeyShape节点\r\n */\n\n\nvar optimizeDrawing = function optimizeDrawing(graph, isOptimize) {\n  graph.getNodes().forEach(function (node) {\n    optimizeDrawingByNode(isOptimize, node);\n  });\n  /** 渲染 */\n\n  graph.autoPaint();\n};\n\nvar randomLayout = function randomLayout(data, cfg) {\n  var defaultBbox = {\n    x: 0,\n    y: 0,\n    w: 500,\n    h: 500\n  };\n  var bbox = cfg.bbox;\n\n  var _defaultBbox$bbox = _objectSpread2({}, defaultBbox, {}, bbox),\n      x = _defaultBbox$bbox.x,\n      y = _defaultBbox$bbox.y,\n      w = _defaultBbox$bbox.w,\n      h = _defaultBbox$bbox.h;\n\n  var edges = data.edges,\n      nodes = data.nodes;\n  var newNodes = nodes.map(function (node) {\n    return _objectSpread2({}, node, {\n      x: x + Math.round(Math.random() * w),\n      y: y + Math.round(Math.random() * h)\n    });\n  });\n  return {\n    nodes: newNodes,\n    edges: edges\n  };\n};\n/* eslint-disable no-param-reassign */\n\n\nvar getRandomPosition = function getRandomPosition() {\n  return Math.round((Math.random() - 0.5) * 80);\n};\n/**\r\n *\r\n * @param data\r\n * @param options\r\n */\n\n\nvar tweak = function tweak(data, options) {\n  var graph = options.graph,\n      width = options.width,\n      height = options.height;\n  var currNodes = data.nodes,\n      currEdges = data.edges;\n\n  var _graph$save = graph.save(),\n      preNodes = _graph$save.nodes;\n  /** 将图上之前节点的位置信息存储在positionMap中 */\n\n\n  var positionMap = new Map();\n  preNodes.forEach(function (item) {\n    var id = item.id,\n        x = item.x,\n        y = item.y;\n    positionMap.set(id, {\n      x: x,\n      y: y\n    });\n  });\n  var incrementNodesMap = new Map();\n  currNodes.forEach(function (node) {\n    var id = node.id;\n    var position = positionMap.get(id);\n\n    if (position) {\n      node.x = position.x;\n      node.y = position.y;\n    } else {\n      incrementNodesMap.set(id, node);\n    }\n  });\n  var incrementPositonMap = new Map();\n  currEdges.forEach(function (edge) {\n    var source = edge.source,\n        target = edge.target;\n    var nodeInSource = incrementNodesMap.get(source);\n    var nodeInTarget = incrementNodesMap.get(target);\n    var positionInSource = positionMap.get(source);\n    var positionInTarget = positionMap.get(target);\n\n    if (nodeInSource && positionInTarget) {\n      incrementPositonMap.set(source, {\n        // ...nodeInSource,\n        x: positionInTarget.x + getRandomPosition(),\n        y: positionInTarget.y + getRandomPosition()\n      });\n    }\n\n    if (nodeInTarget && positionInSource) {\n      incrementPositonMap.set(target, {\n        // ...nodeInTarget,\n        x: positionInSource.x + getRandomPosition(),\n        y: positionInSource.y + getRandomPosition()\n      });\n    }\n  });\n  currNodes.forEach(function (node) {\n    var id = node.id;\n    var position = positionMap.get(id) || incrementPositonMap.get(id);\n\n    if (position) {\n      node.x = position.x;\n      node.y = position.y;\n    } else {\n      node.x = Math.round(Math.random() * width);\n      node.y = Math.round(Math.random() * height);\n    }\n  });\n  return {\n    data: {\n      nodes: currNodes,\n      edges: currEdges\n    }\n  };\n};\n\nvar forceLayout = function forceLayout(options) {\n  var width = options.width,\n      height = options.height,\n      graph = options.graph,\n      data = options.data,\n      _options$preset = options.preset,\n      preset = _options$preset === void 0 ? {\n    name: \'\',\n    options: {}\n  } : _options$preset,\n      animation = options.animation,\n      _options$done = options.done,\n      _done = _options$done === void 0 ? function () {} : _options$done,\n      isOptimization = options.isOptimization,\n      others = _objectWithoutProperties(options, ["width", "height", "graph", "data", "preset", "animation", "done", "isOptimization"]);\n\n  var concentricOptions = {\n    /** 同心圆的布局范围，默认为当前画布的宽高范围 */\n    boundingBox: {\n      x1: 0,\n      y1: 0,\n      w: width,\n      h: height\n    },\n\n    /** 节点间的距离，默认为60 */\n    minNodeSpacing: 60,\n\n    /** 每层的节点度数范围 */\n    levelWidth: function levelWidth(nodes, maxDegree) {\n      /** 同心圆层数 */\n      var levelNum = 8;\n      return maxDegree / levelNum;\n    }\n  };\n  var randomOptions = {\n    bbox: {\n      x: 0,\n      y: 0,\n      w: width,\n      h: height\n    }\n  };\n  var sourceData = data;\n\n  if (preset.name === \'random\') {\n    sourceData = randomLayout(data, _objectSpread2({}, randomOptions, {}, preset.options));\n  }\n\n  if (preset.name === \'concentric\') {\n    sourceData = new ConcentricLayout(_objectSpread2({}, concentricOptions, {}, preset.options, {\n      data: data\n    })).run();\n  }\n\n  if (preset.name === \'force\') {\n    sourceData = tweak(data, options).data;\n  }\n  /** 创建力导模拟器 */\n\n\n  var simulation = new ForceLayout(_objectSpread2({\n    width: width,\n    height: height,\n    animation: animation !== undefined ? animation : true,\n    done: function done() {\n      if (isOptimization) {\n        optimizeDrawing(graph, false);\n      }\n\n      _done(graph);\n    }\n  }, others)); // 1. 挂载数据\n\n  simulation.setData(sourceData); // 3.启动\n  // 4. 自定义渲染函数\n\n  simulation.register(\'render\', function (forceData) {\n    try {\n      forceData.nodes.forEach(function (item) {\n        var node = graph.findById(item.id);\n\n        if (node) {\n          // 因为有可能画布删除了节点\n          var model = node.get(\'model\');\n          model.x = item.x;\n          model.y = item.y;\n\n          if (isOptimization) {\n            optimizeDrawingByNode(true, node);\n          }\n        }\n      });\n      graph.refreshPositions();\n      sourceData = forceData;\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.log(error);\n    }\n  });\n  simulation.start();\n  return {\n    data: sourceData,\n    simulation: simulation\n  };\n};\n\nvar dagreLayout = function dagreLayout(data, options) {\n  var source = Object(lodash__WEBPACK_IMPORTED_MODULE_1__["cloneDeep"])(data); // eslint-disable-next-line new-cap\n\n  var layout = new _antv_g6__WEBPACK_IMPORTED_MODULE_2___default.a.Layout.dagre(_objectSpread2({\n    type: \'dagre\'\n  }, options));\n  layout.init(source);\n  layout.execute();\n  return {\n    nodes: layout.nodes,\n    edges: data.edges\n  }; // graph.positionsAnimate();\n};\n\nvar gridLayout = function gridLayout(data, options) {\n  var width = options.width,\n      height = options.height,\n      _options$nodeSep = options.nodeSep,\n      nodeSep = _options$nodeSep === void 0 ? 100 : _options$nodeSep,\n      _options$nodeSize = options.nodeSize,\n      nodeSize = _options$nodeSize === void 0 ? 50 : _options$nodeSize;\n  var nodes = data.nodes,\n      edges = data.edges;\n  var count = nodes.length;\n  var cols = Math.round(Math.sqrt(count * (height / width))); // 列的个数\n\n  var rows = Math.round(Math.sqrt(count * (width / height))); // 行的个数\n\n  var start = {\n    x: width / 2 - (cols / 2 - 1) * (nodeSize + nodeSep / 2),\n    y: height / 2 - (rows / 2 - 1) * (nodeSize + nodeSep / 2)\n  };\n  var resultNodes = nodes.map(function (node, index) {\n    var xIndex = Math.floor(index / cols) - 1; // 行序号，向下取整\n\n    var yIndex = Math.floor(index % cols) - 1; // 列序号，向下取整\n\n    var x = start.x + xIndex * (nodeSize + nodeSep / 2);\n    var y = start.y + yIndex * (nodeSize + nodeSep / 2);\n    return _objectSpread2({}, node, {\n      x: x,\n      y: y\n    });\n  });\n  return {\n    nodes: resultNodes,\n    edges: edges\n  };\n};\n\nvar defaultLayouts = function defaultLayouts(graphin, prevProps) {\n  var graph = graphin.graph;\n  var width = graph.get(\'width\');\n  var height = graph.get(\'height\');\n  return [{\n    name: \'circle\',\n    desc: \'圆形布局\',\n    icon: \'chrome\',\n    layout: function layout(data, options) {\n      var defaultOptions = {\n        /** 圆心 x坐标 */\n        x: width / 2,\n\n        /** 圆心 y坐标 */\n        y: height / 2,\n\n        /** 半径，默认半径为节点数*10 */\n        r: data.nodes.length * 10\n      };\n      return {\n        data: circleLayout(data, _objectSpread2({}, defaultOptions, {}, options))\n      };\n    }\n  }, {\n    name: \'dagre\',\n    desc: \'有向分层\',\n    icon: \'apartment\',\n    layout: function layout(data, options) {\n      var defaultOptions = {\n        /** 中心点坐标 */\n        center: [width / 2, height / 2],\n\n        /** 节点大小 */\n        nodeSize: [50, 50],\n\n        /**  节点水平间距(px) */\n        nodesep: 12,\n\n        /** 每一层节点之间间距 */\n        ranksep: 50,\n\n        /** 放置位置 */\n        align: \'UL\'\n      };\n      return {\n        data: dagreLayout(data, _objectSpread2({}, defaultOptions, {}, options))\n      };\n    }\n  }, {\n    name: \'radial\',\n    desc: \'迳向布局\',\n    icon: \'trademark\',\n    layout: function layout(data, options) {\n      var defaultOptions = {\n        /** 中心点坐标 */\n        center: [width / 2, height / 2],\n\n        /** 防止覆盖 */\n        preventOverlap: true,\n\n        /** 节点大小 */\n        nodeSize: 100,\n\n        /** 每层的半径 */\n        unitRadius: 150\n      };\n      return {\n        data: radialLayout(data, _objectSpread2({}, defaultOptions, {}, options))\n      };\n    }\n  }, {\n    name: \'grid\',\n    desc: \'横纵布局\',\n    icon: \'appstore\',\n    layout: function layout(data, options) {\n      var defaultOptions = {\n        /** 布局范围的宽度 */\n        width: width,\n\n        /** 布局范围的高度 */\n        height: height,\n\n        /** 节点间的间距，上下左右均是一致的 */\n        nodeSep: 100,\n\n        /** 节点的大小，单位px */\n        nodeSize: 50\n      };\n      return {\n        data: gridLayout(data, _objectSpread2({}, defaultOptions, {}, options))\n      };\n    }\n  }, {\n    name: \'concentric\',\n    desc: \'同心圆布局\',\n    icon: \'chrome\',\n    layout: function layout(data, options) {\n      var defaultOptions = {\n        /** 同心圆的布局范围，默认为当前画布的宽高范围 */\n        boundingBox: {\n          x1: 0,\n          y1: 0,\n          w: width,\n          h: height\n        },\n\n        /** 节点间的距离，默认为60 */\n        minNodeSpacing: 60,\n\n        /** 每层的节点度数范围 */\n        levelWidth: function levelWidth(nodes, maxDegree) {\n          /** 同心圆层数 */\n          var levelNum = 8;\n          return maxDegree / levelNum;\n        }\n      };\n      return {\n        data: new ConcentricLayout(_objectSpread2({}, defaultOptions, {}, options, {\n          data: data\n        })).run()\n      };\n    }\n  }, {\n    name: \'force\',\n    desc: \'力导布局\',\n    icon: \'branches\',\n    layout: function layout(data, options) {\n      var defaultOptions = {\n        data: data,\n\n        /** 前置布局，默认为random */\n        preset: {\n          name: prevProps.layout && prevProps.layout.name || \'concentric\',\n          options: {}\n        },\n\n        /** spring stiffness 弹簧劲度系数 * */\n        stiffness: 200.0,\n\n        /** 默认的弹簧长度 * */\n        defSpringLen: 200,\n\n        /** repulsion 斥力，这里指代 库伦常量Ke */\n        repulsion: 200.0 * 5,\n\n        /** 速度的减震因子，其实就是阻尼系数 */\n        damping: 0.9,\n\n        /** 最小能量阈值，当粒子运动，有阻尼系数的存在，最终会将初始的能量消耗殆尽 */\n        minEnergyThreshold: 0.1,\n\n        /** 最大的速度 [0,1000] */\n        maxSpeed: 1000,\n\n        /** 最大迭代数 */\n        MaxIterations: 10000,\n\n        /** 是否开启动画 */\n        animation: true\n      };\n\n      var layouOpts = _objectSpread2({}, defaultOptions, {}, options);\n      /** 只要不是初始化空数据布局，前一次的布局为力导布局，那么设置它的前置布局为force，内部采用tweak布局 */\n\n\n      if (prevProps && prevProps.layout.name === \'force\') {\n        if (prevProps.data.nodes.length === 0) {\n          layouOpts.preset = {\n            name: \'concentric\',\n            options: {}\n          };\n        } else {\n          layouOpts.preset = {\n            name: \'force\',\n            options: {}\n          };\n        }\n      }\n\n      var force = forceLayout(layouOpts);\n      return {\n        data: force.data,\n        forceSimulation: force.simulation\n      };\n    }\n  }];\n};\n\nvar layoutInfo = function layoutInfo(layouts) {\n  return layouts.map(function (item) {\n    var desc = item.desc,\n        name = item.name,\n        icon = item.icon;\n    return {\n      desc: desc,\n      name: name,\n      icon: icon\n    };\n  });\n};\n\nvar noopLayout = function noopLayout() {\n  return [];\n};\n/**\r\n *\r\n * @param graphin Graphin组件对象\r\n * @param params\r\n */\n\n\nvar layoutController = function layoutController(graphin, params) {\n  var props = graphin.props,\n      forceSimulation = graphin.forceSimulation,\n      graph = graphin.graph;\n  var width = graph.get(\'width\');\n  var height = graph.get(\'height\');\n  var PropsData = params.data,\n      _params$prevProps = params.prevProps,\n      prevProps = _params$prevProps === void 0 ? props : _params$prevProps;\n  var layout = props.layout;\n  /** 数据的校验  */\n\n  var data = dataChecking(PropsData);\n  /** 注册 */\n\n  var _props$extend = props.extend,\n      extend = _props$extend === void 0 ? {} : _props$extend;\n  var extendLayout = extend.layout || noopLayout;\n  var layouts = [].concat(_toConsumableArray(defaultLayouts(graphin, prevProps)), _toConsumableArray(extendLayout(graphin, prevProps))); // eslint-disable-next-line no-param-reassign\n\n  graphin.getLayoutInfo = function () {\n    return layoutInfo(layouts);\n  };\n  /** 当没有节点，则不参加布局 */\n\n\n  if (data.nodes && data.nodes.length === 0) {\n    return {\n      data: data\n    };\n  }\n\n  var hasPosition = data.nodes.every(function (node) {\n    return node.x && node.y;\n  });\n  /** layout不存在，且有位置信息，则认为是save-render操作 */\n\n  if (!(layout && layout.name)) {\n    if (hasPosition) {\n      return {\n        data: data\n      };\n    }\n\n    layout = {\n      name: \'concentric\'\n    };\n  }\n  /** 重置forceSimulation  */\n\n\n  if (forceSimulation) {\n    forceSimulation.stop();\n  }\n  /** 设置布局的 options参数 */\n\n\n  var _layout = layout,\n      name = _layout.name;\n\n  var options = _objectSpread2({\n    graph: graph,\n    width: width,\n    height: height,\n    data: data\n  }, layout.options);\n  /** 得到当前匹配的布局函数 */\n\n\n  var matchLayout = layouts.find(function (item) {\n    return item.name === name;\n  }) || {\n    name: \'\',\n    icon: \'\',\n    layout: function layout(inputData) {\n      return {\n        data: inputData\n      };\n    }\n  };\n  return matchLayout.layout(data, options);\n};\n\nvar highlight = function highlight(graph) {\n  return function (nodeIds) {\n    graph.getNodes().forEach(function (node) {\n      graph.clearItemStates(node, null);\n\n      if (nodeIds.indexOf(node.get(\'id\')) !== -1) {\n        graph.setItemState(node, \'highlight.light\', false);\n      } else {\n        graph.setItemState(node, \'highlight.dark\', true);\n      }\n    });\n  };\n};\n\nvar getInfo = function getInfo(graph) {\n  return function () {\n    var nodes = graph.get(\'nodes\');\n    var edges = graph.get(\'edges\');\n    return {\n      count: {\n        nodes: nodes.length,\n        edges: edges.length\n      }\n    };\n  };\n};\n\nvar search = function search(graph) {\n  return function () {\n    var words = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \'\'; // 搜索分词，默认空格隔开\n\n    var wordsArray = words.trim().split(\' \'); // 目前先只支持node 的搜索\n\n    var _graph$save = graph.save(),\n        nodes = _graph$save.nodes; // 匹配方法\n\n\n    var matchWord = function matchWord(node, word) {\n      var id = node.id,\n          _node$label = node.label,\n          label = _node$label === void 0 ? \'\' : _node$label,\n          properties = node.properties; // 按 id 匹配\n\n      if (word && String(id).indexOf(word) !== -1) {\n        return {\n          isMatch: true,\n          searchType: \'id\'\n        };\n      } // 按 label 匹配\n\n\n      if (word && String(label).indexOf(word) !== -1) {\n        return {\n          isMatch: true,\n          searchType: \'label\'\n        };\n      }\n\n      var matchProperty = []; // 按 property 匹配\n\n      if (properties) {\n        // eslint-disable-next-line\n        matchProperty = properties.filter(function (property) {\n          return property.value && property.value === word;\n        });\n      }\n\n      if (matchProperty.length > 0) {\n        return {\n          isMatch: true,\n          searchType: \'property\'\n        };\n      }\n\n      return {\n        isMatch: false,\n        searchType: \'\'\n      };\n    };\n\n    var result = [];\n    nodes.forEach(function (node) {\n      var matchResult = wordsArray.map(function (word) {\n        return matchWord(node.data, word);\n      });\n      var searchTypes = matchResult.reduce(function (acc, curr) {\n        var searchType = curr.searchType;\n\n        if (searchType && acc.indexOf(searchType) === -1) {\n          acc.push(searchType);\n        }\n\n        return acc;\n      }, []);\n\n      if (searchTypes.length > 0) {\n        result.push(_objectSpread2({}, node, {\n          searchTypes: searchTypes\n        }));\n      }\n    });\n    return result;\n  };\n};\n\nvar apis = function apis(context) {\n  var graph = context.graph,\n      clear = context.clear,\n      handleRedo = context.handleRedo,\n      handleUndo = context.handleUndo,\n      handleSaveHistory = context.handleSaveHistory,\n      getHistoryInfo = context.getHistoryInfo,\n      getLayoutInfo = context.getLayoutInfo;\n  return {\n    highlight: function highlight$1(nodeIds) {\n      return highlight(graph)(nodeIds);\n    },\n    getInfo: function getInfo$1() {\n      return _objectSpread2({}, getInfo(graph)(), {\n        layouts: getLayoutInfo()\n      });\n    },\n    search: function search$1(words) {\n      return search(graph)(words);\n    },\n    history: {\n      redo: handleRedo,\n      undo: handleUndo,\n      save: handleSaveHistory,\n      getInfo: getHistoryInfo\n    },\n    clear: clear\n  };\n};\n\nvar getContainerSize = function getContainerSize(el) {\n  var clientWidth = el.clientWidth,\n      clientHeight = el.clientHeight;\n  return {\n    width: clientWidth,\n    height: clientHeight\n  };\n};\n\nvar handleResize = function handleResize(graphin) {\n  var graphDOM = graphin.graphDOM,\n      graph = graphin.graph;\n\n  var _getContainerSize = getContainerSize(graphDOM),\n      width = _getContainerSize.width,\n      height = _getContainerSize.height;\n\n  graph.set(\'width\', width);\n  graph.set(\'height\', height);\n  var canvas = graph.get(\'canvas\');\n\n  if (canvas) {\n    canvas.changeSize(width, height);\n    graph.autoPaint();\n    graphin.setState({\n      width: width,\n      height: height\n    });\n  }\n};\n\nvar changeZoom = function changeZoom(graphin) {\n  var graph = graphin.graph,\n      state = graphin.state,\n      g6Options = graphin.g6Options;\n  var forceSimulation = state.forceSimulation;\n  var _g6Options$isZoomOpti = g6Options.isZoomOptimize,\n      isZoomOptimize = _g6Options$isZoomOpti === void 0 ? function () {\n    return true;\n  } : _g6Options$isZoomOpti,\n      _g6Options$keyShapeZo = g6Options.keyShapeZoom,\n      keyShapeZoom = _g6Options$keyShapeZo === void 0 ? 0.6 : _g6Options$keyShapeZo;\n  var extendedGraph = graph;\n  /** 缩放的时候隐藏IMAGE/TEXT */\n\n  var timer = null;\n  graph.on(\'viewportchange\', function (evt) {\n    if (evt.action === \'zoom\' && isZoomOptimize(graph, evt)) {\n      if (timer) window.clearTimeout(timer);\n      timer = setTimeout(function () {\n        try {\n          if (graphin.state.forceSimulation) {\n            /** 如果存在力导，那么缩放结束且力导未结束前，只展示keyShape */\n            if (graphin.state.forceSimulation.done) optimizeDrawing(extendedGraph, false);\n          }\n          /** 只有缩放比率大于keyShapeZoom，才展示所有的，否则只展示keyshape */\n\n\n          if (graph.getZoom() > keyShapeZoom) {\n            optimizeDrawing(extendedGraph, false);\n          }\n        } catch (error) {\n          optimizeDrawing(extendedGraph, false);\n        }\n      }, 200);\n      optimizeDrawing(extendedGraph, true);\n    }\n  });\n};\n\nvar dragWithForce = function dragWithForce(graphin) {\n  var graph = graphin.graph,\n      g6Options = graphin.g6Options;\n  var _g6Options$autoFollow = g6Options.autoFollowWithForce,\n      autoFollowWithForce = _g6Options$autoFollow === void 0 ? true : _g6Options$autoFollow,\n      _g6Options$autoPinWit = g6Options.autoPinWithForce,\n      autoPinWithForce = _g6Options$autoPinWit === void 0 ? true : _g6Options$autoPinWit;\n  /** 拖拽Force节点：start */\n\n  graph.on(\'node:dragstart\', function () {\n    if (graphin.state.forceSimulation) {\n      graphin.state.forceSimulation.stop();\n    }\n  });\n  /** 拖拽结束 */\n\n  graph.on(\'node:dragend\', function (e) {\n    if (graphin.state.forceSimulation && autoFollowWithForce) {\n      var nodeModel = e.item.get(\'model\');\n      nodeModel.x = e.x;\n      nodeModel.y = e.y; // 策略：拖拽后就定在拖拽处\n\n      nodeModel.layout = _objectSpread2({}, nodeModel.layout, {\n        force: {\n          mass: autoPinWithForce ? 1000000 : null\n        }\n      }); // TODO :未来多选可以拖拽。\n\n      var drageNodes = [nodeModel];\n      graphin.state.forceSimulation.restart(drageNodes, graph);\n      graph.refreshPositions();\n    }\n  });\n};\n\nvar handleGraphEvents = function handleGraphEvents(graphin) {\n  /**\r\n   * 监听window事件\r\n   * resize :debounce处理\r\n   */\n  var handleResizeEvent = Object(lodash__WEBPACK_IMPORTED_MODULE_1__["debounce"])(function () {\n    handleResize(graphin);\n  }, 100);\n  window.addEventListener(\'resize\', handleResizeEvent, false);\n  /**\r\n   * 监听wheel/zoom事件\r\n   */\n\n  changeZoom(graphin);\n  /**\r\n   * 基于力导的节点拖拽\r\n   */\n\n  dragWithForce(graphin);\n  /**\r\n   * 事件清除\r\n   */\n\n  return {\n    clear: function clear() {\n      window.removeEventListener(\'resize\', handleResizeEvent, false);\n    }\n  };\n};\n\nvar floorRandom = function floorRandom(number) {\n  return Math.floor(Math.random() * number);\n};\n\nvar randomColor = function randomColor() {\n  var opacity = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n  var r = floorRandom(255);\n  var g = floorRandom(255);\n  var b = floorRandom(255);\n  var color = "rgba(".concat(r, ",").concat(g, ",").concat(b, ",").concat(opacity, ")");\n  return color;\n};\n\nvar colorMap = {};\n/**\r\n *\r\n * @param {*} name 分类的名称\r\n * @example\r\n * debug(\'Tooltip\')(\'render\',\'...\')\r\n * @todo https://developer.mozilla.org/zh-CN/docs/Web/API/Console\r\n *\r\n */\n\nvar debug = function debug(name) {\n  if (!colorMap[name]) {\n    colorMap[name] = randomColor();\n  }\n\n  var color = colorMap[name];\n  return function () {\n    // eslint-disable-line\n    if (false) { var _len, message, _key, _console; }\n  };\n};\n\nvar Graph =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(Graph, _React$PureComponent);\n\n  function Graph(props) {\n    var _this;\n\n    _classCallCheck(this, Graph);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Graph).call(this, props));\n    _this.graphDOM = null;\n\n    _this.getApis = function () {\n      var context = _this.getContext();\n\n      return apis(context);\n    };\n\n    _this.getHistoryInfo = function () {\n      return _this.history.getHistoryInfo();\n    };\n\n    _this.clear = function () {\n      _this.graph.clear();\n\n      _this.history.reset();\n\n      _this.clearEvents();\n\n      _this.setState({\n        data: {\n          nodes: [],\n          edges: []\n        },\n        forceSimulation: null,\n        graphSave: null\n      }, function () {\n        var data = _this.state.data;\n\n        _this.renderGraph(data);\n      });\n    };\n\n    _this.getContext = function () {\n      return _assertThisInitialized(_this);\n    };\n\n    _this.renderGraphWithLifeCycle = function () {\n      var data = _this.state.data;\n\n      _this.graph.changeData(Object(lodash__WEBPACK_IMPORTED_MODULE_1__["cloneDeep"])(data));\n\n      _this.graph.emit(\'afterchangedata\');\n\n      _this.handleSaveHistory();\n    };\n\n    _this.stopForceSimulation = function () {\n      /** 如果有模拟器需要先停止 */\n      var forceSimulation = _this.state.forceSimulation;\n\n      if (forceSimulation) {\n        forceSimulation.stop();\n      }\n    };\n\n    _this.handleSaveHistory = function () {\n      var currentState = _objectSpread2({}, _this.state, {\n        graphSave: Object(lodash__WEBPACK_IMPORTED_MODULE_1__["cloneDeep"])(_this.graph.save())\n      });\n\n      _this.history.save(currentState);\n    };\n\n    _this.handleUndo = function () {\n      _this.stopForceSimulation();\n\n      var prevState = _this.history.undo();\n\n      if (prevState) {\n        _this.setState(_objectSpread2({}, prevState), function () {\n          _this.renderGraphByHistory();\n        });\n      }\n    };\n\n    _this.handleRedo = function () {\n      _this.stopForceSimulation();\n\n      var nextState = _this.history.redo();\n\n      if (nextState) {\n        _this.setState(_objectSpread2({}, nextState), function () {\n          _this.renderGraphByHistory();\n        });\n      }\n    };\n\n    _this.renderGraph = function (data) {\n      _this.graph.changeData(Object(lodash__WEBPACK_IMPORTED_MODULE_1__["cloneDeep"])(data));\n      /**\r\n       * TODO 移除 `afterchangedata` Event\r\n       * 此方法应该放到G6的changeData方法中去emit\r\n       */\n\n\n      _this.graph.emit(\'afterchangedata\');\n    };\n    /**\r\n     * 根据history来渲染图\r\n     */\n\n\n    _this.renderGraphByHistory = function () {\n      /** 如果历史上有模拟器，需要重新启动 */\n      var _this$state = _this.state,\n          forceSimulation = _this$state.forceSimulation,\n          graphSave = _this$state.graphSave;\n\n      if (forceSimulation) {\n        forceSimulation.restart(graphSave.nodes || [], _this.graph);\n      }\n\n      _this.renderGraph(graphSave);\n    };\n\n    _this.renderChildren = function () {\n      var children = _this.props.children;\n      var combineProps = {\n        graph: _this.graph,\n        graphDOM: _this.graphDOM,\n        graphVars: _this.state,\n        apis: _this.getApis()\n      };\n\n      if (!children) {\n        return null;\n      }\n      /**  1.render-props */\n\n\n      if (typeof children === \'function\') {\n        return children(combineProps);\n      }\n      /** 2.combose-component */\n\n      /**\r\n       * Children是React元素的情况 :有包裹的Tag即可，无论是div或者是Fragement或者是组件\r\n       * 1. <Graphehe> <div> this is text <ContextMenu />  </div> </Graphene>\r\n       * 2. <Graphehe> <CustomerComponent> this is text  <ContextMenu /> </CustomerComponent> </Graphene>\r\n       * 2. <Graphehe> <Fragment> this is text  <ContextMenu /> </Graphene>\r\n       */\n\n\n      if (react__WEBPACK_IMPORTED_MODULE_0___default.a.isValidElement(children) && (String(children.type) === \'Symbol(react.fragment)\' || typeof children.type === \'string\')) {\n        // eslint-disable-next-line no-console\n        console.error(\'Please do not wrap components inside dom element or Fragment when using Graphin\');\n        return children;\n      }\n\n      if (!Array.isArray(children)) {\n        children = [children];\n      }\n\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.Children.map(children, function (child) {\n        // 如果传入的是 DOM 元素或不是合法的 Element，不传入 props\n        if (!react__WEBPACK_IMPORTED_MODULE_0___default.a.isValidElement(child) || typeof child.type === \'string\') {\n          return child;\n        }\n\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.cloneElement(child, _objectSpread2({}, combineProps));\n      });\n    };\n\n    _this.state = {\n      /** 图是否准备完成 */\n      isGraphReady: false,\n      data: props.data,\n      forceSimulation: null,\n      width: 0,\n      height: 0,\n      graphSave: null\n    };\n    _this.history = new HistoryController();\n    _this.forceSimulation = null;\n    _this.graph = {};\n\n    _this.getLayoutInfo = function () {};\n\n    return _this;\n  }\n\n  _createClass(Graph, [{\n    key: "componentDidMount",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var data = this.props.data;\n      debug(\'effect\')(\'did-mount\');\n      /** 1. 注册节点 */\n\n      var behavirosMode = graphinRegister(this.props);\n      /** 2. 初始化实例 */\n\n      var _initController = initGraph(this.props, this.graphDOM, behavirosMode),\n          instance = _initController.instance,\n          width = _initController.width,\n          height = _initController.height,\n          options = _initController.options;\n\n      this.g6Options = options;\n      this.graph = instance;\n\n      var _layoutController = layoutController(this.getContext(), {\n        data: data\n      }),\n          newData = _layoutController.data,\n          forceSimulation = _layoutController.forceSimulation;\n\n      this.forceSimulation = forceSimulation;\n      /** 3.设置state */\n\n      this.setState({\n        isGraphReady: true,\n        graph: this.graph,\n        width: width,\n        height: height,\n        data: newData,\n        forceSimulation: forceSimulation\n      }, function () {\n        _this2.renderGraphWithLifeCycle();\n      });\n      /** 4.内部监听一些图事件 */\n\n      this.handleEvents();\n    }\n  }, {\n    key: "componentDidUpdate",\n    value: function componentDidUpdate(prevProps) {\n      var _this3 = this;\n\n      var isDataChange = this.shouldUpdateWithDeps(prevProps, [\'data\']);\n      var isLayoutChange = this.shouldUpdateWithDeps(prevProps, [\'layout\']);\n      /** 只有data或者layout改变的时候，才会重新update */\n\n      if (isDataChange || isLayoutChange) {\n        var currentData = this.state.data;\n\n        if (isDataChange) {\n          var _data = this.props.data;\n          currentData = _data;\n        }\n\n        var _layoutController2 = layoutController(this.getContext(), {\n          data: currentData,\n          prevProps: prevProps\n        }),\n            data = _layoutController2.data,\n            forceSimulation = _layoutController2.forceSimulation;\n\n        this.forceSimulation = forceSimulation;\n        /** 5.设置state */\n\n        this.setState({\n          data: data,\n          forceSimulation: forceSimulation\n        }, function () {\n          /** 6.渲染 */\n          _this3.renderGraphWithLifeCycle();\n        });\n      }\n    }\n  }, {\n    key: "componentWillUnmount",\n    value: function componentWillUnmount() {\n      this.clearEvents();\n      debug(\'Unmount\')(\'componentWillUnmount\');\n    }\n  }, {\n    key: "componentDidCatch",\n    value: function componentDidCatch(error, info) {\n      console.error(\'Catch component error: \', error, info);\n    }\n  }, {\n    key: "shouldUpdateWithDeps",\n    value: function shouldUpdateWithDeps(prevProps, deps) {\n      var props = this.props;\n      var isUpdate = false;\n      deps.forEach(function (key) {\n        if (prevProps[key] !== props[key]) {\n          isUpdate = true;\n        }\n      });\n      return isUpdate;\n    }\n  }, {\n    key: "handleEvents",\n    value: function handleEvents() {\n      this.clearEvents = handleGraphEvents(this.getContext()).clear;\n    }\n  }, {\n    key: "render",\n    value: function render() {\n      var _this4 = this; // debug(\'core\')(this.state);\n\n\n      var isGraphReady = this.state.isGraphReady;\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {\n        "data-testid": "custom-element",\n        className: "graphin-core",\n        style: {\n          height: \'100%\',\n          width: \'100%\',\n          minHeight: \'500px\',\n          background: \'#fff\'\n        },\n        ref: function ref(node) {\n          _this4.graphDOM = node;\n        }\n      }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {\n        className: "graphin-components"\n      }, isGraphReady && this.renderChildren()));\n    }\n  }]);\n\n  return Graph;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.PureComponent);\n\nvar defaultOptions = {\n  /** 节点 */\n  nodeCount: 10,\n  nodeType: \'company\'\n};\n/**\r\n * 1,mock data with edges,nodes\r\n * 2.mock nodes properties\r\n * 3.filter edges\r\n * 4.\r\n */\n\nvar Mock = function Mock(count) {\n  var _this = this;\n\n  _classCallCheck(this, Mock);\n\n  this.initNodes = function () {\n    var _this$options = _this.options,\n        nodeCount = _this$options.nodeCount,\n        nodeType = _this$options.nodeType;\n    var temp = Array.from({\n      length: nodeCount\n    });\n    _this.nodes = temp.map(function (node, index) {\n      return {\n        id: "node-".concat(index),\n        label: "node-".concat(index),\n        type: nodeType,\n        properties: []\n      };\n    });\n\n    for (var i = 0; i < nodeCount; i = i + 1) {\n      for (var j = 0; j < nodeCount - 1; j = j + 1) {\n        _this.edges.push({\n          source: "node-".concat(i),\n          target: "node-".concat(j),\n          properties: []\n        });\n      }\n    }\n\n    _this.nodeIds = _this.nodes.map(function (node) {\n      return node.id;\n    });\n  };\n\n  this.expand = function (snodes) {\n    _this.edges = [];\n    _this.nodes = [];\n    snodes.forEach(function (node) {\n      for (var i = 0; i < _this.options.nodeCount; i += 1) {\n        _this.nodes.push({\n          id: "".concat(node.id, "-").concat(i),\n          type: node.type,\n          label: "".concat(node.id, "-").concat(i),\n          properties: []\n        });\n\n        _this.edges.push({\n          source: "".concat(node.id, "-").concat(i),\n          target: node.id,\n          properties: []\n        });\n      }\n    });\n    return _this;\n  };\n\n  this.type = function (nodeType) {\n    _this.nodes.map(function (node) {\n      return _objectSpread2({}, node, {\n        type: nodeType\n      });\n    });\n\n    return _this;\n  };\n\n  this.circle = function (centerId) {\n    var id = centerId;\n\n    if (_this.nodeIds.indexOf(id) === -1) {\n      id = \'node-0\';\n    }\n\n    _this.edges = _this.edges.filter(function (edge) {\n      return edge.source === id || edge.target === id;\n    });\n    return _this;\n  };\n  /**\r\n   * @param ratio 随机的稀疏程度，默认0.5\r\n   */\n\n\n  this.random = function () {\n    var ratio = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0.5;\n    var nodeCount = _this.options.nodeCount;\n    var length = parseInt(String(nodeCount * ratio));\n    /**  随机ID */\n\n    var randomArray = _this.nodeIds.sort(function () {\n      return Math.random() - 0.5;\n    }).slice(0, length);\n\n    _this.edges = _this.edges.filter(function (edge) {\n      return randomArray.indexOf(edge.target) !== -1;\n    });\n    _this.edges = _this.edges.sort(function () {\n      return Math.random() - 0.5;\n    }).slice(0, length);\n    return _this;\n  };\n\n  this.value = function () {\n    return {\n      nodes: _this.nodes,\n      edges: _this.edges\n    };\n  };\n\n  this.graphin = function () {\n    return {\n      nodes: _this.nodes.map(function (node) {\n        return {\n          id: node.id,\n          data: node,\n          shape: \'CircleNode\',\n          style: {}\n        };\n      }),\n      edges: _this.edges.map(function (edge) {\n        return {\n          source: edge.source,\n          target: edge.target,\n          data: edge\n        };\n      })\n    };\n  };\n\n  this.options = defaultOptions;\n  this.options.nodeCount = count;\n  this.nodes = [];\n  this.edges = [];\n  this.nodeIds = [];\n  this.initNodes();\n};\n\nvar mock = function mock(count) {\n  return new Mock(count);\n};\n/**\r\n * mock(10).type(\'company\').value()\r\n * mock(10).type(\'company\').circle(\'node-1\').value()\r\n * mock(10).type(\'company\').random(\'node-1\').value()\r\n * mock(10).type(\'company\').random(\'node-1\').value()\r\n *\r\n *\r\n * graphin()\r\n */\n\n\nvar index = {\n  hexToRgba: hexToRgba,\n  debug: debug,\n  mock: mock\n};\nvar _default = Graph;\n/* harmony default export */ __webpack_exports__["b"] = (_default);\n\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(_classCallCheck, "_classCallCheck", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(_defineProperties, "_defineProperties", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(_createClass, "_createClass", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(_defineProperty, "_defineProperty", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(ownKeys, "ownKeys", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(_objectSpread2, "_objectSpread2", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(_inherits, "_inherits", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(_getPrototypeOf, "_getPrototypeOf", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(_setPrototypeOf, "_setPrototypeOf", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(_objectWithoutPropertiesLoose, "_objectWithoutPropertiesLoose", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(_objectWithoutProperties, "_objectWithoutProperties", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(_assertThisInitialized, "_assertThisInitialized", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(_possibleConstructorReturn, "_possibleConstructorReturn", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(_toConsumableArray, "_toConsumableArray", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(_arrayWithoutHoles, "_arrayWithoutHoles", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(_iterableToArray, "_iterableToArray", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(_nonIterableSpread, "_nonIterableSpread", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(initGraph, "initGraph", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(DEFAULT_MARKER, "DEFAULT_MARKER", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(registerInnerMarker, "registerInnerMarker", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(reset, "reset", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(compiler, "compiler", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(defaultStyle, "defaultStyle", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(renderNodeShape, "renderNodeShape", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(removeHash, "removeHash", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(parseHex, "parseHex", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(hexToDecimal, "hexToDecimal", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(hexesToDecimals, "hexesToDecimals", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(isNumeric, "isNumeric", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(formatRgb, "formatRgb", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(hexToRgba, "hexToRgba", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(reset$1, "reset$1", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(cache, "cache", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(setEdgeState, "setEdgeState", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(RegisterLineEdge, "RegisterLineEdge", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(graphinHighlight, "graphinHighlight", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(innerRegister, "innerRegister", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(dumpRegister, "dumpRegister", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(dumpExtend, "dumpExtend", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(innerExtend, "innerExtend", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(toUpperCaseWithFirst, "toUpperCaseWithFirst", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(graphinRegister, "graphinRegister", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(HistoryController, "HistoryController", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(dataChecking, "dataChecking", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(circleLayout, "circleLayout", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(radialLayout, "radialLayout", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(getDegree, "getDegree", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(makeBoundingBox, "makeBoundingBox", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(defaults, "defaults", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(ConcentricLayout, "ConcentricLayout", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(Vector, "Vector", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(Point, "Point", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(Node, "Node", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(Edge, "Edge", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(Spring, "Spring", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(SPEED, "SPEED", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(ForceLayout, "ForceLayout", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(optimizeDrawingByNode, "optimizeDrawingByNode", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(optimizeDrawing, "optimizeDrawing", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(randomLayout, "randomLayout", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(getRandomPosition, "getRandomPosition", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(tweak, "tweak", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(forceLayout, "forceLayout", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(dagreLayout, "dagreLayout", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(gridLayout, "gridLayout", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(defaultLayouts, "defaultLayouts", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(layoutInfo, "layoutInfo", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(noopLayout, "noopLayout", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(layoutController, "layoutController", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(highlight, "highlight", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(getInfo, "getInfo", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(search, "search", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(apis, "apis", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(getContainerSize, "getContainerSize", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(handleResize, "handleResize", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(changeZoom, "changeZoom", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(dragWithForce, "dragWithForce", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(handleGraphEvents, "handleGraphEvents", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(floorRandom, "floorRandom", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(randomColor, "randomColor", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(colorMap, "colorMap", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(debug, "debug", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(Graph, "Graph", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(defaultOptions, "defaultOptions", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(Mock, "Mock", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(mock, "mock", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(index, "index", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n  reactHotLoader.register(_default, "default", "/Users/zindex/Desktop/graphin/packages/graphin/dist/index.esm.js");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(30)(module)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vZ3JhcGhpbi9kaXN0L2luZGV4LmVzbS5qcz84ZDk5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBjbG9uZURlZXAsIGRlYm91bmNlIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBHNiBmcm9tICdAYW50di9nNic7XG5pbXBvcnQgc3ZnMm1hcmtlciBmcm9tICdzdmcybWFya2VyJztcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cbn1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgcmV0dXJuIENvbnN0cnVjdG9yO1xufVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIG9iajtcbn1cblxuZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTtcblxuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpO1xuICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHtcbiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlO1xuICAgIH0pO1xuICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTtcbiAgfVxuXG4gIHJldHVybiBrZXlzO1xufVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkMih0YXJnZXQpIHtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTtcblxuICAgIGlmIChpICUgMikge1xuICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtcbiAgfVxuXG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICB2YWx1ZTogc3ViQ2xhc3MsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH1cbiAgfSk7XG4gIGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpO1xufVxuXG5mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2Yobykge1xuICBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2Yobykge1xuICAgIHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7XG4gIH07XG4gIHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7XG59XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gIF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkge1xuICAgIG8uX19wcm90b19fID0gcDtcbiAgICByZXR1cm4gbztcbiAgfTtcblxuICByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApO1xufVxuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKSB7XG4gIGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9O1xuICB2YXIgdGFyZ2V0ID0ge307XG4gIHZhciBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTtcbiAgdmFyIGtleSwgaTtcblxuICBmb3IgKGkgPSAwOyBpIDwgc291cmNlS2V5cy5sZW5ndGg7IGkrKykge1xuICAgIGtleSA9IHNvdXJjZUtleXNbaV07XG4gICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTtcbiAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHNvdXJjZSwgZXhjbHVkZWQpIHtcbiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307XG5cbiAgdmFyIHRhcmdldCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpO1xuXG4gIHZhciBrZXksIGk7XG5cbiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcbiAgICB2YXIgc291cmNlU3ltYm9sS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VTeW1ib2xLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBrZXkgPSBzb3VyY2VTeW1ib2xLZXlzW2ldO1xuICAgICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTtcbiAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHNvdXJjZSwga2V5KSkgY29udGludWU7XG4gICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikge1xuICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuICB9XG5cbiAgcmV0dXJuIHNlbGY7XG59XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHtcbiAgaWYgKGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7XG4gICAgcmV0dXJuIGNhbGw7XG4gIH1cblxuICByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTtcbn1cblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikge1xuICByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpO1xufVxuXG5mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGFycikpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgYXJyMltpXSA9IGFycltpXTtcblxuICAgIHJldHVybiBhcnIyO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikge1xuICBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcikgPT09IFwiW29iamVjdCBBcmd1bWVudHNdXCIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpO1xufVxuXG5mdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTtcbn1cblxudmFyIGluaXRHcmFwaCA9IGZ1bmN0aW9uIGluaXRHcmFwaChwcm9wcywgZ3JhcGhET00sIGJlaGF2aW9yc01vZGUpIHtcbiAgdmFyIGNsaWVudFdpZHRoID0gZ3JhcGhET00uY2xpZW50V2lkdGgsXG4gICAgICBjbGllbnRIZWlnaHQgPSBncmFwaERPTS5jbGllbnRIZWlnaHQ7XG4gIHZhciBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAvLyBpbml0aWFsIGNhbnZhc1xuICAgIHdpZHRoOiBjbGllbnRXaWR0aCxcbiAgICBoZWlnaHQ6IGNsaWVudEhlaWdodCxcbiAgICAvLyBpbml0aWFsIHZpZXdwb3J0IHN0YXRlOlxuICAgIHpvb206IDEsXG4gICAgcGFuOiB7XG4gICAgICB4OiBjbGllbnRXaWR0aCAvIDIsXG4gICAgICB5OiBjbGllbnRIZWlnaHQgLyAyXG4gICAgfSxcbiAgICAvLyBpbnRlcmFjdGlvbiBvcHRpb25zOlxuICAgIG1pblpvb206IDAuMixcbiAgICBtYXhab29tOiAxMCxcbiAgICBkaXNhYmxlUGFuOiBmYWxzZSxcbiAgICBkaXNhYmxlWm9vbTogZmFsc2UsXG4gICAgZGlzYWJsZURyYWc6IGZhbHNlLFxuICAgIGRlbGVnYXRlTm9kZTogZmFsc2UsXG4gICAgd2hlZWxTZW5zaXRpdml0eTogMSxcbiAgICAvLyByZW5kZXJpbmcgb3B0aW9uczpcbiAgICBhbmltYXRlOiB0cnVlLFxuICAgIGFuaW1hdGVDZmc6IHtcbiAgICAgIG9uRnJhbWU6IG51bGwsXG4gICAgICBkdXJhdGlvbjogNTAwLFxuICAgICAgZWFzaW5nOiAnZWFzZUxpbmVhcidcbiAgICB9LFxuICAgIHBsdWdpbnM6IFtdXG4gIH07XG5cbiAgdmFyIG9wdGlvbnMgPSBfb2JqZWN0U3ByZWFkMih7fSwgZGVmYXVsdE9wdGlvbnMsIHt9LCBwcm9wcy5vcHRpb25zIHx8IHt9KTtcblxuICB2YXIgcGFuID0gb3B0aW9ucy5wYW4sXG4gICAgICB3aWR0aCA9IG9wdGlvbnMud2lkdGgsXG4gICAgICBoZWlnaHQgPSBvcHRpb25zLmhlaWdodCxcbiAgICAgIG1pblpvb20gPSBvcHRpb25zLm1pblpvb20sXG4gICAgICBtYXhab29tID0gb3B0aW9ucy5tYXhab29tLFxuICAgICAgZGlzYWJsZVpvb20gPSBvcHRpb25zLmRpc2FibGVab29tLFxuICAgICAgZGlzYWJsZVBhbiA9IG9wdGlvbnMuZGlzYWJsZVBhbixcbiAgICAgIGRpc2FibGVEcmFnID0gb3B0aW9ucy5kaXNhYmxlRHJhZyxcbiAgICAgIHdoZWVsU2Vuc2l0aXZpdHkgPSBvcHRpb25zLndoZWVsU2Vuc2l0aXZpdHksXG4gICAgICBhbmltYXRlID0gb3B0aW9ucy5hbmltYXRlLFxuICAgICAgYW5pbWF0ZUNmZyA9IG9wdGlvbnMuYW5pbWF0ZUNmZyxcbiAgICAgIHBsdWdpbnMgPSBvcHRpb25zLnBsdWdpbnM7XG4gIHZhciBkZWZhdWx0TW9kZXMgPSBbJ2NsaWNrLXNlbGVjdCddO1xuXG4gIGlmICghZGlzYWJsZVBhbikge1xuICAgIGRlZmF1bHRNb2Rlcy5wdXNoKCdkcmFnLWNhbnZhcycpO1xuICB9XG5cbiAgaWYgKCFkaXNhYmxlRHJhZykge1xuICAgIGRlZmF1bHRNb2Rlcy5wdXNoKHtcbiAgICAgIHR5cGU6ICdkcmFnLW5vZGUnLFxuICAgICAgZGVsZWdhdGU6IGZhbHNlXG4gICAgfSk7XG4gIH1cblxuICBpZiAoIWRpc2FibGVab29tKSB7XG4gICAgZGVmYXVsdE1vZGVzLnB1c2goe1xuICAgICAgdHlwZTogJ3pvb20tY2FudmFzJyxcbiAgICAgIHNlbnNpdGl2aXR5OiB3aGVlbFNlbnNpdGl2aXR5XG4gICAgfSk7XG4gIH1cblxuICB2YXIgaW5zdGFuY2UgPSBuZXcgRzYuR3JhcGgoe1xuICAgIGNvbnRhaW5lcjogZ3JhcGhET00sXG4gICAgcmVuZGVyZXI6ICdjYW52YXMnLFxuICAgIHdpZHRoOiB3aWR0aCxcbiAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICBhbmltYXRlOiBhbmltYXRlLFxuICAgIGFuaW1hdGVDZmc6IGFuaW1hdGVDZmcsXG4gICAgbWluWm9vbTogbWluWm9vbSxcbiAgICBtYXhab29tOiBtYXhab29tLFxuICAgIHBsdWdpbnM6IHBsdWdpbnMsXG4gICAgbW9kZXM6IHtcbiAgICAgIGRlZmF1bHQ6IFtdLmNvbmNhdChkZWZhdWx0TW9kZXMsIF90b0NvbnN1bWFibGVBcnJheShiZWhhdmlvcnNNb2RlLmRlZmF1bHQpKVxuICAgIH1cbiAgfSk7IC8vIOW5s+enu1xuXG4gIGlmIChwYW4pIGluc3RhbmNlLm1vdmVUbyhwYW4ueCwgcGFuLnkpOyAvLyBUT0RPICDnvKnmlL5cblxuICByZXR1cm4ge1xuICAgIG9wdGlvbnM6IHByb3BzLm9wdGlvbnMgfHwgZGVmYXVsdE9wdGlvbnMsXG4gICAgaW5zdGFuY2U6IGluc3RhbmNlLFxuICAgIHdpZHRoOiBjbGllbnRXaWR0aCxcbiAgICBoZWlnaHQ6IGNsaWVudEhlaWdodFxuICB9O1xufTtcblxudmFyIERFRkFVTFRfTUFSS0VSID0ge1xuICAvLyDoh6rnhLbkurppY29uXG4gIHBlcnNvbjoge1xuICAgIHBhdGg6IFwiPHBhdGggZD1cXFwiTTkxNC4yODU3NjkgODAyLjg4OTE0M3EwIDY4LjUzNDg1Ny00MS42OTE0MjkgMTA4LjI1MTQyOXQtMTEwLjg4NDU3MSAzOS43MTY1NzFsLTQ5OS40MTk0MjkgMHEtNjkuMTIgMC0xMTAuODg0NTcxLTM5LjcxNjU3MXQtNDEuNjkxNDI5LTEwOC4yNTE0MjlxMC0zMC4yODExNDMgMS45NzQ4NTctNTkuMTcyNTcxdDcuOTcyNTcxLTYyLjMxNzcxNCAxNS4xNDA1NzEtNjIuMDI1MTQzIDI0LjU3Ni01NS43MzQ4NTcgMzUuNDAxMTQzLTQ2LjI5OTQyOSA0OC44NTk0MjktMzAuNTczNzE0IDYzLjcwNzQyOS0xMS40MTAyODZxNS4xMiAwIDIzLjk5MDg1NyAxMi4yODh0NDIuNTY5MTQzIDI3LjQyODU3MSA2MS43MzI1NzEgMjcuNDI4NTcxIDc2LjI4OCAxMi4yODggNzYuMjg4LTEyLjI4OCA2MS43MzI1NzEtMjcuNDI4NTcxIDQyLjU2OTE0My0yNy40Mjg1NzEgMjMuOTkwODU3LTEyLjI4OHEzNC44ODkxNDMgMCA2My43MDc0MjkgMTEuNDEwMjg2dDQ4Ljg1OTQyOSAzMC41NzM3MTQgMzUuNDAxMTQzIDQ2LjI5OTQyOSAyNC41NzYgNTUuNzM0ODU3IDE1LjE0MDU3MSA2Mi4wMjUxNDMgNy45NzI1NzEgNjIuMzE3NzE0IDEuOTc0ODU3IDU5LjE3MjU3MXpNNzMxLjQyODYyNiAyOTIuNTcxNDI5cTAgOTAuODQzNDI5LTY0LjI5MjU3MSAxNTUuMTM2dC0xNTUuMTM2IDY0LjI5MjU3MS0xNTUuMTM2LTY0LjI5MjU3MS02NC4yOTI1NzEtMTU1LjEzNiA2NC4yOTI1NzEtMTU1LjEzNiAxNTUuMTM2LTY0LjI5MjU3MSAxNTUuMTM2IDY0LjI5MjU3MSA2NC4yOTI1NzEgMTU1LjEzNnpcXFwiIHAtaWQ9XFxcIjI1NTFcXFwiIC8+XCJcbiAgfSxcbiAgLy8g5omL5py65Y+3XG4gIHBob25lOiB7XG4gICAgcGF0aDogXCI8cGF0aCBkPVxcXCJNNzAzLjU5MTU3MyA2NC4wMjExMDYgMjU1Ljg1OTI5NSA2NC4wMjExMDZjLTM1LjMyMjQ4MyAwLTYzLjk1NjYzNyAyOC42MzQxNTQtNjMuOTU2NjM3IDYzLjk1NjYzN2wwIDc2Ny41MzU5MzFjMCAzNS4zMjI0ODMgMjguNjM0MTU0IDYzLjk1NjYzNyA2My45NTY2MzcgNjMuOTU2NjM3bDQ0Ny43MzIyNzggMGMzNS4zMjI0ODMgMCA2My45NTY2MzctMjguNjM0MTU0IDYzLjk1NjYzNy02My45NTY2MzdMNzY3LjU0ODIxIDEyNy45Nzc3NDNDNzY3LjU0ODIxIDkyLjY1NTI2IDczOC45MTQwNTYgNjQuMDIxMTA2IDcwMy41OTE1NzMgNjQuMDIxMTA2ek03MDMuNTg3NDggODYzLjc4NzA4OGMwIDE3LjUyMDAyNS0xNC4yMDI0NjcgMzEuNzIyNDkyLTMxLjcyMjQ5MiAzMS43MjI0OTJMMjg3LjU4NTg4MSA4OTUuNTA5NTgxYy0xNy41MjAwMjUgMC0zMS43MjI0OTItMTQuMjAyNDY3LTMxLjcyMjQ5Mi0zMS43MjI0OTJMMjU1Ljg2MzM4OSAxNTkuNzA0MzI4YzAtMTcuNTIwMDI1IDE0LjIwMjQ2Ny0zMS43MjI0OTIgMzEuNzIyNDkyLTMxLjcyMjQ5MmwzODQuMjc5MTA3IDBjMTcuNTIwMDI1IDAgMzEuNzIyNDkyIDE0LjIwMjQ2NyAzMS43MjI0OTIgMzEuNzIyNDkyTDcwMy41ODc0OCA4NjMuNzg3MDg4ek01NzUuNjY3MDQyIDIyNC4xODA4MDVjMCAxNy41MjAwMjUtMTQuMjAyNDY3IDMxLjcyMjQ5Mi0zMS43MjI0OTIgMzEuNzIyNDkyTDQxNS41MDczNDIgMjU1LjkwMzI5OGMtMTcuNTIwMDI1IDAtMzEuNzIyNDkyLTE0LjIwMjQ2Ny0zMS43MjI0OTItMzEuNzIyNDkybDAtMC41MTU3NDZjMC0xNy41MjAwMjUgMTQuMjAyNDY3LTMxLjcyMjQ5MiAzMS43MjI0OTItMzEuNzIyNDkybDEyOC40MzcyMDggMGMxNy41MjAwMjUgMCAzMS43MjI0OTIgMTQuMjAyNDY3IDMxLjcyMjQ5MiAzMS43MjI0OTJMNTc1LjY2NzA0MiAyMjQuMTgwODA1ek00NzkuNzI1OTQ2IDgzMS41NDg4NW0tMzEuOTgwMzY1IDBhMzEuMjUyIDMxLjI1MiAwIDEgMCA2My45NjA3MzEgMCAzMS4yNTIgMzEuMjUyIDAgMSAwLTYzLjk2MDczMSAwWk0yNTUuODYzMzg5IDczNS40OTgyNmw0NDcuNzI0MDkxIDAgMCAzMS43MjI0OTItNDQ3LjcyNDA5MSAwIDAtMzEuNzIyNDkyWlxcXCIgcC1pZD1cXFwiNDA3OFxcXCI+PC9wYXRoPlwiXG4gIH0sXG4gIC8vIOmCrueusVxuICBlbWFpbDoge1xuICAgIHBhdGg6IFwiPHBhdGggZD1cXFwiTTUxMi4wMTIwNDEgNjMwLjUzNTQ2Nmw0MTUuNTQ4NDQ4LTM0Ni4yMjYxNTJjLTIuMjUxNzQtMC40MDk0MDctNC4yNzQ2OTQtMS4zNDg2MzYtNi42MTA3MjQtMS4zNDg2MzZMMTAzLjA3NDMxOCAyODIuOTYwNjc3Yy0yLjI4Nzg2NSAwLTQuMzIyODYgMC45MjcxODctNi41NzQ2IDEuMzQ4NjM2TDUxMi4wMTIwNDEgNjMwLjUzNTQ2NnpNOTU4LjEzMzU4NCAzMjAuMTQ0NDk3YzAtMy45MDE0MTEtMS4wNzE2ODQtNy41MTM4MjktMi4yNTE3NC0xMS4wNjYwNEw2NjEuMzEzMjY0IDU1NC42MDI0NDZsMjk1LjAxNDExMSAyOTUuMDc0MzE4YzAuNzU4NjA4LTIuOTc0MjI0IDEuODA2MjA5LTUuODQwMDc1IDEuODA2MjA5LTkuMDU1MTI3TDk1OC4xMzM1ODQgMzIwLjE0NDQ5N3pNNjguMTU0MjggMzA5LjA0MjMzM2MtMS4xNDM5MzIgMy41NzYyOTQtMi4yODc4NjUgNy4xNDA1NDYtMi4yODc4NjUgMTEuMTAyMTY0bDAgNTIwLjQ2NTA5OWMwIDMuMjUxMTc2IDEuMTE5ODQ5IDYuMTA0OTg2IDEuODU0Mzc0IDkuMDc5MjFsMjk1LjExMDQ0Mi0yOTUuMDk4NDAxTDY4LjE1NDI4IDMwOS4wNDIzMzN6TTYzMi41ODI1MDIgNTc4LjQ5MjU2OGwtMTA4LjY5NzY0OCA5MC41MzkyMjljLTMuNDA3NzE0IDIuOTAxOTc2LTcuNjIyMjAxIDQuMjk4Nzc3LTExLjg3MjgxMyA0LjI5ODc3Ny00LjIxNDQ4NyAwLTguNDUzMDU3LTEuMzk2ODAyLTExLjg5Njg5Ni00LjI5ODc3N2wtMTA4LjYwMTMxNy05MC40OTEwNjNMOTQuMDc5Mzk4IDg3NS45NjMxMjNjMi45MjYwNTggMC43NzA2NDkgNS44MjgwMzQgMS44NDIzMzMgOC45OTQ5MiAxLjg0MjMzM2w4MTcuODg3NDg4IDBjMy4yMjcwOTMgMCA2LjEyOTA2OS0xLjA1OTY0MyA5LjExNTMzNC0xLjg0MjMzM0w2MzIuNTgyNTAyIDU3OC40OTI1Njh6XFxcIiBwLWlkPVxcXCIxNjUwOFxcXCI+PC9wYXRoPlwiXG4gIH0sXG4gIC8vIOaJvuS4jeWIsElDT07nmoTvvIzlhYjov5nmoLflpITnkIZcbiAgZGV2aWNlOiB7XG4gICAgcGF0aDogXCI8cGF0aCBkPVxcXCJNMTI4IDI1Nmg3NjhWMTcwLjY2NjY2N0gxMjhjLTQ2LjkzMzMzMyAwLTg1LjMzMzMzMyAzOC40LTg1LjMzMzMzMyA4NS4zMzMzMzN2NTEyYzAgNDYuOTMzMzMzIDM4LjQgODUuMzMzMzMzIDg1LjMzMzMzMyA4NS4zMzMzMzNoMTcwLjY2NjY2N3YtODUuMzMzMzMzSDEyOFYyNTZ6IG00MjYuNjY2NjY3IDI1NmgtMTcwLjY2NjY2N3Y3NS45NDY2NjdjLTI2LjAyNjY2NyAyMy40NjY2NjctNDIuNjY2NjY3IDU2Ljk2LTQyLjY2NjY2NyA5NC43MnMxNi42NCA3MS4yNTMzMzMgNDIuNjY2NjY3IDk0LjcyVjg1My4zMzMzMzNoMTcwLjY2NjY2N3YtNzUuOTQ2NjY2YzI2LjAyNjY2Ny0yMy40NjY2NjcgNDIuNjY2NjY3LTU2Ljk2IDQyLjY2NjY2Ni05NC43MnMtMTYuNjQtNzEuMjUzMzMzLTQyLjY2NjY2Ni05NC43MlY1MTJ6IG0tODUuMzMzMzM0IDIzNC42NjY2NjdjLTM1LjQxMzMzMyAwLTY0LTI4LjU4NjY2Ny02NC02NHMyOC41ODY2NjctNjQgNjQtNjQgNjQgMjguNTg2NjY3IDY0IDY0LTI4LjU4NjY2NyA2NC02NCA2NHogbTQ2OS4zMzMzMzQtNDA1LjMzMzMzNEg2ODIuNjY2NjY3Yy0yMS4zMzMzMzMgMC00Mi42NjY2NjcgMjEuMzMzMzMzLTQyLjY2NjY2NyA0Mi42NjY2Njd2NDI2LjY2NjY2N2MwIDIxLjMzMzMzMyAyMS4zMzMzMzMgNDIuNjY2NjY3IDQyLjY2NjY2NyA0Mi42NjY2NjZoMjU2YzIxLjMzMzMzMyAwIDQyLjY2NjY2Ny0yMS4zMzMzMzMgNDIuNjY2NjY2LTQyLjY2NjY2NlYzODRjMC0yMS4zMzMzMzMtMjEuMzMzMzMzLTQyLjY2NjY2Ny00Mi42NjY2NjYtNDIuNjY2NjY3eiBtLTQyLjY2NjY2NyA0MjYuNjY2NjY3aC0xNzAuNjY2NjY3VjQyNi42NjY2NjdoMTcwLjY2NjY2N3YzNDEuMzMzMzMzelxcXCIgcC1pZD1cXFwiMTI2NzJcXFwiPjwvcGF0aD5cIlxuICB9LFxuICBjb21wYW55OiB7XG4gICAgcGF0aDogXCI8cGF0aCBkPVxcXCJNODMxLjgwOCA4NjkuMTg0VjE3MS4xNjhsLTk3Ljg1Ni02NS4zMTItMzU2LjcwNCAxNTkuMnYxMjMuMmwtMTk3LjEyIDY4LjY0djQxMi4yODhIMTYwdjQ4Ljk5Mmg2NC4zNTJWNDg1LjQ3MmwyNjEuNDcyLTg1LjY5NnY1MTguNGgxODEuMDI0di01My4wNTZoLTQwLjIyNFYzOTEuNTg0bC05NC45MTItNTcuMTUyLTEwNi4yNCAzNi45OTJWMjkzLjZsMjU3LjQ3Mi0xMTQuMzA0djczOC44NDhIODY0di00OC45OTJoLTMyLjE5MnYwLjAzMnpNMjU2LjU0NCA1OTUuNjhsMTg5LjA1Ni02MS4yMTZ2LTgxLjYzMmwtMTg5LjA1NiA2NS4zMTJ2NzcuNTM2eiBtMCAxMDYuMTQ0bDE4OS4wNTYtNDAuODMydi04MS42MzJsLTE4OS4wNTYgNDguOTkydjczLjQ3MnogbTAgMTEwLjIwOGwxODkuMDU2LTI0LjUxMnYtODEuNjMybC0xODkuMDU2IDI4LjU3NnY3Ny41Njh6IG0wIDEwNi4xMTJsMTg5LjA1Ni00LjA5NnYtODEuNjMybC0xODkuMDU2IDguMTkydjc3LjUzNnpcXFwiIHAtaWQ9XFxcIjgxOFxcXCI+PC9wYXRoPlwiXG4gIH0sXG4gIG5vbmU6IHtcbiAgICBwYXRoOiBcIlwiXG4gIH1cbn07XG5cbnZhciByZWdpc3RlcklubmVyTWFya2VyID0gKGZ1bmN0aW9uIChjdXN0b21JY29ucykge1xuICB2YXIgQ1VTVE9NX0lDT05TID0gY3VzdG9tSWNvbnMgJiYgY3VzdG9tSWNvbnMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGN1cnIpIHtcbiAgICByZXR1cm4gX29iamVjdFNwcmVhZDIoe30sIGFjYywgX2RlZmluZVByb3BlcnR5KHt9LCBjdXJyLm5hbWUsIHtcbiAgICAgIHBhdGg6IGN1cnIucGF0aFxuICAgIH0pKTtcbiAgfSwge30pO1xuXG4gIHZhciBpY29ucyA9IF9vYmplY3RTcHJlYWQyKHt9LCBERUZBVUxUX01BUktFUiwge30sIENVU1RPTV9JQ09OUyk7XG5cbiAgT2JqZWN0LmtleXMoaWNvbnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIEc2LkcuTWFya2VyLlN5bWJvbHNba2V5XSA9IHN2ZzJtYXJrZXIoaWNvbnNba2V5XS5wYXRoKTtcbiAgfSk7XG59KTtcblxudmFyIHJlc2V0ID0gZnVuY3Rpb24gcmVzZXQoc2hhcGVzLCBzaGFwZUNvbXBvbmVudHMpIHtcbiAgc2hhcGVzLmZvckVhY2goZnVuY3Rpb24gKHNoYXBlLCBpbmRleCkge1xuICAgIGlmICghc2hhcGVDb21wb25lbnRzW2luZGV4XS5ub1Jlc2V0KSBzaGFwZS5hdHRyKF9vYmplY3RTcHJlYWQyKHt9LCBzaGFwZUNvbXBvbmVudHNbaW5kZXhdLmF0dHJzKSk7XG4gIH0pO1xufTtcblxudmFyIGNvbXBpbGVyID0gZnVuY3Rpb24gY29tcGlsZXIoZXh0ZW5kTm9kZVNoYXBlKSB7XG4gIHZhciByZWdpc3Rlck5hbWUgPSBleHRlbmROb2RlU2hhcGUubmFtZSxcbiAgICAgIHJlbmRlck5vZGVTaGFwZSA9IGV4dGVuZE5vZGVTaGFwZS5yZW5kZXI7XG5cbiAgaWYgKCFyZW5kZXJOb2RlU2hhcGUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLyoqIOiuvue9ruWIneWni+WMlnNoYXBlQ29tcG9uZW5077yM5oyJ54Wn6IqC54K5SUTov5vooYzliIbnsbsgKi9cblxuXG4gIHZhciBpbml0U2hhcGVDb21wb25lbnRNYXAgPSB7fTtcbiAgdmFyIGluaXRTdGF0ZU1hcCA9IHt9O1xuICB2YXIgaW5pdFVwZGF0ZU1hcCA9IHt9O1xuICBHNi5yZWdpc3Rlck5vZGUocmVnaXN0ZXJOYW1lLCB7XG4gICAgLyoqIOiHquWumuS5iVNoYXBlICovXG4gICAgZHJhdzogZnVuY3Rpb24gZHJhdyhpbnB1dENmZywgZ3JvdXApIHtcbiAgICAgIC8qKiDlvpfliLDnlKjmiLfov5Tlm57nmoRzaGFwZUNvbXBvbmVudHPvvIznhLblkI7mi7zoo4UgKi9cbiAgICAgIHZhciBfcmVuZGVyTm9kZVNoYXBlID0gcmVuZGVyTm9kZVNoYXBlKGlucHV0Q2ZnKSxcbiAgICAgICAgICBzaGFwZUNvbXBvbmVudHMgPSBfcmVuZGVyTm9kZVNoYXBlLnNoYXBlQ29tcG9uZW50cyxcbiAgICAgICAgICBSZW5kZXJTdGF0ZSA9IF9yZW5kZXJOb2RlU2hhcGUuc3RhdGUsXG4gICAgICAgICAgdXBkYXRlID0gX3JlbmRlck5vZGVTaGFwZS51cGRhdGU7XG4gICAgICAvKiog5q+P5qyhZHJhd+WQjueahHNoYXBl5bCx5piv5Yid5aeL5YyWc2hhcGXvvIzov5nkuKrlnKjoioLngrl1cGRhdGXlkI7vvIznlKjkuo5zZXRzdGF0ZeeahHJlc2V0ICovXG5cblxuICAgICAgaW5pdFNoYXBlQ29tcG9uZW50TWFwW2lucHV0Q2ZnLmRhdGEuaWRdID0gc2hhcGVDb21wb25lbnRzO1xuICAgICAgaW5pdFN0YXRlTWFwW2lucHV0Q2ZnLmRhdGEuaWRdID0gUmVuZGVyU3RhdGU7XG4gICAgICBpbml0VXBkYXRlTWFwW2lucHV0Q2ZnLmRhdGEuaWRdID0gdXBkYXRlO1xuICAgICAgdmFyIGtleXNoYXBlSW5kZXggPSAwO1xuICAgICAgdmFyIGc2U2hhcGVzID0gc2hhcGVDb21wb25lbnRzLm1hcChmdW5jdGlvbiAoY29tcG9uZW50LCBpbmRleCkge1xuICAgICAgICBpZiAoY29tcG9uZW50LmlzS2V5U2hhcGUpIGtleXNoYXBlSW5kZXggPSBpbmRleDtcbiAgICAgICAgcmV0dXJuIGdyb3VwLmFkZFNoYXBlKGNvbXBvbmVudC5zaGFwZSwge1xuICAgICAgICAgIGF0dHJzOiBfb2JqZWN0U3ByZWFkMih7fSwgY29tcG9uZW50LmF0dHJzKVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGc2U2hhcGVzW2tleXNoYXBlSW5kZXhdO1xuICAgIH0sXG5cbiAgICAvKiog6K6+572u5ZCE56eN5Lqk5LqS54q25oCBICovXG4gICAgc2V0U3RhdGU6IGZ1bmN0aW9uIHNldFN0YXRlKG5hbWUsIHZhbHVlLCBub2RlKSB7XG4gICAgICB2YXIgaWQgPSBub2RlLmdldCgnbW9kZWwnKS5kYXRhLmlkO1xuICAgICAgdmFyIGluaXRTaGFwZUNvbXBvbmVudCA9IGluaXRTaGFwZUNvbXBvbmVudE1hcFtpZF07XG4gICAgICB2YXIgaW5pdFN0YXRlID0gaW5pdFN0YXRlTWFwW2lkXTtcbiAgICAgIHZhciBzaGFwZXMgPSBub2RlLmdldENvbnRhaW5lcigpLmdldCgnY2hpbGRyZW4nKTsgLy8g6aG65bqP5qC55o2uIGRyYXcg5pe256Gu5a6aXG5cbiAgICAgIC8qKiDlpoLmnpzkuLpmYWxzZe+8jOWImemHjee9ruWIsOWIneWni+eKtuaAgSAqL1xuXG4gICAgICBpZiAoIXZhbHVlIHx8ICFuYW1lKSB7XG4gICAgICAgIHJlc2V0KHNoYXBlcywgaW5pdFNoYXBlQ29tcG9uZW50KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLyoqIOWmguaenOS4uuS4unNlbGVjdGVk54q25oCB77yM5YiZ5LiN5L2c6auY5LquICovXG4gICAgICAvLyBpZiAobm9kZS5oYXNTdGF0ZSgnc2VsZWN0ZWQnKSAmJiBuYW1lID09PSAnaGlnaGxpZ2h0LmxpZ2h0JyAmJiB2YWx1ZSkgcmV0dXJuO1xuXG5cbiAgICAgIE9iamVjdC5rZXlzKGluaXRTdGF0ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIC8qKiBzdGF0ZeeahGtleeWSjGJlaGF2aW9y6YeM6Kem5Y+R55qEbmFtZeWMuemFjSAqL1xuICAgICAgICBpZiAobmFtZSA9PT0ga2V5KSB7XG4gICAgICAgICAgc2hhcGVzLmZvckVhY2goZnVuY3Rpb24gKGc2U2hhcGUpIHtcbiAgICAgICAgICAgIHZhciBvcmlnaW5BdHRycyA9IGc2U2hhcGUuYXR0cigpO1xuICAgICAgICAgICAgdmFyIGN1c3RvbUF0dHJzID0gaW5pdFN0YXRlW2tleV1bb3JpZ2luQXR0cnMuaWRdO1xuXG4gICAgICAgICAgICBpZiAoY3VzdG9tQXR0cnMpIHtcbiAgICAgICAgICAgICAgdmFyIGFuaW1hdGUgPSBjdXN0b21BdHRycy5hbmltYXRlLFxuICAgICAgICAgICAgICAgICAgb3RoZXJBdHRycyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhjdXN0b21BdHRycywgW1wiYW5pbWF0ZVwiXSk7XG5cbiAgICAgICAgICAgICAgZzZTaGFwZS5hdHRyKG90aGVyQXR0cnMpO1xuXG4gICAgICAgICAgICAgIGlmIChhbmltYXRlKSB7XG4gICAgICAgICAgICAgICAgLyoqIOWmguaenOacieWKqOeUuyAqL1xuICAgICAgICAgICAgICAgIHZhciBhdHRycyA9IGFuaW1hdGUuYXR0cnMsXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uID0gYW5pbWF0ZS5kdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgZWFzaW5nID0gYW5pbWF0ZS5lYXNpbmcsXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gYW5pbWF0ZS5jYWxsYmFjayxcbiAgICAgICAgICAgICAgICAgICAgZGVsYXkgPSBhbmltYXRlLmRlbGF5O1xuICAgICAgICAgICAgICAgIGc2U2hhcGUuYW5pbWF0ZShhdHRycywgZHVyYXRpb24sIGVhc2luZywgY2FsbGJhY2ssIGRlbGF5KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufTtcblxuLyoqIOm7mOiupOiKgueCueagt+W8jyAqL1xudmFyIGRlZmF1bHRTdHlsZSA9IHtcbiAgLyoqIOiKgueCueeahOWkp+WwjyAqL1xuICBub2RlU2l6ZTogMjAsXG5cbiAgLyoqIOiKgueCueeahOS4u+imgeminOiJsiAqL1xuICBwcmltYXJ5Q29sb3I6ICcjOTkwMEVGJyxcblxuICAvKiog5paH5pys55qE5a2X5L2T5aSn5bCPICovXG4gIGZvbnRTaXplOiAxMixcblxuICAvKiog5paH5pys55qE5a2X5L2T6aKc6ImyICovXG4gIGZvbnRDb2xvcjogJyMzYjNiM2InLFxuXG4gIC8qKiBkYXJrIOe9rueBsCAqL1xuICBkYXJrOiAnI2VlZSdcbn07XG5cbnZhciByZW5kZXJOb2RlU2hhcGUgPSBmdW5jdGlvbiByZW5kZXJOb2RlU2hhcGUobm9kZSkge1xuICB2YXIgX2RlZmF1bHRTdHlsZSRub2RlJHN0ID0gX29iamVjdFNwcmVhZDIoe30sIGRlZmF1bHRTdHlsZSwge30sIG5vZGUuc3R5bGUpLFxuICAgICAgcHJpbWFyeUNvbG9yID0gX2RlZmF1bHRTdHlsZSRub2RlJHN0LnByaW1hcnlDb2xvcixcbiAgICAgIG5vZGVTaXplID0gX2RlZmF1bHRTdHlsZSRub2RlJHN0Lm5vZGVTaXplLFxuICAgICAgZm9udENvbG9yID0gX2RlZmF1bHRTdHlsZSRub2RlJHN0LmZvbnRDb2xvcixcbiAgICAgIGZvbnRTaXplID0gX2RlZmF1bHRTdHlsZSRub2RlJHN0LmZvbnRTaXplLFxuICAgICAgZGFyayA9IF9kZWZhdWx0U3R5bGUkbm9kZSRzdC5kYXJrO1xuXG4gIHZhciBpY29uU2l6ZSA9IG5vZGVTaXplIC8gMjtcbiAgdmFyIGZvbnRQb3NpdGlvbiA9IG5vZGVTaXplICogMS40O1xuICByZXR1cm4ge1xuICAgIHNoYXBlOiAnQ2lyY2xlTm9kZScsXG4gICAgc2hhcGVDb21wb25lbnRzOiBbe1xuICAgICAgc2hhcGU6ICdjaXJjbGUnLFxuICAgICAgYXR0cnM6IHtcbiAgICAgICAgaWQ6ICdjaXJjbGUtY29udGFpbmVyJyxcbiAgICAgICAgeDogMCxcbiAgICAgICAgeTogMCxcbiAgICAgICAgcjogbm9kZVNpemUsXG4gICAgICAgIGZpbGw6ICcjZmZmJyxcbiAgICAgICAgc3Ryb2tlOiBwcmltYXJ5Q29sb3IsXG4gICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgICBsaW5lV2lkdGg6IDJcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBzaGFwZTogJ01hcmtlcicsXG4gICAgICBhdHRyczoge1xuICAgICAgICBpZDogJ25vZGUtaWNvbicsXG4gICAgICAgIHN5bWJvbDogbm9kZS5kYXRhLnR5cGUsXG4gICAgICAgIHg6IDAsXG4gICAgICAgIHk6IDAsXG4gICAgICAgIHI6IGljb25TaXplLFxuICAgICAgICBmaWxsOiBwcmltYXJ5Q29sb3JcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBzaGFwZTogJ3RleHQnLFxuICAgICAgYXR0cnM6IHtcbiAgICAgICAgaWQ6ICd0ZXh0LWRlc2MnLFxuICAgICAgICB0ZXh0OiBub2RlLmRhdGEubGFiZWwsXG4gICAgICAgIHg6IDAsXG4gICAgICAgIHk6IGZvbnRQb3NpdGlvbixcbiAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICAgIGZvbnRTaXplOiBmb250U2l6ZSxcbiAgICAgICAgZmlsbDogZm9udENvbG9yLFxuICAgICAgICBmb250V2VpZ2h0OiAnbGlnaHRlcicsXG4gICAgICAgIGZvbnRGYW1pbHk6ICdDb3VyaWVyIE5ldycsXG4gICAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsXG4gICAgICAgIHRleHRCYXNlbGluZTogJ3RvcCdcbiAgICAgIH1cbiAgICB9XSxcbiAgICBzdGF0ZToge1xuICAgICAgc2VsZWN0ZWQ6IHtcbiAgICAgICAgJ2NpcmNsZS1jb250YWluZXInOiB7XG4gICAgICAgICAgc3Ryb2tlOiBwcmltYXJ5Q29sb3IsXG4gICAgICAgICAgLy8gZmlsbDogJyMwMDAnLFxuICAgICAgICAgIGFuaW1hdGU6IHtcbiAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgIGxpbmVXaWR0aDogNixcbiAgICAgICAgICAgICAgc2hhZG93T2Zmc2V0WDogMCxcbiAgICAgICAgICAgICAgc2hhZG93T2Zmc2V0WTogMCxcbiAgICAgICAgICAgICAgc2hhZG93Qmx1cjogMixcbiAgICAgICAgICAgICAgc2hhZG93Q29sb3I6ICcjZmZmJyxcbiAgICAgICAgICAgICAgcmVwZWF0OiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAsXG4gICAgICAgICAgICBlYXNpbmc6ICdlYXNlQ3ViaWMnLFxuICAgICAgICAgICAgY2FsbGJhY2s6IG51bGwsXG4gICAgICAgICAgICBkZWxheTogMFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8vICdoaWdobGlnaHQubGlnaHQnOiB7XG4gICAgICAvLyAgICAgJ2NpcmNsZS1jb250YWluZXInOiB7XG4gICAgICAvLyAgICAgICAgIHN0cm9rZTogcHJpbWFyeUNvbG9yLFxuICAgICAgLy8gICAgICAgICBmaWxsOiAnI2RkZCcsXG4gICAgICAvLyAgICAgfSxcbiAgICAgIC8vIH0sXG4gICAgICAnaGlnaGxpZ2h0LmRhcmsnOiB7XG4gICAgICAgICdjaXJjbGUtY29udGFpbmVyJzoge1xuICAgICAgICAgIGZpbGw6IGRhcmssXG4gICAgICAgICAgc3Ryb2tlOiBkYXJrXG4gICAgICAgIH0sXG4gICAgICAgICdub2RlLWljb24nOiB7XG4gICAgICAgICAgZmlsbDogZGFya1xuICAgICAgICB9LFxuICAgICAgICAndGV4dC1kZXNjJzoge1xuICAgICAgICAgIGZpbGw6IGRhcmtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbn07XG5cbi8qKlxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWlzdW5kL2hleC10by1yZ2JhL2Jsb2IvbWFzdGVyL3NyYy9pbmRleC5qc1xyXG4gKi9cbnZhciByZW1vdmVIYXNoID0gZnVuY3Rpb24gcmVtb3ZlSGFzaChoZXgpIHtcbiAgcmV0dXJuIGhleC5jaGFyQXQoMCkgPT09ICcjJyA/IGhleC5zbGljZSgxKSA6IGhleDtcbn07XG5cbnZhciBwYXJzZUhleCA9IGZ1bmN0aW9uIHBhcnNlSGV4KG5ha2VkSGV4KSB7XG4gIHZhciBpc1Nob3J0ID0gbmFrZWRIZXgubGVuZ3RoID09PSAzIHx8IG5ha2VkSGV4Lmxlbmd0aCA9PT0gNDtcbiAgdmFyIHR3b0RpZ2l0SGV4UiA9IGlzU2hvcnQgPyBcIlwiLmNvbmNhdChuYWtlZEhleC5zbGljZSgwLCAxKSkuY29uY2F0KG5ha2VkSGV4LnNsaWNlKDAsIDEpKSA6IG5ha2VkSGV4LnNsaWNlKDAsIDIpO1xuICB2YXIgdHdvRGlnaXRIZXhHID0gaXNTaG9ydCA/IFwiXCIuY29uY2F0KG5ha2VkSGV4LnNsaWNlKDEsIDIpKS5jb25jYXQobmFrZWRIZXguc2xpY2UoMSwgMikpIDogbmFrZWRIZXguc2xpY2UoMiwgNCk7XG4gIHZhciB0d29EaWdpdEhleEIgPSBpc1Nob3J0ID8gXCJcIi5jb25jYXQobmFrZWRIZXguc2xpY2UoMiwgMykpLmNvbmNhdChuYWtlZEhleC5zbGljZSgyLCAzKSkgOiBuYWtlZEhleC5zbGljZSg0LCA2KTtcbiAgdmFyIHR3b0RpZ2l0SGV4QSA9IChpc1Nob3J0ID8gXCJcIi5jb25jYXQobmFrZWRIZXguc2xpY2UoMywgNCkpLmNvbmNhdChuYWtlZEhleC5zbGljZSgzLCA0KSkgOiBuYWtlZEhleC5zbGljZSg2LCA4KSkgfHwgJ2ZmJzsgLy8gY29uc3QgbnVtZXJpY0EgPSArKChwYXJzZUludChhLCAxNikgLyAyNTUpLnRvRml4ZWQoMikpO1xuXG4gIHJldHVybiB7XG4gICAgcjogdHdvRGlnaXRIZXhSLFxuICAgIGc6IHR3b0RpZ2l0SGV4RyxcbiAgICBiOiB0d29EaWdpdEhleEIsXG4gICAgYTogdHdvRGlnaXRIZXhBXG4gIH07XG59O1xuXG52YXIgaGV4VG9EZWNpbWFsID0gZnVuY3Rpb24gaGV4VG9EZWNpbWFsKGhleCkge1xuICByZXR1cm4gcGFyc2VJbnQoaGV4LCAxNik7XG59O1xuXG52YXIgaGV4ZXNUb0RlY2ltYWxzID0gZnVuY3Rpb24gaGV4ZXNUb0RlY2ltYWxzKF9yZWYpIHtcbiAgdmFyIHIgPSBfcmVmLnIsXG4gICAgICBnID0gX3JlZi5nLFxuICAgICAgYiA9IF9yZWYuYixcbiAgICAgIGEgPSBfcmVmLmE7XG4gIHJldHVybiB7XG4gICAgcjogaGV4VG9EZWNpbWFsKHIpLFxuICAgIGc6IGhleFRvRGVjaW1hbChnKSxcbiAgICBiOiBoZXhUb0RlY2ltYWwoYiksXG4gICAgYTogKyhoZXhUb0RlY2ltYWwoYSkgLyAyNTUpLnRvRml4ZWQoMilcbiAgfTtcbn07XG5cbnZhciBpc051bWVyaWMgPSBmdW5jdGlvbiBpc051bWVyaWMobikge1xuICByZXR1cm4gIWlzTmFOKHBhcnNlRmxvYXQoU3RyaW5nKG4pKSkgJiYgaXNGaW5pdGUoTnVtYmVyKG4pKTtcbn07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzLCBtYXgtbGVuXG5cblxudmFyIGZvcm1hdFJnYiA9IGZ1bmN0aW9uIGZvcm1hdFJnYihkZWNpbWFsT2JqZWN0LCBwYXJhbWV0ZXJBKSB7XG4gIHZhciByID0gZGVjaW1hbE9iamVjdC5yLFxuICAgICAgZyA9IGRlY2ltYWxPYmplY3QuZyxcbiAgICAgIGIgPSBkZWNpbWFsT2JqZWN0LmIsXG4gICAgICBwYXJzZWRBID0gZGVjaW1hbE9iamVjdC5hO1xuICB2YXIgYSA9IGlzTnVtZXJpYyhwYXJhbWV0ZXJBKSA/IHBhcmFtZXRlckEgOiBwYXJzZWRBO1xuICByZXR1cm4gXCJyZ2JhKFwiLmNvbmNhdChyLCBcIiwgXCIpLmNvbmNhdChnLCBcIiwgXCIpLmNvbmNhdChiLCBcIiwgXCIpLmNvbmNhdChhLCBcIilcIik7XG59O1xuLyoqXHJcbiAqIFR1cm5zIGFuIG9sZC1mYXNoaW9uZWQgY3NzIGhleCBjb2xvciB2YWx1ZSBpbnRvIGEgcmdiIGNvbG9yIHZhbHVlLlxyXG4gKlxyXG4gKiBJZiB5b3Ugc3BlY2lmeSBhbiBhbHBoYSB2YWx1ZSwgeW91J2xsIGdldCBhIHJnYmEoKSB2YWx1ZSBpbnN0ZWFkLlxyXG4gKlxyXG4gKiBAcGFyYW0gVGhlIGhleCB2YWx1ZSB0byBjb252ZXJ0LiAoJzEyMzQ1NicuICcjMTIzNDU2JywgJycxMjMnLCAnIzEyMycpXHJcbiAqIEBwYXJhbSBBbiBhbHBoYSB2YWx1ZSB0byBhcHBseS4gKG9wdGlvbmFsKSAoJzAuNScsICcwLjI1JylcclxuICogQHJldHVybiBBbiByZ2Igb3IgcmdiYSB2YWx1ZS4gKCdyZ2IoMTEsIDIyLCAzMyknLiAncmdiYSgxMSwgMjIsIDMzLCAwLjUpJylcclxuICovXG5cblxudmFyIGhleFRvUmdiYSA9IGZ1bmN0aW9uIGhleFRvUmdiYShoZXgsIGEpIHtcbiAgdmFyIGhhc2hsZXNzSGV4ID0gcmVtb3ZlSGFzaChoZXgpO1xuICB2YXIgaGV4T2JqZWN0ID0gcGFyc2VIZXgoaGFzaGxlc3NIZXgpO1xuICB2YXIgZGVjaW1hbE9iamVjdCA9IGhleGVzVG9EZWNpbWFscyhoZXhPYmplY3QpO1xuICByZXR1cm4gZm9ybWF0UmdiKGRlY2ltYWxPYmplY3QsIGEpO1xufTtcblxuLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZXJzY29yZS1kYW5nbGUgKi9cblxudmFyIHJlc2V0JDEgPSBmdW5jdGlvbiByZXNldChzaGFwZSwgaW5pdFN0eWxlKSB7XG4gIHZhciBsaW5lV2lkdGggPSBpbml0U3R5bGUubGluZVdpZHRoLFxuICAgICAgc3Ryb2tlID0gaW5pdFN0eWxlLnN0cm9rZTtcbiAgc2hhcGUuc3RvcEFuaW1hdGUoKTtcbiAgc2hhcGUuYXR0cignbGluZVdpZHRoJywgbGluZVdpZHRoKTtcbiAgc2hhcGUuYXR0cignc3Ryb2tlJywgc3Ryb2tlKTtcbn07XG5cbnZhciBjYWNoZSA9IGZ1bmN0aW9uIGNhY2hlKG1vZGVsKSB7XG4gIGlmICghbW9kZWwuaW5pdFN0eWxlKSB7XG4gICAgbW9kZWwuaW5pdFN0eWxlID0gbW9kZWwuc3R5bGU7XG4gIH1cblxuICByZXR1cm4gbW9kZWwuaW5pdFN0eWxlO1xufTtcblxudmFyIHNldEVkZ2VTdGF0ZSA9IChmdW5jdGlvbiAobmFtZSwgdmFsdWUsIGl0ZW0pIHtcbiAgdmFyIGdyb3VwID0gaXRlbS5nZXRDb250YWluZXIoKTtcbiAgdmFyIHNoYXBlID0gZ3JvdXAuZ2V0KCdjaGlsZHJlbicpWzBdOyAvLyDpobrluo/moLnmja4gZHJhdyDml7bnoa7lrppcblxuICB2YXIgdGV4dFNoYXBlID0gZ3JvdXAuZ2V0KCdjaGlsZHJlbicpWzFdO1xuICB2YXIgbW9kZWwgPSBpdGVtLmdldCgnbW9kZWwnKTtcbiAgLyoqIOiuvue9rue8k+WtmCAqL1xuXG4gIHZhciBpbml0U3R5bGUgPSBjYWNoZShtb2RlbCk7XG4gIC8qKiDlpoLmnpzmmK9mYWxzZe+8jOWImeebtOaOpXJlc2V05Yiw5Yid5aeL54q25oCBICovXG5cbiAgaWYgKCF2YWx1ZSB8fCAhbmFtZSkge1xuICAgIHJlc2V0JDEoc2hhcGUsIGluaXRTdHlsZSk7XG5cbiAgICBpZiAodGV4dFNoYXBlKSB7XG4gICAgICB0ZXh0U2hhcGUub3JpZ2luRmlsbCA9IHRleHRTaGFwZS5vcmlnaW5GaWxsIHx8IHRleHRTaGFwZS5fYXR0cnMuZmlsbFN0eWxlO1xuICAgICAgdGV4dFNoYXBlLmF0dHIoJ2ZpbGwnLCB0ZXh0U2hhcGUub3JpZ2luRmlsbCk7XG4gICAgfVxuXG4gICAgcmV0dXJuO1xuICB9XG4gIC8qKiDnirbmgIHorr7nva4gKi9cblxuXG4gIHZhciBsaW5lV2lkdGggPSBpbml0U3R5bGUubGluZVdpZHRoLFxuICAgICAgc3Ryb2tlID0gaW5pdFN0eWxlLnN0cm9rZTtcblxuICBpZiAobmFtZSA9PT0gJ3NlbGVjdGVkJykge1xuICAgIHNoYXBlLmF0dHIoJ2xpbmVXaWR0aCcsIDUpO1xuICAgIHNoYXBlLmF0dHIoJ3N0cm9rZScsICcjMTg5MEZGJyk7XG4gICAgc2hhcGUuYW5pbWF0ZSh7XG4gICAgICBsaW5lV2lkdGg6IGxpbmVXaWR0aCArIDMsXG4gICAgICByZXBlYXQ6IGZhbHNlXG4gICAgfSwgMjAwLCAnZWFzZUN1YmljJywgbnVsbCwgMCk7XG4gIH1cblxuICBpZiAobmFtZSA9PT0gJ2hpZ2hsaWdodC5saWdodCcpIHtcbiAgICBzaGFwZS5hdHRyKCdsaW5lV2lkdGgnLCAzKTtcbiAgfVxuXG4gIGlmIChuYW1lID09PSAnaGlnaGxpZ2h0LmRhcmsnKSB7XG4gICAgaWYgKHRleHRTaGFwZSkge1xuICAgICAgdGV4dFNoYXBlLm9yaWdpbkZpbGwgPSB0ZXh0U2hhcGUub3JpZ2luRmlsbCB8fCB0ZXh0U2hhcGUuX2F0dHJzLmZpbGxTdHlsZTtcbiAgICAgIHRleHRTaGFwZS5hdHRyKCdmaWxsJywgJyNjY2MnKTtcbiAgICB9XG5cbiAgICBzaGFwZS5hdHRyKCdsaW5lV2lkdGgnLCAxKTtcbiAgICBzaGFwZS5hdHRyKCdzdHJva2UnLCBoZXhUb1JnYmEoc3Ryb2tlLCAnMC4xJykpO1xuICB9XG59KTtcblxudmFyIFJlZ2lzdGVyTGluZUVkZ2UgPSAoZnVuY3Rpb24gKEc2KSB7XG4gIEc2LnJlZ2lzdGVyRWRnZSgnTGluZUVkZ2UnLCB7XG4gICAgLy8g6K6+572u54q25oCBXG4gICAgc2V0U3RhdGU6IGZ1bmN0aW9uIHNldFN0YXRlKG5hbWUsIHZhbHVlLCBpdGVtKSB7XG4gICAgICBzZXRFZGdlU3RhdGUobmFtZSwgdmFsdWUsIGl0ZW0pO1xuICAgIH1cbiAgfSwgJ2xpbmUnKTtcbn0pO1xuXG52YXIgZ3JhcGhpbkhpZ2hsaWdodCA9IHtcbiAgZ2V0RGVmYXVsdENmZzogZnVuY3Rpb24gZ2V0RGVmYXVsdENmZygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbXVsdGlwbGU6IHRydWUsXG4gICAgICBrZXlDb2RlOiAxOFxuICAgIH07XG4gIH0sXG4gIGdldEV2ZW50czogZnVuY3Rpb24gZ2V0RXZlbnRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICAnbm9kZTpjbGljayc6ICdvbkNsaWNrJyxcbiAgICAgICdlZGdlOmNsaWNrJzogJ29uRWRnZUNsaWNrJyxcbiAgICAgIGtleXVwOiAnb25LZXlVcCcsXG4gICAgICBrZXlkb3duOiAnb25LZXlEb3duJyxcbiAgICAgICdjYW52YXM6Y2xpY2snOiAnb25DYW52YXNDbGljaydcbiAgICB9O1xuICB9LFxuICBjbGVhclN0YXRlczogZnVuY3Rpb24gY2xlYXJTdGF0ZXMoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgdmFyIGdyYXBoID0gdGhpcy5ncmFwaDtcbiAgICBncmFwaC5nZXROb2RlcygpLmZvckVhY2goZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIGdyYXBoLmNsZWFySXRlbVN0YXRlcyhub2RlKTtcbiAgICB9KTtcbiAgICBncmFwaC5nZXRFZGdlcygpLmZvckVhY2goZnVuY3Rpb24gKGVkZ2UpIHtcbiAgICAgIGdyYXBoLmNsZWFySXRlbVN0YXRlcyhlZGdlKTtcbiAgICB9KTtcbiAgfSxcbiAgb25DYW52YXNDbGljazogZnVuY3Rpb24gb25DYW52YXNDbGljaygpIHtcbiAgICB0aGlzLmNsZWFyU3RhdGVzKCk7XG4gIH0sXG4gIG9uRWRnZUNsaWNrOiBmdW5jdGlvbiBvbkVkZ2VDbGljayhlKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgdmFyIGdyYXBoID0gdGhpcy5ncmFwaDtcbiAgICB2YXIgY3VycmVudEVkZ2UgPSBlLml0ZW07XG4gICAgdmFyIHNvdXJjZU5vZGUgPSBjdXJyZW50RWRnZS5nZXQoJ3NvdXJjZScpO1xuICAgIHZhciB0YXJnZXROb2RlID0gY3VycmVudEVkZ2UuZ2V0KCd0YXJnZXQnKTtcbiAgICB0aGlzLmNsZWFyU3RhdGVzKCk7XG4gICAgY3VycmVudEVkZ2UudG9Gcm9udCgpO1xuICAgIGdyYXBoLmdldE5vZGVzKCkuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkge1xuICAgICAgdmFyIGlkID0gbm9kZS5nZXQoJ2lkJyk7XG5cbiAgICAgIGlmIChpZCA9PT0gc291cmNlTm9kZS5nZXQoJ2lkJykgfHwgaWQgPT09IHRhcmdldE5vZGUuZ2V0KCdpZCcpKSB7XG4gICAgICAgIGdyYXBoLnNldEl0ZW1TdGF0ZShzb3VyY2VOb2RlLCAnaGlnaGxpZ2h0LnNvdXJjZScsIHRydWUpO1xuICAgICAgICBncmFwaC5zZXRJdGVtU3RhdGUodGFyZ2V0Tm9kZSwgJ2hpZ2hsaWdodC50YXJnZXQnLCB0cnVlKTtcbiAgICAgICAgZ3JhcGguc2V0SXRlbVN0YXRlKG5vZGUsICdoaWdobGlnaHQuZGFyaycsIGZhbHNlKTtcbiAgICAgICAgZ3JhcGguc2V0SXRlbVN0YXRlKG5vZGUsICdoaWdobGlnaHQubGlnaHQnLCB0cnVlKTtcbiAgICAgICAgZ3JhcGguc2V0SXRlbVN0YXRlKGN1cnJlbnRFZGdlLCAnc2VsZWN0ZWQnLCB0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdyYXBoLnNldEl0ZW1TdGF0ZShub2RlLCAnaGlnaGxpZ2h0LmxpZ2h0JywgZmFsc2UpO1xuICAgICAgICBncmFwaC5zZXRJdGVtU3RhdGUobm9kZSwgJ2hpZ2hsaWdodC5kYXJrJywgdHJ1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gIHByb2Nlc3M6IGZ1bmN0aW9uIHByb2Nlc3Mobm9kZSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIHZhciBncmFwaCA9IHRoaXMuZ3JhcGg7XG4gICAgLyoqIHByb2Nlc3MgRWRnZXMgKi9cblxuICAgIHZhciBhbGxFZGdlcyA9IGdyYXBoLmdldEVkZ2VzKCk7XG4gICAgdmFyIHJlbGF0aXZlRWRnZXMgPSBub2RlLmdldEVkZ2VzKCk7XG4gICAgdmFyIHJlbGF0aXZlRWRnZXNJZHMgPSByZWxhdGl2ZUVkZ2VzLm1hcChmdW5jdGlvbiAoZWRnZSkge1xuICAgICAgcmV0dXJuIGVkZ2UuZ2V0KCdpZCcpO1xuICAgIH0pO1xuICAgIHZhciB1blJlbGF0aXZlRWRnZXMgPSBbXTtcbiAgICB2YXIgcmVsYXRpdmVOb2RlU2V0ID0gbmV3IFNldChbbm9kZV0pO1xuICAgIGFsbEVkZ2VzLmZvckVhY2goZnVuY3Rpb24gKGVkZ2UpIHtcbiAgICAgIHZhciBpZCA9IGVkZ2UuZ2V0KCdpZCcpO1xuICAgICAgdmFyIHNvdXJjZSA9IGVkZ2UuZ2V0KCdzb3VyY2UnKTtcbiAgICAgIHZhciB0YXJnZXQgPSBlZGdlLmdldCgndGFyZ2V0Jyk7XG5cbiAgICAgIGlmIChyZWxhdGl2ZUVkZ2VzSWRzLmluZGV4T2YoaWQpICE9PSAtMSkge1xuICAgICAgICByZWxhdGl2ZU5vZGVTZXQuYWRkKHNvdXJjZSk7XG4gICAgICAgIHJlbGF0aXZlTm9kZVNldC5hZGQodGFyZ2V0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVuUmVsYXRpdmVFZGdlcy5wdXNoKGVkZ2UpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIC8qKiBwcm9jZXNzIE5vZGVzICovXG5cbiAgICB2YXIgYWxsTm9kZXMgPSBncmFwaC5nZXROb2RlcygpO1xuXG4gICAgdmFyIHJlbGF0aXZlTm9kZXMgPSBfdG9Db25zdW1hYmxlQXJyYXkocmVsYXRpdmVOb2RlU2V0KTtcblxuICAgIHZhciByZWxhdGl2ZU5vZGVzSWRzID0gcmVsYXRpdmVOb2Rlcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHJldHVybiBpdGVtLmdldCgnaWQnKTtcbiAgICB9KTtcbiAgICB2YXIgdW5SZWxhdGl2ZU5vZGVzID0gYWxsTm9kZXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICByZXR1cm4gcmVsYXRpdmVOb2Rlc0lkcy5pbmRleE9mKGl0ZW0uZ2V0KCdpZCcpKSA9PT0gLTE7XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlbGF0aXZlRWRnZXM6IHJlbGF0aXZlRWRnZXMsXG4gICAgICB1blJlbGF0aXZlRWRnZXM6IHVuUmVsYXRpdmVFZGdlcyxcbiAgICAgIHJlbGF0aXZlTm9kZXM6IHJlbGF0aXZlTm9kZXMsXG4gICAgICB1blJlbGF0aXZlTm9kZXM6IHVuUmVsYXRpdmVOb2Rlc1xuICAgIH07XG4gIH0sXG4gIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgIHZhciBrZXlkb3duID0gdGhpcy5rZXlkb3duLFxuICAgICAgICBncmFwaCA9IHRoaXMuZ3JhcGg7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICAgIHZhciBjdXJyZW50Tm9kZSA9IGUuaXRlbTtcblxuICAgIHZhciBfdGhpcyRwcm9jZXNzID0gdGhpcy5wcm9jZXNzKGN1cnJlbnROb2RlKSxcbiAgICAgICAgcmVsYXRpdmVFZGdlcyA9IF90aGlzJHByb2Nlc3MucmVsYXRpdmVFZGdlcyxcbiAgICAgICAgdW5SZWxhdGl2ZUVkZ2VzID0gX3RoaXMkcHJvY2Vzcy51blJlbGF0aXZlRWRnZXMsXG4gICAgICAgIHJlbGF0aXZlTm9kZXMgPSBfdGhpcyRwcm9jZXNzLnJlbGF0aXZlTm9kZXMsXG4gICAgICAgIHVuUmVsYXRpdmVOb2RlcyA9IF90aGlzJHByb2Nlc3MudW5SZWxhdGl2ZU5vZGVzOyAvLyDljZXpgIlcblxuXG4gICAgaWYgKCFrZXlkb3duKSB7XG4gICAgICB0aGlzLmNsZWFyU3RhdGVzKCk7XG4gICAgICByZWxhdGl2ZU5vZGVzLmZvckVhY2goZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgaWYgKGN1cnJlbnROb2RlLmdldCgnaWQnKSA9PT0gbm9kZS5nZXQoJ2lkJykpIHtcbiAgICAgICAgICBncmFwaC5zZXRJdGVtU3RhdGUoY3VycmVudE5vZGUsICdzZWxlY3RlZCcsIHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGdyYXBoLnNldEl0ZW1TdGF0ZShub2RlLCAnaGlnaGxpZ2h0LmRhcmsnLCBmYWxzZSk7XG4gICAgICAgICAgZ3JhcGguc2V0SXRlbVN0YXRlKG5vZGUsICdoaWdobGlnaHQubGlnaHQnLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB1blJlbGF0aXZlTm9kZXMuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICBncmFwaC5zZXRJdGVtU3RhdGUobm9kZSwgJ2hpZ2hsaWdodC5saWdodCcsIGZhbHNlKTtcbiAgICAgICAgZ3JhcGguc2V0SXRlbVN0YXRlKG5vZGUsICdoaWdobGlnaHQuZGFyaycsIHRydWUpO1xuICAgICAgfSk7XG4gICAgICByZWxhdGl2ZUVkZ2VzLmZvckVhY2goZnVuY3Rpb24gKGVkZ2UpIHtcbiAgICAgICAgZWRnZS50b0Zyb250KCk7XG4gICAgICAgIGdyYXBoLnNldEl0ZW1TdGF0ZShlZGdlLCAnaGlnaGxpZ2h0LmRhcmsnLCBmYWxzZSk7XG4gICAgICAgIGdyYXBoLnNldEl0ZW1TdGF0ZShlZGdlLCAnaGlnaGxpZ2h0LmxpZ2h0JywgdHJ1ZSk7XG4gICAgICB9KTtcbiAgICAgIHVuUmVsYXRpdmVFZGdlcy5mb3JFYWNoKGZ1bmN0aW9uIChlZGdlKSB7XG4gICAgICAgIGVkZ2UudG9CYWNrKCk7XG4gICAgICAgIGdyYXBoLnNldEl0ZW1TdGF0ZShlZGdlLCAnaGlnaGxpZ2h0LmxpZ2h0JywgZmFsc2UpO1xuICAgICAgICBncmFwaC5zZXRJdGVtU3RhdGUoZWRnZSwgJ2hpZ2hsaWdodC5kYXJrJywgdHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gIOaMieS9j2N0cmwg5aSa6YCJXG4gICAgICByZWxhdGl2ZUVkZ2VzLmZvckVhY2goZnVuY3Rpb24gKGVkZ2UpIHtcbiAgICAgICAgZ3JhcGguc2V0SXRlbVN0YXRlKGVkZ2UsICdoaWdobGlnaHQuZGFyaycsIGZhbHNlKTtcbiAgICAgICAgZ3JhcGguc2V0SXRlbVN0YXRlKGVkZ2UsICdoaWdobGlnaHQubGlnaHQnLCB0cnVlKTtcbiAgICAgIH0pO1xuICAgICAgZ3JhcGguc2V0SXRlbVN0YXRlKGN1cnJlbnROb2RlLCAnaGlnaGxpZ2h0LmRhcmsnLCBmYWxzZSk7XG4gICAgICBncmFwaC5zZXRJdGVtU3RhdGUoY3VycmVudE5vZGUsICdoaWdobGlnaHQubGlnaHQnLCB0cnVlKTtcbiAgICB9XG4gIH0sXG4gIG9uS2V5RG93bjogZnVuY3Rpb24gb25LZXlEb3duKGUpIHtcbiAgICB2YXIgY3R4ID0gdGhpczsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4gICAgdmFyIGtleUNvZGUgPSB0aGlzLmtleUNvZGU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICAgIHZhciBjb2RlID0gZS5rZXlDb2RlIHx8IGUud2hpY2g7XG5cbiAgICBpZiAoY29kZSA9PT0ga2V5Q29kZSkge1xuICAgICAgY3R4LmtleWRvd24gPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdHgua2V5ZG93biA9IGZhbHNlO1xuICAgIH1cbiAgfSxcbiAgb25LZXlVcDogZnVuY3Rpb24gb25LZXlVcCgpIHtcbiAgICB2YXIgY3R4ID0gdGhpczsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4gICAgY3R4LmtleWRvd24gPSBmYWxzZTtcbiAgfVxufTtcblxudmFyIGlubmVyUmVnaXN0ZXIgPSB7XG4gIG5vZGVTaGFwZTogZnVuY3Rpb24gbm9kZVNoYXBlKCkge1xuICAgIHJldHVybiBbXTtcbiAgfSxcbiAgZWRnZVNoYXBlOiBmdW5jdGlvbiBlZGdlU2hhcGUoKSB7XG4gICAgcmV0dXJuIFt7XG4gICAgICBuYW1lOiAnTGluZUVkZ2UnLFxuICAgICAgcmVnaXN0ZXI6IGZ1bmN0aW9uIHJlZ2lzdGVyKCkge1xuICAgICAgICBSZWdpc3RlckxpbmVFZGdlKEc2KTtcbiAgICAgIH1cbiAgICB9XTtcbiAgfSxcbiAgYmVoYXZpb3I6IGZ1bmN0aW9uIGJlaGF2aW9yKCkge1xuICAgIHJldHVybiBbe1xuICAgICAgbmFtZTogJ2dyYXBoaW4taGlnaGxpZ2h0JyxcbiAgICAgIG1vZGU6ICdkZWZhdWx0JyxcbiAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgcmVnaXN0ZXI6IGZ1bmN0aW9uIHJlZ2lzdGVyKCkge1xuICAgICAgICBHNi5yZWdpc3RlckJlaGF2aW9yKCdncmFwaGluLWhpZ2hsaWdodCcsIGdyYXBoaW5IaWdobGlnaHQpO1xuICAgICAgfVxuICAgIH1dO1xuICB9XG59O1xuXG52YXIgZHVtcFJlZ2lzdGVyID0gZnVuY3Rpb24gZHVtcFJlZ2lzdGVyKCkge1xuICByZXR1cm4gW107XG59O1xuXG52YXIgZHVtcEV4dGVuZCA9IGZ1bmN0aW9uIGR1bXBFeHRlbmQoKSB7XG4gIHJldHVybiBbXTtcbn07XG5cbnZhciBpbm5lckV4dGVuZCA9IHtcbiAgbm9kZVNoYXBlOiBmdW5jdGlvbiBub2RlU2hhcGUoKSB7XG4gICAgcmV0dXJuIFt7XG4gICAgICBuYW1lOiAnQ2lyY2xlTm9kZScsXG4gICAgICByZW5kZXI6IHJlbmRlck5vZGVTaGFwZVxuICAgIH1dO1xuICB9LFxuICBtYXJrZXI6IGZ1bmN0aW9uIG1hcmtlcigpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbn07XG5cbnZhciB0b1VwcGVyQ2FzZVdpdGhGaXJzdCA9IGZ1bmN0aW9uIHRvVXBwZXJDYXNlV2l0aEZpcnN0KHN0cikge1xuICByZXR1cm4gXCJcIi5jb25jYXQoc3RyWzBdLnRvVXBwZXJDYXNlKCkpLmNvbmNhdChzdHIuc2xpY2UoMSkpO1xufTtcblxudmFyIGdyYXBoaW5SZWdpc3RlciA9IGZ1bmN0aW9uIGdyYXBoaW5SZWdpc3Rlcihwcm9wcykge1xuICB2YXIgX3Byb3BzJGV4dGVuZCA9IHByb3BzLmV4dGVuZCxcbiAgICAgIGV4dGVuZCA9IF9wcm9wcyRleHRlbmQgPT09IHZvaWQgMCA/IHt9IDogX3Byb3BzJGV4dGVuZCxcbiAgICAgIF9wcm9wcyRyZWdpc3RlciA9IHByb3BzLnJlZ2lzdGVyLFxuICAgICAgcmVnaXN0ZXIgPSBfcHJvcHMkcmVnaXN0ZXIgPT09IHZvaWQgMCA/IHt9IDogX3Byb3BzJHJlZ2lzdGVyLFxuICAgICAgX3Byb3BzJG9wdGlvbnMgPSBwcm9wcy5vcHRpb25zLFxuICAgICAgb3B0aW9ucyA9IF9wcm9wcyRvcHRpb25zID09PSB2b2lkIDAgPyB7fSA6IF9wcm9wcyRvcHRpb25zO1xuICB2YXIgaW5uZXJCZWhhdmlvcnMgPSBpbm5lclJlZ2lzdGVyLmJlaGF2aW9yKCkuZmlsdGVyKGZ1bmN0aW9uIChiZWhhdmlvcikge1xuICAgIHZhciBiZWhhdmlvck5hbWUgPSBiZWhhdmlvci5uYW1lLnNwbGl0KCctJylbMV07XG4gICAgdmFyIGRpc2FibGVOYW1lID0gXCJkaXNhYmxlXCIuY29uY2F0KHRvVXBwZXJDYXNlV2l0aEZpcnN0KGJlaGF2aW9yTmFtZSkpO1xuICAgIHJldHVybiAhb3B0aW9uc1tkaXNhYmxlTmFtZV07XG4gIH0pO1xuICAvKiog5L2/55SoRzbljp/nlJ/mlrnms5XlvpfliLDnmoQgKi9cblxuICB2YXIgX3JlZ2lzdGVyJG5vZGVTaGFwZSA9IHJlZ2lzdGVyLm5vZGVTaGFwZSxcbiAgICAgIG5vZGVTaGFwZSA9IF9yZWdpc3RlciRub2RlU2hhcGUgPT09IHZvaWQgMCA/IGR1bXBSZWdpc3RlciA6IF9yZWdpc3RlciRub2RlU2hhcGUsXG4gICAgICBfcmVnaXN0ZXIkZWRnZVNoYXBlID0gcmVnaXN0ZXIuZWRnZVNoYXBlLFxuICAgICAgZWRnZVNoYXBlID0gX3JlZ2lzdGVyJGVkZ2VTaGFwZSA9PT0gdm9pZCAwID8gZHVtcFJlZ2lzdGVyIDogX3JlZ2lzdGVyJGVkZ2VTaGFwZSxcbiAgICAgIF9yZWdpc3RlciRiZWhhdmlvciA9IHJlZ2lzdGVyLmJlaGF2aW9yLFxuICAgICAgYmVoYXZpb3IgPSBfcmVnaXN0ZXIkYmVoYXZpb3IgPT09IHZvaWQgMCA/IGR1bXBSZWdpc3RlciA6IF9yZWdpc3RlciRiZWhhdmlvcjtcbiAgdmFyIHJlZ2lzdGVyTm9kZXMgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGlubmVyUmVnaXN0ZXIubm9kZVNoYXBlKCkpLCBfdG9Db25zdW1hYmxlQXJyYXkobm9kZVNoYXBlKEc2KSkpO1xuICB2YXIgcmVnaXN0ZXJFZGdlcyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoaW5uZXJSZWdpc3Rlci5lZGdlU2hhcGUoKSksIF90b0NvbnN1bWFibGVBcnJheShlZGdlU2hhcGUoRzYpKSk7XG4gIHZhciByZWdpc3RlckJlaGF2aW9ycyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoaW5uZXJCZWhhdmlvcnMpLCBfdG9Db25zdW1hYmxlQXJyYXkoYmVoYXZpb3IoRzYpKSk7XG4gIHJlZ2lzdGVyTm9kZXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgIGl0ZW0ucmVnaXN0ZXIoRzYpO1xuICB9KTtcbiAgcmVnaXN0ZXJFZGdlcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgaXRlbS5yZWdpc3RlcihHNik7XG4gIH0pO1xuICB2YXIgbW9kZXMgPSBbXTtcbiAgcmVnaXN0ZXJCZWhhdmlvcnMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgIGl0ZW0ucmVnaXN0ZXIoRzYpO1xuICAgIHZhciBuYW1lID0gaXRlbS5uYW1lLFxuICAgICAgICBtb2RlID0gaXRlbS5tb2RlO1xuXG4gICAgdHJ5IHtcbiAgICAgIG1vZGVzLnB1c2goX29iamVjdFNwcmVhZDIoe1xuICAgICAgICBtb2RlOiBtb2RlLFxuICAgICAgICB0eXBlOiBuYW1lXG4gICAgICB9LCBpdGVtLm9wdGlvbnMpKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVtcHR5XG4gICAgfSBjYXRjaCAoZXJyb3IpIHt9XG4gIH0pO1xuICB2YXIgYmVoYXZpb3JNb2RlID0gbW9kZXMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGN1cnIpIHtcbiAgICB2YXIgbW9kZSA9IGN1cnIubW9kZSxcbiAgICAgICAgb3RoZXJzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKGN1cnIsIFtcIm1vZGVcIl0pO1xuXG4gICAgaWYgKCFhY2NbbW9kZV0pIHtcbiAgICAgIGFjY1ttb2RlXSA9IFtdO1xuICAgIH1cblxuICAgIGFjY1ttb2RlXS5wdXNoKG90aGVycyk7XG4gICAgcmV0dXJuIF9vYmplY3RTcHJlYWQyKHt9LCBhY2MpO1xuICB9LCB7XG4gICAgZGVmYXVsdDogW11cbiAgfSk7XG4gIC8qKiDmianlsZXlvpfliLDnmoQgKi9cblxuICB2YXIgX2V4dGVuZCRub2RlU2hhcGUgPSBleHRlbmQubm9kZVNoYXBlLFxuICAgICAgRXhOb2RlU2hhcGUgPSBfZXh0ZW5kJG5vZGVTaGFwZSA9PT0gdm9pZCAwID8gZHVtcEV4dGVuZCA6IF9leHRlbmQkbm9kZVNoYXBlLFxuICAgICAgX2V4dGVuZCRtYXJrZXIgPSBleHRlbmQubWFya2VyLFxuICAgICAgRXhNYXJrZXIgPSBfZXh0ZW5kJG1hcmtlciA9PT0gdm9pZCAwID8gZHVtcEV4dGVuZCA6IF9leHRlbmQkbWFya2VyO1xuICB2YXIgZXh0ZW5kTm9kZXMgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGlubmVyRXh0ZW5kLm5vZGVTaGFwZSgpKSwgX3RvQ29uc3VtYWJsZUFycmF5KEV4Tm9kZVNoYXBlKCkpKTtcbiAgdmFyIGV4dGVuZE1hcmtlciA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoaW5uZXJFeHRlbmQubWFya2VyKCkpLCBfdG9Db25zdW1hYmxlQXJyYXkoRXhNYXJrZXIoKSkpO1xuICBleHRlbmROb2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgY29tcGlsZXIoaXRlbSk7XG4gIH0pO1xuICByZWdpc3RlcklubmVyTWFya2VyKGV4dGVuZE1hcmtlcik7XG4gIHJldHVybiBiZWhhdmlvck1vZGU7XG59O1xuXG52YXIgSGlzdG9yeUNvbnRyb2xsZXIgPSBmdW5jdGlvbiBIaXN0b3J5Q29udHJvbGxlcigpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSGlzdG9yeUNvbnRyb2xsZXIpO1xuXG4gIHRoaXMuc2F2ZSA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgIF90aGlzLmhpc3RvcnkgPSBfdGhpcy5oaXN0b3J5LnNsaWNlKDAsIF90aGlzLmhpc3RvcnlJbmRleCArIDEpO1xuICAgIF90aGlzLmhpc3RvcnkgPSBfdGhpcy5oaXN0b3J5LmNvbmNhdChbX29iamVjdFNwcmVhZDIoe30sIHN0YXRlKV0pO1xuICAgIF90aGlzLmhpc3RvcnlJbmRleCA9IF90aGlzLmhpc3RvcnlJbmRleCArIDE7XG4gIH07XG5cbiAgdGhpcy51bmRvID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChfdGhpcy5nZXRIaXN0b3J5SW5mbygpLmRpc2FibGVVbmRvKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1RoZXJlIGlzIG5vIG1vcmUgdW5kbyBoaXN0b3J5Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgX3RoaXMuaGlzdG9yeUluZGV4ID0gX3RoaXMuaGlzdG9yeUluZGV4IC0gMTtcbiAgICByZXR1cm4gX3RoaXMuaGlzdG9yeVtfdGhpcy5oaXN0b3J5SW5kZXhdO1xuICB9O1xuXG4gIHRoaXMucmVkbyA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoX3RoaXMuZ2V0SGlzdG9yeUluZm8oKS5kaXNhYmxlUmVkbykge1xuICAgICAgY29uc29sZS53YXJuKCdUaGVyZSBpcyBubyBtb3JlIHJlZG8gaGlzdG9yeScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIF90aGlzLmhpc3RvcnlJbmRleCA9IF90aGlzLmhpc3RvcnlJbmRleCArIDE7XG4gICAgcmV0dXJuIF90aGlzLmhpc3RvcnlbX3RoaXMuaGlzdG9yeUluZGV4XTtcbiAgfTtcblxuICB0aGlzLmdldEhpc3RvcnlJbmZvID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjdXJyZW50U3RlcDogX3RoaXMuaGlzdG9yeUluZGV4ICsgMSxcbiAgICAgIGFsbFN0ZXA6IF90aGlzLmhpc3RvcnkubGVuZ3RoLFxuICAgICAgZGlzYWJsZVJlZG86IF90aGlzLmhpc3RvcnlJbmRleCA9PT0gX3RoaXMuaGlzdG9yeS5sZW5ndGggLSAxLFxuICAgICAgZGlzYWJsZVVuZG86IF90aGlzLmhpc3RvcnlJbmRleCA9PT0gMFxuICAgIH07XG4gIH07XG5cbiAgdGhpcy5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICBfdGhpcy5oaXN0b3J5ID0gW107XG4gICAgX3RoaXMuaGlzdG9yeUluZGV4ID0gLTE7XG4gIH07XG5cbiAgdGhpcy5oaXN0b3J5ID0gW107XG4gIHRoaXMuaGlzdG9yeUluZGV4ID0gLTE7XG59O1xuXG4vKipcclxuICpcclxuICogQHBhcmFtIERhdGEg55So5oi355qE5pWw5o2uXHJcbiAqXHJcbiAqIEByZXR1cm5zIERhdGFcclxuICovXG52YXIgZGF0YUNoZWNraW5nID0gZnVuY3Rpb24gZGF0YUNoZWNraW5nKCkge1xuICB2YXIgZGF0YSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge1xuICAgIG5vZGVzOiBbXSxcbiAgICBlZGdlczogW11cbiAgfTtcbiAgdmFyIF9kYXRhJGVkZ2VzID0gZGF0YS5lZGdlcyxcbiAgICAgIGVkZ2VzID0gX2RhdGEkZWRnZXMgPT09IHZvaWQgMCA/IFtdIDogX2RhdGEkZWRnZXMsXG4gICAgICBfZGF0YSRub2RlcyA9IGRhdGEubm9kZXMsXG4gICAgICBub2RlcyA9IF9kYXRhJG5vZGVzID09PSB2b2lkIDAgPyBbXSA6IF9kYXRhJG5vZGVzO1xuICAvKiogbm9kZXMgKi9cblxuICB2YXIgbm9kZUlkcyA9IFtdO1xuICB2YXIgZ3JhcGhpbk5vZGVzID0gbm9kZXMuZmlsdGVyKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgdmFyIGlkID0gbm9kZS5pZDtcbiAgICAvKiog5aaC5p6c6IqC54K55LiN5a2Y5Zyo77yM5YiZ5b+955Wl6K+l6IqC54K5ICovXG5cbiAgICBpZiAoIWlkKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJub2RlIHJlcXVpcmVzIGFuIGlkXFx1RkYwQ3RoaXMgJ1wiLmNvbmNhdChKU09OLnN0cmluZ2lmeShub2RlKSwgXCInIG5vZGUgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGZpbHRlcmVkXCIpKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIW5vZGUuZGF0YSkge1xuICAgICAgY29uc29sZS53YXJuKFwibm9kZSByZXF1aXJlcyBhbiBkYXRhIGZpZWxkXFx1RkYwQ3RoaXMgJ1wiLmNvbmNhdChKU09OLnN0cmluZ2lmeShub2RlKSwgXCInIG5vZGUgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGZpbHRlcmVkXCIpKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLyoqIOWmguaenOiKgueCuUlE5a2Y5Zyo6YeN5aSN77yM5YiZ5b+955Wl5ZCO5Yqg5YWl55qE6IqC54K5ICovXG5cblxuICAgIGlmIChub2RlSWRzLmluZGV4T2YoaWQpICE9PSAtMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIG5vZGVJZHMucHVzaChpZCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0pLm1hcChmdW5jdGlvbiAobm9kZSkge1xuICAgIHJldHVybiBfb2JqZWN0U3ByZWFkMih7XG4gICAgICBzaGFwZTogbm9kZS5zaGFwZSB8fCAnQ2lyY2xlTm9kZSdcbiAgICB9LCBub2RlKTtcbiAgfSk7XG4gIC8qKiBlZGdlcyAqL1xuXG4gIHZhciBncmFwaGluRWRnZXMgPSBlZGdlcy5maWx0ZXIoZnVuY3Rpb24gKGVkZ2UpIHtcbiAgICB2YXIgc291cmNlID0gZWRnZS5zb3VyY2UsXG4gICAgICAgIHRhcmdldCA9IGVkZ2UudGFyZ2V0O1xuXG4gICAgaWYgKCFzb3VyY2UgfHwgIXRhcmdldCkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUubG9nKFwiZWRnZSByZXF1aXJlcyAgc291cmNlIGFuZCB0YXJnZXRcXHVGRjBDdGhpcyAnXCIuY29uY2F0KEpTT04uc3RyaW5naWZ5KGVkZ2UpLCBcIicgZWRnZSB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgZmlsdGVyZWRcIikpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICghZWRnZS5kYXRhKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS5sb2coXCJlZGdlIHJlcXVpcmVzIGFuIGRhdGEgZmllbGRcXHVGRjBDdGhpcyAnXCIuY29uY2F0KEpTT04uc3RyaW5naWZ5KGVkZ2UpLCBcIicgZWRnZSB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgZmlsdGVyZWRcIikpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKiog6L655piv5Y+v5Lul6YeN5aSN55qE77yM5Zug5Li6cHJvcGVydGllc+WPr+iDveS4jeS4gOagtyAqL1xuXG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSkubWFwKGZ1bmN0aW9uIChlZGdlKSB7XG4gICAgdmFyIHNvdXJjZSA9IGVkZ2Uuc291cmNlLFxuICAgICAgICB0YXJnZXQgPSBlZGdlLnRhcmdldCxcbiAgICAgICAgc2hhcGUgPSBlZGdlLnNoYXBlLFxuICAgICAgICBzdHlsZSA9IGVkZ2Uuc3R5bGU7XG4gICAgcmV0dXJuIF9vYmplY3RTcHJlYWQyKHtcbiAgICAgIHNoYXBlOiBzaGFwZSB8fCBzb3VyY2UgPT09IHRhcmdldCA/ICdsb29wJyA6ICdMaW5lRWRnZScsXG4gICAgICBzdHlsZTogc3R5bGUgfHwge1xuICAgICAgICBlbmRBcnJvdzogdHJ1ZSxcbiAgICAgICAgc3Ryb2tlOiAnI2RkZCcsXG4gICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgICBsaW5lV2lkdGg6IDEuNSxcbiAgICAgICAgbGluZUFwcGVuZFdpZHRoOiAxMFxuICAgICAgfSxcbiAgICAgIGxvb3BDZmc6IHtcbiAgICAgICAgcG9zaXRpb246ICd0b3AnLFxuICAgICAgICBkaXN0OiAyMFxuICAgICAgfVxuICAgIH0sIGVkZ2UpO1xuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBub2RlczogZ3JhcGhpbk5vZGVzLFxuICAgIGVkZ2VzOiBncmFwaGluRWRnZXNcbiAgfTtcbn07XG5cbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0geyp9IGRhdGFcclxuICog5aaC5p6c5pivbm9kZXPvvIzliJnov5Tlm55ub2Rlc++8jOWmguaenOi+k+WFpeeahOaYr25vZGVz5ZKMZWRnZXPnmoTlr7nosaHvvIzliJnov5Tlm57lr7nlupTnmoTlr7nosaFcclxuICogQHBhcmFtIHsqfSBjZmdcclxuICovXG52YXIgY2lyY2xlTGF5b3V0ID0gZnVuY3Rpb24gY2lyY2xlTGF5b3V0KGRhdGEsIGNmZykge1xuICB2YXIgeCA9IGNmZy54LFxuICAgICAgeSA9IGNmZy55LFxuICAgICAgciA9IGNmZy5yO1xuICB2YXIgc3RhcnRYID0geDtcbiAgdmFyIHN0YXJ0WSA9IHk7XG4gIHZhciBSUiA9IHI7XG4gIHZhciBlZGdlcyA9IGRhdGEuZWRnZXMsXG4gICAgICBub2RlcyA9IGRhdGEubm9kZXM7XG4gIHZhciBsZW5ndGggPSBub2Rlcy5sZW5ndGg7XG4gIHZhciBuZXdOb2RlcyA9IG5vZGVzLm1hcChmdW5jdGlvbiAobm9kZSwgaW5kZXgpIHtcbiAgICB2YXIgaXNDZW50ZXJOb2RlID0gbm9kZS54ID09PSBzdGFydFggJiYgbm9kZS55ID09PSBzdGFydFk7XG4gICAgdmFyIGlzQ2VudGVyID0gISFpc0NlbnRlck5vZGU7XG4gICAgdmFyIFIgPSBpc0NlbnRlck5vZGUgPyAwIDogUlI7XG4gICAgdmFyIGFuZ2xlID0gaW5kZXggLyBsZW5ndGggKiAyICogTWF0aC5QSTtcbiAgICByZXR1cm4gX29iamVjdFNwcmVhZDIoe30sIG5vZGUsIHtcbiAgICAgIHg6IGlzQ2VudGVyID8gc3RhcnRYIDogc3RhcnRYICsgUiAqIE1hdGguY29zKGFuZ2xlKSxcbiAgICAgIHk6IGlzQ2VudGVyID8gc3RhcnRZIDogc3RhcnRZICsgUiAqIE1hdGguc2luKGFuZ2xlKSxcbiAgICAgIGxheW91dDogX29iamVjdFNwcmVhZDIoe30sIG5vZGUubGF5b3V0LCB7XG4gICAgICAgIGNpcmNsZToge1xuICAgICAgICAgIHg6IHN0YXJ0WCxcbiAgICAgICAgICB5OiBzdGFydFksXG4gICAgICAgICAgdGhldGE6IGFuZ2xlLFxuICAgICAgICAgIGlzQ2VudGVyOiBpc0NlbnRlclxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pO1xuICB9KTtcblxuICBpZiAoZWRnZXMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbm9kZXM6IG5ld05vZGVzLFxuICAgICAgZWRnZXM6IGVkZ2VzXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBuZXdOb2Rlcztcbn07XG5cbnZhciByYWRpYWxMYXlvdXQgPSBmdW5jdGlvbiByYWRpYWxMYXlvdXQoZGF0YSwgb3B0aW9ucykge1xuICB2YXIgc291cmNlID0gY2xvbmVEZWVwKGRhdGEpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbmV3LWNhcFxuXG4gIHZhciBsYXlvdXQgPSBuZXcgRzYuTGF5b3V0LnJhZGlhbChfb2JqZWN0U3ByZWFkMih7fSwgb3B0aW9ucykpO1xuICBsYXlvdXQuaW5pdChzb3VyY2UpO1xuICBsYXlvdXQuZXhlY3V0ZSgpO1xuICByZXR1cm4ge1xuICAgIG5vZGVzOiBsYXlvdXQubm9kZXMsXG4gICAgZWRnZXM6IGRhdGEuZWRnZXNcbiAgfTtcbn07XG5cbnZhciBnZXREZWdyZWUgPSBmdW5jdGlvbiBnZXREZWdyZWUobm9kZSwgZWRnZXMpIHtcbiAgdmFyIG5vZGVJZCA9IG5vZGUuZGF0YS5pZDtcbiAgdmFyIGluZGV4ID0gMDtcbiAgZWRnZXMuZm9yRWFjaChmdW5jdGlvbiAoZWRnZSkge1xuICAgIGlmIChlZGdlLmRhdGEuc291cmNlID09PSBub2RlSWQgfHwgZWRnZS5kYXRhLnRhcmdldCA9PT0gbm9kZUlkKSB7XG4gICAgICBpbmRleCA9IGluZGV4ICsgMTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gaW5kZXg7XG59O1xuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSB7Kn0gbiBu5Liq5ZyG5rK/552A5aSn5ZyG5o6S5YiXLOagueaNruW8p+mVv+WFrOW8jyAgMipNYXRoLlBJKlIgPSAyKnIqbiArZ2FwKm5cclxuICogQHBhcmFtIHsqfSByIOWwj+WchueahOWNiuW+hHJcclxuICpcclxuICovXG4vLyBleHBvcnQgY29uc3QgZ2V0Q2lyY2xlUiA9IChuOiBudW1iZXIsIHI6IG51bWJlciwgZ2FwID0gOCkgPT4ge1xuLy8gICAgIGNvbnN0IFIgPSAoMiAqIHIgKiBuICsgZ2FwICogbikgLyAoMiAqIE1hdGguUEkpO1xuLy8gICAgIHJldHVybiBSO1xuLy8gfTtcblxudmFyIG1ha2VCb3VuZGluZ0JveCA9IGZ1bmN0aW9uIG1ha2VCb3VuZGluZ0JveChiYikge1xuICBpZiAoYmIueDIgIT0gbnVsbCAmJiBiYi55MiAhPSBudWxsICYmIGJiLngyID49IGJiLngxICYmIGJiLnkyID49IGJiLnkxKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHgxOiBiYi54MSxcbiAgICAgIHkxOiBiYi55MSxcbiAgICAgIHgyOiBiYi54MixcbiAgICAgIHkyOiBiYi55MixcbiAgICAgIHc6IGJiLngyIC0gYmIueDEsXG4gICAgICBoOiBiYi55MiAtIGJiLnkxXG4gICAgfTtcbiAgfVxuXG4gIGlmIChiYi53ID49IDAgJiYgYmIuaCA+PSAwKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHgxOiBiYi54MSxcbiAgICAgIHkxOiBiYi55MSxcbiAgICAgIHgyOiBiYi54MSArIGJiLncsXG4gICAgICB5MjogYmIueTEgKyBiYi5oLFxuICAgICAgdzogYmIudyxcbiAgICAgIGg6IGJiLmhcbiAgICB9O1xuICB9XG59O1xudmFyIGRlZmF1bHRzID0ge1xuICBmaXQ6IHRydWUsXG4gIHBhZGRpbmc6IDMwLFxuICBzdGFydEFuZ2xlOiAzIC8gMiAqIE1hdGguUEksXG4gIHN3ZWVwOiB1bmRlZmluZWQsXG4gIGNsb2Nrd2lzZTogdHJ1ZSxcbiAgZXF1aWRpc3RhbnQ6IGZhbHNlLFxuICBtaW5Ob2RlU3BhY2luZzogMTAsXG4gIGJvdW5kaW5nQm94OiB1bmRlZmluZWQsXG4gIGF2b2lkT3ZlcmxhcDogdHJ1ZSxcbiAgbm9kZURpbWVuc2lvbnNJbmNsdWRlTGFiZWxzOiBmYWxzZSxcbiAgaGVpZ2h0OiB1bmRlZmluZWQsXG4gIHdpZHRoOiB1bmRlZmluZWQsXG4gIHNwYWNpbmdGYWN0b3I6IHVuZGVmaW5lZCxcbiAgLy8gY29uY2VudHJpYyhub2RlOiBhbnkpIHtcbiAgLy8gICAgIC8vIHJldHVybnMgbnVtZXJpYyB2YWx1ZSBmb3IgZWFjaCBub2RlLCBwbGFjaW5nIGhpZ2hlciBub2RlcyBpbiBsZXZlbHMgdG93YXJkcyB0aGUgY2VudHJlXG4gIC8vICAgICByZXR1cm4gbm9kZS5kZWdyZWUoKTtcbiAgLy8gfSxcbiAgLy8gbGV2ZWxXaWR0aChub2RlczogYW55KSB7XG4gIC8vICAgICAvLyB0aGUgbGV0aWF0aW9uIG9mIGNvbmNlbnRyaWMgdmFsdWVzIGluIGVhY2ggbGV2ZWxcbiAgLy8gICAgIHJldHVybiBub2Rlcy5tYXhEZWdyZWUoKSAvIDQ7XG4gIC8vIH0sXG4gIGFuaW1hdGU6IGZhbHNlLFxuICBhbmltYXRpb25EdXJhdGlvbjogNTAwLFxuICBhbmltYXRpb25FYXNpbmc6IHVuZGVmaW5lZCxcbiAgLy8gYW5pbWF0ZUZpbHRlcigpIHtcbiAgLy8gICAgIHJldHVybiB0cnVlO1xuICAvLyB9LCAvLyBhIGZ1bmN0aW9uIHRoYXQgZGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBub2RlIHNob3VsZCBiZSBhbmltYXRlZC4gIEFsbCBub2RlcyBhbmltYXRlZCBieSBkZWZhdWx0IG9uIGFuaW1hdGUgZW5hYmxlZC4gIE5vbi1hbmltYXRlZCBub2RlcyBhcmUgcG9zaXRpb25lZCBpbW1lZGlhdGVseSB3aGVuIHRoZSBsYXlvdXQgc3RhcnRzXG4gIHJlYWR5OiB1bmRlZmluZWQsXG4gIHN0b3A6IHVuZGVmaW5lZFxufTtcblxudmFyIENvbmNlbnRyaWNMYXlvdXQgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBDb25jZW50cmljTGF5b3V0KG9wdGlvbnMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29uY2VudHJpY0xheW91dCk7XG5cbiAgICB2YXIgZWRnZXMgPSBvcHRpb25zLmRhdGEuZWRnZXM7XG4gICAgdGhpcy5vcHRpb25zID0gX29iamVjdFNwcmVhZDIoe30sIGRlZmF1bHRzLCB7fSwge1xuICAgICAgY29uY2VudHJpYzogZnVuY3Rpb24gY29uY2VudHJpYyhub2RlKSB7XG4gICAgICAgIHJldHVybiBnZXREZWdyZWUobm9kZSwgZWRnZXMpO1xuICAgICAgfVxuICAgIH0sIHt9LCBvcHRpb25zKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhDb25jZW50cmljTGF5b3V0LCBbe1xuICAgIGtleTogXCJydW5cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcnVuKCkge1xuICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICB2YXIgY2xvY2t3aXNlID0gb3B0aW9ucy5jb3VudGVyY2xvY2t3aXNlICE9PSB1bmRlZmluZWQgPyAhb3B0aW9ucy5jb3VudGVyY2xvY2t3aXNlIDogb3B0aW9ucy5jbG9ja3dpc2U7XG4gICAgICB2YXIgbm9kZXMgPSB0aGlzLm9wdGlvbnMuZGF0YS5ub2RlcztcbiAgICAgIHZhciBiYiA9IG1ha2VCb3VuZGluZ0JveChvcHRpb25zLmJvdW5kaW5nQm94ID8gb3B0aW9ucy5ib3VuZGluZ0JveCA6IHtcbiAgICAgICAgeDE6IDAsXG4gICAgICAgIHkxOiAwLFxuICAgICAgICB3OiBvcHRpb25zLndpZHRoLFxuICAgICAgICBoOiBvcHRpb25zLmhlaWdodFxuICAgICAgfSk7XG4gICAgICB2YXIgY2VudGVyID0ge1xuICAgICAgICB4OiBiYi54MSArIGJiLncgLyAyLFxuICAgICAgICB5OiBiYi55MSArIGJiLmggLyAyXG4gICAgICB9O1xuICAgICAgdmFyIG1heE5vZGVTaXplID0gMDsgLy8g6K6h566X5q+P5Liq6IqC54K555qEY29uY2VudHJpY+adg+mHjXZhbHVlXG5cbiAgICAgIHZhciBub2RlVmFsdWVzID0gbm9kZXMubWFwKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsdWU6IG9wdGlvbnMuY29uY2VudHJpYyhub2RlKSxcbiAgICAgICAgICBub2RlOiBub2RlXG4gICAgICAgIH07XG4gICAgICB9KS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBiLnZhbHVlIC0gYS52YWx1ZTtcbiAgICAgIH0pOyAvLyBtYXhOb2RlU2l6ZSA9IE1hdGgubWF4KG1heE5vZGVTaXplLCBuYmIudywgbmJiLmgpO1xuXG4gICAgICBtYXhOb2RlU2l6ZSA9IDUwO1xuICAgICAgdmFyIG1heERlZ3JlZSA9IG5vZGVWYWx1ZXNbMF0udmFsdWU7XG4gICAgICB2YXIgbGV2ZWxXaWR0aCA9IG9wdGlvbnMubGV2ZWxXaWR0aChub2RlcywgbWF4RGVncmVlKTsgLy8gcHV0IHRoZSB2YWx1ZXMgaW50byBsZXZlbHNcblxuICAgICAgdmFyIGxldmVscyA9IFtbXV07XG4gICAgICB2YXIgY3VycmVudExldmVsID0gbGV2ZWxzWzBdO1xuICAgICAgbm9kZVZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIGlmIChjdXJyZW50TGV2ZWwubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHZhciBmaXJzdEl0ZW0gPSBjdXJyZW50TGV2ZWxbMF0udmFsdWU7XG4gICAgICAgICAgdmFyIGRpZmYgPSBNYXRoLmFicyhmaXJzdEl0ZW0gLSBub2RlLnZhbHVlKTtcblxuICAgICAgICAgIGlmIChkaWZmID49IGxldmVsV2lkdGgpIHtcbiAgICAgICAgICAgIGN1cnJlbnRMZXZlbCA9IFtdO1xuICAgICAgICAgICAgbGV2ZWxzLnB1c2goY3VycmVudExldmVsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjdXJyZW50TGV2ZWwucHVzaChub2RlKTtcbiAgICAgIH0pOyAvLyBjcmVhdGUgcG9zaXRpb25zIGZyb20gbGV2ZWxzXG5cbiAgICAgIHZhciBtaW5EaXN0ID0gbWF4Tm9kZVNpemUgKyBvcHRpb25zLm1pbk5vZGVTcGFjaW5nOyAvLyBtaW4gZGlzdCBiZXR3ZWVuIG5vZGVzXG5cbiAgICAgIGlmICghb3B0aW9ucy5hdm9pZE92ZXJsYXApIHtcbiAgICAgICAgLy8gdGhlbiBzdHJpY3RseSBjb25zdHJhaW4gdG8gYmJcbiAgICAgICAgdmFyIGZpcnN0THZsSGFzTXVsdGkgPSBsZXZlbHMubGVuZ3RoID4gMCAmJiBsZXZlbHNbMF0ubGVuZ3RoID4gMTtcbiAgICAgICAgdmFyIG1heFIgPSBNYXRoLm1pbihiYi53LCBiYi5oKSAvIDIgLSBtaW5EaXN0O1xuICAgICAgICB2YXIgclN0ZXAgPSBtYXhSIC8gKGxldmVscy5sZW5ndGggKyAoZmlyc3RMdmxIYXNNdWx0aSA/IDEgOiAwKSk7XG4gICAgICAgIG1pbkRpc3QgPSBNYXRoLm1pbihtaW5EaXN0LCByU3RlcCk7XG4gICAgICB9IC8vIGZpbmQgdGhlIG1ldHJpY3MgZm9yIGVhY2ggbGV2ZWxcblxuXG4gICAgICB2YXIgciA9IDA7XG4gICAgICBsZXZlbHMuZm9yRWFjaChmdW5jdGlvbiAobGV2ZWwpIHtcbiAgICAgICAgdmFyIHN3ZWVwID0gb3B0aW9ucy5zd2VlcCA9PT0gdW5kZWZpbmVkID8gMiAqIE1hdGguUEkgLSAyICogTWF0aC5QSSAvIGxldmVsLmxlbmd0aCA6IG9wdGlvbnMuc3dlZXA7XG4gICAgICAgIGxldmVsLmRUaGV0YSA9IHN3ZWVwIC8gTWF0aC5tYXgoMSwgbGV2ZWwubGVuZ3RoIC0gMSk7XG4gICAgICAgIHZhciBkVGhldGEgPSBsZXZlbC5kVGhldGE7IC8vIGNhbGN1bGF0ZSB0aGUgcmFkaXVzXG5cbiAgICAgICAgaWYgKGxldmVsLmxlbmd0aCA+IDEgJiYgb3B0aW9ucy5hdm9pZE92ZXJsYXApIHtcbiAgICAgICAgICAvLyBidXQgb25seSBpZiBtb3JlIHRoYW4gb25lIG5vZGUgKGNhbid0IG92ZXJsYXApXG4gICAgICAgICAgdmFyIGRjb3MgPSBNYXRoLmNvcyhkVGhldGEpIC0gTWF0aC5jb3MoMCk7XG4gICAgICAgICAgdmFyIGRzaW4gPSBNYXRoLnNpbihkVGhldGEpIC0gTWF0aC5zaW4oMCk7XG4gICAgICAgICAgdmFyIHJNaW4gPSBNYXRoLnNxcnQobWluRGlzdCAqIG1pbkRpc3QgLyAoZGNvcyAqIGRjb3MgKyBkc2luICogZHNpbikpOyAvLyBzLnQuIG5vIG5vZGVzIG92ZXJsYXBwaW5nXG5cbiAgICAgICAgICByID0gTWF0aC5tYXgock1pbiwgcik7XG4gICAgICAgIH1cblxuICAgICAgICBsZXZlbC5yID0gcjtcbiAgICAgICAgciArPSBtaW5EaXN0O1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChvcHRpb25zLmVxdWlkaXN0YW50KSB7XG4gICAgICAgIHZhciByRGVsdGFNYXggPSAwO1xuICAgICAgICB2YXIgcmFkaXVzID0gMDtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxldmVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBsZXZlbCA9IGxldmVsc1tpXTtcbiAgICAgICAgICB2YXIgckRlbHRhID0gbGV2ZWwuciAtIHJhZGl1cztcbiAgICAgICAgICByRGVsdGFNYXggPSBNYXRoLm1heChyRGVsdGFNYXgsIHJEZWx0YSk7XG4gICAgICAgIH1cblxuICAgICAgICByYWRpdXMgPSAwO1xuXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsZXZlbHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgdmFyIF9sZXZlbCA9IGxldmVsc1tfaV07XG5cbiAgICAgICAgICBpZiAoX2kgPT09IDApIHtcbiAgICAgICAgICAgIHJhZGl1cyA9IF9sZXZlbC5yO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF9sZXZlbC5yID0gcmFkaXVzO1xuICAgICAgICAgIHJhZGl1cyArPSByRGVsdGFNYXg7XG4gICAgICAgIH1cbiAgICAgIH0gLy8gY2FsY3VsYXRlIHRoZSBub2RlIHBvc2l0aW9uc1xuXG5cbiAgICAgIHZhciBwb3MgPSB7fTsgLy8gaWQgPT4gcG9zaXRpb25cblxuICAgICAgdmFyIG91dGVyUiA9IFtdLmNvbmNhdChsZXZlbHMpLnBvcCgpLnI7XG4gICAgICB2YXIgcmVzdWx0ID0gW107XG5cbiAgICAgIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IGxldmVscy5sZW5ndGg7IF9pMisrKSB7XG4gICAgICAgIHZhciBfbGV2ZWwyID0gbGV2ZWxzW19pMl07XG4gICAgICAgIHZhciBkVGhldGEgPSBfbGV2ZWwyLmRUaGV0YTtcbiAgICAgICAgdmFyIF9yYWRpdXMgPSBfbGV2ZWwyLnI7XG5cbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBfbGV2ZWwyLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgdmFyIHZhbCA9IF9sZXZlbDJbal07XG4gICAgICAgICAgdmFyIHRoZXRhID0gb3B0aW9ucy5zdGFydEFuZ2xlICsgKGNsb2Nrd2lzZSA/IDEgOiAtMSkgKiBkVGhldGEgKiBqO1xuICAgICAgICAgIHZhciBwID0ge1xuICAgICAgICAgICAgeDogY2VudGVyLnggKyBfcmFkaXVzICogTWF0aC5jb3ModGhldGEpLFxuICAgICAgICAgICAgeTogY2VudGVyLnkgKyBfcmFkaXVzICogTWF0aC5zaW4odGhldGEpXG4gICAgICAgICAgfTtcbiAgICAgICAgICBwb3NbdmFsLm5vZGUuZGF0YS5pZF0gPSBwO1xuICAgICAgICAgIHJlc3VsdC5wdXNoKF9vYmplY3RTcHJlYWQyKHt9LCB2YWwubm9kZSwge1xuICAgICAgICAgICAgZGF0YTogdmFsLm5vZGUuZGF0YSxcbiAgICAgICAgICAgIGRlZ3JlZTogdmFsLnZhbHVlLFxuICAgICAgICAgICAgbGF5b3V0OiBfb2JqZWN0U3ByZWFkMih7fSwgdmFsLm5vZGUubGF5b3V0LCB7XG4gICAgICAgICAgICAgIGNvbmNlbnRyaWM6IHtcbiAgICAgICAgICAgICAgICBvdXRlclI6IG91dGVyUixcbiAgICAgICAgICAgICAgICBjZW50ZXI6IGNlbnRlcixcbiAgICAgICAgICAgICAgICB0aGV0YTogdGhldGFcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB4OiBwLngsXG4gICAgICAgICAgICB5OiBwLnlcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIGVkZ2VzID0gb3B0aW9ucy5kYXRhLmVkZ2VzO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgb3V0ZXJSOiBvdXRlclIsXG4gICAgICAgIGxldmVsczogbGV2ZWxzLFxuICAgICAgICBub2RlczogcmVzdWx0LFxuICAgICAgICBlZGdlczogZWRnZXNcbiAgICAgIH07XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIENvbmNlbnRyaWNMYXlvdXQ7XG59KCk7XG5cbi8qKlxyXG4gKiDlkJHph4/ov5DnrpcgWW91dHViZeaVmeeoi++8mmh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9S3RpMm1OS0RPVHcmbGlzdD1QTEE5NDcwRDY0NTc5NTAwQ0UmaW5kZXg9NlxyXG4gKlxyXG4gKiDlkJHph4/mnIkz5Liq5a655piT5re35reG5qaC5b+1XHJcbiAqIHNjYWxhciBNdWx0aXAg57O75pWw56evXHJcbiAqIGRvdCBQcm9kdWN0IOWGheenry/ngrnnp69cclxuICogY3Jvc3MgcHJvZHVjdCDlpJbnp68v5pyJ5ZCR56evXHJcbiAqL1xudmFyIFZlY3RvciA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFZlY3Rvcih4LCB5KSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFZlY3Rvcik7XG5cbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoVmVjdG9yLCBbe1xuICAgIGtleTogXCJnZXR2ZWNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0dmVjKCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImFkZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGQodjIpIHtcbiAgICAgIHJldHVybiBuZXcgVmVjdG9yKHRoaXMueCArIHYyLngsIHRoaXMueSArIHYyLnkpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzdWJ0cmFjdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzdWJ0cmFjdCh2Mikge1xuICAgICAgcmV0dXJuIG5ldyBWZWN0b3IodGhpcy54IC0gdjIueCwgdGhpcy55IC0gdjIueSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm1hZ25pdHVkZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBtYWduaXR1ZGUoKSB7XG4gICAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm5vcm1hbGlzZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBub3JtYWxpc2UoKSB7XG4gICAgICByZXR1cm4gdGhpcy5kaXZpZGUodGhpcy5tYWduaXR1ZGUoKSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImRpdmlkZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkaXZpZGUobikge1xuICAgICAgcmV0dXJuIG5ldyBWZWN0b3IodGhpcy54IC8gbiB8fCAwLCB0aGlzLnkgLyBuIHx8IDApO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzY2FsYXJNdWx0aXBcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2NhbGFyTXVsdGlwKG4pIHtcbiAgICAgIHJldHVybiBuZXcgVmVjdG9yKHRoaXMueCAqIG4sIHRoaXMueSAqIG4pO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBWZWN0b3I7XG59KCk7XG5cbnZhciBQb2ludCA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFBvaW50KHBvc2l0aW9uLCBpZCwgZGF0YSkge1xuICAgIHZhciBtYXNzID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiAxLjA7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUG9pbnQpO1xuXG4gICAgdGhpcy5wID0gcG9zaXRpb247IC8vIOeCueeahOS9jee9ru+8jOeUqFt4LHld5ZCR6YeP5p2l6KGo56S6XG5cbiAgICB0aGlzLm0gPSBtYXNzOyAvLyDngrnnmoTotKjph4/vvIzpu5jorqTkuLoxLjBcblxuICAgIHRoaXMudiA9IG5ldyBWZWN0b3IoMCwgMCk7IC8vIOmAn+W6pu+8jOWIneWni+WAvOS4uuWQkemHj+mbtiBbMCwwXSB2ZWxvY2l0eSwgaW5pdCB3aXRoIHg9MCwgeT0wXG5cbiAgICB0aGlzLmEgPSBuZXcgVmVjdG9yKDAsIDApOyAvLyDliqDpgJ/luqbvvIzliJ3lp4vlgLzkuLrlkJHph4/pm7YgWzAsMF0gYWNjZWxlcmF0aW9uLCBpbml0IHdpdGggeD0wLCB5PTBcblxuICAgIHRoaXMuaWQgPSBpZDsgLy8g54K555qE5ZSv5LiASUQgIGlkIG9mIFBvaW50LCBkZWZhdWx0cyB0byAtMVxuXG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhQb2ludCwgW3tcbiAgICBrZXk6IFwidXBkYXRlQWNjXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUFjYyhmb3JjZSkge1xuICAgICAgLyoqXHJcbiAgICAgICAqIOWKoOmAn+W6puS5n+aYr+S4gOS4quWQkemHj++8jOagueaNruWKm+eahOW5s+ihjOWbm+i+ueW9ouazleWImei/m+ihjOWKm+eahOWQiOaIkO+8jOeUqOWQkemHj+i/kOeul+WwseaYr+WKoOi/kOeul1xyXG4gICAgICAgKi9cbiAgICAgIHRoaXMuYSA9IHRoaXMuYS5hZGQoZm9yY2UuZGl2aWRlKHRoaXMubSkpOyAvLyBhID0gYSArIEYvbVxuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQb2ludDtcbn0oKTtcblxudmFyIE5vZGUgPSBmdW5jdGlvbiBOb2RlKGRhdGEpIHtcbiAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE5vZGUpO1xuXG4gIHRoaXMuaWQgPSBkYXRhLmlkO1xuICB0aGlzLmRhdGEgPSBkYXRhIHx8IHt9O1xufTtcbnZhciBFZGdlID0gZnVuY3Rpb24gRWRnZShpZCwgc291cmNlLCB0YXJnZXQsIGRhdGEpIHtcbiAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEVkZ2UpO1xuXG4gIHRoaXMuaWQgPSBpZDtcbiAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICB0aGlzLmRhdGEgPSBkYXRhIHx8IHt9O1xufTtcblxudmFyIFNwcmluZyA9IGZ1bmN0aW9uIFNwcmluZyhzb3VyY2UsIHRhcmdldCwgbGVuZ3RoKSB7XG4gIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTcHJpbmcpO1xuXG4gIHRoaXMuc291cmNlID0gc291cmNlO1xuICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG59O1xuXG52YXIgU1BFRUQgPSA1OyAvLyDmoLnmja7oioLngrnnmoTlpKflsI/lj6/ku6Xoh6rliqjorr7nva7pgJ/luqbnmoTlpKflsI9cblxudmFyIEZvcmNlTGF5b3V0ID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gRm9yY2VMYXlvdXQob3B0aW9ucykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRm9yY2VMYXlvdXQpO1xuXG4gICAgdGhpcy5nZXRNYXNzID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIHZhciBfcmVmID0gbm9kZS5sYXlvdXQgfHwge30sXG4gICAgICAgICAgX3JlZiRkZWdyZWUgPSBfcmVmLmRlZ3JlZSxcbiAgICAgICAgICBkZWdyZWUgPSBfcmVmJGRlZ3JlZSA9PT0gdm9pZCAwID8gZ2V0RGVncmVlKG5vZGUsIF90aGlzLmVkZ2VzKSA6IF9yZWYkZGVncmVlLFxuICAgICAgICAgIGZvcmNlID0gX3JlZi5mb3JjZTtcbiAgICAgIC8qKiDlvZPkvaDlnKhsYXlvdXQuZm9yY2UubWFzc+S4reWItuWumuS6huaJjeS9v+eUqCAqL1xuXG5cbiAgICAgIGlmIChmb3JjZSAmJiBmb3JjZS5tYXNzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuICAgICAgICByZXR1cm4gZm9yY2UubWFzcztcbiAgICAgIH1cbiAgICAgIC8qKiDpu5jorqTotKjph4/pg73mmK/pgJrov4foioLngrnnmoTluqbmlbDoh6rliqjorqHnrpfnmoQgKi9cblxuXG4gICAgICByZXR1cm4gZGVncmVlIDwgNSA/IDEgOiBkZWdyZWUgKiAxMDtcbiAgICB9O1xuXG4gICAgdGhpcy5yZXN0YXJ0ID0gZnVuY3Rpb24gKGRyYWdOb2RlLCBncmFwaCkge1xuICAgICAgLyoqIOWwhuS9jee9ruabtOaWsOWIsG5vZGVQb2ludOS4rSAqL1xuICAgICAgdmFyIGlnbm9yZSA9IF90aGlzLnByb3BzLmlnbm9yZTtcbiAgICAgIGdyYXBoLmdldE5vZGVzKCkuZm9yRWFjaChmdW5jdGlvbiAobm9kZUl0ZW0pIHtcbiAgICAgICAgdmFyIG5vZGUgPSBub2RlSXRlbS5nZXQoJ21vZGVsJyk7XG5cbiAgICAgICAgaWYgKGlnbm9yZSAmJiBpZ25vcmUobm9kZSkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdmVjID0gbmV3IFZlY3Rvcihub2RlLngsIG5vZGUueSk7XG5cbiAgICAgICAgdmFyIHBvaW50ID0gX3RoaXMubm9kZVBvaW50cy5nZXQobm9kZS5pZCk7XG5cbiAgICAgICAgaWYgKHBvaW50KSB7XG4gICAgICAgICAgcG9pbnQucCA9IHZlYztcblxuICAgICAgICAgIF90aGlzLm5vZGVQb2ludHMuc2V0KG5vZGUuaWQsIHBvaW50KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHZhciBjaGFuZ2VOb2RlUG9zaXRpb24gPSBmdW5jdGlvbiBjaGFuZ2VOb2RlUG9zaXRpb24obm9kZSkge1xuICAgICAgICB2YXIgdmVjID0gbmV3IFZlY3Rvcihub2RlLngsIG5vZGUueSk7IC8vIGNvbnN0IG1hc3MgPSAobm9kZS5sYXlvdXQgJiYgbm9kZS5sYXlvdXQuZm9yY2UgJiYgbm9kZS5sYXlvdXQuZm9yY2UubWFzcykgfHwgMTAwMDAwO1xuXG4gICAgICAgIHZhciBtYXNzID0gX3RoaXMuZ2V0TWFzcyhub2RlKTtcblxuICAgICAgICBfdGhpcy5ub2RlUG9pbnRzLnNldChub2RlLmlkLCBuZXcgUG9pbnQodmVjLCBub2RlLmlkLCBub2RlLmRhdGEsIG1hc3MpKTtcblxuICAgICAgICBfdGhpcy5lZGdlcy5mb3JFYWNoKGZ1bmN0aW9uIChlZGdlKSB7XG4gICAgICAgICAgdmFyIHNvdXJjZSA9IF90aGlzLm5vZGVQb2ludHMuZ2V0KGVkZ2Uuc291cmNlLmlkKTtcblxuICAgICAgICAgIHZhciB0YXJnZXQgPSBfdGhpcy5ub2RlUG9pbnRzLmdldChlZGdlLnRhcmdldC5pZCk7XG5cbiAgICAgICAgICBpZiAoc291cmNlLmlkID09PSBub2RlLmlkIHx8IHRhcmdldC5pZCA9PT0gbm9kZS5pZCkge1xuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IF90aGlzLmVkZ2VTcHJpbmdzLmdldChlZGdlLmlkKS5sZW5ndGggfHwgMTAwO1xuXG4gICAgICAgICAgICBfdGhpcy5lZGdlU3ByaW5ncy5zZXQoZWRnZS5pZCwgbmV3IFNwcmluZyhzb3VyY2UsIHRhcmdldCwgbGVuZ3RoKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07IC8vIFRPRE865pSv5oyB5aSa54K55ouW5ou9XG5cblxuICAgICAgZHJhZ05vZGUuZm9yRWFjaChjaGFuZ2VOb2RlUG9zaXRpb24pO1xuICAgICAgaWYgKF90aGlzLnByb3BzLnJlc3RhcnRBbmltYXRpb24pIF90aGlzLmFuaW1hdGlvbigpO2Vsc2UgX3RoaXMuc2xpZW5jZUZvcmNlKCk7XG4gICAgfTtcblxuICAgIHRoaXMucHJvcHMgPSB7XG4gICAgICBzdGlmZm5lc3M6IDIwMC4wLFxuICAgICAgZGVmU3ByaW5nTGVuOiAyMDAsXG4gICAgICByZXB1bHNpb246IDIwMC4wICogU1BFRUQsXG4gICAgICBkYW1waW5nOiAwLjksXG4gICAgICBtaW5FbmVyZ3lUaHJlc2hvbGQ6IDAuMSxcbiAgICAgIG1heFNwZWVkOiAxMDAwLFxuICAgICAgY291bG9tYkRpc1NjYWxlOiAwLjAwNSxcbiAgICAgIHRpY2tJbnRlcnZhbDogMC4wMixcbiAgICAgIGdyb3VwRmFjdG9yOiA0LFxuICAgICAgTWF4SXRlcmF0aW9uczogMTAwMDAsXG4gICAgICBhbmltYXRpb246IHRydWUsXG4gICAgICByZXN0YXJ0QW5pbWF0aW9uOiB0cnVlLFxuICAgICAgd2lkdGg6IDIwMCxcbiAgICAgIGhlaWdodDogMjAwXG4gICAgfTtcbiAgICB0aGlzLnVwZGF0ZU9wdGlvbnMob3B0aW9ucyk7XG4gICAgLyoqIOWtmOaUvuWZqO+8muiKgueCueS4jui+uSAqL1xuXG4gICAgdGhpcy5zb3VyY2VEYXRhID0ge1xuICAgICAgbm9kZXM6IFtdLFxuICAgICAgZWRnZXM6IFtdXG4gICAgfTtcbiAgICB0aGlzLm5vZGVzID0gW107XG4gICAgdGhpcy5lZGdlcyA9IFtdO1xuICAgIHRoaXMubm9kZVNldCA9IHt9O1xuICAgIHRoaXMuZWRnZVNldCA9IHt9O1xuICAgIHRoaXMubm9kZVBvaW50cyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmVkZ2VTcHJpbmdzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMucmVnaXN0ZXJzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgIC8qKiDorqHmlbDlmaggKi9cblxuICAgIHRoaXMuaXRlcmF0aW9ucyA9IDA7XG4gICAgdGhpcy5uZXh0RWRnZUlkID0gMDsgLy8g6L655bGe5oCn6K6h5pWw6Ieq5aKeXG5cbiAgICB0aGlzLnRpbWVyID0gMDtcbiAgICB0aGlzLmNlbnRlciA9IG5ldyBWZWN0b3IoMCwgMCk7XG4gIH1cbiAgLyoqXHJcbiAgICogSXRlcmF0ZSBvcHRpb25zIHRvIHVwZGF0ZSB0aGlzLnByb3BzXHJcbiAgICogQHBhcmFtIHsqfSBvcHRpb25zXHJcbiAgICovXG5cblxuICBfY3JlYXRlQ2xhc3MoRm9yY2VMYXlvdXQsIFt7XG4gICAga2V5OiBcInVwZGF0ZU9wdGlvbnNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlT3B0aW9ucyhvcHRpb25zKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgaWYgKCFvcHRpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgT2JqZWN0LmtleXMob3B0aW9ucykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIF90aGlzMi5wcm9wc1trZXldID0gb3B0aW9uc1trZXldO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNldERhdGFcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RGF0YShkYXRhKSB7XG4gICAgICAvLyBjbGVhbiBhbGwgZGF0YVxuICAgICAgdGhpcy5ub2RlcyA9IFtdO1xuICAgICAgdGhpcy5lZGdlcyA9IFtdO1xuICAgICAgdGhpcy5ub2RlU2V0ID0ge307XG4gICAgICB0aGlzLmVkZ2VTZXQgPSB7fTtcbiAgICAgIHRoaXMubm9kZVBvaW50cyA9IG5ldyBNYXAoKTtcbiAgICAgIHRoaXMuZWRnZVNwcmluZ3MgPSBuZXcgTWFwKCk7XG4gICAgICB0aGlzLnNvdXJjZURhdGEgPSBkYXRhOyAvLyBhZGQgbm9kZXMgYW5kIGVkZ2VzXG5cbiAgICAgIGlmICgnbm9kZXMnIGluIGRhdGEgfHwgJ2VkZ2VzJyBpbiBkYXRhKSB7XG4gICAgICAgIHRoaXMuYWRkTm9kZXMoZGF0YS5ub2Rlcyk7XG4gICAgICAgIHRoaXMuYWRkRWRnZXMoZGF0YS5lZGdlcyk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImluaXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICAvKiog5Yid5aeL5YyW54K55ZKM6L6555qE5L+h5oGvICovXG4gICAgICB2YXIgX3RoaXMkcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIHdpZHRoID0gX3RoaXMkcHJvcHMud2lkdGgsXG4gICAgICAgICAgaGVpZ2h0ID0gX3RoaXMkcHJvcHMuaGVpZ2h0O1xuICAgICAgdGhpcy5ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHZhciB4ID0gbm9kZS5kYXRhLnggfHwgd2lkdGggLyAyO1xuICAgICAgICB2YXIgeSA9IG5vZGUuZGF0YS55IHx8IGhlaWdodCAvIDI7XG4gICAgICAgIHZhciB2ZWMgPSBuZXcgVmVjdG9yKHgsIHkpO1xuXG4gICAgICAgIGlmICghbm9kZS5kYXRhLmxheW91dCkge1xuICAgICAgICAgIG5vZGUuZGF0YS5sYXlvdXQgPSB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkZWdyZWUgPSBnZXREZWdyZWUobm9kZSwgX3RoaXMzLmVkZ2VzKTtcbiAgICAgICAgbm9kZS5kYXRhLmxheW91dC5kZWdyZWUgPSBkZWdyZWU7XG5cbiAgICAgICAgdmFyIG1hc3MgPSBfdGhpczMuZ2V0TWFzcyhub2RlLmRhdGEpO1xuXG4gICAgICAgIF90aGlzMy5ub2RlUG9pbnRzLnNldChub2RlLmlkLCBuZXcgUG9pbnQodmVjLCBTdHJpbmcobm9kZS5pZCksIG5vZGUuZGF0YSwgbWFzcykpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmVkZ2VzLmZvckVhY2goZnVuY3Rpb24gKGVkZ2UpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IF90aGlzMy5ub2RlUG9pbnRzLmdldChlZGdlLnNvdXJjZS5pZCk7XG5cbiAgICAgICAgdmFyIHRhcmdldCA9IF90aGlzMy5ub2RlUG9pbnRzLmdldChlZGdlLnRhcmdldC5pZCk7XG5cbiAgICAgICAgdmFyIGxlbmd0aCA9IHNvdXJjZS5wLnN1YnRyYWN0KHRhcmdldC5wKS5tYWduaXR1ZGUoKTsgLy8g55u46YK75Lik54K555qE5ZCR6YePXG5cbiAgICAgICAgaWYgKF90aGlzMy5wcm9wcy5kZWZTcHJpbmdMZW4pIHtcbiAgICAgICAgICBsZW5ndGggPSBfdGhpczMucHJvcHMuZGVmU3ByaW5nTGVuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVkZ2UuZGF0YS5zcHJpbmcpIHtcbiAgICAgICAgICBsZW5ndGggPSBlZGdlLmRhdGEuc3ByaW5nO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMzLmVkZ2VTcHJpbmdzLnNldChlZGdlLmlkLCBuZXcgU3ByaW5nKHNvdXJjZSwgdGFyZ2V0LCBsZW5ndGgpKTtcbiAgICAgIH0pO1xuICAgICAgLyoqIOWFtuS7luWPguaVsOiuvue9riAqL1xuXG4gICAgICB2YXIgc2l6ZSA9IHRoaXMubm9kZVBvaW50cy5zaXplO1xuICAgICAgdmFyIHZ2ID0gTWF0aC5wb3coMTAsIDIpO1xuICAgICAgdGhpcy5wcm9wcy5taW5FbmVyZ3lUaHJlc2hvbGQgPSAxIC8gMiAqIE1hdGgucG93KDEsIDIpICogMSAqIHNpemUgKiB2djtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic3RhcnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICAvKiog5Yid5aeL5YyW6IqC54K5ICovXG4gICAgICB0aGlzLmluaXQoKTtcbiAgICAgIGlmICh0aGlzLnByb3BzLmFuaW1hdGlvbikgdGhpcy5hbmltYXRpb24oKTtlbHNlIHRoaXMuc2xpZW5jZUZvcmNlKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNhbFRvdGFsRW5lcmd5XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNhbFRvdGFsRW5lcmd5KCkge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIHZhciBlbmVyZ3kgPSAwLjA7XG4gICAgICB0aGlzLm5vZGVzLmZvckVhY2goZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgdmFyIHBvaW50ID0gX3RoaXM0Lm5vZGVQb2ludHMuZ2V0KG5vZGUuaWQpO1xuXG4gICAgICAgIHZhciBzcGVlZCA9IHBvaW50LnYubWFnbml0dWRlKCk7XG4gICAgICAgIHZhciBtID0gMTsgLy8gcG9pbnQubTtcblxuICAgICAgICBlbmVyZ3kgKz0gbSAqIE1hdGgucG93KHNwZWVkLCAyKSAqIDAuNTsgLy8gcCA9IDEvMioobXZeMilcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGVuZXJneTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic2xpZW5jZUZvcmNlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNsaWVuY2VGb3JjZSgpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wcm9wcy5NYXhJdGVyYXRpb25zOyBpKyspIHtcbiAgICAgICAgdGhpcy50aWNrKHRoaXMucHJvcHMudGlja0ludGVydmFsKTtcbiAgICAgICAgdmFyIGVuZXJneSA9IHRoaXMuY2FsVG90YWxFbmVyZ3koKTtcbiAgICAgICAgLyoqIOWmguaenOmcgOimgeebkeaOp+S/oeaBr++8jOWImeaPkOS+m+e7meeUqOaItyAqL1xuXG4gICAgICAgIHZhciBtb25pdG9yID0gdGhpcy5yZWdpc3RlcnMuZ2V0KCdtb25pdG9yJyk7XG5cbiAgICAgICAgaWYgKG1vbml0b3IpIHtcbiAgICAgICAgICBtb25pdG9yKHRoaXMucmVwb3J0TW9pbnRvcihlbmVyZ3kpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbmVyZ3kgPD0gdGhpcy5wcm9wcy5taW5FbmVyZ3lUaHJlc2hvbGQgfHwgaSA9PT0gdGhpcy5wcm9wcy5NYXhJdGVyYXRpb25zIC0gMSAvLyAxMDAwMDAw5qyhLygxMDAwLzYwKSA9IDYwMDAwcyA9IDFtaW5cbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5kb25lKSB7XG4gICAgICAgICAgICAgIHRoaXMucHJvcHMuZG9uZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImFuaW1hdGlvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhbmltYXRpb24oKSB7XG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgdmFyIHN0ZXAgPSBmdW5jdGlvbiBzdGVwKCkge1xuICAgICAgICB2YXIgX3RoaXM1JHByb3BzID0gX3RoaXM1LnByb3BzLFxuICAgICAgICAgICAgZG9uZSA9IF90aGlzNSRwcm9wcy5kb25lLFxuICAgICAgICAgICAgdGlja0ludGVydmFsID0gX3RoaXM1JHByb3BzLnRpY2tJbnRlcnZhbCxcbiAgICAgICAgICAgIG1pbkVuZXJneVRocmVzaG9sZCA9IF90aGlzNSRwcm9wcy5taW5FbmVyZ3lUaHJlc2hvbGQsXG4gICAgICAgICAgICBNYXhJdGVyYXRpb25zID0gX3RoaXM1JHByb3BzLk1heEl0ZXJhdGlvbnM7XG5cbiAgICAgICAgX3RoaXM1LnRpY2sodGlja0ludGVydmFsKTtcblxuICAgICAgICBfdGhpczUucmVuZGVyKCk7XG5cbiAgICAgICAgX3RoaXM1Lml0ZXJhdGlvbnMrKztcblxuICAgICAgICB2YXIgZW5lcmd5ID0gX3RoaXM1LmNhbFRvdGFsRW5lcmd5KCk7XG4gICAgICAgIC8qKiDlpoLmnpzpnIDopoHnm5Hmjqfkv6Hmga/vvIzliJnmj5Dkvpvnu5nnlKjmiLcgKi9cblxuXG4gICAgICAgIHZhciBtb25pdG9yID0gX3RoaXM1LnJlZ2lzdGVycy5nZXQoJ21vbml0b3InKTtcblxuICAgICAgICBpZiAobW9uaXRvcikge1xuICAgICAgICAgIG1vbml0b3IoX3RoaXM1LnJlcG9ydE1vaW50b3IoZW5lcmd5KSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW5lcmd5IDw9IG1pbkVuZXJneVRocmVzaG9sZCB8fCBfdGhpczUuaXRlcmF0aW9ucyA9PT0gTWF4SXRlcmF0aW9ucyAvLyAxMDAwMDAw5qyhLygxMDAwLzYwKSA9IDYwMDAwcyA9IDFtaW5cbiAgICAgICAgKSB7XG4gICAgICAgICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUoX3RoaXM1LnRpbWVyKTtcbiAgICAgICAgICAgIF90aGlzNS5pdGVyYXRpb25zID0gMDtcbiAgICAgICAgICAgIF90aGlzNS5kb25lID0gdHJ1ZTtcblxuICAgICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX3RoaXM1LnRpbWVyID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdGhpcy50aW1lciA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgICAgdmFyIHJlbmRlciA9IHRoaXMucmVnaXN0ZXJzLmdldCgncmVuZGVyJyk7XG4gICAgICB2YXIgbm9kZXMgPSBbXTtcbiAgICAgIHRoaXMubm9kZVBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIG5vZGVzLnB1c2goX29iamVjdFNwcmVhZDIoe30sIF90aGlzNi5ub2RlU2V0W25vZGUuaWRdICYmIF90aGlzNi5ub2RlU2V0W25vZGUuaWRdLmRhdGEsIHtcbiAgICAgICAgICB4OiBub2RlLnAueCxcbiAgICAgICAgICB5OiBub2RlLnAueVxuICAgICAgICB9KSk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlbmRlcikge1xuICAgICAgICByZW5kZXIoe1xuICAgICAgICAgIG5vZGVzOiBub2RlcyxcbiAgICAgICAgICBlZGdlczogdGhpcy5zb3VyY2VEYXRhLmVkZ2VzXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgY29uc29sZS5lcnJvcignbmVlZCBhIHJlbmRlciBmdW5jdGlvbicpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZXBvcnRNb2ludG9yXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlcG9ydE1vaW50b3IoZW5lcmd5KSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBlbmVyZ3k6IGVuZXJneSxcbiAgICAgICAgaXRlcmF0aW9uczogdGhpcy5pdGVyYXRpb25zLFxuICAgICAgICBub2RlczogdGhpcy5ub2RlcyxcbiAgICAgICAgZWRnZXM6IHRoaXMuZWRnZXNcbiAgICAgIH07XG4gICAgICByZXR1cm4gcGFyYW1zO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ0aWNrXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHRpY2soaW50ZXJ2YWwpIHtcbiAgICAgIHRoaXMudXBkYXRlQ291bG9tYnNMYXcoKTtcbiAgICAgIHRoaXMudXBkYXRlSG9va2VzTGF3KCk7XG4gICAgICB0aGlzLmF0dHJhY3RUb0NlbnRyZSgpO1xuICAgICAgdGhpcy51cGRhdGVWZWxvY2l0eShpbnRlcnZhbCk7XG4gICAgICB0aGlzLnVwZGF0ZVBvc2l0aW9uKGludGVydmFsKTtcbiAgICB9XG4gICAgLyoqIOW4g+WxgOeul+azlSAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwidXBkYXRlQ291bG9tYnNMYXdcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlQ291bG9tYnNMYXcoKSB7XG4gICAgICB2YXIgbGVuID0gdGhpcy5ub2Rlcy5sZW5ndGg7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IGkgKyAxOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udGludWVcbiAgICAgICAgICBpZiAoaSA9PT0gaikgY29udGludWU7XG4gICAgICAgICAgdmFyIGlOb2RlID0gdGhpcy5ub2Rlc1tpXTtcbiAgICAgICAgICB2YXIgak5vZGUgPSB0aGlzLm5vZGVzW2pdO1xuICAgICAgICAgIHZhciBjb3Vsb21iRGlzU2NhbGUgPSB0aGlzLnByb3BzLmNvdWxvbWJEaXNTY2FsZTtcbiAgICAgICAgICB2YXIgcmVwdWxzaW9uID0gdGhpcy5wcm9wcy5yZXB1bHNpb247XG4gICAgICAgICAgdmFyIHYgPSB0aGlzLm5vZGVQb2ludHMuZ2V0KGlOb2RlLmlkKS5wLnN1YnRyYWN0KHRoaXMubm9kZVBvaW50cy5nZXQoak5vZGUuaWQpLnApO1xuICAgICAgICAgIHZhciBkaXMgPSAodi5tYWduaXR1ZGUoKSArIDAuMSkgKiBjb3Vsb21iRGlzU2NhbGU7XG4gICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IHYubm9ybWFsaXNlKCk7IC8vIOWQkemHj+eahOaWueWQke+8muWfuuWQkemHj1xuXG4gICAgICAgICAgdmFyIGZhY3RvciA9IDE7XG4gICAgICAgICAgdGhpcy5ub2RlUG9pbnRzLmdldChpTm9kZS5pZCkudXBkYXRlQWNjKCAvLyDlvpfliLDlupPkvKbliptcbiAgICAgICAgICBkaXJlY3Rpb24uc2NhbGFyTXVsdGlwKHJlcHVsc2lvbiAqIGZhY3RvcikuZGl2aWRlKE1hdGgucG93KGRpcywgMikpKTtcbiAgICAgICAgICB0aGlzLm5vZGVQb2ludHMuZ2V0KGpOb2RlLmlkKS51cGRhdGVBY2MoZGlyZWN0aW9uLnNjYWxhck11bHRpcChyZXB1bHNpb24gKiBmYWN0b3IpLmRpdmlkZSgtTWF0aC5wb3coZGlzLCAyKSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInVwZGF0ZUhvb2tlc0xhd1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVIb29rZXNMYXcoKSB7XG4gICAgICB2YXIgX3RoaXM3ID0gdGhpcztcblxuICAgICAgdGhpcy5lZGdlcy5mb3JFYWNoKGZ1bmN0aW9uIChlZGdlKSB7XG4gICAgICAgIHZhciBzcHJpbmcgPSBfdGhpczcuZWRnZVNwcmluZ3MuZ2V0KGVkZ2UuaWQpO1xuXG4gICAgICAgIHZhciB2ID0gc3ByaW5nLnRhcmdldC5wLnN1YnRyYWN0KHNwcmluZy5zb3VyY2UucCk7XG4gICAgICAgIHZhciBkaXNwbGFjZW1lbnQgPSBzcHJpbmcubGVuZ3RoIC0gdi5tYWduaXR1ZGUoKTtcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IHYubm9ybWFsaXNlKCk7XG4gICAgICAgIHNwcmluZy5zb3VyY2UudXBkYXRlQWNjKGRpcmVjdGlvbi5zY2FsYXJNdWx0aXAoLV90aGlzNy5wcm9wcy5zdGlmZm5lc3MgKiBkaXNwbGFjZW1lbnQpKTtcbiAgICAgICAgc3ByaW5nLnRhcmdldC51cGRhdGVBY2MoZGlyZWN0aW9uLnNjYWxhck11bHRpcChfdGhpczcucHJvcHMuc3RpZmZuZXNzICogZGlzcGxhY2VtZW50KSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiYXR0cmFjdFRvQ2VudHJlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGF0dHJhY3RUb0NlbnRyZSgpIHtcbiAgICAgIHZhciBfdGhpczggPSB0aGlzO1xuXG4gICAgICB2YXIgaW1wbGVtZW50Rm9yY2UgPSBmdW5jdGlvbiBpbXBsZW1lbnRGb3JjZShub2RlLCBjZW50ZXIpIHtcbiAgICAgICAgdmFyIHJhZGlvID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAxMDA7XG5cbiAgICAgICAgdmFyIHBvaW50ID0gX3RoaXM4Lm5vZGVQb2ludHMuZ2V0KG5vZGUuaWQpO1xuXG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBwb2ludC5wLnN1YnRyYWN0KGNlbnRlcik7XG4gICAgICAgIHBvaW50LnVwZGF0ZUFjYyhkaXJlY3Rpb24uc2NhbGFyTXVsdGlwKC1fdGhpczgucHJvcHMucmVwdWxzaW9uIC8gcmFkaW8pKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciBnZXRCYXNlTG9nID0gZnVuY3Rpb24gZ2V0QmFzZUxvZyh4LCB5KSB7XG4gICAgICAgIHJldHVybiBNYXRoLmxvZyh5KSAvIE1hdGgubG9nKHgpO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIC8vIOm7mOiupOeahOWQkeW/g+WKm+aMh+WQkeeUu+W4g+S4reW/g1xuICAgICAgICB2YXIgZGVncmVlID0gbm9kZS5kYXRhICYmIG5vZGUuZGF0YS5sYXlvdXQgJiYgbm9kZS5kYXRhLmxheW91dC5kZWdyZWU7XG4gICAgICAgIHZhciBsZWFmTm9kZSA9IGRlZ3JlZSA9PT0gMTtcbiAgICAgICAgdmFyIHNpbmdsZU5vZGUgPSBkZWdyZWUgPT09IDA7XG4gICAgICAgIHZhciBNYXhSYWRpbyA9IDYwMDtcblxuICAgICAgICBpZiAoc2luZ2xlTm9kZSB8fCBsZWFmTm9kZSkge1xuICAgICAgICAgIHZhciBjZW50ZXIgPSBuZXcgVmVjdG9yKF90aGlzOC5wcm9wcy53aWR0aCAvIDIsIF90aGlzOC5wcm9wcy5oZWlnaHQgLyAyKTtcbiAgICAgICAgICBpbXBsZW1lbnRGb3JjZShub2RlLCBjZW50ZXIsIE1heFJhZGlvKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgcmFkaW8gPSBNYXhSYWRpbyAvIDIgLyBnZXRCYXNlTG9nKDIsIGRlZ3JlZSk7XG5cbiAgICAgICAgICB2YXIgX2NlbnRlciA9IG5ldyBWZWN0b3IoX3RoaXM4LnByb3BzLndpZHRoIC8gMiwgX3RoaXM4LnByb3BzLmhlaWdodCAvIDIpO1xuXG4gICAgICAgICAgaW1wbGVtZW50Rm9yY2Uobm9kZSwgX2NlbnRlciwgcmFkaW8pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidXBkYXRlVmVsb2NpdHlcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlVmVsb2NpdHkoaW50ZXJ2YWwpIHtcbiAgICAgIHZhciBfdGhpczkgPSB0aGlzO1xuXG4gICAgICB0aGlzLm5vZGVzLmZvckVhY2goZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgdmFyIHBvaW50ID0gX3RoaXM5Lm5vZGVQb2ludHMuZ2V0KG5vZGUuaWQpO1xuXG4gICAgICAgIHBvaW50LnYgPSBwb2ludC52LmFkZChwb2ludC5hLnNjYWxhck11bHRpcChpbnRlcnZhbCkpIC8vIOagueaNruWKoOmAn+W6puaxgumAn+W6puWFrOW8jyBWX2N1cnI9IGEqQHQgKyBWX3ByZVxuICAgICAgICAuc2NhbGFyTXVsdGlwKF90aGlzOS5wcm9wcy5kYW1waW5nKTtcblxuICAgICAgICBpZiAocG9pbnQudi5tYWduaXR1ZGUoKSA+IF90aGlzOS5wcm9wcy5tYXhTcGVlZCkge1xuICAgICAgICAgIHBvaW50LnYgPSBwb2ludC52Lm5vcm1hbGlzZSgpLnNjYWxhck11bHRpcChfdGhpczkucHJvcHMubWF4U3BlZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcG9pbnQuYSA9IG5ldyBWZWN0b3IoMCwgMCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidXBkYXRlUG9zaXRpb25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlUG9zaXRpb24oaW50ZXJ2YWwpIHtcbiAgICAgIHZhciBfdGhpczEwID0gdGhpcztcblxuICAgICAgdGhpcy5ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHZhciBwb2ludCA9IF90aGlzMTAubm9kZVBvaW50cy5nZXQobm9kZS5pZCk7XG5cbiAgICAgICAgcG9pbnQucCA9IHBvaW50LnAuYWRkKHBvaW50LnYuc2NhbGFyTXVsdGlwKGludGVydmFsKSk7IC8vIOi3r+eoi+WFrOW8jyBzID0gdiAqIHRcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcclxuICAgICAqIGFkZCBvbmUgTm9kZVxyXG4gICAgICogQHBhcmFtIHtbdHlwZV19IG5vZGUgW2Rlc2NyaXB0aW9uXVxyXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJhZGROb2RlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFkZE5vZGUobm9kZSkge1xuICAgICAgdmFyIGlnbm9yZSA9IHRoaXMucHJvcHMuaWdub3JlO1xuXG4gICAgICBpZiAoaWdub3JlICYmIGlnbm9yZShub2RlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghKG5vZGUuaWQgaW4gdGhpcy5ub2RlU2V0KSkge1xuICAgICAgICB0aGlzLm5vZGVzLnB1c2gobm9kZSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMubm9kZVNldFtub2RlLmlkXSA9IG5vZGU7XG4gICAgfVxuICAgIC8qKlxyXG4gICAgICogYWRkIE5vZGVzXHJcbiAgICAgKiBAcGFyYW0ge1t0eXBlXX0gZGF0YSBbZGVzY3JpcHRpb25dXHJcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcImFkZE5vZGVzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFkZE5vZGVzKGRhdGEpIHtcbiAgICAgIHZhciBfdGhpczExID0gdGhpcztcblxuICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIF90aGlzMTEuYWRkTm9kZShuZXcgTm9kZShub2RlKSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgLyoqXHJcbiAgICAgKiBhZGQgb25lIEVkZ2VcclxuICAgICAqIEBwYXJhbSB7W3R5cGVdfSBlZGdlIFtkZXNjcmlwdGlvbl1cclxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiYWRkRWRnZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRFZGdlKGVkZ2UpIHtcbiAgICAgIGlmICghKGVkZ2UuaWQgaW4gdGhpcy5lZGdlU2V0KSkge1xuICAgICAgICB0aGlzLmVkZ2VzLnB1c2goZWRnZSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZWRnZVNldFtlZGdlLmlkXSA9IGVkZ2U7XG4gICAgICByZXR1cm4gZWRnZTtcbiAgICB9XG4gICAgLyoqXHJcbiAgICAgKiBhZGQgRWRnZXNcclxuICAgICAqIEBwYXJhbSB7W3R5cGVdfSBkYXRhIFtkZXNjcmlwdGlvbl1cclxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiYWRkRWRnZXNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkRWRnZXMoZGF0YSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIGxlbiA9IGRhdGEubGVuZ3RoO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICB2YXIgZSA9IGRhdGFbaV07IC8vICAgY29uc3QgZWRnZUlkcyA9IHRoaXMucmVnaXN0ZXIuZ2V0KFwiZWRnZVwiKS5pZChlKTtcblxuICAgICAgICAgIHZhciBzb3VyY2VJZCA9IGUuc291cmNlOyAvLyBlZGdlSWRzLnNvdXJjZUlkIHx8IGVbXCJzb3VyY2VcIl07XG5cbiAgICAgICAgICB2YXIgdGFyZ2V0SWQgPSBlLnRhcmdldDsgLy8gZWRnZUlkcy50YXJnZXRJZCB8fCBlW1widGFyZ2V0XCJdO1xuXG4gICAgICAgICAgdmFyIG5vZGUxID0gdGhpcy5ub2RlU2V0W3NvdXJjZUlkXTtcblxuICAgICAgICAgIGlmIChub2RlMSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiaW52YWxpZCBub2RlIG5hbWU6IFwiLmNvbmNhdChlWzBdKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIG5vZGUyID0gdGhpcy5ub2RlU2V0W3RhcmdldElkXTtcblxuICAgICAgICAgIGlmIChub2RlMiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiaW52YWxpZCBub2RlIG5hbWU6IFwiLmNvbmNhdChlWzFdKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIGF0dHIgPSBlLmRhdGE7XG4gICAgICAgICAgdmFyIGVkZ2UgPSBuZXcgRWRnZSh0aGlzLm5leHRFZGdlSWQrKywgbm9kZTEsIG5vZGUyLCBhdHRyKTtcbiAgICAgICAgICB0aGlzLmFkZEVkZ2UoZWRnZSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZWdpc3RlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZWdpc3Rlcih0eXBlLCBvcHRpb25zKSB7XG4gICAgICB0aGlzLnJlZ2lzdGVycy5zZXQodHlwZSwgb3B0aW9ucyk7IC8vIOWwhueUqOaIt+eahOiHquWumuS5ieWHveaVsOazqOWGjOi/m+adpVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzdG9wXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy50aW1lcik7XG4gICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBGb3JjZUxheW91dDtcbn0oKTtcblxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNPcHRpbWl6ZSDmmK/lkKblvIDlkK9TaGFwZeeahOa4suafk+S8mOWMlu+8jOm7mOiupOmSiOWvuemdnktleVNoYXBl6IqC54K5XHJcbiAqIEBwYXJhbSB7SXRlbX0gbm9kZSDljZXkuKpOb2RlXHJcbiAqL1xudmFyIG9wdGltaXplRHJhd2luZ0J5Tm9kZSA9IGZ1bmN0aW9uIG9wdGltaXplRHJhd2luZ0J5Tm9kZShpc09wdGltaXplLCBub2RlKSB7XG4gIHZhciBzaGFwZXMgPSBub2RlLmdldENvbnRhaW5lcigpLmdldCgnY2hpbGRyZW4nKTtcbiAgdmFyIGtleVNoYXBlID0gc2hhcGVzLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICByZXR1cm4gaXRlbS5pc0tleVNoYXBlO1xuICB9KTtcbiAga2V5U2hhcGUuc2hvdygpO1xuICBzaGFwZXMuZm9yRWFjaChmdW5jdGlvbiAoc2hhcGUpIHtcbiAgICBpZiAoaXNPcHRpbWl6ZSAmJiBzaGFwZSAhPT0ga2V5U2hhcGUpIHtcbiAgICAgIHNoYXBlLmhpZGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2hhcGUuc2hvdygpO1xuICAgIH1cbiAgfSk7XG59O1xuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBncmFwaCBHNueahEdyYXBo5a6e5L6LXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNPcHRpbWl6ZSDmmK/lkKblh4/lsJFTaGFwZeeahOa4suafk++8jOm7mOiupOaYr+mdnktleVNoYXBl6IqC54K5XHJcbiAqL1xuXG5cbnZhciBvcHRpbWl6ZURyYXdpbmcgPSBmdW5jdGlvbiBvcHRpbWl6ZURyYXdpbmcoZ3JhcGgsIGlzT3B0aW1pemUpIHtcbiAgZ3JhcGguZ2V0Tm9kZXMoKS5mb3JFYWNoKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgb3B0aW1pemVEcmF3aW5nQnlOb2RlKGlzT3B0aW1pemUsIG5vZGUpO1xuICB9KTtcbiAgLyoqIOa4suafkyAqL1xuXG4gIGdyYXBoLmF1dG9QYWludCgpO1xufTtcblxudmFyIHJhbmRvbUxheW91dCA9IGZ1bmN0aW9uIHJhbmRvbUxheW91dChkYXRhLCBjZmcpIHtcbiAgdmFyIGRlZmF1bHRCYm94ID0ge1xuICAgIHg6IDAsXG4gICAgeTogMCxcbiAgICB3OiA1MDAsXG4gICAgaDogNTAwXG4gIH07XG4gIHZhciBiYm94ID0gY2ZnLmJib3g7XG5cbiAgdmFyIF9kZWZhdWx0QmJveCRiYm94ID0gX29iamVjdFNwcmVhZDIoe30sIGRlZmF1bHRCYm94LCB7fSwgYmJveCksXG4gICAgICB4ID0gX2RlZmF1bHRCYm94JGJib3gueCxcbiAgICAgIHkgPSBfZGVmYXVsdEJib3gkYmJveC55LFxuICAgICAgdyA9IF9kZWZhdWx0QmJveCRiYm94LncsXG4gICAgICBoID0gX2RlZmF1bHRCYm94JGJib3guaDtcblxuICB2YXIgZWRnZXMgPSBkYXRhLmVkZ2VzLFxuICAgICAgbm9kZXMgPSBkYXRhLm5vZGVzO1xuICB2YXIgbmV3Tm9kZXMgPSBub2Rlcy5tYXAoZnVuY3Rpb24gKG5vZGUpIHtcbiAgICByZXR1cm4gX29iamVjdFNwcmVhZDIoe30sIG5vZGUsIHtcbiAgICAgIHg6IHggKyBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiB3KSxcbiAgICAgIHk6IHkgKyBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiBoKVxuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBub2RlczogbmV3Tm9kZXMsXG4gICAgZWRnZXM6IGVkZ2VzXG4gIH07XG59O1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xudmFyIGdldFJhbmRvbVBvc2l0aW9uID0gZnVuY3Rpb24gZ2V0UmFuZG9tUG9zaXRpb24oKSB7XG4gIHJldHVybiBNYXRoLnJvdW5kKChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDgwKTtcbn07XG4vKipcclxuICpcclxuICogQHBhcmFtIGRhdGFcclxuICogQHBhcmFtIG9wdGlvbnNcclxuICovXG5cblxudmFyIHR3ZWFrID0gZnVuY3Rpb24gdHdlYWsoZGF0YSwgb3B0aW9ucykge1xuICB2YXIgZ3JhcGggPSBvcHRpb25zLmdyYXBoLFxuICAgICAgd2lkdGggPSBvcHRpb25zLndpZHRoLFxuICAgICAgaGVpZ2h0ID0gb3B0aW9ucy5oZWlnaHQ7XG4gIHZhciBjdXJyTm9kZXMgPSBkYXRhLm5vZGVzLFxuICAgICAgY3VyckVkZ2VzID0gZGF0YS5lZGdlcztcblxuICB2YXIgX2dyYXBoJHNhdmUgPSBncmFwaC5zYXZlKCksXG4gICAgICBwcmVOb2RlcyA9IF9ncmFwaCRzYXZlLm5vZGVzO1xuICAvKiog5bCG5Zu+5LiK5LmL5YmN6IqC54K555qE5L2N572u5L+h5oGv5a2Y5YKo5ZyocG9zaXRpb25NYXDkuK0gKi9cblxuXG4gIHZhciBwb3NpdGlvbk1hcCA9IG5ldyBNYXAoKTtcbiAgcHJlTm9kZXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgIHZhciBpZCA9IGl0ZW0uaWQsXG4gICAgICAgIHggPSBpdGVtLngsXG4gICAgICAgIHkgPSBpdGVtLnk7XG4gICAgcG9zaXRpb25NYXAuc2V0KGlkLCB7XG4gICAgICB4OiB4LFxuICAgICAgeTogeVxuICAgIH0pO1xuICB9KTtcbiAgdmFyIGluY3JlbWVudE5vZGVzTWFwID0gbmV3IE1hcCgpO1xuICBjdXJyTm9kZXMuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkge1xuICAgIHZhciBpZCA9IG5vZGUuaWQ7XG4gICAgdmFyIHBvc2l0aW9uID0gcG9zaXRpb25NYXAuZ2V0KGlkKTtcblxuICAgIGlmIChwb3NpdGlvbikge1xuICAgICAgbm9kZS54ID0gcG9zaXRpb24ueDtcbiAgICAgIG5vZGUueSA9IHBvc2l0aW9uLnk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGluY3JlbWVudE5vZGVzTWFwLnNldChpZCwgbm9kZSk7XG4gICAgfVxuICB9KTtcbiAgdmFyIGluY3JlbWVudFBvc2l0b25NYXAgPSBuZXcgTWFwKCk7XG4gIGN1cnJFZGdlcy5mb3JFYWNoKGZ1bmN0aW9uIChlZGdlKSB7XG4gICAgdmFyIHNvdXJjZSA9IGVkZ2Uuc291cmNlLFxuICAgICAgICB0YXJnZXQgPSBlZGdlLnRhcmdldDtcbiAgICB2YXIgbm9kZUluU291cmNlID0gaW5jcmVtZW50Tm9kZXNNYXAuZ2V0KHNvdXJjZSk7XG4gICAgdmFyIG5vZGVJblRhcmdldCA9IGluY3JlbWVudE5vZGVzTWFwLmdldCh0YXJnZXQpO1xuICAgIHZhciBwb3NpdGlvbkluU291cmNlID0gcG9zaXRpb25NYXAuZ2V0KHNvdXJjZSk7XG4gICAgdmFyIHBvc2l0aW9uSW5UYXJnZXQgPSBwb3NpdGlvbk1hcC5nZXQodGFyZ2V0KTtcblxuICAgIGlmIChub2RlSW5Tb3VyY2UgJiYgcG9zaXRpb25JblRhcmdldCkge1xuICAgICAgaW5jcmVtZW50UG9zaXRvbk1hcC5zZXQoc291cmNlLCB7XG4gICAgICAgIC8vIC4uLm5vZGVJblNvdXJjZSxcbiAgICAgICAgeDogcG9zaXRpb25JblRhcmdldC54ICsgZ2V0UmFuZG9tUG9zaXRpb24oKSxcbiAgICAgICAgeTogcG9zaXRpb25JblRhcmdldC55ICsgZ2V0UmFuZG9tUG9zaXRpb24oKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKG5vZGVJblRhcmdldCAmJiBwb3NpdGlvbkluU291cmNlKSB7XG4gICAgICBpbmNyZW1lbnRQb3NpdG9uTWFwLnNldCh0YXJnZXQsIHtcbiAgICAgICAgLy8gLi4ubm9kZUluVGFyZ2V0LFxuICAgICAgICB4OiBwb3NpdGlvbkluU291cmNlLnggKyBnZXRSYW5kb21Qb3NpdGlvbigpLFxuICAgICAgICB5OiBwb3NpdGlvbkluU291cmNlLnkgKyBnZXRSYW5kb21Qb3NpdGlvbigpXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBjdXJyTm9kZXMuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkge1xuICAgIHZhciBpZCA9IG5vZGUuaWQ7XG4gICAgdmFyIHBvc2l0aW9uID0gcG9zaXRpb25NYXAuZ2V0KGlkKSB8fCBpbmNyZW1lbnRQb3NpdG9uTWFwLmdldChpZCk7XG5cbiAgICBpZiAocG9zaXRpb24pIHtcbiAgICAgIG5vZGUueCA9IHBvc2l0aW9uLng7XG4gICAgICBub2RlLnkgPSBwb3NpdGlvbi55O1xuICAgIH0gZWxzZSB7XG4gICAgICBub2RlLnggPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiB3aWR0aCk7XG4gICAgICBub2RlLnkgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiBoZWlnaHQpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiB7XG4gICAgZGF0YToge1xuICAgICAgbm9kZXM6IGN1cnJOb2RlcyxcbiAgICAgIGVkZ2VzOiBjdXJyRWRnZXNcbiAgICB9XG4gIH07XG59O1xuXG52YXIgZm9yY2VMYXlvdXQgPSBmdW5jdGlvbiBmb3JjZUxheW91dChvcHRpb25zKSB7XG4gIHZhciB3aWR0aCA9IG9wdGlvbnMud2lkdGgsXG4gICAgICBoZWlnaHQgPSBvcHRpb25zLmhlaWdodCxcbiAgICAgIGdyYXBoID0gb3B0aW9ucy5ncmFwaCxcbiAgICAgIGRhdGEgPSBvcHRpb25zLmRhdGEsXG4gICAgICBfb3B0aW9ucyRwcmVzZXQgPSBvcHRpb25zLnByZXNldCxcbiAgICAgIHByZXNldCA9IF9vcHRpb25zJHByZXNldCA9PT0gdm9pZCAwID8ge1xuICAgIG5hbWU6ICcnLFxuICAgIG9wdGlvbnM6IHt9XG4gIH0gOiBfb3B0aW9ucyRwcmVzZXQsXG4gICAgICBhbmltYXRpb24gPSBvcHRpb25zLmFuaW1hdGlvbixcbiAgICAgIF9vcHRpb25zJGRvbmUgPSBvcHRpb25zLmRvbmUsXG4gICAgICBfZG9uZSA9IF9vcHRpb25zJGRvbmUgPT09IHZvaWQgMCA/IGZ1bmN0aW9uICgpIHt9IDogX29wdGlvbnMkZG9uZSxcbiAgICAgIGlzT3B0aW1pemF0aW9uID0gb3B0aW9ucy5pc09wdGltaXphdGlvbixcbiAgICAgIG90aGVycyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhvcHRpb25zLCBbXCJ3aWR0aFwiLCBcImhlaWdodFwiLCBcImdyYXBoXCIsIFwiZGF0YVwiLCBcInByZXNldFwiLCBcImFuaW1hdGlvblwiLCBcImRvbmVcIiwgXCJpc09wdGltaXphdGlvblwiXSk7XG5cbiAgdmFyIGNvbmNlbnRyaWNPcHRpb25zID0ge1xuICAgIC8qKiDlkIzlv4PlnIbnmoTluIPlsYDojIPlm7TvvIzpu5jorqTkuLrlvZPliY3nlLvluIPnmoTlrr3pq5jojIPlm7QgKi9cbiAgICBib3VuZGluZ0JveDoge1xuICAgICAgeDE6IDAsXG4gICAgICB5MTogMCxcbiAgICAgIHc6IHdpZHRoLFxuICAgICAgaDogaGVpZ2h0XG4gICAgfSxcblxuICAgIC8qKiDoioLngrnpl7TnmoTot53nprvvvIzpu5jorqTkuLo2MCAqL1xuICAgIG1pbk5vZGVTcGFjaW5nOiA2MCxcblxuICAgIC8qKiDmr4/lsYLnmoToioLngrnluqbmlbDojIPlm7QgKi9cbiAgICBsZXZlbFdpZHRoOiBmdW5jdGlvbiBsZXZlbFdpZHRoKG5vZGVzLCBtYXhEZWdyZWUpIHtcbiAgICAgIC8qKiDlkIzlv4PlnIblsYLmlbAgKi9cbiAgICAgIHZhciBsZXZlbE51bSA9IDg7XG4gICAgICByZXR1cm4gbWF4RGVncmVlIC8gbGV2ZWxOdW07XG4gICAgfVxuICB9O1xuICB2YXIgcmFuZG9tT3B0aW9ucyA9IHtcbiAgICBiYm94OiB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMCxcbiAgICAgIHc6IHdpZHRoLFxuICAgICAgaDogaGVpZ2h0XG4gICAgfVxuICB9O1xuICB2YXIgc291cmNlRGF0YSA9IGRhdGE7XG5cbiAgaWYgKHByZXNldC5uYW1lID09PSAncmFuZG9tJykge1xuICAgIHNvdXJjZURhdGEgPSByYW5kb21MYXlvdXQoZGF0YSwgX29iamVjdFNwcmVhZDIoe30sIHJhbmRvbU9wdGlvbnMsIHt9LCBwcmVzZXQub3B0aW9ucykpO1xuICB9XG5cbiAgaWYgKHByZXNldC5uYW1lID09PSAnY29uY2VudHJpYycpIHtcbiAgICBzb3VyY2VEYXRhID0gbmV3IENvbmNlbnRyaWNMYXlvdXQoX29iamVjdFNwcmVhZDIoe30sIGNvbmNlbnRyaWNPcHRpb25zLCB7fSwgcHJlc2V0Lm9wdGlvbnMsIHtcbiAgICAgIGRhdGE6IGRhdGFcbiAgICB9KSkucnVuKCk7XG4gIH1cblxuICBpZiAocHJlc2V0Lm5hbWUgPT09ICdmb3JjZScpIHtcbiAgICBzb3VyY2VEYXRhID0gdHdlYWsoZGF0YSwgb3B0aW9ucykuZGF0YTtcbiAgfVxuICAvKiog5Yib5bu65Yqb5a+85qih5ouf5ZmoICovXG5cblxuICB2YXIgc2ltdWxhdGlvbiA9IG5ldyBGb3JjZUxheW91dChfb2JqZWN0U3ByZWFkMih7XG4gICAgd2lkdGg6IHdpZHRoLFxuICAgIGhlaWdodDogaGVpZ2h0LFxuICAgIGFuaW1hdGlvbjogYW5pbWF0aW9uICE9PSB1bmRlZmluZWQgPyBhbmltYXRpb24gOiB0cnVlLFxuICAgIGRvbmU6IGZ1bmN0aW9uIGRvbmUoKSB7XG4gICAgICBpZiAoaXNPcHRpbWl6YXRpb24pIHtcbiAgICAgICAgb3B0aW1pemVEcmF3aW5nKGdyYXBoLCBmYWxzZSk7XG4gICAgICB9XG5cbiAgICAgIF9kb25lKGdyYXBoKTtcbiAgICB9XG4gIH0sIG90aGVycykpOyAvLyAxLiDmjILovb3mlbDmja5cblxuICBzaW11bGF0aW9uLnNldERhdGEoc291cmNlRGF0YSk7IC8vIDMu5ZCv5YqoXG4gIC8vIDQuIOiHquWumuS5iea4suafk+WHveaVsFxuXG4gIHNpbXVsYXRpb24ucmVnaXN0ZXIoJ3JlbmRlcicsIGZ1bmN0aW9uIChmb3JjZURhdGEpIHtcbiAgICB0cnkge1xuICAgICAgZm9yY2VEYXRhLm5vZGVzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgdmFyIG5vZGUgPSBncmFwaC5maW5kQnlJZChpdGVtLmlkKTtcblxuICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgIC8vIOWboOS4uuacieWPr+iDveeUu+W4g+WIoOmZpOS6huiKgueCuVxuICAgICAgICAgIHZhciBtb2RlbCA9IG5vZGUuZ2V0KCdtb2RlbCcpO1xuICAgICAgICAgIG1vZGVsLnggPSBpdGVtLng7XG4gICAgICAgICAgbW9kZWwueSA9IGl0ZW0ueTtcblxuICAgICAgICAgIGlmIChpc09wdGltaXphdGlvbikge1xuICAgICAgICAgICAgb3B0aW1pemVEcmF3aW5nQnlOb2RlKHRydWUsIG5vZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBncmFwaC5yZWZyZXNoUG9zaXRpb25zKCk7XG4gICAgICBzb3VyY2VEYXRhID0gZm9yY2VEYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgIH1cbiAgfSk7XG4gIHNpbXVsYXRpb24uc3RhcnQoKTtcbiAgcmV0dXJuIHtcbiAgICBkYXRhOiBzb3VyY2VEYXRhLFxuICAgIHNpbXVsYXRpb246IHNpbXVsYXRpb25cbiAgfTtcbn07XG5cbnZhciBkYWdyZUxheW91dCA9IGZ1bmN0aW9uIGRhZ3JlTGF5b3V0KGRhdGEsIG9wdGlvbnMpIHtcbiAgdmFyIHNvdXJjZSA9IGNsb25lRGVlcChkYXRhKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5ldy1jYXBcblxuICB2YXIgbGF5b3V0ID0gbmV3IEc2LkxheW91dC5kYWdyZShfb2JqZWN0U3ByZWFkMih7XG4gICAgdHlwZTogJ2RhZ3JlJ1xuICB9LCBvcHRpb25zKSk7XG4gIGxheW91dC5pbml0KHNvdXJjZSk7XG4gIGxheW91dC5leGVjdXRlKCk7XG4gIHJldHVybiB7XG4gICAgbm9kZXM6IGxheW91dC5ub2RlcyxcbiAgICBlZGdlczogZGF0YS5lZGdlc1xuICB9OyAvLyBncmFwaC5wb3NpdGlvbnNBbmltYXRlKCk7XG59O1xuXG52YXIgZ3JpZExheW91dCA9IGZ1bmN0aW9uIGdyaWRMYXlvdXQoZGF0YSwgb3B0aW9ucykge1xuICB2YXIgd2lkdGggPSBvcHRpb25zLndpZHRoLFxuICAgICAgaGVpZ2h0ID0gb3B0aW9ucy5oZWlnaHQsXG4gICAgICBfb3B0aW9ucyRub2RlU2VwID0gb3B0aW9ucy5ub2RlU2VwLFxuICAgICAgbm9kZVNlcCA9IF9vcHRpb25zJG5vZGVTZXAgPT09IHZvaWQgMCA/IDEwMCA6IF9vcHRpb25zJG5vZGVTZXAsXG4gICAgICBfb3B0aW9ucyRub2RlU2l6ZSA9IG9wdGlvbnMubm9kZVNpemUsXG4gICAgICBub2RlU2l6ZSA9IF9vcHRpb25zJG5vZGVTaXplID09PSB2b2lkIDAgPyA1MCA6IF9vcHRpb25zJG5vZGVTaXplO1xuICB2YXIgbm9kZXMgPSBkYXRhLm5vZGVzLFxuICAgICAgZWRnZXMgPSBkYXRhLmVkZ2VzO1xuICB2YXIgY291bnQgPSBub2Rlcy5sZW5ndGg7XG4gIHZhciBjb2xzID0gTWF0aC5yb3VuZChNYXRoLnNxcnQoY291bnQgKiAoaGVpZ2h0IC8gd2lkdGgpKSk7IC8vIOWIl+eahOS4quaVsFxuXG4gIHZhciByb3dzID0gTWF0aC5yb3VuZChNYXRoLnNxcnQoY291bnQgKiAod2lkdGggLyBoZWlnaHQpKSk7IC8vIOihjOeahOS4quaVsFxuXG4gIHZhciBzdGFydCA9IHtcbiAgICB4OiB3aWR0aCAvIDIgLSAoY29scyAvIDIgLSAxKSAqIChub2RlU2l6ZSArIG5vZGVTZXAgLyAyKSxcbiAgICB5OiBoZWlnaHQgLyAyIC0gKHJvd3MgLyAyIC0gMSkgKiAobm9kZVNpemUgKyBub2RlU2VwIC8gMilcbiAgfTtcbiAgdmFyIHJlc3VsdE5vZGVzID0gbm9kZXMubWFwKGZ1bmN0aW9uIChub2RlLCBpbmRleCkge1xuICAgIHZhciB4SW5kZXggPSBNYXRoLmZsb29yKGluZGV4IC8gY29scykgLSAxOyAvLyDooYzluo/lj7fvvIzlkJHkuIvlj5bmlbRcblxuICAgIHZhciB5SW5kZXggPSBNYXRoLmZsb29yKGluZGV4ICUgY29scykgLSAxOyAvLyDliJfluo/lj7fvvIzlkJHkuIvlj5bmlbRcblxuICAgIHZhciB4ID0gc3RhcnQueCArIHhJbmRleCAqIChub2RlU2l6ZSArIG5vZGVTZXAgLyAyKTtcbiAgICB2YXIgeSA9IHN0YXJ0LnkgKyB5SW5kZXggKiAobm9kZVNpemUgKyBub2RlU2VwIC8gMik7XG4gICAgcmV0dXJuIF9vYmplY3RTcHJlYWQyKHt9LCBub2RlLCB7XG4gICAgICB4OiB4LFxuICAgICAgeTogeVxuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBub2RlczogcmVzdWx0Tm9kZXMsXG4gICAgZWRnZXM6IGVkZ2VzXG4gIH07XG59O1xuXG52YXIgZGVmYXVsdExheW91dHMgPSBmdW5jdGlvbiBkZWZhdWx0TGF5b3V0cyhncmFwaGluLCBwcmV2UHJvcHMpIHtcbiAgdmFyIGdyYXBoID0gZ3JhcGhpbi5ncmFwaDtcbiAgdmFyIHdpZHRoID0gZ3JhcGguZ2V0KCd3aWR0aCcpO1xuICB2YXIgaGVpZ2h0ID0gZ3JhcGguZ2V0KCdoZWlnaHQnKTtcbiAgcmV0dXJuIFt7XG4gICAgbmFtZTogJ2NpcmNsZScsXG4gICAgZGVzYzogJ+WchuW9ouW4g+WxgCcsXG4gICAgaWNvbjogJ2Nocm9tZScsXG4gICAgbGF5b3V0OiBmdW5jdGlvbiBsYXlvdXQoZGF0YSwgb3B0aW9ucykge1xuICAgICAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICAgICAgICAvKiog5ZyG5b+DIHjlnZDmoIcgKi9cbiAgICAgICAgeDogd2lkdGggLyAyLFxuXG4gICAgICAgIC8qKiDlnIblv4MgeeWdkOaghyAqL1xuICAgICAgICB5OiBoZWlnaHQgLyAyLFxuXG4gICAgICAgIC8qKiDljYrlvoTvvIzpu5jorqTljYrlvoTkuLroioLngrnmlbAqMTAgKi9cbiAgICAgICAgcjogZGF0YS5ub2Rlcy5sZW5ndGggKiAxMFxuICAgICAgfTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IGNpcmNsZUxheW91dChkYXRhLCBfb2JqZWN0U3ByZWFkMih7fSwgZGVmYXVsdE9wdGlvbnMsIHt9LCBvcHRpb25zKSlcbiAgICAgIH07XG4gICAgfVxuICB9LCB7XG4gICAgbmFtZTogJ2RhZ3JlJyxcbiAgICBkZXNjOiAn5pyJ5ZCR5YiG5bGCJyxcbiAgICBpY29uOiAnYXBhcnRtZW50JyxcbiAgICBsYXlvdXQ6IGZ1bmN0aW9uIGxheW91dChkYXRhLCBvcHRpb25zKSB7XG4gICAgICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgICAgIC8qKiDkuK3lv4PngrnlnZDmoIcgKi9cbiAgICAgICAgY2VudGVyOiBbd2lkdGggLyAyLCBoZWlnaHQgLyAyXSxcblxuICAgICAgICAvKiog6IqC54K55aSn5bCPICovXG4gICAgICAgIG5vZGVTaXplOiBbNTAsIDUwXSxcblxuICAgICAgICAvKiogIOiKgueCueawtOW5s+mXtOi3nShweCkgKi9cbiAgICAgICAgbm9kZXNlcDogMTIsXG5cbiAgICAgICAgLyoqIOavj+S4gOWxguiKgueCueS5i+mXtOmXtOi3nSAqL1xuICAgICAgICByYW5rc2VwOiA1MCxcblxuICAgICAgICAvKiog5pS+572u5L2N572uICovXG4gICAgICAgIGFsaWduOiAnVUwnXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogZGFncmVMYXlvdXQoZGF0YSwgX29iamVjdFNwcmVhZDIoe30sIGRlZmF1bHRPcHRpb25zLCB7fSwgb3B0aW9ucykpXG4gICAgICB9O1xuICAgIH1cbiAgfSwge1xuICAgIG5hbWU6ICdyYWRpYWwnLFxuICAgIGRlc2M6ICfov7PlkJHluIPlsYAnLFxuICAgIGljb246ICd0cmFkZW1hcmsnLFxuICAgIGxheW91dDogZnVuY3Rpb24gbGF5b3V0KGRhdGEsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAgICAgLyoqIOS4reW/g+eCueWdkOaghyAqL1xuICAgICAgICBjZW50ZXI6IFt3aWR0aCAvIDIsIGhlaWdodCAvIDJdLFxuXG4gICAgICAgIC8qKiDpmLLmraLopobnm5YgKi9cbiAgICAgICAgcHJldmVudE92ZXJsYXA6IHRydWUsXG5cbiAgICAgICAgLyoqIOiKgueCueWkp+WwjyAqL1xuICAgICAgICBub2RlU2l6ZTogMTAwLFxuXG4gICAgICAgIC8qKiDmr4/lsYLnmoTljYrlvoQgKi9cbiAgICAgICAgdW5pdFJhZGl1czogMTUwXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogcmFkaWFsTGF5b3V0KGRhdGEsIF9vYmplY3RTcHJlYWQyKHt9LCBkZWZhdWx0T3B0aW9ucywge30sIG9wdGlvbnMpKVxuICAgICAgfTtcbiAgICB9XG4gIH0sIHtcbiAgICBuYW1lOiAnZ3JpZCcsXG4gICAgZGVzYzogJ+aoque6teW4g+WxgCcsXG4gICAgaWNvbjogJ2FwcHN0b3JlJyxcbiAgICBsYXlvdXQ6IGZ1bmN0aW9uIGxheW91dChkYXRhLCBvcHRpb25zKSB7XG4gICAgICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgICAgIC8qKiDluIPlsYDojIPlm7TnmoTlrr3luqYgKi9cbiAgICAgICAgd2lkdGg6IHdpZHRoLFxuXG4gICAgICAgIC8qKiDluIPlsYDojIPlm7TnmoTpq5jluqYgKi9cbiAgICAgICAgaGVpZ2h0OiBoZWlnaHQsXG5cbiAgICAgICAgLyoqIOiKgueCuemXtOeahOmXtOi3ne+8jOS4iuS4i+W3puWPs+Wdh+aYr+S4gOiHtOeahCAqL1xuICAgICAgICBub2RlU2VwOiAxMDAsXG5cbiAgICAgICAgLyoqIOiKgueCueeahOWkp+Wwj++8jOWNleS9jXB4ICovXG4gICAgICAgIG5vZGVTaXplOiA1MFxuICAgICAgfTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IGdyaWRMYXlvdXQoZGF0YSwgX29iamVjdFNwcmVhZDIoe30sIGRlZmF1bHRPcHRpb25zLCB7fSwgb3B0aW9ucykpXG4gICAgICB9O1xuICAgIH1cbiAgfSwge1xuICAgIG5hbWU6ICdjb25jZW50cmljJyxcbiAgICBkZXNjOiAn5ZCM5b+D5ZyG5biD5bGAJyxcbiAgICBpY29uOiAnY2hyb21lJyxcbiAgICBsYXlvdXQ6IGZ1bmN0aW9uIGxheW91dChkYXRhLCBvcHRpb25zKSB7XG4gICAgICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgICAgIC8qKiDlkIzlv4PlnIbnmoTluIPlsYDojIPlm7TvvIzpu5jorqTkuLrlvZPliY3nlLvluIPnmoTlrr3pq5jojIPlm7QgKi9cbiAgICAgICAgYm91bmRpbmdCb3g6IHtcbiAgICAgICAgICB4MTogMCxcbiAgICAgICAgICB5MTogMCxcbiAgICAgICAgICB3OiB3aWR0aCxcbiAgICAgICAgICBoOiBoZWlnaHRcbiAgICAgICAgfSxcblxuICAgICAgICAvKiog6IqC54K56Ze055qE6Led56a777yM6buY6K6k5Li6NjAgKi9cbiAgICAgICAgbWluTm9kZVNwYWNpbmc6IDYwLFxuXG4gICAgICAgIC8qKiDmr4/lsYLnmoToioLngrnluqbmlbDojIPlm7QgKi9cbiAgICAgICAgbGV2ZWxXaWR0aDogZnVuY3Rpb24gbGV2ZWxXaWR0aChub2RlcywgbWF4RGVncmVlKSB7XG4gICAgICAgICAgLyoqIOWQjOW/g+WchuWxguaVsCAqL1xuICAgICAgICAgIHZhciBsZXZlbE51bSA9IDg7XG4gICAgICAgICAgcmV0dXJuIG1heERlZ3JlZSAvIGxldmVsTnVtO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogbmV3IENvbmNlbnRyaWNMYXlvdXQoX29iamVjdFNwcmVhZDIoe30sIGRlZmF1bHRPcHRpb25zLCB7fSwgb3B0aW9ucywge1xuICAgICAgICAgIGRhdGE6IGRhdGFcbiAgICAgICAgfSkpLnJ1bigpXG4gICAgICB9O1xuICAgIH1cbiAgfSwge1xuICAgIG5hbWU6ICdmb3JjZScsXG4gICAgZGVzYzogJ+WKm+WvvOW4g+WxgCcsXG4gICAgaWNvbjogJ2JyYW5jaGVzJyxcbiAgICBsYXlvdXQ6IGZ1bmN0aW9uIGxheW91dChkYXRhLCBvcHRpb25zKSB7XG4gICAgICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgICAgIGRhdGE6IGRhdGEsXG5cbiAgICAgICAgLyoqIOWJjee9ruW4g+WxgO+8jOm7mOiupOS4unJhbmRvbSAqL1xuICAgICAgICBwcmVzZXQ6IHtcbiAgICAgICAgICBuYW1lOiBwcmV2UHJvcHMubGF5b3V0ICYmIHByZXZQcm9wcy5sYXlvdXQubmFtZSB8fCAnY29uY2VudHJpYycsXG4gICAgICAgICAgb3B0aW9uczoge31cbiAgICAgICAgfSxcblxuICAgICAgICAvKiogc3ByaW5nIHN0aWZmbmVzcyDlvLnnsKflirLluqbns7vmlbAgKiAqL1xuICAgICAgICBzdGlmZm5lc3M6IDIwMC4wLFxuXG4gICAgICAgIC8qKiDpu5jorqTnmoTlvLnnsKfplb/luqYgKiAqL1xuICAgICAgICBkZWZTcHJpbmdMZW46IDIwMCxcblxuICAgICAgICAvKiogcmVwdWxzaW9uIOaWpeWKm++8jOi/memHjOaMh+S7oyDlupPkvKbluLjph49LZSAqL1xuICAgICAgICByZXB1bHNpb246IDIwMC4wICogNSxcblxuICAgICAgICAvKiog6YCf5bqm55qE5YeP6ZyH5Zug5a2Q77yM5YW25a6e5bCx5piv6Zi75bC857O75pWwICovXG4gICAgICAgIGRhbXBpbmc6IDAuOSxcblxuICAgICAgICAvKiog5pyA5bCP6IO96YeP6ZiI5YC877yM5b2T57KS5a2Q6L+Q5Yqo77yM5pyJ6Zi75bC857O75pWw55qE5a2Y5Zyo77yM5pyA57uI5Lya5bCG5Yid5aeL55qE6IO96YeP5raI6ICX5q6G5bC9ICovXG4gICAgICAgIG1pbkVuZXJneVRocmVzaG9sZDogMC4xLFxuXG4gICAgICAgIC8qKiDmnIDlpKfnmoTpgJ/luqYgWzAsMTAwMF0gKi9cbiAgICAgICAgbWF4U3BlZWQ6IDEwMDAsXG5cbiAgICAgICAgLyoqIOacgOWkp+i/reS7o+aVsCAqL1xuICAgICAgICBNYXhJdGVyYXRpb25zOiAxMDAwMCxcblxuICAgICAgICAvKiog5piv5ZCm5byA5ZCv5Yqo55S7ICovXG4gICAgICAgIGFuaW1hdGlvbjogdHJ1ZVxuICAgICAgfTtcblxuICAgICAgdmFyIGxheW91T3B0cyA9IF9vYmplY3RTcHJlYWQyKHt9LCBkZWZhdWx0T3B0aW9ucywge30sIG9wdGlvbnMpO1xuICAgICAgLyoqIOWPquimgeS4jeaYr+WIneWni+WMluepuuaVsOaNruW4g+WxgO+8jOWJjeS4gOasoeeahOW4g+WxgOS4uuWKm+WvvOW4g+WxgO+8jOmCo+S5iOiuvue9ruWug+eahOWJjee9ruW4g+WxgOS4umZvcmNl77yM5YaF6YOo6YeH55SodHdlYWvluIPlsYAgKi9cblxuXG4gICAgICBpZiAocHJldlByb3BzICYmIHByZXZQcm9wcy5sYXlvdXQubmFtZSA9PT0gJ2ZvcmNlJykge1xuICAgICAgICBpZiAocHJldlByb3BzLmRhdGEubm9kZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgbGF5b3VPcHRzLnByZXNldCA9IHtcbiAgICAgICAgICAgIG5hbWU6ICdjb25jZW50cmljJyxcbiAgICAgICAgICAgIG9wdGlvbnM6IHt9XG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsYXlvdU9wdHMucHJlc2V0ID0ge1xuICAgICAgICAgICAgbmFtZTogJ2ZvcmNlJyxcbiAgICAgICAgICAgIG9wdGlvbnM6IHt9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgZm9yY2UgPSBmb3JjZUxheW91dChsYXlvdU9wdHMpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogZm9yY2UuZGF0YSxcbiAgICAgICAgZm9yY2VTaW11bGF0aW9uOiBmb3JjZS5zaW11bGF0aW9uXG4gICAgICB9O1xuICAgIH1cbiAgfV07XG59O1xuXG52YXIgbGF5b3V0SW5mbyA9IGZ1bmN0aW9uIGxheW91dEluZm8obGF5b3V0cykge1xuICByZXR1cm4gbGF5b3V0cy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICB2YXIgZGVzYyA9IGl0ZW0uZGVzYyxcbiAgICAgICAgbmFtZSA9IGl0ZW0ubmFtZSxcbiAgICAgICAgaWNvbiA9IGl0ZW0uaWNvbjtcbiAgICByZXR1cm4ge1xuICAgICAgZGVzYzogZGVzYyxcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBpY29uOiBpY29uXG4gICAgfTtcbiAgfSk7XG59O1xuXG52YXIgbm9vcExheW91dCA9IGZ1bmN0aW9uIG5vb3BMYXlvdXQoKSB7XG4gIHJldHVybiBbXTtcbn07XG4vKipcclxuICpcclxuICogQHBhcmFtIGdyYXBoaW4gR3JhcGhpbue7hOS7tuWvueixoVxyXG4gKiBAcGFyYW0gcGFyYW1zXHJcbiAqL1xuXG5cbnZhciBsYXlvdXRDb250cm9sbGVyID0gZnVuY3Rpb24gbGF5b3V0Q29udHJvbGxlcihncmFwaGluLCBwYXJhbXMpIHtcbiAgdmFyIHByb3BzID0gZ3JhcGhpbi5wcm9wcyxcbiAgICAgIGZvcmNlU2ltdWxhdGlvbiA9IGdyYXBoaW4uZm9yY2VTaW11bGF0aW9uLFxuICAgICAgZ3JhcGggPSBncmFwaGluLmdyYXBoO1xuICB2YXIgd2lkdGggPSBncmFwaC5nZXQoJ3dpZHRoJyk7XG4gIHZhciBoZWlnaHQgPSBncmFwaC5nZXQoJ2hlaWdodCcpO1xuICB2YXIgUHJvcHNEYXRhID0gcGFyYW1zLmRhdGEsXG4gICAgICBfcGFyYW1zJHByZXZQcm9wcyA9IHBhcmFtcy5wcmV2UHJvcHMsXG4gICAgICBwcmV2UHJvcHMgPSBfcGFyYW1zJHByZXZQcm9wcyA9PT0gdm9pZCAwID8gcHJvcHMgOiBfcGFyYW1zJHByZXZQcm9wcztcbiAgdmFyIGxheW91dCA9IHByb3BzLmxheW91dDtcbiAgLyoqIOaVsOaNrueahOagoemqjCAgKi9cblxuICB2YXIgZGF0YSA9IGRhdGFDaGVja2luZyhQcm9wc0RhdGEpO1xuICAvKiog5rOo5YaMICovXG5cbiAgdmFyIF9wcm9wcyRleHRlbmQgPSBwcm9wcy5leHRlbmQsXG4gICAgICBleHRlbmQgPSBfcHJvcHMkZXh0ZW5kID09PSB2b2lkIDAgPyB7fSA6IF9wcm9wcyRleHRlbmQ7XG4gIHZhciBleHRlbmRMYXlvdXQgPSBleHRlbmQubGF5b3V0IHx8IG5vb3BMYXlvdXQ7XG4gIHZhciBsYXlvdXRzID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShkZWZhdWx0TGF5b3V0cyhncmFwaGluLCBwcmV2UHJvcHMpKSwgX3RvQ29uc3VtYWJsZUFycmF5KGV4dGVuZExheW91dChncmFwaGluLCBwcmV2UHJvcHMpKSk7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuXG4gIGdyYXBoaW4uZ2V0TGF5b3V0SW5mbyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbGF5b3V0SW5mbyhsYXlvdXRzKTtcbiAgfTtcbiAgLyoqIOW9k+ayoeacieiKgueCue+8jOWImeS4jeWPguWKoOW4g+WxgCAqL1xuXG5cbiAgaWYgKGRhdGEubm9kZXMgJiYgZGF0YS5ub2Rlcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4ge1xuICAgICAgZGF0YTogZGF0YVxuICAgIH07XG4gIH1cblxuICB2YXIgaGFzUG9zaXRpb24gPSBkYXRhLm5vZGVzLmV2ZXJ5KGZ1bmN0aW9uIChub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUueCAmJiBub2RlLnk7XG4gIH0pO1xuICAvKiogbGF5b3V05LiN5a2Y5Zyo77yM5LiU5pyJ5L2N572u5L+h5oGv77yM5YiZ6K6k5Li65pivc2F2ZS1yZW5kZXLmk43kvZwgKi9cblxuICBpZiAoIShsYXlvdXQgJiYgbGF5b3V0Lm5hbWUpKSB7XG4gICAgaWYgKGhhc1Bvc2l0aW9uKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBkYXRhXG4gICAgICB9O1xuICAgIH1cblxuICAgIGxheW91dCA9IHtcbiAgICAgIG5hbWU6ICdjb25jZW50cmljJ1xuICAgIH07XG4gIH1cbiAgLyoqIOmHjee9rmZvcmNlU2ltdWxhdGlvbiAgKi9cblxuXG4gIGlmIChmb3JjZVNpbXVsYXRpb24pIHtcbiAgICBmb3JjZVNpbXVsYXRpb24uc3RvcCgpO1xuICB9XG4gIC8qKiDorr7nva7luIPlsYDnmoQgb3B0aW9uc+WPguaVsCAqL1xuXG5cbiAgdmFyIF9sYXlvdXQgPSBsYXlvdXQsXG4gICAgICBuYW1lID0gX2xheW91dC5uYW1lO1xuXG4gIHZhciBvcHRpb25zID0gX29iamVjdFNwcmVhZDIoe1xuICAgIGdyYXBoOiBncmFwaCxcbiAgICB3aWR0aDogd2lkdGgsXG4gICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgZGF0YTogZGF0YVxuICB9LCBsYXlvdXQub3B0aW9ucyk7XG4gIC8qKiDlvpfliLDlvZPliY3ljLnphY3nmoTluIPlsYDlh73mlbAgKi9cblxuXG4gIHZhciBtYXRjaExheW91dCA9IGxheW91dHMuZmluZChmdW5jdGlvbiAoaXRlbSkge1xuICAgIHJldHVybiBpdGVtLm5hbWUgPT09IG5hbWU7XG4gIH0pIHx8IHtcbiAgICBuYW1lOiAnJyxcbiAgICBpY29uOiAnJyxcbiAgICBsYXlvdXQ6IGZ1bmN0aW9uIGxheW91dChpbnB1dERhdGEpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IGlucHV0RGF0YVxuICAgICAgfTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBtYXRjaExheW91dC5sYXlvdXQoZGF0YSwgb3B0aW9ucyk7XG59O1xuXG52YXIgaGlnaGxpZ2h0ID0gZnVuY3Rpb24gaGlnaGxpZ2h0KGdyYXBoKSB7XG4gIHJldHVybiBmdW5jdGlvbiAobm9kZUlkcykge1xuICAgIGdyYXBoLmdldE5vZGVzKCkuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkge1xuICAgICAgZ3JhcGguY2xlYXJJdGVtU3RhdGVzKG5vZGUsIG51bGwpO1xuXG4gICAgICBpZiAobm9kZUlkcy5pbmRleE9mKG5vZGUuZ2V0KCdpZCcpKSAhPT0gLTEpIHtcbiAgICAgICAgZ3JhcGguc2V0SXRlbVN0YXRlKG5vZGUsICdoaWdobGlnaHQubGlnaHQnLCBmYWxzZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBncmFwaC5zZXRJdGVtU3RhdGUobm9kZSwgJ2hpZ2hsaWdodC5kYXJrJywgdHJ1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59O1xuXG52YXIgZ2V0SW5mbyA9IGZ1bmN0aW9uIGdldEluZm8oZ3JhcGgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbm9kZXMgPSBncmFwaC5nZXQoJ25vZGVzJyk7XG4gICAgdmFyIGVkZ2VzID0gZ3JhcGguZ2V0KCdlZGdlcycpO1xuICAgIHJldHVybiB7XG4gICAgICBjb3VudDoge1xuICAgICAgICBub2Rlczogbm9kZXMubGVuZ3RoLFxuICAgICAgICBlZGdlczogZWRnZXMubGVuZ3RoXG4gICAgICB9XG4gICAgfTtcbiAgfTtcbn07XG5cbnZhciBzZWFyY2ggPSBmdW5jdGlvbiBzZWFyY2goZ3JhcGgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgd29yZHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICcnO1xuICAgIC8vIOaQnOe0ouWIhuivje+8jOm7mOiupOepuuagvOmalOW8gFxuICAgIHZhciB3b3Jkc0FycmF5ID0gd29yZHMudHJpbSgpLnNwbGl0KCcgJyk7IC8vIOebruWJjeWFiOWPquaUr+aMgW5vZGUg55qE5pCc57SiXG5cbiAgICB2YXIgX2dyYXBoJHNhdmUgPSBncmFwaC5zYXZlKCksXG4gICAgICAgIG5vZGVzID0gX2dyYXBoJHNhdmUubm9kZXM7IC8vIOWMuemFjeaWueazlVxuXG5cbiAgICB2YXIgbWF0Y2hXb3JkID0gZnVuY3Rpb24gbWF0Y2hXb3JkKG5vZGUsIHdvcmQpIHtcbiAgICAgIHZhciBpZCA9IG5vZGUuaWQsXG4gICAgICAgICAgX25vZGUkbGFiZWwgPSBub2RlLmxhYmVsLFxuICAgICAgICAgIGxhYmVsID0gX25vZGUkbGFiZWwgPT09IHZvaWQgMCA/ICcnIDogX25vZGUkbGFiZWwsXG4gICAgICAgICAgcHJvcGVydGllcyA9IG5vZGUucHJvcGVydGllczsgLy8g5oyJIGlkIOWMuemFjVxuXG4gICAgICBpZiAod29yZCAmJiBTdHJpbmcoaWQpLmluZGV4T2Yod29yZCkgIT09IC0xKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaXNNYXRjaDogdHJ1ZSxcbiAgICAgICAgICBzZWFyY2hUeXBlOiAnaWQnXG4gICAgICAgIH07XG4gICAgICB9IC8vIOaMiSBsYWJlbCDljLnphY1cblxuXG4gICAgICBpZiAod29yZCAmJiBTdHJpbmcobGFiZWwpLmluZGV4T2Yod29yZCkgIT09IC0xKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaXNNYXRjaDogdHJ1ZSxcbiAgICAgICAgICBzZWFyY2hUeXBlOiAnbGFiZWwnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHZhciBtYXRjaFByb3BlcnR5ID0gW107IC8vIOaMiSBwcm9wZXJ0eSDljLnphY1cblxuICAgICAgaWYgKHByb3BlcnRpZXMpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgIG1hdGNoUHJvcGVydHkgPSBwcm9wZXJ0aWVzLmZpbHRlcihmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICAgICAgICByZXR1cm4gcHJvcGVydHkudmFsdWUgJiYgcHJvcGVydHkudmFsdWUgPT09IHdvcmQ7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAobWF0Y2hQcm9wZXJ0eS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaXNNYXRjaDogdHJ1ZSxcbiAgICAgICAgICBzZWFyY2hUeXBlOiAncHJvcGVydHknXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlzTWF0Y2g6IGZhbHNlLFxuICAgICAgICBzZWFyY2hUeXBlOiAnJ1xuICAgICAgfTtcbiAgICB9O1xuXG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIG5vZGVzLmZvckVhY2goZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIHZhciBtYXRjaFJlc3VsdCA9IHdvcmRzQXJyYXkubWFwKGZ1bmN0aW9uICh3b3JkKSB7XG4gICAgICAgIHJldHVybiBtYXRjaFdvcmQobm9kZS5kYXRhLCB3b3JkKTtcbiAgICAgIH0pO1xuICAgICAgdmFyIHNlYXJjaFR5cGVzID0gbWF0Y2hSZXN1bHQucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGN1cnIpIHtcbiAgICAgICAgdmFyIHNlYXJjaFR5cGUgPSBjdXJyLnNlYXJjaFR5cGU7XG5cbiAgICAgICAgaWYgKHNlYXJjaFR5cGUgJiYgYWNjLmluZGV4T2Yoc2VhcmNoVHlwZSkgPT09IC0xKSB7XG4gICAgICAgICAgYWNjLnB1c2goc2VhcmNoVHlwZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfSwgW10pO1xuXG4gICAgICBpZiAoc2VhcmNoVHlwZXMubGVuZ3RoID4gMCkge1xuICAgICAgICByZXN1bHQucHVzaChfb2JqZWN0U3ByZWFkMih7fSwgbm9kZSwge1xuICAgICAgICAgIHNlYXJjaFR5cGVzOiBzZWFyY2hUeXBlc1xuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn07XG5cbnZhciBhcGlzID0gZnVuY3Rpb24gYXBpcyhjb250ZXh0KSB7XG4gIHZhciBncmFwaCA9IGNvbnRleHQuZ3JhcGgsXG4gICAgICBjbGVhciA9IGNvbnRleHQuY2xlYXIsXG4gICAgICBoYW5kbGVSZWRvID0gY29udGV4dC5oYW5kbGVSZWRvLFxuICAgICAgaGFuZGxlVW5kbyA9IGNvbnRleHQuaGFuZGxlVW5kbyxcbiAgICAgIGhhbmRsZVNhdmVIaXN0b3J5ID0gY29udGV4dC5oYW5kbGVTYXZlSGlzdG9yeSxcbiAgICAgIGdldEhpc3RvcnlJbmZvID0gY29udGV4dC5nZXRIaXN0b3J5SW5mbyxcbiAgICAgIGdldExheW91dEluZm8gPSBjb250ZXh0LmdldExheW91dEluZm87XG4gIHJldHVybiB7XG4gICAgaGlnaGxpZ2h0OiBmdW5jdGlvbiBoaWdobGlnaHQkMShub2RlSWRzKSB7XG4gICAgICByZXR1cm4gaGlnaGxpZ2h0KGdyYXBoKShub2RlSWRzKTtcbiAgICB9LFxuICAgIGdldEluZm86IGZ1bmN0aW9uIGdldEluZm8kMSgpIHtcbiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkMih7fSwgZ2V0SW5mbyhncmFwaCkoKSwge1xuICAgICAgICBsYXlvdXRzOiBnZXRMYXlvdXRJbmZvKClcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgc2VhcmNoOiBmdW5jdGlvbiBzZWFyY2gkMSh3b3Jkcykge1xuICAgICAgcmV0dXJuIHNlYXJjaChncmFwaCkod29yZHMpO1xuICAgIH0sXG4gICAgaGlzdG9yeToge1xuICAgICAgcmVkbzogaGFuZGxlUmVkbyxcbiAgICAgIHVuZG86IGhhbmRsZVVuZG8sXG4gICAgICBzYXZlOiBoYW5kbGVTYXZlSGlzdG9yeSxcbiAgICAgIGdldEluZm86IGdldEhpc3RvcnlJbmZvXG4gICAgfSxcbiAgICBjbGVhcjogY2xlYXJcbiAgfTtcbn07XG5cbnZhciBnZXRDb250YWluZXJTaXplID0gZnVuY3Rpb24gZ2V0Q29udGFpbmVyU2l6ZShlbCkge1xuICB2YXIgY2xpZW50V2lkdGggPSBlbC5jbGllbnRXaWR0aCxcbiAgICAgIGNsaWVudEhlaWdodCA9IGVsLmNsaWVudEhlaWdodDtcbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogY2xpZW50V2lkdGgsXG4gICAgaGVpZ2h0OiBjbGllbnRIZWlnaHRcbiAgfTtcbn07XG5cbnZhciBoYW5kbGVSZXNpemUgPSBmdW5jdGlvbiBoYW5kbGVSZXNpemUoZ3JhcGhpbikge1xuICB2YXIgZ3JhcGhET00gPSBncmFwaGluLmdyYXBoRE9NLFxuICAgICAgZ3JhcGggPSBncmFwaGluLmdyYXBoO1xuXG4gIHZhciBfZ2V0Q29udGFpbmVyU2l6ZSA9IGdldENvbnRhaW5lclNpemUoZ3JhcGhET00pLFxuICAgICAgd2lkdGggPSBfZ2V0Q29udGFpbmVyU2l6ZS53aWR0aCxcbiAgICAgIGhlaWdodCA9IF9nZXRDb250YWluZXJTaXplLmhlaWdodDtcblxuICBncmFwaC5zZXQoJ3dpZHRoJywgd2lkdGgpO1xuICBncmFwaC5zZXQoJ2hlaWdodCcsIGhlaWdodCk7XG4gIHZhciBjYW52YXMgPSBncmFwaC5nZXQoJ2NhbnZhcycpO1xuXG4gIGlmIChjYW52YXMpIHtcbiAgICBjYW52YXMuY2hhbmdlU2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICBncmFwaC5hdXRvUGFpbnQoKTtcbiAgICBncmFwaGluLnNldFN0YXRlKHtcbiAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgIGhlaWdodDogaGVpZ2h0XG4gICAgfSk7XG4gIH1cbn07XG5cbnZhciBjaGFuZ2Vab29tID0gZnVuY3Rpb24gY2hhbmdlWm9vbShncmFwaGluKSB7XG4gIHZhciBncmFwaCA9IGdyYXBoaW4uZ3JhcGgsXG4gICAgICBzdGF0ZSA9IGdyYXBoaW4uc3RhdGUsXG4gICAgICBnNk9wdGlvbnMgPSBncmFwaGluLmc2T3B0aW9ucztcbiAgdmFyIGZvcmNlU2ltdWxhdGlvbiA9IHN0YXRlLmZvcmNlU2ltdWxhdGlvbjtcbiAgdmFyIF9nNk9wdGlvbnMkaXNab29tT3B0aSA9IGc2T3B0aW9ucy5pc1pvb21PcHRpbWl6ZSxcbiAgICAgIGlzWm9vbU9wdGltaXplID0gX2c2T3B0aW9ucyRpc1pvb21PcHRpID09PSB2b2lkIDAgPyBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gOiBfZzZPcHRpb25zJGlzWm9vbU9wdGksXG4gICAgICBfZzZPcHRpb25zJGtleVNoYXBlWm8gPSBnNk9wdGlvbnMua2V5U2hhcGVab29tLFxuICAgICAga2V5U2hhcGVab29tID0gX2c2T3B0aW9ucyRrZXlTaGFwZVpvID09PSB2b2lkIDAgPyAwLjYgOiBfZzZPcHRpb25zJGtleVNoYXBlWm87XG4gIHZhciBleHRlbmRlZEdyYXBoID0gZ3JhcGg7XG4gIC8qKiDnvKnmlL7nmoTml7blgJnpmpDol49JTUFHRS9URVhUICovXG5cbiAgdmFyIHRpbWVyID0gbnVsbDtcbiAgZ3JhcGgub24oJ3ZpZXdwb3J0Y2hhbmdlJywgZnVuY3Rpb24gKGV2dCkge1xuICAgIGlmIChldnQuYWN0aW9uID09PSAnem9vbScgJiYgaXNab29tT3B0aW1pemUoZ3JhcGgsIGV2dCkpIHtcbiAgICAgIGlmICh0aW1lcikgd2luZG93LmNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmIChncmFwaGluLnN0YXRlLmZvcmNlU2ltdWxhdGlvbikge1xuICAgICAgICAgICAgLyoqIOWmguaenOWtmOWcqOWKm+WvvO+8jOmCo+S5iOe8qeaUvue7k+adn+S4lOWKm+WvvOacque7k+adn+WJje+8jOWPquWxleekumtleVNoYXBlICovXG4gICAgICAgICAgICBpZiAoZ3JhcGhpbi5zdGF0ZS5mb3JjZVNpbXVsYXRpb24uZG9uZSkgb3B0aW1pemVEcmF3aW5nKGV4dGVuZGVkR3JhcGgsIGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLyoqIOWPquaciee8qeaUvuavlOeOh+Wkp+S6jmtleVNoYXBlWm9vbe+8jOaJjeWxleekuuaJgOacieeahO+8jOWQpuWImeWPquWxleekumtleXNoYXBlICovXG5cblxuICAgICAgICAgIGlmIChncmFwaC5nZXRab29tKCkgPiBrZXlTaGFwZVpvb20pIHtcbiAgICAgICAgICAgIG9wdGltaXplRHJhd2luZyhleHRlbmRlZEdyYXBoLCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIG9wdGltaXplRHJhd2luZyhleHRlbmRlZEdyYXBoLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0sIDIwMCk7XG4gICAgICBvcHRpbWl6ZURyYXdpbmcoZXh0ZW5kZWRHcmFwaCwgdHJ1ZSk7XG4gICAgfVxuICB9KTtcbn07XG5cbnZhciBkcmFnV2l0aEZvcmNlID0gZnVuY3Rpb24gZHJhZ1dpdGhGb3JjZShncmFwaGluKSB7XG4gIHZhciBncmFwaCA9IGdyYXBoaW4uZ3JhcGgsXG4gICAgICBnNk9wdGlvbnMgPSBncmFwaGluLmc2T3B0aW9ucztcbiAgdmFyIF9nNk9wdGlvbnMkYXV0b0ZvbGxvdyA9IGc2T3B0aW9ucy5hdXRvRm9sbG93V2l0aEZvcmNlLFxuICAgICAgYXV0b0ZvbGxvd1dpdGhGb3JjZSA9IF9nNk9wdGlvbnMkYXV0b0ZvbGxvdyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9nNk9wdGlvbnMkYXV0b0ZvbGxvdyxcbiAgICAgIF9nNk9wdGlvbnMkYXV0b1BpbldpdCA9IGc2T3B0aW9ucy5hdXRvUGluV2l0aEZvcmNlLFxuICAgICAgYXV0b1BpbldpdGhGb3JjZSA9IF9nNk9wdGlvbnMkYXV0b1BpbldpdCA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9nNk9wdGlvbnMkYXV0b1BpbldpdDtcbiAgLyoqIOaLluaLvUZvcmNl6IqC54K577yac3RhcnQgKi9cblxuICBncmFwaC5vbignbm9kZTpkcmFnc3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGdyYXBoaW4uc3RhdGUuZm9yY2VTaW11bGF0aW9uKSB7XG4gICAgICBncmFwaGluLnN0YXRlLmZvcmNlU2ltdWxhdGlvbi5zdG9wKCk7XG4gICAgfVxuICB9KTtcbiAgLyoqIOaLluaLvee7k+adnyAqL1xuXG4gIGdyYXBoLm9uKCdub2RlOmRyYWdlbmQnLCBmdW5jdGlvbiAoZSkge1xuICAgIGlmIChncmFwaGluLnN0YXRlLmZvcmNlU2ltdWxhdGlvbiAmJiBhdXRvRm9sbG93V2l0aEZvcmNlKSB7XG4gICAgICB2YXIgbm9kZU1vZGVsID0gZS5pdGVtLmdldCgnbW9kZWwnKTtcbiAgICAgIG5vZGVNb2RlbC54ID0gZS54O1xuICAgICAgbm9kZU1vZGVsLnkgPSBlLnk7IC8vIOetlueVpe+8muaLluaLveWQjuWwseWumuWcqOaLluaLveWkhFxuXG4gICAgICBub2RlTW9kZWwubGF5b3V0ID0gX29iamVjdFNwcmVhZDIoe30sIG5vZGVNb2RlbC5sYXlvdXQsIHtcbiAgICAgICAgZm9yY2U6IHtcbiAgICAgICAgICBtYXNzOiBhdXRvUGluV2l0aEZvcmNlID8gMTAwMDAwMCA6IG51bGxcbiAgICAgICAgfVxuICAgICAgfSk7IC8vIFRPRE8gOuacquadpeWkmumAieWPr+S7peaLluaLveOAglxuXG4gICAgICB2YXIgZHJhZ2VOb2RlcyA9IFtub2RlTW9kZWxdO1xuICAgICAgZ3JhcGhpbi5zdGF0ZS5mb3JjZVNpbXVsYXRpb24ucmVzdGFydChkcmFnZU5vZGVzLCBncmFwaCk7XG4gICAgICBncmFwaC5yZWZyZXNoUG9zaXRpb25zKCk7XG4gICAgfVxuICB9KTtcbn07XG5cbnZhciBoYW5kbGVHcmFwaEV2ZW50cyA9IGZ1bmN0aW9uIGhhbmRsZUdyYXBoRXZlbnRzKGdyYXBoaW4pIHtcbiAgLyoqXHJcbiAgICog55uR5ZCsd2luZG935LqL5Lu2XHJcbiAgICogcmVzaXplIDpkZWJvdW5jZeWkhOeQhlxyXG4gICAqL1xuICB2YXIgaGFuZGxlUmVzaXplRXZlbnQgPSBkZWJvdW5jZShmdW5jdGlvbiAoKSB7XG4gICAgaGFuZGxlUmVzaXplKGdyYXBoaW4pO1xuICB9LCAxMDApO1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaGFuZGxlUmVzaXplRXZlbnQsIGZhbHNlKTtcbiAgLyoqXHJcbiAgICog55uR5ZCsd2hlZWwvem9vbeS6i+S7tlxyXG4gICAqL1xuXG4gIGNoYW5nZVpvb20oZ3JhcGhpbik7XG4gIC8qKlxyXG4gICAqIOWfuuS6juWKm+WvvOeahOiKgueCueaLluaLvVxyXG4gICAqL1xuXG4gIGRyYWdXaXRoRm9yY2UoZ3JhcGhpbik7XG4gIC8qKlxyXG4gICAqIOS6i+S7tua4hemZpFxyXG4gICAqL1xuXG4gIHJldHVybiB7XG4gICAgY2xlYXI6IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGhhbmRsZVJlc2l6ZUV2ZW50LCBmYWxzZSk7XG4gICAgfVxuICB9O1xufTtcblxudmFyIGZsb29yUmFuZG9tID0gZnVuY3Rpb24gZmxvb3JSYW5kb20obnVtYmVyKSB7XG4gIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBudW1iZXIpO1xufTtcblxudmFyIHJhbmRvbUNvbG9yID0gZnVuY3Rpb24gcmFuZG9tQ29sb3IoKSB7XG4gIHZhciBvcGFjaXR5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAxO1xuICB2YXIgciA9IGZsb29yUmFuZG9tKDI1NSk7XG4gIHZhciBnID0gZmxvb3JSYW5kb20oMjU1KTtcbiAgdmFyIGIgPSBmbG9vclJhbmRvbSgyNTUpO1xuICB2YXIgY29sb3IgPSBcInJnYmEoXCIuY29uY2F0KHIsIFwiLFwiKS5jb25jYXQoZywgXCIsXCIpLmNvbmNhdChiLCBcIixcIikuY29uY2F0KG9wYWNpdHksIFwiKVwiKTtcbiAgcmV0dXJuIGNvbG9yO1xufTtcblxudmFyIGNvbG9yTWFwID0ge307XG4vKipcclxuICpcclxuICogQHBhcmFtIHsqfSBuYW1lIOWIhuexu+eahOWQjeensFxyXG4gKiBAZXhhbXBsZVxyXG4gKiBkZWJ1ZygnVG9vbHRpcCcpKCdyZW5kZXInLCcuLi4nKVxyXG4gKiBAdG9kbyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy96aC1DTi9kb2NzL1dlYi9BUEkvQ29uc29sZVxyXG4gKlxyXG4gKi9cblxudmFyIGRlYnVnID0gZnVuY3Rpb24gZGVidWcobmFtZSkge1xuICBpZiAoIWNvbG9yTWFwW25hbWVdKSB7XG4gICAgY29sb3JNYXBbbmFtZV0gPSByYW5kb21Db2xvcigpO1xuICB9XG5cbiAgdmFyIGNvbG9yID0gY29sb3JNYXBbbmFtZV07XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgdmFyIF9jb25zb2xlO1xuXG4gICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgbWVzc2FnZSA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgbWVzc2FnZVtfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgIH1cblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIChfY29uc29sZSA9IGNvbnNvbGUpLmxvZy5hcHBseShfY29uc29sZSwgW1wiJWNcIi5jb25jYXQobmFtZSksIFwiY29sb3I6ICBcIi5jb25jYXQoY29sb3IsIFwiOyBmb250LXN0eWxlOml0YWxpYyA7cGFkZGluZzogMnB4O2ZvbnQtd2VpZ2h0OjcwMFwiKV0uY29uY2F0KG1lc3NhZ2UpKTtcbiAgICB9XG4gIH07XG59O1xuXG52YXIgR3JhcGggPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9SZWFjdCRQdXJlQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhHcmFwaCwgX1JlYWN0JFB1cmVDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIEdyYXBoKHByb3BzKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdyYXBoKTtcblxuICAgIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKEdyYXBoKS5jYWxsKHRoaXMsIHByb3BzKSk7XG4gICAgX3RoaXMuZ3JhcGhET00gPSBudWxsO1xuXG4gICAgX3RoaXMuZ2V0QXBpcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjb250ZXh0ID0gX3RoaXMuZ2V0Q29udGV4dCgpO1xuXG4gICAgICByZXR1cm4gYXBpcyhjb250ZXh0KTtcbiAgICB9O1xuXG4gICAgX3RoaXMuZ2V0SGlzdG9yeUluZm8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX3RoaXMuaGlzdG9yeS5nZXRIaXN0b3J5SW5mbygpO1xuICAgIH07XG5cbiAgICBfdGhpcy5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLmdyYXBoLmNsZWFyKCk7XG5cbiAgICAgIF90aGlzLmhpc3RvcnkucmVzZXQoKTtcblxuICAgICAgX3RoaXMuY2xlYXJFdmVudHMoKTtcblxuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgbm9kZXM6IFtdLFxuICAgICAgICAgIGVkZ2VzOiBbXVxuICAgICAgICB9LFxuICAgICAgICBmb3JjZVNpbXVsYXRpb246IG51bGwsXG4gICAgICAgIGdyYXBoU2F2ZTogbnVsbFxuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGF0YSA9IF90aGlzLnN0YXRlLmRhdGE7XG5cbiAgICAgICAgX3RoaXMucmVuZGVyR3JhcGgoZGF0YSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3RoaXMuZ2V0Q29udGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKTtcbiAgICB9O1xuXG4gICAgX3RoaXMucmVuZGVyR3JhcGhXaXRoTGlmZUN5Y2xlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGRhdGEgPSBfdGhpcy5zdGF0ZS5kYXRhO1xuXG4gICAgICBfdGhpcy5ncmFwaC5jaGFuZ2VEYXRhKGNsb25lRGVlcChkYXRhKSk7XG5cbiAgICAgIF90aGlzLmdyYXBoLmVtaXQoJ2FmdGVyY2hhbmdlZGF0YScpO1xuXG4gICAgICBfdGhpcy5oYW5kbGVTYXZlSGlzdG9yeSgpO1xuICAgIH07XG5cbiAgICBfdGhpcy5zdG9wRm9yY2VTaW11bGF0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgLyoqIOWmguaenOacieaooeaLn+WZqOmcgOimgeWFiOWBnOatoiAqL1xuICAgICAgdmFyIGZvcmNlU2ltdWxhdGlvbiA9IF90aGlzLnN0YXRlLmZvcmNlU2ltdWxhdGlvbjtcblxuICAgICAgaWYgKGZvcmNlU2ltdWxhdGlvbikge1xuICAgICAgICBmb3JjZVNpbXVsYXRpb24uc3RvcCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfdGhpcy5oYW5kbGVTYXZlSGlzdG9yeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjdXJyZW50U3RhdGUgPSBfb2JqZWN0U3ByZWFkMih7fSwgX3RoaXMuc3RhdGUsIHtcbiAgICAgICAgZ3JhcGhTYXZlOiBjbG9uZURlZXAoX3RoaXMuZ3JhcGguc2F2ZSgpKVxuICAgICAgfSk7XG5cbiAgICAgIF90aGlzLmhpc3Rvcnkuc2F2ZShjdXJyZW50U3RhdGUpO1xuICAgIH07XG5cbiAgICBfdGhpcy5oYW5kbGVVbmRvID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuc3RvcEZvcmNlU2ltdWxhdGlvbigpO1xuXG4gICAgICB2YXIgcHJldlN0YXRlID0gX3RoaXMuaGlzdG9yeS51bmRvKCk7XG5cbiAgICAgIGlmIChwcmV2U3RhdGUpIHtcbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoX29iamVjdFNwcmVhZDIoe30sIHByZXZTdGF0ZSksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpcy5yZW5kZXJHcmFwaEJ5SGlzdG9yeSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3RoaXMuaGFuZGxlUmVkbyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLnN0b3BGb3JjZVNpbXVsYXRpb24oKTtcblxuICAgICAgdmFyIG5leHRTdGF0ZSA9IF90aGlzLmhpc3RvcnkucmVkbygpO1xuXG4gICAgICBpZiAobmV4dFN0YXRlKSB7XG4gICAgICAgIF90aGlzLnNldFN0YXRlKF9vYmplY3RTcHJlYWQyKHt9LCBuZXh0U3RhdGUpLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXMucmVuZGVyR3JhcGhCeUhpc3RvcnkoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF90aGlzLnJlbmRlckdyYXBoID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIF90aGlzLmdyYXBoLmNoYW5nZURhdGEoY2xvbmVEZWVwKGRhdGEpKTtcbiAgICAgIC8qKlxyXG4gICAgICAgKiBUT0RPIOenu+mZpCBgYWZ0ZXJjaGFuZ2VkYXRhYCBFdmVudFxyXG4gICAgICAgKiDmraTmlrnms5XlupTor6XmlL7liLBHNueahGNoYW5nZURhdGHmlrnms5XkuK3ljrtlbWl0XHJcbiAgICAgICAqL1xuXG5cbiAgICAgIF90aGlzLmdyYXBoLmVtaXQoJ2FmdGVyY2hhbmdlZGF0YScpO1xuICAgIH07XG4gICAgLyoqXHJcbiAgICAgKiDmoLnmja5oaXN0b3J55p2l5riy5p+T5Zu+XHJcbiAgICAgKi9cblxuXG4gICAgX3RoaXMucmVuZGVyR3JhcGhCeUhpc3RvcnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAvKiog5aaC5p6c5Y6G5Y+y5LiK5pyJ5qih5ouf5Zmo77yM6ZyA6KaB6YeN5paw5ZCv5YqoICovXG4gICAgICB2YXIgX3RoaXMkc3RhdGUgPSBfdGhpcy5zdGF0ZSxcbiAgICAgICAgICBmb3JjZVNpbXVsYXRpb24gPSBfdGhpcyRzdGF0ZS5mb3JjZVNpbXVsYXRpb24sXG4gICAgICAgICAgZ3JhcGhTYXZlID0gX3RoaXMkc3RhdGUuZ3JhcGhTYXZlO1xuXG4gICAgICBpZiAoZm9yY2VTaW11bGF0aW9uKSB7XG4gICAgICAgIGZvcmNlU2ltdWxhdGlvbi5yZXN0YXJ0KGdyYXBoU2F2ZS5ub2RlcyB8fCBbXSwgX3RoaXMuZ3JhcGgpO1xuICAgICAgfVxuXG4gICAgICBfdGhpcy5yZW5kZXJHcmFwaChncmFwaFNhdmUpO1xuICAgIH07XG5cbiAgICBfdGhpcy5yZW5kZXJDaGlsZHJlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjaGlsZHJlbiA9IF90aGlzLnByb3BzLmNoaWxkcmVuO1xuICAgICAgdmFyIGNvbWJpbmVQcm9wcyA9IHtcbiAgICAgICAgZ3JhcGg6IF90aGlzLmdyYXBoLFxuICAgICAgICBncmFwaERPTTogX3RoaXMuZ3JhcGhET00sXG4gICAgICAgIGdyYXBoVmFyczogX3RoaXMuc3RhdGUsXG4gICAgICAgIGFwaXM6IF90aGlzLmdldEFwaXMoKVxuICAgICAgfTtcblxuICAgICAgaWYgKCFjaGlsZHJlbikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIC8qKiAgMS5yZW5kZXItcHJvcHMgKi9cblxuXG4gICAgICBpZiAodHlwZW9mIGNoaWxkcmVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBjaGlsZHJlbihjb21iaW5lUHJvcHMpO1xuICAgICAgfVxuICAgICAgLyoqIDIuY29tYm9zZS1jb21wb25lbnQgKi9cblxuICAgICAgLyoqXHJcbiAgICAgICAqIENoaWxkcmVu5pivUmVhY3TlhYPntKDnmoTmg4XlhrUgOuacieWMheijueeahFRhZ+WNs+WPr++8jOaXoOiuuuaYr2RpduaIluiAheaYr0ZyYWdlbWVudOaIluiAheaYr+e7hOS7tlxyXG4gICAgICAgKiAxLiA8R3JhcGhlaGU+IDxkaXY+IHRoaXMgaXMgdGV4dCA8Q29udGV4dE1lbnUgLz4gIDwvZGl2PiA8L0dyYXBoZW5lPlxyXG4gICAgICAgKiAyLiA8R3JhcGhlaGU+IDxDdXN0b21lckNvbXBvbmVudD4gdGhpcyBpcyB0ZXh0ICA8Q29udGV4dE1lbnUgLz4gPC9DdXN0b21lckNvbXBvbmVudD4gPC9HcmFwaGVuZT5cclxuICAgICAgICogMi4gPEdyYXBoZWhlPiA8RnJhZ21lbnQ+IHRoaXMgaXMgdGV4dCAgPENvbnRleHRNZW51IC8+IDwvR3JhcGhlbmU+XHJcbiAgICAgICAqL1xuXG5cbiAgICAgIGlmIChSZWFjdC5pc1ZhbGlkRWxlbWVudChjaGlsZHJlbikgJiYgKFN0cmluZyhjaGlsZHJlbi50eXBlKSA9PT0gJ1N5bWJvbChyZWFjdC5mcmFnbWVudCknIHx8IHR5cGVvZiBjaGlsZHJlbi50eXBlID09PSAnc3RyaW5nJykpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgY29uc29sZS5lcnJvcignUGxlYXNlIGRvIG5vdCB3cmFwIGNvbXBvbmVudHMgaW5zaWRlIGRvbSBlbGVtZW50IG9yIEZyYWdtZW50IHdoZW4gdXNpbmcgR3JhcGhpbicpO1xuICAgICAgICByZXR1cm4gY2hpbGRyZW47XG4gICAgICB9XG5cbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShjaGlsZHJlbikpIHtcbiAgICAgICAgY2hpbGRyZW4gPSBbY2hpbGRyZW5dO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gUmVhY3QuQ2hpbGRyZW4ubWFwKGNoaWxkcmVuLCBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgLy8g5aaC5p6c5Lyg5YWl55qE5pivIERPTSDlhYPntKDmiJbkuI3mmK/lkIjms5XnmoQgRWxlbWVudO+8jOS4jeS8oOWFpSBwcm9wc1xuICAgICAgICBpZiAoIVJlYWN0LmlzVmFsaWRFbGVtZW50KGNoaWxkKSB8fCB0eXBlb2YgY2hpbGQudHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUmVhY3QuY2xvbmVFbGVtZW50KGNoaWxkLCBfb2JqZWN0U3ByZWFkMih7fSwgY29tYmluZVByb3BzKSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAvKiog5Zu+5piv5ZCm5YeG5aSH5a6M5oiQICovXG4gICAgICBpc0dyYXBoUmVhZHk6IGZhbHNlLFxuICAgICAgZGF0YTogcHJvcHMuZGF0YSxcbiAgICAgIGZvcmNlU2ltdWxhdGlvbjogbnVsbCxcbiAgICAgIHdpZHRoOiAwLFxuICAgICAgaGVpZ2h0OiAwLFxuICAgICAgZ3JhcGhTYXZlOiBudWxsXG4gICAgfTtcbiAgICBfdGhpcy5oaXN0b3J5ID0gbmV3IEhpc3RvcnlDb250cm9sbGVyKCk7XG4gICAgX3RoaXMuZm9yY2VTaW11bGF0aW9uID0gbnVsbDtcbiAgICBfdGhpcy5ncmFwaCA9IHt9O1xuXG4gICAgX3RoaXMuZ2V0TGF5b3V0SW5mbyA9IGZ1bmN0aW9uICgpIHt9O1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKEdyYXBoLCBbe1xuICAgIGtleTogXCJjb21wb25lbnREaWRNb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB2YXIgZGF0YSA9IHRoaXMucHJvcHMuZGF0YTtcbiAgICAgIGRlYnVnKCdlZmZlY3QnKSgnZGlkLW1vdW50Jyk7XG4gICAgICAvKiogMS4g5rOo5YaM6IqC54K5ICovXG5cbiAgICAgIHZhciBiZWhhdmlyb3NNb2RlID0gZ3JhcGhpblJlZ2lzdGVyKHRoaXMucHJvcHMpO1xuICAgICAgLyoqIDIuIOWIneWni+WMluWunuS+iyAqL1xuXG4gICAgICB2YXIgX2luaXRDb250cm9sbGVyID0gaW5pdEdyYXBoKHRoaXMucHJvcHMsIHRoaXMuZ3JhcGhET00sIGJlaGF2aXJvc01vZGUpLFxuICAgICAgICAgIGluc3RhbmNlID0gX2luaXRDb250cm9sbGVyLmluc3RhbmNlLFxuICAgICAgICAgIHdpZHRoID0gX2luaXRDb250cm9sbGVyLndpZHRoLFxuICAgICAgICAgIGhlaWdodCA9IF9pbml0Q29udHJvbGxlci5oZWlnaHQsXG4gICAgICAgICAgb3B0aW9ucyA9IF9pbml0Q29udHJvbGxlci5vcHRpb25zO1xuXG4gICAgICB0aGlzLmc2T3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICB0aGlzLmdyYXBoID0gaW5zdGFuY2U7XG5cbiAgICAgIHZhciBfbGF5b3V0Q29udHJvbGxlciA9IGxheW91dENvbnRyb2xsZXIodGhpcy5nZXRDb250ZXh0KCksIHtcbiAgICAgICAgZGF0YTogZGF0YVxuICAgICAgfSksXG4gICAgICAgICAgbmV3RGF0YSA9IF9sYXlvdXRDb250cm9sbGVyLmRhdGEsXG4gICAgICAgICAgZm9yY2VTaW11bGF0aW9uID0gX2xheW91dENvbnRyb2xsZXIuZm9yY2VTaW11bGF0aW9uO1xuXG4gICAgICB0aGlzLmZvcmNlU2ltdWxhdGlvbiA9IGZvcmNlU2ltdWxhdGlvbjtcbiAgICAgIC8qKiAzLuiuvue9rnN0YXRlICovXG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBpc0dyYXBoUmVhZHk6IHRydWUsXG4gICAgICAgIGdyYXBoOiB0aGlzLmdyYXBoLFxuICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgIGhlaWdodDogaGVpZ2h0LFxuICAgICAgICBkYXRhOiBuZXdEYXRhLFxuICAgICAgICBmb3JjZVNpbXVsYXRpb246IGZvcmNlU2ltdWxhdGlvblxuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczIucmVuZGVyR3JhcGhXaXRoTGlmZUN5Y2xlKCk7XG4gICAgICB9KTtcbiAgICAgIC8qKiA0LuWGhemDqOebkeWQrOS4gOS6m+WbvuS6i+S7tiAqL1xuXG4gICAgICB0aGlzLmhhbmRsZUV2ZW50cygpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wb25lbnREaWRVcGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIHZhciBpc0RhdGFDaGFuZ2UgPSB0aGlzLnNob3VsZFVwZGF0ZVdpdGhEZXBzKHByZXZQcm9wcywgWydkYXRhJ10pO1xuICAgICAgdmFyIGlzTGF5b3V0Q2hhbmdlID0gdGhpcy5zaG91bGRVcGRhdGVXaXRoRGVwcyhwcmV2UHJvcHMsIFsnbGF5b3V0J10pO1xuICAgICAgLyoqIOWPquaciWRhdGHmiJbogIVsYXlvdXTmlLnlj5jnmoTml7blgJnvvIzmiY3kvJrph43mlrB1cGRhdGUgKi9cblxuICAgICAgaWYgKGlzRGF0YUNoYW5nZSB8fCBpc0xheW91dENoYW5nZSkge1xuICAgICAgICB2YXIgY3VycmVudERhdGEgPSB0aGlzLnN0YXRlLmRhdGE7XG5cbiAgICAgICAgaWYgKGlzRGF0YUNoYW5nZSkge1xuICAgICAgICAgIHZhciBfZGF0YSA9IHRoaXMucHJvcHMuZGF0YTtcbiAgICAgICAgICBjdXJyZW50RGF0YSA9IF9kYXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIF9sYXlvdXRDb250cm9sbGVyMiA9IGxheW91dENvbnRyb2xsZXIodGhpcy5nZXRDb250ZXh0KCksIHtcbiAgICAgICAgICBkYXRhOiBjdXJyZW50RGF0YSxcbiAgICAgICAgICBwcmV2UHJvcHM6IHByZXZQcm9wc1xuICAgICAgICB9KSxcbiAgICAgICAgICAgIGRhdGEgPSBfbGF5b3V0Q29udHJvbGxlcjIuZGF0YSxcbiAgICAgICAgICAgIGZvcmNlU2ltdWxhdGlvbiA9IF9sYXlvdXRDb250cm9sbGVyMi5mb3JjZVNpbXVsYXRpb247XG5cbiAgICAgICAgdGhpcy5mb3JjZVNpbXVsYXRpb24gPSBmb3JjZVNpbXVsYXRpb247XG4gICAgICAgIC8qKiA1Luiuvue9rnN0YXRlICovXG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICBmb3JjZVNpbXVsYXRpb246IGZvcmNlU2ltdWxhdGlvblxuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLyoqIDYu5riy5p+TICovXG4gICAgICAgICAgX3RoaXMzLnJlbmRlckdyYXBoV2l0aExpZmVDeWNsZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50V2lsbFVubW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICB0aGlzLmNsZWFyRXZlbnRzKCk7XG4gICAgICBkZWJ1ZygnVW5tb3VudCcpKCdjb21wb25lbnRXaWxsVW5tb3VudCcpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wb25lbnREaWRDYXRjaFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRDYXRjaChlcnJvciwgaW5mbykge1xuICAgICAgY29uc29sZS5lcnJvcignQ2F0Y2ggY29tcG9uZW50IGVycm9yOiAnLCBlcnJvciwgaW5mbyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNob3VsZFVwZGF0ZVdpdGhEZXBzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNob3VsZFVwZGF0ZVdpdGhEZXBzKHByZXZQcm9wcywgZGVwcykge1xuICAgICAgdmFyIHByb3BzID0gdGhpcy5wcm9wcztcbiAgICAgIHZhciBpc1VwZGF0ZSA9IGZhbHNlO1xuICAgICAgZGVwcy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKHByZXZQcm9wc1trZXldICE9PSBwcm9wc1trZXldKSB7XG4gICAgICAgICAgaXNVcGRhdGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBpc1VwZGF0ZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaGFuZGxlRXZlbnRzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUV2ZW50cygpIHtcbiAgICAgIHRoaXMuY2xlYXJFdmVudHMgPSBoYW5kbGVHcmFwaEV2ZW50cyh0aGlzLmdldENvbnRleHQoKSkuY2xlYXI7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgLy8gZGVidWcoJ2NvcmUnKSh0aGlzLnN0YXRlKTtcbiAgICAgIHZhciBpc0dyYXBoUmVhZHkgPSB0aGlzLnN0YXRlLmlzR3JhcGhSZWFkeTtcbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgXCJkYXRhLXRlc3RpZFwiOiBcImN1c3RvbS1lbGVtZW50XCIsXG4gICAgICAgIGNsYXNzTmFtZTogXCJncmFwaGluLWNvcmVcIixcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgIG1pbkhlaWdodDogJzUwMHB4JyxcbiAgICAgICAgICBiYWNrZ3JvdW5kOiAnI2ZmZidcbiAgICAgICAgfSxcbiAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYobm9kZSkge1xuICAgICAgICAgIF90aGlzNC5ncmFwaERPTSA9IG5vZGU7XG4gICAgICAgIH1cbiAgICAgIH0pLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBcImdyYXBoaW4tY29tcG9uZW50c1wiXG4gICAgICB9LCBpc0dyYXBoUmVhZHkgJiYgdGhpcy5yZW5kZXJDaGlsZHJlbigpKSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEdyYXBoO1xufShSZWFjdC5QdXJlQ29tcG9uZW50KTtcblxudmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICAvKiog6IqC54K5ICovXG4gIG5vZGVDb3VudDogMTAsXG4gIG5vZGVUeXBlOiAnY29tcGFueSdcbn07XG4vKipcclxuICogMSxtb2NrIGRhdGEgd2l0aCBlZGdlcyxub2Rlc1xyXG4gKiAyLm1vY2sgbm9kZXMgcHJvcGVydGllc1xyXG4gKiAzLmZpbHRlciBlZGdlc1xyXG4gKiA0LlxyXG4gKi9cblxudmFyIE1vY2sgPSBmdW5jdGlvbiBNb2NrKGNvdW50KSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1vY2spO1xuXG4gIHRoaXMuaW5pdE5vZGVzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBfdGhpcyRvcHRpb25zID0gX3RoaXMub3B0aW9ucyxcbiAgICAgICAgbm9kZUNvdW50ID0gX3RoaXMkb3B0aW9ucy5ub2RlQ291bnQsXG4gICAgICAgIG5vZGVUeXBlID0gX3RoaXMkb3B0aW9ucy5ub2RlVHlwZTtcbiAgICB2YXIgdGVtcCA9IEFycmF5LmZyb20oe1xuICAgICAgbGVuZ3RoOiBub2RlQ291bnRcbiAgICB9KTtcbiAgICBfdGhpcy5ub2RlcyA9IHRlbXAubWFwKGZ1bmN0aW9uIChub2RlLCBpbmRleCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IFwibm9kZS1cIi5jb25jYXQoaW5kZXgpLFxuICAgICAgICBsYWJlbDogXCJub2RlLVwiLmNvbmNhdChpbmRleCksXG4gICAgICAgIHR5cGU6IG5vZGVUeXBlLFxuICAgICAgICBwcm9wZXJ0aWVzOiBbXVxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZUNvdW50OyBpID0gaSArIDEpIHtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbm9kZUNvdW50IC0gMTsgaiA9IGogKyAxKSB7XG4gICAgICAgIF90aGlzLmVkZ2VzLnB1c2goe1xuICAgICAgICAgIHNvdXJjZTogXCJub2RlLVwiLmNvbmNhdChpKSxcbiAgICAgICAgICB0YXJnZXQ6IFwibm9kZS1cIi5jb25jYXQoaiksXG4gICAgICAgICAgcHJvcGVydGllczogW11cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX3RoaXMubm9kZUlkcyA9IF90aGlzLm5vZGVzLm1hcChmdW5jdGlvbiAobm9kZSkge1xuICAgICAgcmV0dXJuIG5vZGUuaWQ7XG4gICAgfSk7XG4gIH07XG5cbiAgdGhpcy5leHBhbmQgPSBmdW5jdGlvbiAoc25vZGVzKSB7XG4gICAgX3RoaXMuZWRnZXMgPSBbXTtcbiAgICBfdGhpcy5ub2RlcyA9IFtdO1xuICAgIHNub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF90aGlzLm9wdGlvbnMubm9kZUNvdW50OyBpICs9IDEpIHtcbiAgICAgICAgX3RoaXMubm9kZXMucHVzaCh7XG4gICAgICAgICAgaWQ6IFwiXCIuY29uY2F0KG5vZGUuaWQsIFwiLVwiKS5jb25jYXQoaSksXG4gICAgICAgICAgdHlwZTogbm9kZS50eXBlLFxuICAgICAgICAgIGxhYmVsOiBcIlwiLmNvbmNhdChub2RlLmlkLCBcIi1cIikuY29uY2F0KGkpLFxuICAgICAgICAgIHByb3BlcnRpZXM6IFtdXG4gICAgICAgIH0pO1xuXG4gICAgICAgIF90aGlzLmVkZ2VzLnB1c2goe1xuICAgICAgICAgIHNvdXJjZTogXCJcIi5jb25jYXQobm9kZS5pZCwgXCItXCIpLmNvbmNhdChpKSxcbiAgICAgICAgICB0YXJnZXQ6IG5vZGUuaWQsXG4gICAgICAgICAgcHJvcGVydGllczogW11cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9O1xuXG4gIHRoaXMudHlwZSA9IGZ1bmN0aW9uIChub2RlVHlwZSkge1xuICAgIF90aGlzLm5vZGVzLm1hcChmdW5jdGlvbiAobm9kZSkge1xuICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQyKHt9LCBub2RlLCB7XG4gICAgICAgIHR5cGU6IG5vZGVUeXBlXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBfdGhpcztcbiAgfTtcblxuICB0aGlzLmNpcmNsZSA9IGZ1bmN0aW9uIChjZW50ZXJJZCkge1xuICAgIHZhciBpZCA9IGNlbnRlcklkO1xuXG4gICAgaWYgKF90aGlzLm5vZGVJZHMuaW5kZXhPZihpZCkgPT09IC0xKSB7XG4gICAgICBpZCA9ICdub2RlLTAnO1xuICAgIH1cblxuICAgIF90aGlzLmVkZ2VzID0gX3RoaXMuZWRnZXMuZmlsdGVyKGZ1bmN0aW9uIChlZGdlKSB7XG4gICAgICByZXR1cm4gZWRnZS5zb3VyY2UgPT09IGlkIHx8IGVkZ2UudGFyZ2V0ID09PSBpZDtcbiAgICB9KTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH07XG4gIC8qKlxyXG4gICAqIEBwYXJhbSByYXRpbyDpmo/mnLrnmoTnqIDnlo/nqIvluqbvvIzpu5jorqQwLjVcclxuICAgKi9cblxuXG4gIHRoaXMucmFuZG9tID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByYXRpbyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogMC41O1xuICAgIHZhciBub2RlQ291bnQgPSBfdGhpcy5vcHRpb25zLm5vZGVDb3VudDtcbiAgICB2YXIgbGVuZ3RoID0gcGFyc2VJbnQoU3RyaW5nKG5vZGVDb3VudCAqIHJhdGlvKSk7XG4gICAgLyoqICDpmo/mnLpJRCAqL1xuXG4gICAgdmFyIHJhbmRvbUFycmF5ID0gX3RoaXMubm9kZUlkcy5zb3J0KGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpIC0gMC41O1xuICAgIH0pLnNsaWNlKDAsIGxlbmd0aCk7XG5cbiAgICBfdGhpcy5lZGdlcyA9IF90aGlzLmVkZ2VzLmZpbHRlcihmdW5jdGlvbiAoZWRnZSkge1xuICAgICAgcmV0dXJuIHJhbmRvbUFycmF5LmluZGV4T2YoZWRnZS50YXJnZXQpICE9PSAtMTtcbiAgICB9KTtcbiAgICBfdGhpcy5lZGdlcyA9IF90aGlzLmVkZ2VzLnNvcnQoZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgLSAwLjU7XG4gICAgfSkuc2xpY2UoMCwgbGVuZ3RoKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH07XG5cbiAgdGhpcy52YWx1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbm9kZXM6IF90aGlzLm5vZGVzLFxuICAgICAgZWRnZXM6IF90aGlzLmVkZ2VzXG4gICAgfTtcbiAgfTtcblxuICB0aGlzLmdyYXBoaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5vZGVzOiBfdGhpcy5ub2Rlcy5tYXAoZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpZDogbm9kZS5pZCxcbiAgICAgICAgICBkYXRhOiBub2RlLFxuICAgICAgICAgIHNoYXBlOiAnQ2lyY2xlTm9kZScsXG4gICAgICAgICAgc3R5bGU6IHt9XG4gICAgICAgIH07XG4gICAgICB9KSxcbiAgICAgIGVkZ2VzOiBfdGhpcy5lZGdlcy5tYXAoZnVuY3Rpb24gKGVkZ2UpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzb3VyY2U6IGVkZ2Uuc291cmNlLFxuICAgICAgICAgIHRhcmdldDogZWRnZS50YXJnZXQsXG4gICAgICAgICAgZGF0YTogZWRnZVxuICAgICAgICB9O1xuICAgICAgfSlcbiAgICB9O1xuICB9O1xuXG4gIHRoaXMub3B0aW9ucyA9IGRlZmF1bHRPcHRpb25zO1xuICB0aGlzLm9wdGlvbnMubm9kZUNvdW50ID0gY291bnQ7XG4gIHRoaXMubm9kZXMgPSBbXTtcbiAgdGhpcy5lZGdlcyA9IFtdO1xuICB0aGlzLm5vZGVJZHMgPSBbXTtcbiAgdGhpcy5pbml0Tm9kZXMoKTtcbn07XG5cbnZhciBtb2NrID0gZnVuY3Rpb24gbW9jayhjb3VudCkge1xuICByZXR1cm4gbmV3IE1vY2soY291bnQpO1xufTtcbi8qKlxyXG4gKiBtb2NrKDEwKS50eXBlKCdjb21wYW55JykudmFsdWUoKVxyXG4gKiBtb2NrKDEwKS50eXBlKCdjb21wYW55JykuY2lyY2xlKCdub2RlLTEnKS52YWx1ZSgpXHJcbiAqIG1vY2soMTApLnR5cGUoJ2NvbXBhbnknKS5yYW5kb20oJ25vZGUtMScpLnZhbHVlKClcclxuICogbW9jaygxMCkudHlwZSgnY29tcGFueScpLnJhbmRvbSgnbm9kZS0xJykudmFsdWUoKVxyXG4gKlxyXG4gKlxyXG4gKiBncmFwaGluKClcclxuICovXG5cbnZhciBpbmRleCA9IHtcbiAgaGV4VG9SZ2JhOiBoZXhUb1JnYmEsXG4gIGRlYnVnOiBkZWJ1ZyxcbiAgbW9jazogbW9ja1xufTtcblxuZXhwb3J0IGRlZmF1bHQgR3JhcGg7XG5leHBvcnQgeyBpbmRleCBhcyBVdGlscyB9O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBekJBO0FBQ0E7QUEyQkE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQVZBO0FBQ0E7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFwQkE7QUFDQTtBQXdCQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbkVBO0FBcUVBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZEE7QUFDQTtBQWdCQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFGQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQUZBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQUZBO0FBZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQVpBO0FBSEE7QUFEQTtBQW9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBUkE7QUEzQkE7QUF4Q0E7QUFpRkE7QUFFQTs7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEvSkE7QUFrS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFyQkE7QUFDQTtBQXVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFGQTtBQVRBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBRUE7Ozs7Ozs7O0FBTUE7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFEQTtBQUhBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBN0JBO0FBQ0E7QUErQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBT0E7QUFDQTtBQVhBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQS9JQTtBQUNBO0FBaUpBO0FBQ0E7QUFFQTs7Ozs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQVBBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZEE7QUFnQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVpBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFoQkE7QUFrQkE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBL0NBO0FBaURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZkE7QUFpQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF6QkE7QUEyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEzQ0E7QUE2Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXZCQTtBQXlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQVZBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF2QkE7QUF5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWRBO0FBZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXBDQTtBQXNDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBakJBO0FBbUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBWEE7QUFpQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQWZBO0FBcUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFUQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQVZBO0FBZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWpDQTtBQW1DQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQ0E7QUFPQTtBQUNBO0FBRUE7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFLQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBT0E7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU1BO0FBQ0E7QUFGQTtBQUxBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWpCQTtBQW1CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQURBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBQ0E7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFNQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFVQTtBQUNBO0FBREE7QUFHQTtBQWxCQTtBQW9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWRBO0FBZ0JBO0FBQ0E7QUFEQTtBQUdBO0FBeEJBO0FBMEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFhQTtBQUNBO0FBREE7QUFHQTtBQXJCQTtBQXVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBYUE7QUFDQTtBQURBO0FBR0E7QUFyQkE7QUF1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFqQkE7QUFtQkE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBN0JBO0FBK0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQS9CQTtBQUNBO0FBaUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQTlEQTtBQWdFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQU9BO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBUEE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFsQkE7QUFvQkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBSEE7QUFBQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTs7OztBQUlBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFOQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFNQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEzQ0E7QUE2Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW5DQTtBQXFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQVhBO0FBYUE7QUFEQTtBQUdBO0FBdEJBO0FBQ0E7QUF3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBOzs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBZkE7QUFpQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFBQTtBQUNBOzs7Ozs7Ozs7O0FBeDNHQTtBQU1BO0FBVUE7QUFNQTtBQWVBO0FBY0E7QUFvQkE7QUFlQTtBQU9BO0FBU0E7QUFlQTtBQXFCQTtBQVFBO0FBUUE7QUFJQTtBQVFBO0FBSUE7QUFJQTtBQTBGQTtBQXlCQTtBQWNBO0FBTUE7QUFxRkE7QUFpQkE7QUFnR0E7QUFJQTtBQWVBO0FBSUE7QUFhQTtBQUtBO0FBbUJBO0FBU0E7QUFRQTtBQVFBO0FBbURBO0FBU0E7QUFrS0E7QUF3QkE7QUFJQTtBQUlBO0FBWUE7QUFJQTtBQXNFQTtBQXVEQTtBQTRGQTtBQXVDQTtBQVlBO0FBcUJBO0FBdUJBO0FBZ0NBO0FBMktBO0FBa0RBO0FBa0NBO0FBTUE7QUFTQTtBQVFBO0FBRUE7QUFvaUJBO0FBcUJBO0FBU0E7QUE4QkE7QUFVQTtBQStFQTtBQTJHQTtBQWNBO0FBb0NBO0FBNExBO0FBYUE7QUFVQTtBQW1GQTtBQWNBO0FBYUE7QUE4RUE7QUE4QkE7QUFTQTtBQXNCQTtBQXVDQTtBQW1DQTtBQThCQTtBQUlBO0FBU0E7QUFVQTtBQXFCQTtBQXlVQTtBQVlBO0FBMklBO0FBYUE7Ozs7Ozs7Ozs7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///17\n')},,,,function(module,exports){eval("module.exports = _.forOwn;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJfLmZvck93blwiPzU5OTciXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfLmZvck93bjsiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///21\n")},,,,function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* WEBPACK VAR INJECTION */(function(module) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return index; });\n/* unused harmony export MiniMap */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return Toolbar; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1);\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_1__);\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nvar __signature__ = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal["default"].signature : function (a) {\n  return a;\n};\n\n\n\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === "[object Arguments]")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i["return"] != null) _i["return"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError("Invalid attempt to destructure non-iterable instance");\n}\n\nvar useFullscreen = function useFullscreen(el) {\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      fullscreen = _useState2[0],\n      setFullscreen = _useState2[1];\n\n  var handleFullScreenChange = function handleFullScreenChange() {\n    // if exit fullscreen\n    if (!document.fullscreenElement) {\n      setFullscreen(false);\n    }\n  };\n\n  var enterFullscreen = function enterFullscreen() {\n    if (el && el.requestFullscreen) {\n      el.requestFullscreen().then(function () {\n        setFullscreen(true);\n      })["catch"](function (err) {\n        console.error(\'requestFullscreen error: \', err);\n      });\n    }\n  };\n\n  var exitFullscreen = function exitFullscreen() {\n    if (document.exitFullscreen) {\n      document.exitFullscreen().then(function () {\n        setFullscreen(false);\n      })["catch"](function (err) {\n        console.error(\'exitFullscreen error: \', err);\n      });\n    }\n  };\n\n  var toggleFullscreen = function toggleFullscreen() {\n    // 切换是否全屏\n    if (!el) {\n      console.error(\'need dom\');\n      return;\n    }\n\n    if (!fullscreen) {\n      enterFullscreen();\n    } else {\n      exitFullscreen();\n    }\n  };\n\n  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {\n    // 用户按Esc键退出全屏 或者 退出全屏都会触发这个事件\n    document.addEventListener(\'fullscreenchange\', handleFullScreenChange, false);\n    return function () {\n      document.removeEventListener(\'fullscreenchange\', handleFullScreenChange);\n    };\n  }, []);\n  return [fullscreen, toggleFullscreen];\n};\n\n__signature__(useFullscreen, "useState{_useState(false)}\\nuseEffect{}");\n\nvar MAX_ZOOM = 2;\nvar MIN_ZOOM = 0.1;\n\nvar getNextZoom = function getNextZoom(curZoom, isZoomIn, minZoom, maxZoom) {\n  var zoom = curZoom + (isZoomIn ? 0.1 : -0.1);\n\n  if (zoom < minZoom) {\n    zoom = minZoom;\n  } else if (zoom > maxZoom) {\n    zoom = maxZoom;\n  }\n\n  return zoom;\n};\n\nvar useZoom = function useZoom() {\n  var initZoom = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initZoom),\n      _useState2 = _slicedToArray(_useState, 2),\n      zoom = _useState2[0],\n      setZoom = _useState2[1];\n\n  var handleZoom = function handleZoom(isZoomIn) {\n    var newZoom = getNextZoom(zoom, isZoomIn, MIN_ZOOM, MAX_ZOOM);\n    setZoom(newZoom);\n    return newZoom;\n  };\n\n  return [zoom, handleZoom];\n};\n\n__signature__(useZoom, "useState{_useState(initZoom)}");\n\nvar MIN_ZOOM$1 = 0.1;\nvar MAX_ZOOM$1 = 2;\n\nvar getToolbarPosition = function getToolbarPosition(graphDOM, direction) {\n  var _graphDOM$getBounding = graphDOM.getBoundingClientRect(),\n      top = _graphDOM$getBounding.top,\n      left = _graphDOM$getBounding.left,\n      bottom = _graphDOM$getBounding.bottom;\n\n  if (direction === \'horizontal\') {\n    return {\n      position: \'fixed\',\n      left: left,\n      top: top\n    };\n  }\n\n  return {\n    position: \'fixed\',\n    left: left + 30,\n    bottom: window.innerHeight - bottom + 30\n  };\n};\n\nvar Toolbar = function Toolbar(props) {\n  var graphDOM = props.graphDOM,\n      graph = props.graph,\n      _props$className = props.className,\n      className = _props$className === void 0 ? \'\' : _props$className,\n      render = props.render,\n      _props$graphVars = props.graphVars,\n      graphVars = _props$graphVars === void 0 ? {} : _props$graphVars,\n      apis = props.apis,\n      _props$direction = props.direction,\n      direction = _props$direction === void 0 ? \'vertical\' : _props$direction;\n  var history = apis.history;\n  var _graphVars$width = graphVars.width,\n      width = _graphVars$width === void 0 ? 0 : _graphVars$width,\n      _graphVars$height = graphVars.height,\n      height = _graphVars$height === void 0 ? 0 : _graphVars$height;\n\n  var _useFullscreen = useFullscreen(graphDOM),\n      _useFullscreen2 = _slicedToArray(_useFullscreen, 2),\n      fullscreen = _useFullscreen2[0],\n      toggleFullscreen = _useFullscreen2[1];\n\n  var _useZoom = useZoom(1),\n      _useZoom2 = _slicedToArray(_useZoom, 2),\n      zoom = _useZoom2[0],\n      handleZoom = _useZoom2[1];\n\n  var handleGraphZoom = function handleGraphZoom(isZoom) {\n    var center = {\n      x: width / 2,\n      y: height / 2\n    };\n    var newZoom = handleZoom(isZoom);\n    if (graph) graph.zoomTo(newZoom, center);\n  };\n\n  var historyInfo = history.getInfo();\n  var buttonCfg = [{\n    id: \'fullscreen\',\n    name: fullscreen ? \'还原\' : \'全屏\',\n    icon: fullscreen ? \'fullscreen-exit\' : \'fullscreen\',\n    disabled: false,\n    action: toggleFullscreen\n  }, {\n    id: \'zoomIn\',\n    name: \'放大\',\n    icon: \'zoom-in\',\n    disabled: zoom >= MAX_ZOOM$1,\n    action: function action() {\n      return handleGraphZoom(true);\n    }\n  }, {\n    id: \'zoomOut\',\n    name: \'缩小\',\n    icon: \'zoom-out\',\n    disabled: zoom <= MIN_ZOOM$1,\n    action: function action() {\n      return handleGraphZoom(false);\n    }\n  }, {\n    id: \'undo\',\n    name: "\\u64A4\\u9500\\u64CD\\u4F5C,\\u8FDB\\u5EA6:".concat(historyInfo.currentStep, " / ").concat(historyInfo.allStep),\n    icon: \'undo\',\n    disabled: false,\n    action: function action() {\n      props.apis.search(\'dd\');\n      history.undo();\n    },\n    style: {},\n    renderTooltip: function renderTooltip() {\n      var currentStep = historyInfo.currentStep,\n          allStep = historyInfo.allStep;\n      var percent = Math.round(currentStep / allStep * 100);\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__["Progress"], {\n        percent: percent,\n        showInfo: false\n      }));\n    }\n  }, {\n    id: \'redo\',\n    name: "\\u91CD\\u505A\\u64CD\\u4F5C,\\u8FDB\\u5EA6:".concat(historyInfo.currentStep, " / ").concat(historyInfo.allStep),\n    icon: \'redo\',\n    disabled: false,\n    action: function action() {\n      history.redo();\n    },\n    style: {},\n    renderTooltip: function renderTooltip() {\n      var currentStep = historyInfo.currentStep,\n          allStep = historyInfo.allStep;\n      var percent = Math.round(currentStep / allStep * 100);\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__["Progress"], {\n        percent: percent,\n        showInfo: false\n      }));\n    }\n  }];\n\n  if (render) {\n    buttonCfg = render({\n      toolbarCfg: buttonCfg,\n      graph: graph,\n      graphVars: graphVars,\n      apis: apis,\n      direction: direction\n    });\n  }\n\n  var placement = direction === \'vertical\' ? \'right\' : \'bottom\';\n  var style = getToolbarPosition(graphDOM, direction);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {\n    className: "zoom-toolbar ".concat(direction, " ").concat(className),\n    style: style\n  }, buttonCfg.map(function (item) {\n    /** 需要自定义渲染 */\n    if (item.renderTooltip) {\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__["Popover"], {\n        placement: placement,\n        content: item.renderTooltip(),\n        title: item.name,\n        trigger: "hover",\n        key: item.id\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__["Button"], {\n        onClick: item.action,\n        disabled: item.disabled,\n        style: item.style\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__["Icon"], {\n        type: item.icon\n      })));\n    }\n\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__["Tooltip"], {\n      placement: placement,\n      title: item.name,\n      key: item.id\n    }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__["Button"], {\n      onClick: item.action,\n      disabled: item.disabled,\n      style: item.style\n    }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__["Icon"], {\n      type: item.icon\n    })));\n  })));\n};\n\n__signature__(Toolbar, "useFullscreen{_useFullscreen}\\nuseZoom{_useZoom}", function () {\n  return [useFullscreen, useZoom];\n});\n\nvar MiniMap = function MiniMap() {\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, "MiniMap");\n};\n\nvar calculate = function calculate(position, _ref) {\n  var canvasBox = _ref.canvasBox,\n      menuBox = _ref.menuBox;\n  var menuWidth = menuBox.menuWidth,\n      menuHeight = menuBox.menuHeight;\n  var canvasWidth = canvasBox.canvasWidth,\n      canvasHeight = canvasBox.canvasHeight;\n  var x = position.x,\n      y = position.y;\n\n  if (menuHeight + y > canvasHeight) {\n    y -= menuHeight;\n  }\n\n  if (menuWidth + x > canvasWidth) {\n    x -= menuWidth;\n  }\n\n  return {\n    x: x,\n    y: y\n  };\n};\n\nvar getPosition = function getPosition(graph, e, menuItem) {\n  // FIXME G6 getBBox 类型不正确\n  var _e$item$getBBox = e.item.getBBox(),\n      maxY = _e$item$getBBox.maxY,\n      minX = _e$item$getBBox.minX; // eslint-disable-line\n\n\n  var canvasXY = graph.getCanvasByPoint(minX, maxY);\n  var canvas = graph.get(\'canvas\');\n  var menuBox = {\n    menuWidth: menuItem.width,\n    menuHeight: menuItem.height\n  };\n  var canvasBox = {\n    canvasWidth: canvas.get(\'width\'),\n    canvasHeight: canvas.get(\'height\')\n  };\n\n  var _calculate = calculate(canvasXY, {\n    menuBox: menuBox,\n    canvasBox: canvasBox\n  }),\n      x = _calculate.x,\n      y = _calculate.y;\n\n  return {\n    x: x,\n    y: y\n  };\n};\n\nvar useContextmenu = function useContextmenu(props) {\n  var graph = props.graph,\n      _props$bindType = props.bindType,\n      bindType = _props$bindType === void 0 ? \'node\' : _props$bindType,\n      render = props.render,\n      options = props.options,\n      _props$onContextmenu = props.onContextmenu,\n      onContextmenu = _props$onContextmenu === void 0 ? function () {\n    return true;\n  } : _props$onContextmenu;\n  var menuStyle = {\n    width: 250,\n    height: 300\n  };\n\n  if (options && Array.isArray(options)) {\n    menuStyle.height = options.length * 30;\n  }\n\n  if (render) {\n    var renderedMenu = render(props);\n\n    if (Object(react__WEBPACK_IMPORTED_MODULE_0__["isValidElement"])(renderedMenu)) {\n      var menuProps = renderedMenu.props;\n\n      var _ref = menuProps && menuProps.style || menuStyle,\n          width = _ref.width,\n          height = _ref.height;\n\n      menuStyle.height = height;\n      menuStyle.width = width;\n    }\n  }\n\n  var keydown;\n  var KEYCODE = 17; // ctrl\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])({\n    visible: false,\n    position: {\n      x: 0,\n      y: 0\n    }\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {\n    if (!graph) return;\n    graph.on("".concat(bindType, ":contextmenu"), function (e) {\n      if (keydown) {\n        e.preventDefault();\n        return;\n      }\n\n      var newPosition = getPosition(graph, e, menuStyle);\n      var show = onContextmenu(e, graph);\n      setState(_objectSpread2({}, state, {\n        position: newPosition,\n        visible: show\n      }));\n    });\n    graph.on(\'canvas:click\', function () {\n      setState(_objectSpread2({}, state, {\n        visible: false\n      }));\n    });\n    graph.on(\'keyup\', function () {\n      keydown = false;\n    }); // FIXME G6 Event 继承自 MouseEvent，KeyBoard Event 的属性不存在\n    // eslint-disable-next-line\n\n    graph.on(\'keydown\', function (e) {\n      var code = e.keyCode || e.which;\n\n      if (code === KEYCODE) {\n        keydown = true;\n      } else {\n        keydown = false;\n      }\n    });\n  }, []);\n  return [state, setState];\n};\n\n__signature__(useContextmenu, "useState{_useState({\\n    visible: false,\\n    position: {\\n      x: 0,\\n      y: 0\\n    }\\n  })}\\nuseEffect{}");\n\nvar MenuItem = antd__WEBPACK_IMPORTED_MODULE_1__["Menu"].Item;\nvar IconFont = antd__WEBPACK_IMPORTED_MODULE_1__["Icon"].createFromIconfontCN({\n  scriptUrl: \'//at.alicdn.com/t/font_1187963_50nfpuasd7b.js\'\n});\n\nvar Container = function Container(props) {\n  var menu = props.menu,\n      onClose = props.onClose;\n\n  var onClickMenuItem = function onClickMenuItem(item) {\n    onClose(); // call user defined menu item onClick callback\n\n    if (item.onClick) item.onClick(props);\n  };\n\n  var menuItems = menu.filter(function (item) {\n    return !(item.visible === false);\n  }) // item.visible 不传时默认可见\n  .map(function (item) {\n    // render icon\n    var iconProps = {\n      type: item.iconType,\n      style: {\n        fontSize: \'12px\'\n      }\n    };\n    var icon = item.useCustomIcon === false ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__["Icon"], Object.assign({}, iconProps)) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(IconFont, Object.assign({}, iconProps));\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(MenuItem, {\n      key: item.key,\n      className: item.key,\n      onClick: function onClick() {\n        return onClickMenuItem(item);\n      }\n    }, item.render ? item.render(props) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, icon, item.title));\n  });\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {\n    className: "graphin-context-menu"\n  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__["Menu"], null, menuItems));\n};\n\nvar ContextMenu = function ContextMenu(props) {\n  var graph = props.graph,\n      render = props.render,\n      options = props.options;\n\n  var _useContextmenu = useContextmenu(props),\n      _useContextmenu2 = _slicedToArray(_useContextmenu, 2),\n      state = _useContextmenu2[0],\n      setState = _useContextmenu2[1];\n\n  var position = state.position,\n      visible = state.visible;\n\n  var onClose = function onClose() {\n    setState(_objectSpread2({}, state, {\n      visible: false\n    }));\n  };\n\n  var styles = {\n    position: \'absolute\',\n    left: position.x,\n    top: position.y\n  };\n\n  if (!visible) {\n    return null;\n  }\n\n  var children = null;\n\n  if (options && Array.isArray(options)) {\n    children = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Container, {\n      graph: graph,\n      menu: options,\n      onClose: onClose\n    });\n  }\n  /** 用户自定义渲染 */\n\n\n  if (render) {\n    var renderMenu = render(_objectSpread2({\n      onClose: onClose\n    }, props));\n\n    if (Object(react__WEBPACK_IMPORTED_MODULE_0__["isValidElement"])(renderMenu)) {\n      children = renderMenu;\n    } else {\n      return null;\n    }\n  }\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", {\n    style: styles\n  }, children);\n};\n\n__signature__(ContextMenu, "useContextmenu{_useContextmenu}", function () {\n  return [useContextmenu];\n});\n\nvar isEqual = function isEqual(prevProps, nextProps) {\n  if (prevProps.render !== nextProps.render || prevProps.options !== nextProps.options) {\n    return false;\n  }\n\n  return true;\n};\n\nvar index = Object(react__WEBPACK_IMPORTED_MODULE_0__["memo"])(ContextMenu, isEqual);\n\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(_defineProperty, "_defineProperty", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(ownKeys, "ownKeys", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(_objectSpread2, "_objectSpread2", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(_slicedToArray, "_slicedToArray", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(_arrayWithHoles, "_arrayWithHoles", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(_iterableToArrayLimit, "_iterableToArrayLimit", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(_nonIterableRest, "_nonIterableRest", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(useFullscreen, "useFullscreen", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(MAX_ZOOM, "MAX_ZOOM", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(MIN_ZOOM, "MIN_ZOOM", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(getNextZoom, "getNextZoom", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(useZoom, "useZoom", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(MIN_ZOOM$1, "MIN_ZOOM$1", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(MAX_ZOOM$1, "MAX_ZOOM$1", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(getToolbarPosition, "getToolbarPosition", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(Toolbar, "Toolbar", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(MiniMap, "MiniMap", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(calculate, "calculate", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(getPosition, "getPosition", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(useContextmenu, "useContextmenu", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(MenuItem, "MenuItem", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(IconFont, "IconFont", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(Container, "Container", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(ContextMenu, "ContextMenu", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(isEqual, "isEqual", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n  reactHotLoader.register(index, "index", "/Users/zindex/Desktop/graphin/packages/graphin-components/dist/index.esm.js");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== \'undefined\' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(30)(module)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vZ3JhcGhpbi1jb21wb25lbnRzL2Rpc3QvaW5kZXguZXNtLmpzPzRmZjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIGlzVmFsaWRFbGVtZW50LCBtZW1vIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgUHJvZ3Jlc3MsIFBvcG92ZXIsIEJ1dHRvbiwgSWNvbiwgVG9vbHRpcCwgTWVudSB9IGZyb20gJ2FudGQnO1xuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIG9iajtcbn1cblxuZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTtcblxuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpO1xuICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHtcbiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlO1xuICAgIH0pO1xuICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTtcbiAgfVxuXG4gIHJldHVybiBrZXlzO1xufVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkMih0YXJnZXQpIHtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTtcblxuICAgIGlmIChpICUgMikge1xuICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5mdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHtcbiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTtcbn1cblxuZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyO1xufVxuXG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7XG4gIGlmICghKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJyKSA9PT0gXCJbb2JqZWN0IEFyZ3VtZW50c11cIikpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgX2FyciA9IFtdO1xuICB2YXIgX24gPSB0cnVlO1xuICB2YXIgX2QgPSBmYWxzZTtcbiAgdmFyIF9lID0gdW5kZWZpbmVkO1xuXG4gIHRyeSB7XG4gICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkge1xuICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTtcblxuICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgX2QgPSB0cnVlO1xuICAgIF9lID0gZXJyO1xuICB9IGZpbmFsbHkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdICE9IG51bGwpIF9pW1wicmV0dXJuXCJdKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChfZCkgdGhyb3cgX2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIF9hcnI7XG59XG5cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpO1xufVxuXG52YXIgdXNlRnVsbHNjcmVlbiA9IGZ1bmN0aW9uIHVzZUZ1bGxzY3JlZW4oZWwpIHtcbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKGZhbHNlKSxcbiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLFxuICAgICAgZnVsbHNjcmVlbiA9IF91c2VTdGF0ZTJbMF0sXG4gICAgICBzZXRGdWxsc2NyZWVuID0gX3VzZVN0YXRlMlsxXTtcblxuICB2YXIgaGFuZGxlRnVsbFNjcmVlbkNoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZUZ1bGxTY3JlZW5DaGFuZ2UoKSB7XG4gICAgLy8gaWYgZXhpdCBmdWxsc2NyZWVuXG4gICAgaWYgKCFkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCkge1xuICAgICAgc2V0RnVsbHNjcmVlbihmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBlbnRlckZ1bGxzY3JlZW4gPSBmdW5jdGlvbiBlbnRlckZ1bGxzY3JlZW4oKSB7XG4gICAgaWYgKGVsICYmIGVsLnJlcXVlc3RGdWxsc2NyZWVuKSB7XG4gICAgICBlbC5yZXF1ZXN0RnVsbHNjcmVlbigpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICBzZXRGdWxsc2NyZWVuKHRydWUpO1xuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdyZXF1ZXN0RnVsbHNjcmVlbiBlcnJvcjogJywgZXJyKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICB2YXIgZXhpdEZ1bGxzY3JlZW4gPSBmdW5jdGlvbiBleGl0RnVsbHNjcmVlbigpIHtcbiAgICBpZiAoZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4pIHtcbiAgICAgIGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNldEZ1bGxzY3JlZW4oZmFsc2UpO1xuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdleGl0RnVsbHNjcmVlbiBlcnJvcjogJywgZXJyKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICB2YXIgdG9nZ2xlRnVsbHNjcmVlbiA9IGZ1bmN0aW9uIHRvZ2dsZUZ1bGxzY3JlZW4oKSB7XG4gICAgLy8g5YiH5o2i5piv5ZCm5YWo5bGPXG4gICAgaWYgKCFlbCkge1xuICAgICAgY29uc29sZS5lcnJvcignbmVlZCBkb20nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWZ1bGxzY3JlZW4pIHtcbiAgICAgIGVudGVyRnVsbHNjcmVlbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBleGl0RnVsbHNjcmVlbigpO1xuICAgIH1cbiAgfTtcblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIC8vIOeUqOaIt+aMiUVzY+mUrumAgOWHuuWFqOWxjyDmiJbogIUg6YCA5Ye65YWo5bGP6YO95Lya6Kem5Y+R6L+Z5Liq5LqL5Lu2XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZnVsbHNjcmVlbmNoYW5nZScsIGhhbmRsZUZ1bGxTY3JlZW5DaGFuZ2UsIGZhbHNlKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZnVsbHNjcmVlbmNoYW5nZScsIGhhbmRsZUZ1bGxTY3JlZW5DaGFuZ2UpO1xuICAgIH07XG4gIH0sIFtdKTtcbiAgcmV0dXJuIFtmdWxsc2NyZWVuLCB0b2dnbGVGdWxsc2NyZWVuXTtcbn07XG5cbnZhciBNQVhfWk9PTSA9IDI7XG52YXIgTUlOX1pPT00gPSAwLjE7XG5cbnZhciBnZXROZXh0Wm9vbSA9IGZ1bmN0aW9uIGdldE5leHRab29tKGN1clpvb20sIGlzWm9vbUluLCBtaW5ab29tLCBtYXhab29tKSB7XG4gIHZhciB6b29tID0gY3VyWm9vbSArIChpc1pvb21JbiA/IDAuMSA6IC0wLjEpO1xuXG4gIGlmICh6b29tIDwgbWluWm9vbSkge1xuICAgIHpvb20gPSBtaW5ab29tO1xuICB9IGVsc2UgaWYgKHpvb20gPiBtYXhab29tKSB7XG4gICAgem9vbSA9IG1heFpvb207XG4gIH1cblxuICByZXR1cm4gem9vbTtcbn07XG5cbnZhciB1c2Vab29tID0gZnVuY3Rpb24gdXNlWm9vbSgpIHtcbiAgdmFyIGluaXRab29tID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAxO1xuXG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShpbml0Wm9vbSksXG4gICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSxcbiAgICAgIHpvb20gPSBfdXNlU3RhdGUyWzBdLFxuICAgICAgc2V0Wm9vbSA9IF91c2VTdGF0ZTJbMV07XG5cbiAgdmFyIGhhbmRsZVpvb20gPSBmdW5jdGlvbiBoYW5kbGVab29tKGlzWm9vbUluKSB7XG4gICAgdmFyIG5ld1pvb20gPSBnZXROZXh0Wm9vbSh6b29tLCBpc1pvb21JbiwgTUlOX1pPT00sIE1BWF9aT09NKTtcbiAgICBzZXRab29tKG5ld1pvb20pO1xuICAgIHJldHVybiBuZXdab29tO1xuICB9O1xuXG4gIHJldHVybiBbem9vbSwgaGFuZGxlWm9vbV07XG59O1xuXG52YXIgTUlOX1pPT00kMSA9IDAuMTtcbnZhciBNQVhfWk9PTSQxID0gMjtcblxudmFyIGdldFRvb2xiYXJQb3NpdGlvbiA9IGZ1bmN0aW9uIGdldFRvb2xiYXJQb3NpdGlvbihncmFwaERPTSwgZGlyZWN0aW9uKSB7XG4gIHZhciBfZ3JhcGhET00kZ2V0Qm91bmRpbmcgPSBncmFwaERPTS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgIHRvcCA9IF9ncmFwaERPTSRnZXRCb3VuZGluZy50b3AsXG4gICAgICBsZWZ0ID0gX2dyYXBoRE9NJGdldEJvdW5kaW5nLmxlZnQsXG4gICAgICBib3R0b20gPSBfZ3JhcGhET00kZ2V0Qm91bmRpbmcuYm90dG9tO1xuXG4gIGlmIChkaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJykge1xuICAgIHJldHVybiB7XG4gICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgICAgIGxlZnQ6IGxlZnQsXG4gICAgICB0b3A6IHRvcFxuICAgIH07XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxuICAgIGxlZnQ6IGxlZnQgKyAzMCxcbiAgICBib3R0b206IHdpbmRvdy5pbm5lckhlaWdodCAtIGJvdHRvbSArIDMwXG4gIH07XG59O1xuXG52YXIgVG9vbGJhciA9IGZ1bmN0aW9uIFRvb2xiYXIocHJvcHMpIHtcbiAgdmFyIGdyYXBoRE9NID0gcHJvcHMuZ3JhcGhET00sXG4gICAgICBncmFwaCA9IHByb3BzLmdyYXBoLFxuICAgICAgX3Byb3BzJGNsYXNzTmFtZSA9IHByb3BzLmNsYXNzTmFtZSxcbiAgICAgIGNsYXNzTmFtZSA9IF9wcm9wcyRjbGFzc05hbWUgPT09IHZvaWQgMCA/ICcnIDogX3Byb3BzJGNsYXNzTmFtZSxcbiAgICAgIHJlbmRlciA9IHByb3BzLnJlbmRlcixcbiAgICAgIF9wcm9wcyRncmFwaFZhcnMgPSBwcm9wcy5ncmFwaFZhcnMsXG4gICAgICBncmFwaFZhcnMgPSBfcHJvcHMkZ3JhcGhWYXJzID09PSB2b2lkIDAgPyB7fSA6IF9wcm9wcyRncmFwaFZhcnMsXG4gICAgICBhcGlzID0gcHJvcHMuYXBpcyxcbiAgICAgIF9wcm9wcyRkaXJlY3Rpb24gPSBwcm9wcy5kaXJlY3Rpb24sXG4gICAgICBkaXJlY3Rpb24gPSBfcHJvcHMkZGlyZWN0aW9uID09PSB2b2lkIDAgPyAndmVydGljYWwnIDogX3Byb3BzJGRpcmVjdGlvbjtcbiAgdmFyIGhpc3RvcnkgPSBhcGlzLmhpc3Rvcnk7XG4gIHZhciBfZ3JhcGhWYXJzJHdpZHRoID0gZ3JhcGhWYXJzLndpZHRoLFxuICAgICAgd2lkdGggPSBfZ3JhcGhWYXJzJHdpZHRoID09PSB2b2lkIDAgPyAwIDogX2dyYXBoVmFycyR3aWR0aCxcbiAgICAgIF9ncmFwaFZhcnMkaGVpZ2h0ID0gZ3JhcGhWYXJzLmhlaWdodCxcbiAgICAgIGhlaWdodCA9IF9ncmFwaFZhcnMkaGVpZ2h0ID09PSB2b2lkIDAgPyAwIDogX2dyYXBoVmFycyRoZWlnaHQ7XG5cbiAgdmFyIF91c2VGdWxsc2NyZWVuID0gdXNlRnVsbHNjcmVlbihncmFwaERPTSksXG4gICAgICBfdXNlRnVsbHNjcmVlbjIgPSBfc2xpY2VkVG9BcnJheShfdXNlRnVsbHNjcmVlbiwgMiksXG4gICAgICBmdWxsc2NyZWVuID0gX3VzZUZ1bGxzY3JlZW4yWzBdLFxuICAgICAgdG9nZ2xlRnVsbHNjcmVlbiA9IF91c2VGdWxsc2NyZWVuMlsxXTtcblxuICB2YXIgX3VzZVpvb20gPSB1c2Vab29tKDEpLFxuICAgICAgX3VzZVpvb20yID0gX3NsaWNlZFRvQXJyYXkoX3VzZVpvb20sIDIpLFxuICAgICAgem9vbSA9IF91c2Vab29tMlswXSxcbiAgICAgIGhhbmRsZVpvb20gPSBfdXNlWm9vbTJbMV07XG5cbiAgdmFyIGhhbmRsZUdyYXBoWm9vbSA9IGZ1bmN0aW9uIGhhbmRsZUdyYXBoWm9vbShpc1pvb20pIHtcbiAgICB2YXIgY2VudGVyID0ge1xuICAgICAgeDogd2lkdGggLyAyLFxuICAgICAgeTogaGVpZ2h0IC8gMlxuICAgIH07XG4gICAgdmFyIG5ld1pvb20gPSBoYW5kbGVab29tKGlzWm9vbSk7XG4gICAgaWYgKGdyYXBoKSBncmFwaC56b29tVG8obmV3Wm9vbSwgY2VudGVyKTtcbiAgfTtcblxuICB2YXIgaGlzdG9yeUluZm8gPSBoaXN0b3J5LmdldEluZm8oKTtcbiAgdmFyIGJ1dHRvbkNmZyA9IFt7XG4gICAgaWQ6ICdmdWxsc2NyZWVuJyxcbiAgICBuYW1lOiBmdWxsc2NyZWVuID8gJ+i/mOWOnycgOiAn5YWo5bGPJyxcbiAgICBpY29uOiBmdWxsc2NyZWVuID8gJ2Z1bGxzY3JlZW4tZXhpdCcgOiAnZnVsbHNjcmVlbicsXG4gICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgIGFjdGlvbjogdG9nZ2xlRnVsbHNjcmVlblxuICB9LCB7XG4gICAgaWQ6ICd6b29tSW4nLFxuICAgIG5hbWU6ICfmlL7lpKcnLFxuICAgIGljb246ICd6b29tLWluJyxcbiAgICBkaXNhYmxlZDogem9vbSA+PSBNQVhfWk9PTSQxLFxuICAgIGFjdGlvbjogZnVuY3Rpb24gYWN0aW9uKCkge1xuICAgICAgcmV0dXJuIGhhbmRsZUdyYXBoWm9vbSh0cnVlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBpZDogJ3pvb21PdXQnLFxuICAgIG5hbWU6ICfnvKnlsI8nLFxuICAgIGljb246ICd6b29tLW91dCcsXG4gICAgZGlzYWJsZWQ6IHpvb20gPD0gTUlOX1pPT00kMSxcbiAgICBhY3Rpb246IGZ1bmN0aW9uIGFjdGlvbigpIHtcbiAgICAgIHJldHVybiBoYW5kbGVHcmFwaFpvb20oZmFsc2UpO1xuICAgIH1cbiAgfSwge1xuICAgIGlkOiAndW5kbycsXG4gICAgbmFtZTogXCJcXHU2NEE0XFx1OTUwMFxcdTY0Q0RcXHU0RjVDLFxcdThGREJcXHU1RUE2OlwiLmNvbmNhdChoaXN0b3J5SW5mby5jdXJyZW50U3RlcCwgXCIgLyBcIikuY29uY2F0KGhpc3RvcnlJbmZvLmFsbFN0ZXApLFxuICAgIGljb246ICd1bmRvJyxcbiAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgYWN0aW9uOiBmdW5jdGlvbiBhY3Rpb24oKSB7XG4gICAgICBwcm9wcy5hcGlzLnNlYXJjaCgnZGQnKTtcbiAgICAgIGhpc3RvcnkudW5kbygpO1xuICAgIH0sXG4gICAgc3R5bGU6IHt9LFxuICAgIHJlbmRlclRvb2x0aXA6IGZ1bmN0aW9uIHJlbmRlclRvb2x0aXAoKSB7XG4gICAgICB2YXIgY3VycmVudFN0ZXAgPSBoaXN0b3J5SW5mby5jdXJyZW50U3RlcCxcbiAgICAgICAgICBhbGxTdGVwID0gaGlzdG9yeUluZm8uYWxsU3RlcDtcbiAgICAgIHZhciBwZXJjZW50ID0gTWF0aC5yb3VuZChjdXJyZW50U3RlcCAvIGFsbFN0ZXAgKiAxMDApO1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCwgUmVhY3QuY3JlYXRlRWxlbWVudChQcm9ncmVzcywge1xuICAgICAgICBwZXJjZW50OiBwZXJjZW50LFxuICAgICAgICBzaG93SW5mbzogZmFsc2VcbiAgICAgIH0pKTtcbiAgICB9XG4gIH0sIHtcbiAgICBpZDogJ3JlZG8nLFxuICAgIG5hbWU6IFwiXFx1OTFDRFxcdTUwNUFcXHU2NENEXFx1NEY1QyxcXHU4RkRCXFx1NUVBNjpcIi5jb25jYXQoaGlzdG9yeUluZm8uY3VycmVudFN0ZXAsIFwiIC8gXCIpLmNvbmNhdChoaXN0b3J5SW5mby5hbGxTdGVwKSxcbiAgICBpY29uOiAncmVkbycsXG4gICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgIGFjdGlvbjogZnVuY3Rpb24gYWN0aW9uKCkge1xuICAgICAgaGlzdG9yeS5yZWRvKCk7XG4gICAgfSxcbiAgICBzdHlsZToge30sXG4gICAgcmVuZGVyVG9vbHRpcDogZnVuY3Rpb24gcmVuZGVyVG9vbHRpcCgpIHtcbiAgICAgIHZhciBjdXJyZW50U3RlcCA9IGhpc3RvcnlJbmZvLmN1cnJlbnRTdGVwLFxuICAgICAgICAgIGFsbFN0ZXAgPSBoaXN0b3J5SW5mby5hbGxTdGVwO1xuICAgICAgdmFyIHBlcmNlbnQgPSBNYXRoLnJvdW5kKGN1cnJlbnRTdGVwIC8gYWxsU3RlcCAqIDEwMCk7XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLCBSZWFjdC5jcmVhdGVFbGVtZW50KFByb2dyZXNzLCB7XG4gICAgICAgIHBlcmNlbnQ6IHBlcmNlbnQsXG4gICAgICAgIHNob3dJbmZvOiBmYWxzZVxuICAgICAgfSkpO1xuICAgIH1cbiAgfV07XG5cbiAgaWYgKHJlbmRlcikge1xuICAgIGJ1dHRvbkNmZyA9IHJlbmRlcih7XG4gICAgICB0b29sYmFyQ2ZnOiBidXR0b25DZmcsXG4gICAgICBncmFwaDogZ3JhcGgsXG4gICAgICBncmFwaFZhcnM6IGdyYXBoVmFycyxcbiAgICAgIGFwaXM6IGFwaXMsXG4gICAgICBkaXJlY3Rpb246IGRpcmVjdGlvblxuICAgIH0pO1xuICB9XG5cbiAgdmFyIHBsYWNlbWVudCA9IGRpcmVjdGlvbiA9PT0gJ3ZlcnRpY2FsJyA/ICdyaWdodCcgOiAnYm90dG9tJztcbiAgdmFyIHN0eWxlID0gZ2V0VG9vbGJhclBvc2l0aW9uKGdyYXBoRE9NLCBkaXJlY3Rpb24pO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwiem9vbS10b29sYmFyIFwiLmNvbmNhdChkaXJlY3Rpb24sIFwiIFwiKS5jb25jYXQoY2xhc3NOYW1lKSxcbiAgICBzdHlsZTogc3R5bGVcbiAgfSwgYnV0dG9uQ2ZnLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgIC8qKiDpnIDopoHoh6rlrprkuYnmuLLmn5MgKi9cbiAgICBpZiAoaXRlbS5yZW5kZXJUb29sdGlwKSB7XG4gICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChQb3BvdmVyLCB7XG4gICAgICAgIHBsYWNlbWVudDogcGxhY2VtZW50LFxuICAgICAgICBjb250ZW50OiBpdGVtLnJlbmRlclRvb2x0aXAoKSxcbiAgICAgICAgdGl0bGU6IGl0ZW0ubmFtZSxcbiAgICAgICAgdHJpZ2dlcjogXCJob3ZlclwiLFxuICAgICAgICBrZXk6IGl0ZW0uaWRcbiAgICAgIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7XG4gICAgICAgIG9uQ2xpY2s6IGl0ZW0uYWN0aW9uLFxuICAgICAgICBkaXNhYmxlZDogaXRlbS5kaXNhYmxlZCxcbiAgICAgICAgc3R5bGU6IGl0ZW0uc3R5bGVcbiAgICAgIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSWNvbiwge1xuICAgICAgICB0eXBlOiBpdGVtLmljb25cbiAgICAgIH0pKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVG9vbHRpcCwge1xuICAgICAgcGxhY2VtZW50OiBwbGFjZW1lbnQsXG4gICAgICB0aXRsZTogaXRlbS5uYW1lLFxuICAgICAga2V5OiBpdGVtLmlkXG4gICAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHtcbiAgICAgIG9uQ2xpY2s6IGl0ZW0uYWN0aW9uLFxuICAgICAgZGlzYWJsZWQ6IGl0ZW0uZGlzYWJsZWQsXG4gICAgICBzdHlsZTogaXRlbS5zdHlsZVxuICAgIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSWNvbiwge1xuICAgICAgdHlwZTogaXRlbS5pY29uXG4gICAgfSkpKTtcbiAgfSkpKTtcbn07XG5cbnZhciBNaW5pTWFwID0gZnVuY3Rpb24gTWluaU1hcCgpIHtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCwgXCJNaW5pTWFwXCIpO1xufTtcblxudmFyIGNhbGN1bGF0ZSA9IGZ1bmN0aW9uIGNhbGN1bGF0ZShwb3NpdGlvbiwgX3JlZikge1xuICB2YXIgY2FudmFzQm94ID0gX3JlZi5jYW52YXNCb3gsXG4gICAgICBtZW51Qm94ID0gX3JlZi5tZW51Qm94O1xuICB2YXIgbWVudVdpZHRoID0gbWVudUJveC5tZW51V2lkdGgsXG4gICAgICBtZW51SGVpZ2h0ID0gbWVudUJveC5tZW51SGVpZ2h0O1xuICB2YXIgY2FudmFzV2lkdGggPSBjYW52YXNCb3guY2FudmFzV2lkdGgsXG4gICAgICBjYW52YXNIZWlnaHQgPSBjYW52YXNCb3guY2FudmFzSGVpZ2h0O1xuICB2YXIgeCA9IHBvc2l0aW9uLngsXG4gICAgICB5ID0gcG9zaXRpb24ueTtcblxuICBpZiAobWVudUhlaWdodCArIHkgPiBjYW52YXNIZWlnaHQpIHtcbiAgICB5IC09IG1lbnVIZWlnaHQ7XG4gIH1cblxuICBpZiAobWVudVdpZHRoICsgeCA+IGNhbnZhc1dpZHRoKSB7XG4gICAgeCAtPSBtZW51V2lkdGg7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHg6IHgsXG4gICAgeTogeVxuICB9O1xufTtcblxudmFyIGdldFBvc2l0aW9uID0gZnVuY3Rpb24gZ2V0UG9zaXRpb24oZ3JhcGgsIGUsIG1lbnVJdGVtKSB7XG4gIC8vIEZJWE1FIEc2IGdldEJCb3gg57G75Z6L5LiN5q2j56GuXG4gIHZhciBfZSRpdGVtJGdldEJCb3ggPSBlLml0ZW0uZ2V0QkJveCgpLFxuICAgICAgbWF4WSA9IF9lJGl0ZW0kZ2V0QkJveC5tYXhZLFxuICAgICAgbWluWCA9IF9lJGl0ZW0kZ2V0QkJveC5taW5YOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cblxuICB2YXIgY2FudmFzWFkgPSBncmFwaC5nZXRDYW52YXNCeVBvaW50KG1pblgsIG1heFkpO1xuICB2YXIgY2FudmFzID0gZ3JhcGguZ2V0KCdjYW52YXMnKTtcbiAgdmFyIG1lbnVCb3ggPSB7XG4gICAgbWVudVdpZHRoOiBtZW51SXRlbS53aWR0aCxcbiAgICBtZW51SGVpZ2h0OiBtZW51SXRlbS5oZWlnaHRcbiAgfTtcbiAgdmFyIGNhbnZhc0JveCA9IHtcbiAgICBjYW52YXNXaWR0aDogY2FudmFzLmdldCgnd2lkdGgnKSxcbiAgICBjYW52YXNIZWlnaHQ6IGNhbnZhcy5nZXQoJ2hlaWdodCcpXG4gIH07XG5cbiAgdmFyIF9jYWxjdWxhdGUgPSBjYWxjdWxhdGUoY2FudmFzWFksIHtcbiAgICBtZW51Qm94OiBtZW51Qm94LFxuICAgIGNhbnZhc0JveDogY2FudmFzQm94XG4gIH0pLFxuICAgICAgeCA9IF9jYWxjdWxhdGUueCxcbiAgICAgIHkgPSBfY2FsY3VsYXRlLnk7XG5cbiAgcmV0dXJuIHtcbiAgICB4OiB4LFxuICAgIHk6IHlcbiAgfTtcbn07XG5cbnZhciB1c2VDb250ZXh0bWVudSA9IGZ1bmN0aW9uIHVzZUNvbnRleHRtZW51KHByb3BzKSB7XG4gIHZhciBncmFwaCA9IHByb3BzLmdyYXBoLFxuICAgICAgX3Byb3BzJGJpbmRUeXBlID0gcHJvcHMuYmluZFR5cGUsXG4gICAgICBiaW5kVHlwZSA9IF9wcm9wcyRiaW5kVHlwZSA9PT0gdm9pZCAwID8gJ25vZGUnIDogX3Byb3BzJGJpbmRUeXBlLFxuICAgICAgcmVuZGVyID0gcHJvcHMucmVuZGVyLFxuICAgICAgb3B0aW9ucyA9IHByb3BzLm9wdGlvbnMsXG4gICAgICBfcHJvcHMkb25Db250ZXh0bWVudSA9IHByb3BzLm9uQ29udGV4dG1lbnUsXG4gICAgICBvbkNvbnRleHRtZW51ID0gX3Byb3BzJG9uQ29udGV4dG1lbnUgPT09IHZvaWQgMCA/IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSA6IF9wcm9wcyRvbkNvbnRleHRtZW51O1xuICB2YXIgbWVudVN0eWxlID0ge1xuICAgIHdpZHRoOiAyNTAsXG4gICAgaGVpZ2h0OiAzMDBcbiAgfTtcblxuICBpZiAob3B0aW9ucyAmJiBBcnJheS5pc0FycmF5KG9wdGlvbnMpKSB7XG4gICAgbWVudVN0eWxlLmhlaWdodCA9IG9wdGlvbnMubGVuZ3RoICogMzA7XG4gIH1cblxuICBpZiAocmVuZGVyKSB7XG4gICAgdmFyIHJlbmRlcmVkTWVudSA9IHJlbmRlcihwcm9wcyk7XG5cbiAgICBpZiAoaXNWYWxpZEVsZW1lbnQocmVuZGVyZWRNZW51KSkge1xuICAgICAgdmFyIG1lbnVQcm9wcyA9IHJlbmRlcmVkTWVudS5wcm9wcztcblxuICAgICAgdmFyIF9yZWYgPSBtZW51UHJvcHMgJiYgbWVudVByb3BzLnN0eWxlIHx8IG1lbnVTdHlsZSxcbiAgICAgICAgICB3aWR0aCA9IF9yZWYud2lkdGgsXG4gICAgICAgICAgaGVpZ2h0ID0gX3JlZi5oZWlnaHQ7XG5cbiAgICAgIG1lbnVTdHlsZS5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICBtZW51U3R5bGUud2lkdGggPSB3aWR0aDtcbiAgICB9XG4gIH1cblxuICB2YXIga2V5ZG93bjtcbiAgdmFyIEtFWUNPREUgPSAxNzsgLy8gY3RybFxuXG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZSh7XG4gICAgdmlzaWJsZTogZmFsc2UsXG4gICAgcG9zaXRpb246IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwXG4gICAgfVxuICB9KSxcbiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLFxuICAgICAgc3RhdGUgPSBfdXNlU3RhdGUyWzBdLFxuICAgICAgc2V0U3RhdGUgPSBfdXNlU3RhdGUyWzFdO1xuXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFncmFwaCkgcmV0dXJuO1xuICAgIGdyYXBoLm9uKFwiXCIuY29uY2F0KGJpbmRUeXBlLCBcIjpjb250ZXh0bWVudVwiKSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmIChrZXlkb3duKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgbmV3UG9zaXRpb24gPSBnZXRQb3NpdGlvbihncmFwaCwgZSwgbWVudVN0eWxlKTtcbiAgICAgIHZhciBzaG93ID0gb25Db250ZXh0bWVudShlLCBncmFwaCk7XG4gICAgICBzZXRTdGF0ZShfb2JqZWN0U3ByZWFkMih7fSwgc3RhdGUsIHtcbiAgICAgICAgcG9zaXRpb246IG5ld1Bvc2l0aW9uLFxuICAgICAgICB2aXNpYmxlOiBzaG93XG4gICAgICB9KSk7XG4gICAgfSk7XG4gICAgZ3JhcGgub24oJ2NhbnZhczpjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNldFN0YXRlKF9vYmplY3RTcHJlYWQyKHt9LCBzdGF0ZSwge1xuICAgICAgICB2aXNpYmxlOiBmYWxzZVxuICAgICAgfSkpO1xuICAgIH0pO1xuICAgIGdyYXBoLm9uKCdrZXl1cCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGtleWRvd24gPSBmYWxzZTtcbiAgICB9KTsgLy8gRklYTUUgRzYgRXZlbnQg57un5om/6IeqIE1vdXNlRXZlbnTvvIxLZXlCb2FyZCBFdmVudCDnmoTlsZ7mgKfkuI3lrZjlnKhcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcblxuICAgIGdyYXBoLm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBjb2RlID0gZS5rZXlDb2RlIHx8IGUud2hpY2g7XG5cbiAgICAgIGlmIChjb2RlID09PSBLRVlDT0RFKSB7XG4gICAgICAgIGtleWRvd24gPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAga2V5ZG93biA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuICB9LCBbXSk7XG4gIHJldHVybiBbc3RhdGUsIHNldFN0YXRlXTtcbn07XG5cbnZhciBNZW51SXRlbSA9IE1lbnUuSXRlbTtcbnZhciBJY29uRm9udCA9IEljb24uY3JlYXRlRnJvbUljb25mb250Q04oe1xuICBzY3JpcHRVcmw6ICcvL2F0LmFsaWNkbi5jb20vdC9mb250XzExODc5NjNfNTBuZnB1YXNkN2IuanMnXG59KTtcblxudmFyIENvbnRhaW5lciA9IGZ1bmN0aW9uIENvbnRhaW5lcihwcm9wcykge1xuICB2YXIgbWVudSA9IHByb3BzLm1lbnUsXG4gICAgICBvbkNsb3NlID0gcHJvcHMub25DbG9zZTtcblxuICB2YXIgb25DbGlja01lbnVJdGVtID0gZnVuY3Rpb24gb25DbGlja01lbnVJdGVtKGl0ZW0pIHtcbiAgICBvbkNsb3NlKCk7IC8vIGNhbGwgdXNlciBkZWZpbmVkIG1lbnUgaXRlbSBvbkNsaWNrIGNhbGxiYWNrXG5cbiAgICBpZiAoaXRlbS5vbkNsaWNrKSBpdGVtLm9uQ2xpY2socHJvcHMpO1xuICB9O1xuXG4gIHZhciBtZW51SXRlbXMgPSBtZW51LmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgIHJldHVybiAhKGl0ZW0udmlzaWJsZSA9PT0gZmFsc2UpO1xuICB9KSAvLyBpdGVtLnZpc2libGUg5LiN5Lyg5pe26buY6K6k5Y+v6KeBXG4gIC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAvLyByZW5kZXIgaWNvblxuICAgIHZhciBpY29uUHJvcHMgPSB7XG4gICAgICB0eXBlOiBpdGVtLmljb25UeXBlLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgZm9udFNpemU6ICcxMnB4J1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIGljb24gPSBpdGVtLnVzZUN1c3RvbUljb24gPT09IGZhbHNlID8gUmVhY3QuY3JlYXRlRWxlbWVudChJY29uLCBPYmplY3QuYXNzaWduKHt9LCBpY29uUHJvcHMpKSA6IFJlYWN0LmNyZWF0ZUVsZW1lbnQoSWNvbkZvbnQsIE9iamVjdC5hc3NpZ24oe30sIGljb25Qcm9wcykpO1xuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KE1lbnVJdGVtLCB7XG4gICAgICBrZXk6IGl0ZW0ua2V5LFxuICAgICAgY2xhc3NOYW1lOiBpdGVtLmtleSxcbiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICAgIHJldHVybiBvbkNsaWNrTWVudUl0ZW0oaXRlbSk7XG4gICAgICB9XG4gICAgfSwgaXRlbS5yZW5kZXIgPyBpdGVtLnJlbmRlcihwcm9wcykgOiBSZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLCBpY29uLCBpdGVtLnRpdGxlKSk7XG4gIH0pO1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcImdyYXBoaW4tY29udGV4dC1tZW51XCJcbiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChNZW51LCBudWxsLCBtZW51SXRlbXMpKTtcbn07XG5cbnZhciBDb250ZXh0TWVudSA9IGZ1bmN0aW9uIENvbnRleHRNZW51KHByb3BzKSB7XG4gIHZhciBncmFwaCA9IHByb3BzLmdyYXBoLFxuICAgICAgcmVuZGVyID0gcHJvcHMucmVuZGVyLFxuICAgICAgb3B0aW9ucyA9IHByb3BzLm9wdGlvbnM7XG5cbiAgdmFyIF91c2VDb250ZXh0bWVudSA9IHVzZUNvbnRleHRtZW51KHByb3BzKSxcbiAgICAgIF91c2VDb250ZXh0bWVudTIgPSBfc2xpY2VkVG9BcnJheShfdXNlQ29udGV4dG1lbnUsIDIpLFxuICAgICAgc3RhdGUgPSBfdXNlQ29udGV4dG1lbnUyWzBdLFxuICAgICAgc2V0U3RhdGUgPSBfdXNlQ29udGV4dG1lbnUyWzFdO1xuXG4gIHZhciBwb3NpdGlvbiA9IHN0YXRlLnBvc2l0aW9uLFxuICAgICAgdmlzaWJsZSA9IHN0YXRlLnZpc2libGU7XG5cbiAgdmFyIG9uQ2xvc2UgPSBmdW5jdGlvbiBvbkNsb3NlKCkge1xuICAgIHNldFN0YXRlKF9vYmplY3RTcHJlYWQyKHt9LCBzdGF0ZSwge1xuICAgICAgdmlzaWJsZTogZmFsc2VcbiAgICB9KSk7XG4gIH07XG5cbiAgdmFyIHN0eWxlcyA9IHtcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICBsZWZ0OiBwb3NpdGlvbi54LFxuICAgIHRvcDogcG9zaXRpb24ueVxuICB9O1xuXG4gIGlmICghdmlzaWJsZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIGNoaWxkcmVuID0gbnVsbDtcblxuICBpZiAob3B0aW9ucyAmJiBBcnJheS5pc0FycmF5KG9wdGlvbnMpKSB7XG4gICAgY2hpbGRyZW4gPSBSZWFjdC5jcmVhdGVFbGVtZW50KENvbnRhaW5lciwge1xuICAgICAgZ3JhcGg6IGdyYXBoLFxuICAgICAgbWVudTogb3B0aW9ucyxcbiAgICAgIG9uQ2xvc2U6IG9uQ2xvc2VcbiAgICB9KTtcbiAgfVxuICAvKiog55So5oi36Ieq5a6a5LmJ5riy5p+TICovXG5cblxuICBpZiAocmVuZGVyKSB7XG4gICAgdmFyIHJlbmRlck1lbnUgPSByZW5kZXIoX29iamVjdFNwcmVhZDIoe1xuICAgICAgb25DbG9zZTogb25DbG9zZVxuICAgIH0sIHByb3BzKSk7XG5cbiAgICBpZiAoaXNWYWxpZEVsZW1lbnQocmVuZGVyTWVudSkpIHtcbiAgICAgIGNoaWxkcmVuID0gcmVuZGVyTWVudTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIHN0eWxlOiBzdHlsZXNcbiAgfSwgY2hpbGRyZW4pO1xufTtcbnZhciBpc0VxdWFsID0gZnVuY3Rpb24gaXNFcXVhbChwcmV2UHJvcHMsIG5leHRQcm9wcykge1xuICBpZiAocHJldlByb3BzLnJlbmRlciAhPT0gbmV4dFByb3BzLnJlbmRlciB8fCBwcmV2UHJvcHMub3B0aW9ucyAhPT0gbmV4dFByb3BzLm9wdGlvbnMpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG52YXIgaW5kZXggPSBtZW1vKENvbnRleHRNZW51LCBpc0VxdWFsKTtcblxuZXhwb3J0IHsgaW5kZXggYXMgQ29udGV4dE1lbnUsIE1pbmlNYXAsIFRvb2xiYXIgfTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBeERBO0FBQ0E7QUF3REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWhCQTtBQUNBO0FBZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFVQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQWxCQTtBQW9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBakJBO0FBQ0E7QUFtQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQWhKQTtBQWlCQTs7O0FBZ0lBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUVBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUZBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBckZBO0FBQ0E7QUFxRkE7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFGQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUlBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQXpEQTtBQUtBOzs7QUFvREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7Ozs7Ozs7Ozs7QUF4bEJBO0FBZUE7QUFjQTtBQW9CQTtBQUlBO0FBSUE7QUE4QkE7QUFJQTtBQXlEQTtBQUNBO0FBRUE7QUFZQTtBQWlCQTtBQUNBO0FBRUE7QUFxQkE7QUFpSkE7QUFJQTtBQXdCQTtBQStCQTtBQXNGQTtBQUNBO0FBSUE7QUFtQ0E7QUF5REE7QUFPQTs7Ozs7Ozs7O0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///25\n')},,function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9TZWFyY2hCYXIvU2VhcmNoQmFyLmxlc3M/YWM5OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///27\n")},,,,function(module,exports){eval("module.exports = window.ReactDOM;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJ3aW5kb3cuUmVhY3RET01cIj9jNzBlIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gd2luZG93LlJlYWN0RE9NOyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///31\n")},,,,function(module,exports){eval("module.exports = chineseRandomName;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJjaGluZXNlUmFuZG9tTmFtZVwiP2JjYmMiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBjaGluZXNlUmFuZG9tTmFtZTsiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///35\n")},,,,,,,,,,function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvSG9tZS9pbmRleC5jc3M/YzZiZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///45\n")},function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9MYXlvdXQvaW5kZXguY3NzP2E4NTkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///46\n")},function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9Ub29sQmFyL2luZGV4Lmxlc3M/MzA0YyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///47\n")},function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvQ29yZS9PcGVyYXRvckJhci9pbmRleC5sZXNzP2M3NmIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///48\n")},function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9FbmhhbmNlZENoZWNrYm94L2luZGV4Lmxlc3M/ZTVjZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///49\n")},function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9Gb2xkaW5nUGFuZWwvRm9sZGluZ1BhbmVsLmxlc3M/NDFiZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///50\n")},function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9JdGVtL2luZGV4Lmxlc3M/YTAwNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///51\n")},function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9Qcm9wZXJ0eS9pbmRleC5sZXNzPzAyMTEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///52\n")},function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9UcmVlU2VsZWN0b3IvVHJlZVNlbGVjdG9yLmxlc3M/NDcyNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///53\n")},function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvQ29yZS9TZWFyY2hCYXIvaW5kZXgubGVzcz82ZTZjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpbiJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///54\n")},,,function(module,exports){eval("module.exports = _.isString;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJfLmlzU3RyaW5nXCI/NDg2YyJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF8uaXNTdHJpbmc7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///57\n")},function(module,exports){eval("module.exports = _.isPlainObject;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJfLmlzUGxhaW5PYmplY3RcIj9kMzJhIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gXy5pc1BsYWluT2JqZWN0OyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///58\n")},,function(module,exports){eval("module.exports = _.cloneDeep;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJfLmNsb25lRGVlcFwiP2IwZTgiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfLmNsb25lRGVlcDsiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///60\n")},,,,,,,,,,,,,function(module,exports){eval("module.exports = _.throttle;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJfLnRocm90dGxlXCI/NWYzNSJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF8udGhyb3R0bGU7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///73\n")},,function(module,exports){eval("module.exports = _.debounce;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJfLmRlYm91bmNlXCI/OWIxZSJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF8uZGVib3VuY2U7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///75\n")},function(module,exports){eval("module.exports = _.each;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJfLmVhY2hcIj82MTgxIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gXy5lYWNoOyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///76\n")},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL0NvcmUvQWRkTm9kZXMvaW5kZXgubGVzcz9mYTNmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpbiJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///117\n")},function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL0NvcmUvRGlmZnVzZVBhbmVsL2luZGV4Lmxlc3M/NmZjYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///118\n")},function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL0NvcmUvR3JhcGhEcmF3ZXIvaW5kZXgubGVzcz8yNzQxIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpbiJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///119\n")},function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL0NvcmUvU2F2ZS9pbmRleC5sZXNzPzU1MWEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///120\n")},,,,,function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL0NvcmUvTm9kZUVkZ2VDb3VudC9pbmRleC5sZXNzPzc4MWQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///125\n")},function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: external \"window.React\"\nvar external_window_React_ = __webpack_require__(0);\nvar external_window_React_default = /*#__PURE__*/__webpack_require__.n(external_window_React_);\n\n// EXTERNAL MODULE: external \"window.ReactDOM\"\nvar external_window_ReactDOM_ = __webpack_require__(31);\nvar external_window_ReactDOM_default = /*#__PURE__*/__webpack_require__.n(external_window_ReactDOM_);\n\n// EXTERNAL MODULE: ./node_modules/react-router-dom/esm/react-router-dom.js\nvar react_router_dom = __webpack_require__(18);\n\n// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js + 1 modules\nvar react_router = __webpack_require__(15);\n\n// EXTERNAL MODULE: ./node_modules/react-hot-loader/root.js\nvar root = __webpack_require__(39);\n\n// CONCATENATED MODULE: ./src/Home/Home.tsx\n\n\n// import logo from '../logo.svg';\nvar Home = function () {\n    return (external_window_React_default.a.createElement(\"div\", { className: \"container\" },\n        external_window_React_default.a.createElement(\"div\", { className: \"card\" },\n            external_window_React_default.a.createElement(\"img\", { width: \"100%\", src: \"https://gw.alipayobjects.com/mdn/rms_00edcb/afts/img/A*EkJmRrmuJAgAAAAAAAAAAABkARQnAQ\", alt: \"\" })),\n        external_window_React_default.a.createElement(\"div\", { className: \"card\" },\n            external_window_React_default.a.createElement(react_router_dom[\"b\" /* Link */], { to: \"/graphin-studio\", className: \"card-item\" },\n                external_window_React_default.a.createElement(\"div\", { className: \"card-text\" }, \"\\n                            \\u6F14\\u793Ademo\\uFF1AGraphin Studio\\n                                --- \\u901A\\u7528\\u56FE\\u5206\\u6790\\u5DE5\\u4F5C\\u53F0\\n                            \")))));\n};\n/* harmony default export */ var Home_Home = (Home);\n\n// EXTERNAL MODULE: ./src/Home/index.css\nvar src_Home = __webpack_require__(45);\n\n// EXTERNAL MODULE: ./src/Components/Layout/index.css\nvar Layout = __webpack_require__(46);\n\n// CONCATENATED MODULE: ./src/Components/Layout/Layout.tsx\n\n\nvar Layout_Layout = function (props) {\n    var children = props.children;\n    return external_window_React_default.a.createElement(\"div\", { className: \"graphin-studio\" }, children);\n};\n/* harmony default export */ var Components_Layout_Layout = (Layout_Layout);\n\n// CONCATENATED MODULE: ./src/Components/Layout/Side.tsx\n\nvar Side = function (props) {\n    var children = props.children;\n    return external_window_React_default.a.createElement(\"div\", { className: \"graphin-studio-side\" }, children);\n};\n/* harmony default export */ var Layout_Side = (Side);\n\n// CONCATENATED MODULE: ./src/Components/Layout/Header.tsx\n\nvar Header = function (props) {\n    var children = props.children;\n    return external_window_React_default.a.createElement(\"div\", { className: \"graphin-studio-header\" }, children);\n};\n/* harmony default export */ var Layout_Header = (Header);\n\n// CONCATENATED MODULE: ./src/Components/Layout/Main.tsx\n\nvar Main = function (props) {\n    var children = props.children;\n    return external_window_React_default.a.createElement(\"div\", { className: \"graphin-studio-main\" }, children);\n};\n/* harmony default export */ var Layout_Main = (Main);\n\n// CONCATENATED MODULE: ./src/Components/Layout/Footer.tsx\n\nvar Footer = function (props) {\n    var children = props.children;\n    return external_window_React_default.a.createElement(\"div\", { className: \"graphin-studio-footer\" }, children);\n};\n/* harmony default export */ var Layout_Footer = (Footer);\n\n// CONCATENATED MODULE: ./src/Components/Layout/index.tsx\n\n\n\n\n\n\n\n// EXTERNAL MODULE: external \"window.antd\"\nvar external_window_antd_ = __webpack_require__(1);\n\n// EXTERNAL MODULE: ./src/Components/ToolBar/index.less\nvar ToolBar = __webpack_require__(47);\n\n// CONCATENATED MODULE: ./src/Components/ToolBar/ToolBar.tsx\n\n\n\nvar ToolBar_ToolBar = function (props) {\n    var data = props.data, style = props.style, className = props.className;\n    return (external_window_React_default.a.createElement(\"ul\", { className: \"\" + 'graphin-studio-toolbar' + (className ? \" \" + className : ''), style: style }, data.map(function (c) {\n        var isDivider = c.isDivider, onClick = c.onClick, tooltip = c.tooltip, name = c.name, disabled = c.disabled, icon = c.icon, id = c.id;\n        if (isDivider) {\n            return external_window_React_default.a.createElement(external_window_antd_[\"Divider\"], { key: id });\n        }\n        return (external_window_React_default.a.createElement(external_window_antd_[\"Tooltip\"], { key: id, placement: \"right\", title: tooltip || name },\n            external_window_React_default.a.createElement(external_window_antd_[\"Button\"], { disabled: disabled, icon: icon, onClick: function () {\n                    if (onClick) {\n                        onClick(c);\n                    }\n                } })));\n    })));\n};\n/* harmony default export */ var Components_ToolBar_ToolBar = (ToolBar_ToolBar);\n\n// CONCATENATED MODULE: ./src/Components/ToolBar/index.ts\n\n/* harmony default export */ var Components_ToolBar = (Components_ToolBar_ToolBar);\n\n// EXTERNAL MODULE: ./src/Core/OperatorBar/index.less\nvar OperatorBar = __webpack_require__(48);\n\n// CONCATENATED MODULE: ./src/Core/OperatorBar/diffuse.operator.tsx\n\nvar diffuseOperator = function (props) {\n    var dispatch = props.dispatch, state = props.state;\n    var selectedNodes = state.selectedNodes;\n    if (selectedNodes.length === 0) {\n        external_window_antd_[\"notification\"].info({\n            message: '关系扩散',\n            description: '关系扩散需要至少选中一个节点',\n        });\n    }\n    else {\n        dispatch({\n            type: 'graph/drawer',\n            payload: {\n                title: '关系扩散',\n                type: 'diffuse',\n                visible: true,\n                width: 550,\n            },\n        });\n    }\n};\n/* harmony default export */ var diffuse_operator = (diffuseOperator);\n\n// CONCATENATED MODULE: ./src/Core/OperatorBar/index.tsx\n\n\n\n\nvar OperatorBar_OperatorBar = function (props) {\n    var dispatch = props.dispatch, graphRef = props.graphRef;\n    var apis = graphRef.current.getApis();\n    var menus = [\n        {\n            id: 'addNode',\n            name: '添加实体',\n            icon: 'file-add',\n            onClick: function () {\n                dispatch({\n                    type: 'graph/drawer',\n                    payload: {\n                        title: '添加实体',\n                        type: 'addNodes',\n                        visible: true,\n                        width: 450,\n                        closeMask: true,\n                    },\n                });\n            },\n        },\n        {\n            id: 'search',\n            name: '搜索',\n            icon: 'search',\n            onClick: function () {\n                dispatch({\n                    type: 'graph/searchBar',\n                    payload: {\n                        visible: true,\n                    },\n                });\n            },\n        },\n        // {\n        //     id: 'filter',\n        //     name: '图筛选',\n        //     icon: 'filter',\n        //     disabled: true,\n        // },\n        {\n            id: 'divider1',\n            isDivider: true,\n        },\n        {\n            id: 'diffuse',\n            name: '关系扩散',\n            icon: 'deployment-unit',\n            onClick: function () {\n                diffuse_operator(props);\n            },\n        },\n        // {\n        //     id: 'discover',\n        //     name: '关系发现',\n        //     disabled: true,\n        //     icon: 'eye',\n        // },\n        // {\n        //     id: 'analyse',\n        //     name: '社群分析',\n        //     disabled: true,\n        //     icon: 'gateway',\n        // },\n        {\n            id: 'divider2',\n            isDivider: true,\n        },\n        {\n            id: 'save',\n            name: '保存',\n            icon: 'save',\n            onClick: function () {\n                dispatch({\n                    type: 'graph/modal',\n                    payload: {\n                        title: '保存画布',\n                        type: 'save',\n                        visible: true,\n                        handleOk: function () {\n                            // eslint-disable-next-line no-console\n                            console.log('save graph');\n                        },\n                    },\n                });\n            },\n        },\n        {\n            id: 'clear',\n            name: '清空',\n            icon: 'delete',\n            onClick: function () {\n                dispatch({\n                    type: 'graph/modal',\n                    payload: {\n                        title: '清空画布',\n                        type: 'clear',\n                        visible: true,\n                        handleOk: function () {\n                            apis.clear();\n                            // eslint-disable-next-line no-console\n                            console.log('clear graph');\n                        },\n                    },\n                });\n            },\n        },\n        {\n            id: 'setting',\n            name: '设置',\n            icon: 'setting',\n            onClick: function () {\n                dispatch({\n                    type: 'graph/drawer',\n                    payload: {\n                        title: '设置',\n                        type: 'setting',\n                        visible: true,\n                        width: 350,\n                        closeMask: true,\n                    },\n                });\n            },\n        },\n    ];\n    return (external_window_React_default.a.createElement(\"div\", null,\n        external_window_React_default.a.createElement(Components_ToolBar, { data: menus, className: \"operator-bar\" }),\n        \";\"));\n};\n/* harmony default export */ var Core_OperatorBar = (OperatorBar_OperatorBar);\n\n// EXTERNAL MODULE: ./node_modules/classnames/index.js\nvar classnames = __webpack_require__(19);\nvar classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);\n\n// EXTERNAL MODULE: ./src/Components/EnhancedCheckbox/index.less\nvar EnhancedCheckbox = __webpack_require__(49);\n\n// CONCATENATED MODULE: ./src/Components/EnhancedCheckbox/EnhancedCheckbox.tsx\nvar __read = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\n\n\n\nvar CheckboxGroup = external_window_antd_[\"Checkbox\"].Group;\nvar EnhancedCheckbox_EnhancedCheckbox = function (props) {\n    var _a = props.options, options = _a === void 0 ? [] : _a, _b = props.checkedList, checkedList = _b === void 0 ? [] : _b, onChange = props.onChange, span = props.span, _c = props.isSelectAll, isSelectAll = _c === void 0 ? true : _c;\n    var _d = __read(Object(external_window_React_[\"useState\"])({\n        indeterminate: true,\n        checkAll: false,\n    }), 2), state = _d[0], setState = _d[1];\n    var indeterminate = state.indeterminate, checkAll = state.checkAll;\n    Object(external_window_React_[\"useEffect\"])(function () {\n        var isPart = true;\n        var isAll = false;\n        switch (true) {\n            case checkedList.length === options.length:\n                isPart = false;\n                isAll = true;\n                break;\n            case checkedList.length === 0:\n                isPart = false;\n                break;\n            default:\n                break;\n        }\n        setState({\n            indeterminate: isPart,\n            checkAll: isAll,\n        });\n    }, [checkedList.length, options.length]);\n    var onChangeValue = function (value) {\n        if (onChange) {\n            onChange(value);\n        }\n        setState({\n            indeterminate: !!value.length && value.length < options.length,\n            checkAll: value.length === options.length,\n        });\n    };\n    var onCheckAllChange = function (e) {\n        var isCheckAll = e.target.checked;\n        if (onChange) {\n            var allCheckedList = options.map(function (item) { return (typeof item === 'string' ? item : item.value); });\n            // isCheckAll ? onChange(allCheckedList) : onChange([]);\n            if (isCheckAll) {\n                onChange(allCheckedList);\n            }\n            else {\n                onChange([]);\n            }\n        }\n        setState({\n            indeterminate: false,\n            checkAll: isCheckAll,\n        });\n    };\n    var filterValue = function () {\n        return checkedList.filter(function (v) {\n            var allCheckedList = options.map(function (item) { return (typeof item === 'string' ? item : item.value); });\n            return allCheckedList.includes(v);\n        });\n    };\n    return (external_window_React_default.a.createElement(\"div\", { className: \"enhanced_checkbox_wrapper\" },\n        external_window_React_default.a.createElement(external_window_antd_[\"Checkbox\"], { className: \"all_select\", indeterminate: indeterminate, onChange: onCheckAllChange, checked: checkAll, style: { display: isSelectAll ? 'inine-block' : 'none' } }, \"\\u5168\\u9009\"),\n        external_window_React_default.a.createElement(CheckboxGroup, { value: filterValue(), onChange: onChangeValue },\n            external_window_React_default.a.createElement(external_window_antd_[\"Row\"], null,\n                isSelectAll ? external_window_React_default.a.createElement(external_window_antd_[\"Col\"], { className: \"single_checkbox\" }) : null,\n                options.map(function (item) {\n                    var value = typeof item === 'string' ? item : item.value;\n                    var label = typeof item === 'string' ? item : item.label;\n                    return (external_window_React_default.a.createElement(external_window_antd_[\"Col\"], { key: String(value), span: span || undefined, className: \"single_checkbox\" },\n                        external_window_React_default.a.createElement(external_window_antd_[\"Checkbox\"], { value: value }, label)));\n                })))));\n};\n/* harmony default export */ var Components_EnhancedCheckbox_EnhancedCheckbox = (EnhancedCheckbox_EnhancedCheckbox);\n\n// CONCATENATED MODULE: ./src/Components/EnhancedCheckbox/index.ts\n\n/* harmony default export */ var Components_EnhancedCheckbox = (Components_EnhancedCheckbox_EnhancedCheckbox);\n\n// EXTERNAL MODULE: ./src/Components/FoldingPanel/FoldingPanel.less\nvar FoldingPanel = __webpack_require__(50);\n\n// CONCATENATED MODULE: ./src/Components/FoldingPanel/FoldingPanel.tsx\n\n\n\nvar Panel = external_window_antd_[\"Collapse\"].Panel;\n/**\n * 接收一个数组，数组内为若干个对象，每个对象有两个属性\n * @param  {string} title       每个面板的标题及key值\n * @param  {ReactNode} children 面板内渲染的内容\n */\nvar FoldingPanel_FoldingPanel = function (props) {\n    // 默认展开所有子项\n    var getActiveKeys = function (data) {\n        var initialValue = [];\n        var newData = data.slice();\n        return newData.reduce(function (a, b) { return a.concat([b.title]); }, initialValue); // 返回所有key值\n    };\n    var data = props.data;\n    return (external_window_React_default.a.createElement(external_window_antd_[\"Collapse\"], { className: \"panel\", bordered: false, defaultActiveKey: getActiveKeys(data), expandIconPosition: \"right\" }, (data || []).map(function (item) {\n        var header = (external_window_React_default.a.createElement(\"div\", { className: \"name\" },\n            external_window_React_default.a.createElement(\"span\", { className: \"mark\" }),\n            item.title));\n        return (external_window_React_default.a.createElement(Panel, { header: header, key: item.title }, item.children));\n    })));\n};\n/* harmony default export */ var Components_FoldingPanel_FoldingPanel = (FoldingPanel_FoldingPanel);\n\n// CONCATENATED MODULE: ./src/Components/FoldingPanel/index.ts\n\n/* harmony default export */ var Components_FoldingPanel = (Components_FoldingPanel_FoldingPanel);\n\n// EXTERNAL MODULE: ./src/Components/Item/index.less\nvar Item = __webpack_require__(51);\n\n// CONCATENATED MODULE: ./src/Components/Item/Item.tsx\n\n\nvar Item_Item = function (_a) {\n    var title = _a.title, children = _a.children;\n    return (external_window_React_default.a.createElement(\"div\", { className: \"item\" },\n        external_window_React_default.a.createElement(\"div\", { className: \"item-title\" }, title),\n        external_window_React_default.a.createElement(\"div\", { className: \"item-children\" }, children)));\n};\n/* harmony default export */ var Components_Item_Item = (Item_Item);\n\n// EXTERNAL MODULE: ./src/Components/Property/index.less\nvar Property = __webpack_require__(52);\n\n// CONCATENATED MODULE: ./src/Components/Property/Property.tsx\n\n\n\nvar Property_Property = function (props) {\n    var name = props.name, value = props.value;\n    return (external_window_React_default.a.createElement(\"div\", { className: \"property\" },\n        external_window_React_default.a.createElement(\"span\", { className: \"title\" }, name + \": \"),\n        external_window_React_default.a.createElement(external_window_antd_[\"Tooltip\"], { title: value },\n            external_window_React_default.a.createElement(\"span\", { className: \"info\" }, value))));\n};\n/* harmony default export */ var Components_Property_Property = (Property_Property);\n\n// CONCATENATED MODULE: ./src/Components/Property/index.ts\n\n/* harmony default export */ var Components_Property = (Components_Property_Property);\n\n// EXTERNAL MODULE: external \"_\"\nvar external_ = __webpack_require__(4);\n\n// EXTERNAL MODULE: ./src/Components/SearchBar/SearchBar.less\nvar SearchBar = __webpack_require__(27);\n\n// CONCATENATED MODULE: ./src/Components/SearchBar/Panel.tsx\n\n\n\n\nvar SearchPanel = function (props) {\n    var rows = props.rows, isOpen = props.isOpen, isHistory = props.isHistory, _a = props.anchor, anchor = _a === void 0 ? 'right' : _a, _b = props.allowClear, allowClear = _b === void 0 ? false : _b, searchWords = props.searchWords, isArray = props.isArray, handleClosePanel = props.handleClosePanel, resetSearchHistory = props.resetSearchHistory;\n    var highlight = function (words, str) {\n        // 对搜索的关键字分词，这里使用简单的空格分词\n        var searchwordsArray = words.split(' ');\n        var string = str;\n        // 这里如果localStorage存储的数据格式发生变化容易报错，需要try...catch一下\n        try {\n            // 对每个关键词进行replace替换\n            searchwordsArray.forEach(function (e) {\n                if (!e.trim()) {\n                    return;\n                }\n                string = string.replace(e, function (match) { return \"<span style=\\\"font-weight:700\\\">\" + match + \"</span>\"; });\n            });\n            return string;\n        }\n        catch (error) {\n            console.log(error); // eslint-disable-line\n            return string;\n        }\n    };\n    var onClick = function (item) {\n        if (props.onSelect) {\n            props.onSelect(item);\n        }\n        setTimeout(function () { return handleClosePanel(item.name); }, 300);\n    };\n    var blank = function () { return external_window_React_default.a.createElement(\"p\", { className: \"search-blank\" }, \"\\u65E0\\u641C\\u7D22\\u5185\\u5BB9\"); };\n    var renderHeader = function () {\n        if (props.renderHeader) {\n            return props.renderHeader(rows);\n        }\n        return (isHistory && (external_window_React_default.a.createElement(\"li\", { className: \"li-recent\" },\n            external_window_React_default.a.createElement(\"i\", { className: \"recent-icon\" },\n                external_window_React_default.a.createElement(external_window_antd_[\"Icon\"], { type: \"history\", style: { color: '#adb9c6' } })),\n            \"\\u6700\\u8FD1\\u8BBF\\u95EE\")));\n    };\n    var renderContent = function () {\n        return isArray(rows) ? (external_window_React_default.a.createElement(\"ul\", { className: \"search-panel-ul\" }, rows.map(function (item, index) {\n            // 默认的renderContent\n            var text;\n            if (props.renderContent) {\n                text = props.renderContent({\n                    item: item,\n                    highlight: highlight,\n                    searchWords: searchWords,\n                });\n            }\n            else {\n                text = highlight(searchWords, item.name);\n            }\n            return (external_window_React_default.a.createElement(\"li\", { key: JSON.stringify(item) },\n                external_window_React_default.a.createElement(\"div\", { tabIndex: index, role: \"button\", dangerouslySetInnerHTML: { __html: text }, onClick: function () {\n                        onClick(item);\n                    }, onKeyPress: function () {\n                        onClick(item);\n                    } })));\n        }))) : (blank());\n    };\n    var reset = function () {\n        if (props.clearHistory) {\n            props.clearHistory();\n            resetSearchHistory();\n        }\n    };\n    var renderFooter = function () {\n        var visible = allowClear && isHistory;\n        return visible ? (external_window_React_default.a.createElement(\"div\", { className: \"li-footer\" },\n            external_window_React_default.a.createElement(\"i\", { className: \"reset-icon\" },\n                external_window_React_default.a.createElement(external_window_antd_[\"Icon\"], { type: \"rest\", style: { color: '#adb9c6' } })),\n            external_window_React_default.a.createElement(\"span\", { role: \"button\", tabIndex: 0, className: \"reset-button\", onClick: reset, onKeyPress: reset }, \"\\u6E05\\u9664\\u5386\\u53F2\\u8BB0\\u5F55\"))) : null;\n        // if (props.renderFooter) {\n        //   return props.renderFooter(rows);\n        // }\n        // return null;\n    };\n    var rootClass = classnames_default()('search-panel', \n    // cx[`search-direction-${anchor}`],\n    anchor === 'left' ? 'search-direction-left' : 'search-direction-right', // 伸缩的方向\n    {\n        close: !isOpen,\n        blank: !isArray(rows),\n    });\n    return (external_window_React_default.a.createElement(\"div\", { className: rootClass },\n        renderHeader(),\n        renderContent(),\n        renderFooter()));\n};\n/* harmony default export */ var SearchBar_Panel = (SearchPanel);\n\n// CONCATENATED MODULE: ./src/Components/SearchBar/SearchBar.tsx\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar SearchBar_read = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\n\n\n\n\n\nvar DEBOUNCE_TIME = 500;\nvar ENTER_KEY = 13;\n// 判断传入数据是否为数组且不为空\n// eslint-disable-next-line\nvar SearchBar_isArray = function (data) {\n    // eslint-disable-line\n    if (Array.isArray(data)) {\n        return !!data.length;\n    }\n    return false;\n};\nvar SearchBar_SearchBar = function (props) {\n    var _a = props.isFocus, isFocus = _a === void 0 ? false : _a, _b = props.visible, visible = _b === void 0 ? true : _b, placeholder = props.placeholder;\n    var _c = SearchBar_read(Object(external_window_React_[\"useState\"])({\n        isOpen: false,\n        isHistory: false,\n        searchWords: '',\n        rows: [],\n    }), 2), state = _c[0], setState = _c[1];\n    var isOpen = state.isOpen, isHistory = state.isHistory, searchWords = state.searchWords, rows = state.rows;\n    // 点击空白搜索面板消失\n    var hideSearchPanel = function (e) {\n        var tmpNode = document.createElement('div');\n        var node = e.target; // eslint-disable-line\n        tmpNode.appendChild(node.cloneNode(true));\n        if (tmpNode.innerHTML.indexOf('input') !== 1 && isOpen) {\n            setState(__assign(__assign({}, state), { isOpen: false }));\n        }\n    };\n    var queryFuzzy = function (newState) {\n        // const { searchWords } = newState;\n        props.onSearch(newState.searchWords).then(function (res) {\n            setState(__assign(__assign({}, newState), { rows: res, isHistory: false }));\n        });\n    };\n    var queryHistory = function (newState) {\n        if (props.onSearchHistory) {\n            props.onSearchHistory().then(function (res) {\n                setState(__assign(__assign({}, newState), { rows: res, isHistory: !!SearchBar_isArray(res) }));\n            });\n        }\n    };\n    var onSearch = function (newState) {\n        // const { searchWords } = newState;\n        if (!newState.searchWords && props.onSearchHistory) {\n            // 当输入为空的时候显示历史搜索记录：初次进入/清空搜索字段\n            queryHistory(newState);\n        }\n        else {\n            queryFuzzy(newState);\n        }\n    };\n    var onFocus = function () {\n        // 历史消息\n        if (!searchWords && props.onSearchHistory) {\n            props.onSearchHistory().then(function (res) {\n                setState(__assign(__assign({}, state), { isOpen: true, isHistory: !!SearchBar_isArray(res), rows: res }));\n            });\n        }\n        else {\n            props.onSearch(searchWords).then(function (res) {\n                setState(__assign(__assign({}, state), { rows: res, isOpen: true }));\n            });\n        }\n    };\n    var handleClosePanel = function (e) {\n        if (e === void 0) { e = ''; }\n        setState({\n            searchWords: e,\n            isHistory: false,\n            isOpen: false,\n            rows: [],\n        });\n    };\n    var onEnter = function (e) {\n        if (e.keyCode === ENTER_KEY && props.onEnter) {\n            props.onEnter(searchWords);\n            handleClosePanel(searchWords);\n        }\n    };\n    var onChange = function (e) {\n        setState(__assign(__assign({}, state), { searchWords: e.target.value }));\n    };\n    var resetSearchHistory = function () {\n        setState(__assign(__assign({}, state), { isOpen: true, isHistory: false, rows: [] }));\n    };\n    // 直接在useEffect内执行debounce无效，可以使用useRef把函数存起来\n    // 注意：useRef保存的state是之前的，必须将当前的state作为参数传进来，否则后面setState会有问题\n    var refDebounce = Object(external_window_React_[\"useRef\"])(Object(external_[\"debounce\"])(function (newState) { return onSearch(newState); }, DEBOUNCE_TIME));\n    Object(external_window_React_[\"useEffect\"])(function () {\n        document.addEventListener('click', hideSearchPanel);\n        return function () {\n            document.removeEventListener('click', hideSearchPanel);\n        };\n    });\n    Object(external_window_React_[\"useEffect\"])(function () {\n        if (!visible) {\n            handleClosePanel();\n        }\n    }, [visible]);\n    Object(external_window_React_[\"useEffect\"])(function () {\n        if (visible) {\n            refDebounce.current(state);\n        }\n    }, [searchWords]);\n    return visible ? (external_window_React_default.a.createElement(\"div\", { className: \"wrapper\" },\n        external_window_React_default.a.createElement(external_window_antd_[\"Input\"]\n        // ref={el => (el ? el.focus() : null)}\n        , { \n            // ref={el => (el ? el.focus() : null)}\n            ref: function (el) {\n                if (el && isFocus && !searchWords) {\n                    el.focus();\n                }\n            }, \n            // allowClear\n            value: searchWords, placeholder: placeholder, prefix: external_window_React_default.a.createElement(external_window_antd_[\"Icon\"], { type: \"search\", style: { color: 'rgba(0, 0, 0, .25)' } }), onFocus: onFocus, onPressEnter: onEnter, onChange: function (e) { return onChange(e); } }),\n        external_window_React_default.a.createElement(SearchBar_Panel, __assign({}, props, { rows: rows, isOpen: isOpen, isHistory: isHistory, searchWords: searchWords, isArray: SearchBar_isArray, handleClosePanel: handleClosePanel, resetSearchHistory: resetSearchHistory })))) : null;\n};\n/* harmony default export */ var Components_SearchBar_SearchBar = (SearchBar_SearchBar);\n\n// CONCATENATED MODULE: ./src/Components/SearchBar/index.ts\n\n/* harmony default export */ var Components_SearchBar = (Components_SearchBar_SearchBar);\n\n// CONCATENATED MODULE: ./src/Components/TreeSelector/functions/getCheckedKeys.ts\n\n// 树节点的勾选状态\nvar getCheckedKeys = function (data, checkedList) {\n    var checked = [];\n    var halfChecked = [];\n    var groupedItems = Object(external_[\"chain\"])(data)\n        .groupBy(function (item) { return item.key; })\n        .map(function (groups, key) {\n        return {\n            key: key,\n            groups: groups,\n        };\n    })\n        .value();\n    groupedItems.forEach(function (item) {\n        var groups = item.groups;\n        var filterItems = groups.filter(function (e) { return checkedList.includes(e.value); });\n        if (groups.length === filterItems.length) {\n            checked.push(item.key);\n        }\n        if (filterItems.length && groups.length > filterItems.length) {\n            halfChecked.push(item.key);\n        }\n    });\n    return {\n        checked: checked,\n        halfChecked: halfChecked,\n    };\n};\n/* harmony default export */ var functions_getCheckedKeys = (getCheckedKeys);\n\n// CONCATENATED MODULE: ./src/Components/TreeSelector/functions/index.ts\n\n/* harmony default export */ var functions = (functions_getCheckedKeys);\n\n// EXTERNAL MODULE: ./src/Components/TreeSelector/TreeSelector.less\nvar TreeSelector_TreeSelector = __webpack_require__(53);\n\n// CONCATENATED MODULE: ./src/Components/TreeSelector/TreeSelector.tsx\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar TreeSelector_read = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(TreeSelector_read(arguments[i]));\n    return ar;\n};\n\n\n\n\n\n\nvar TreeNode = external_window_antd_[\"Tree\"].TreeNode;\nvar TreeSelector_TreeSelector_TreeSelector = /** @class */ (function (_super) {\n    __extends(TreeSelector, _super);\n    function TreeSelector(props) {\n        var _this = _super.call(this, props) || this;\n        // 数据初始化\n        _this.init = function (data) {\n            var defaultExpandedKey = _this.props.defaultExpandedKey;\n            _this.childNodes.splice(0);\n            _this.renderCheckboxNodes(data);\n            var checkboxData = _this.childNodes.filter(function (item) { return item.key === defaultExpandedKey; });\n            _this.setState({ checkboxData: checkboxData });\n            // return checkboxData;\n        };\n        // 点击树节点\n        _this.onSelect = function (selectedKeys) {\n            if (selectedKeys.length) {\n                var checkboxData = _this.childNodes.filter(function (item) { return item.key === selectedKeys[0]; });\n                _this.setState({ checkboxData: checkboxData });\n            }\n        };\n        // 勾选树节点\n        _this.onCheck = function (checkedKeys, e) {\n            var _a;\n            var _b = _this.props, checkedList = _b.checkedList, onChange = _b.onChange;\n            var checked = checkedKeys instanceof Array ? checkedKeys : checkedKeys.checked;\n            var changedKeys = e.checked ? Object(external_[\"difference\"])(checked, _this.treeNodeKeys) : Object(external_[\"difference\"])(_this.treeNodeKeys, checked);\n            var checkboxData = _this.childNodes.filter(function (item) { return changedKeys.includes(item.key); });\n            var originValues = checkboxData.map(function (item) { return item.value; });\n            if (checkedList) {\n                _this.childNodeKeys = checkedList;\n            }\n            if (e.checked) {\n                (_a = _this.childNodeKeys).push.apply(_a, __spread(originValues));\n                _this.childNodeKeys = __spread(new Set(_this.childNodeKeys));\n            }\n            else {\n                _this.childNodeKeys = Object(external_[\"difference\"])(_this.childNodeKeys, originValues);\n            }\n            if (onChange) {\n                onChange(_this.childNodeKeys);\n            }\n            _this.setState({\n                checkboxData: checkboxData,\n                checkedList: _this.childNodeKeys,\n            });\n        };\n        // 勾选子节点\n        _this.onChangeChildKeys = function (keys) {\n            var _a;\n            var _b = _this.props, checkedList = _b.checkedList, onChange = _b.onChange;\n            var checkboxData = _this.state.checkboxData;\n            var originValues = checkboxData.map(function (item) { return item.value; });\n            var changedKeys = Object(external_[\"difference\"])(originValues, keys);\n            if (checkedList) {\n                _this.childNodeKeys = checkedList;\n            }\n            (_a = _this.childNodeKeys).push.apply(_a, __spread(keys));\n            _this.childNodeKeys = Object(external_[\"difference\"])(__spread(new Set(_this.childNodeKeys)), changedKeys);\n            if (onChange) {\n                onChange(_this.childNodeKeys);\n            }\n            _this.setState({ checkedList: _this.childNodeKeys });\n        };\n        // 根据初始数据得到所有子节点的数据集合\n        _this.renderCheckboxNodes = function (data, key) {\n            data.forEach(function (item) {\n                if (item.children) {\n                    _this.renderCheckboxNodes(item.children, item.key);\n                }\n                else {\n                    _this.childNodes.push({\n                        key: key,\n                        label: item.title,\n                        value: item.key,\n                    });\n                }\n            });\n        };\n        _this.renderTreeNodes = function (data) {\n            return data.map(function (item) {\n                if (item.children) {\n                    return (external_window_React_default.a.createElement(TreeNode, { title: item.title, key: item.key }, _this.renderTreeNodes(item.children)));\n                }\n                return null;\n            });\n        };\n        _this.childNodes = []; // 所有子节点的数据集合\n        _this.treeNodeKeys = []; // 选中树节点的key\n        _this.childNodeKeys = []; // 选中子节点的key\n        _this.state = {\n            checkboxData: [],\n            checkedList: [],\n        };\n        return _this;\n    }\n    TreeSelector.prototype.componentDidMount = function () {\n        var data = this.props.data;\n        this.init(data);\n    };\n    TreeSelector.prototype.componentDidUpdate = function (prevProps) {\n        // 传入数据变化时，重新初始化数据\n        var _a = this.props, data = _a.data, checkedList = _a.checkedList;\n        if (!Object(external_[\"isEqual\"])(prevProps.data, data)) {\n            this.childNodeKeys = checkedList;\n            this.init(data);\n        }\n    };\n    TreeSelector.prototype.render = function () {\n        var _a = this.state, checkboxData = _a.checkboxData, checkedListState = _a.checkedList;\n        var _b = this.props, data = _b.data, span = _b.span, style = _b.style, treeStyle = _b.treeStyle, defaultExpandedKey = _b.defaultExpandedKey, checkedListProps = _b.checkedList;\n        // const checkedList = this.props.checkedList ? this.props.checkedList : this.state.checkedList;\n        var checkedList = checkedListState;\n        if (checkedListProps) {\n            checkedList = checkedListProps;\n        }\n        var checkedKeys = functions(this.childNodes, checkedList);\n        this.treeNodeKeys = checkedKeys.checked;\n        // console.log(\"checkedList\", checkedList);\n        return (external_window_React_default.a.createElement(\"div\", { className: \"tree_selector_wrapper\", style: style },\n            external_window_React_default.a.createElement(\"div\", { className: \"tree_wrapper\", style: treeStyle },\n                external_window_React_default.a.createElement(external_window_antd_[\"Tree\"], { checkable: true, checkStrictly: true, checkedKeys: checkedKeys, onSelect: this.onSelect, onCheck: this.onCheck, defaultExpandedKeys: [defaultExpandedKey] }, this.renderTreeNodes(data))),\n            external_window_React_default.a.createElement(\"div\", { className: \"line\" }),\n            external_window_React_default.a.createElement(\"div\", { className: \"checkbox_wrapper\" },\n                external_window_React_default.a.createElement(Components_EnhancedCheckbox, { options: checkboxData, checkedList: checkedList, onChange: this.onChangeChildKeys, isSelectAll: false, span: span }))));\n    };\n    return TreeSelector;\n}(external_window_React_default.a.PureComponent));\n/* harmony default export */ var Components_TreeSelector_TreeSelector = (TreeSelector_TreeSelector_TreeSelector);\n\n// CONCATENATED MODULE: ./src/Components/TreeSelector/index.ts\n\n/* harmony default export */ var Components_TreeSelector = (Components_TreeSelector_TreeSelector);\n\n// CONCATENATED MODULE: ./src/Components/index.ts\n\n\n\n\n\n\n\n\n\n\n// CONCATENATED MODULE: ./src/Core/SearchBar/transformSearchValue.tsx\nvar getMatchWords = function (item) {\n    var _a = item.data, id = _a.id, label = _a.label, searchTypes = item.searchTypes;\n    return searchTypes.reduce(function (acc, curr) {\n        var currentText = '';\n        switch (curr) {\n            case 'id':\n                currentText = String(id);\n                break;\n            case 'label':\n                currentText = String(label);\n                break;\n            default:\n                break;\n        }\n        return acc + \"  \" + currentText;\n    }, '');\n};\nvar transformSearchValue = function (data) {\n    var filterData = data.filter(function (item) {\n        var searchTypes = item.searchTypes;\n        return searchTypes.indexOf('property') === -1;\n    });\n    return filterData.map(function (item) {\n        var matchWords = getMatchWords(item);\n        Object.assign(item, { name: matchWords });\n        return item;\n    });\n};\n/* harmony default export */ var SearchBar_transformSearchValue = (transformSearchValue);\n\n// EXTERNAL MODULE: ./src/Core/SearchBar/index.less\nvar Core_SearchBar = __webpack_require__(54);\n\n// CONCATENATED MODULE: ./src/Core/SearchBar/index.tsx\n\n\n\n\n\nvar SearchBarContainer = function (props) {\n    var state = props.state;\n    var visible = state.searchBar.visible, nodes = state.data.nodes, graphRef = state.graphRef, direction = state.toolbar.direction;\n    var apis = graphRef.current.getApis();\n    var onSearch = function (value) {\n        return new Promise(function (resolve) {\n            var result = apis.search(value);\n            // 数据中必须包含name属性\n            var transformValue = SearchBar_transformSearchValue(result);\n            resolve(transformValue);\n        });\n    };\n    var onSearchHistory = function () {\n        // TODO:获取当前画布的搜索历史记录\n        var result = [];\n        return new Promise(function (resolve) { return resolve(result); });\n    };\n    var onSelect = function (e) {\n        var id = e.id;\n        nodes.forEach(function (item) {\n            if (item.id === id) {\n                apis.highlight([id]);\n            }\n        });\n        // TODO:历史记录存储到localStorage中\n    };\n    var renderContent = function (options) {\n        var item = options.item, highlight = options.highlight, searchWords = options.searchWords;\n        var text = highlight(searchWords, item.name);\n        return \"<span>\" + text + \"</span>\";\n    };\n    var clearHistory = function () {\n        // TODO:清空当前画布的搜索历史记录\n    };\n    var rootClass = classnames_default()('searchBar-container', direction === 'horizontal' ? 'search-below-toolbar' : '');\n    return (external_window_React_default.a.createElement(\"div\", { className: rootClass },\n        external_window_React_default.a.createElement(Components_SearchBar, { visible: visible, isFocus: true, allowClear: true, placeholder: \"\\u8BF7\\u8F93\\u5165\\u641C\\u7D22\\u7684\\u8282\\u70B9id\\u6216label\", onSearch: onSearch, onSearchHistory: onSearchHistory, onSelect: onSelect, renderContent: renderContent, clearHistory: clearHistory })));\n};\n/* harmony default export */ var src_Core_SearchBar = (SearchBarContainer);\n\n// CONCATENATED MODULE: ./src/Core/Setting/Theme.tsx\n\n\nvar Theme = function (props) {\n    var dispatch = props.dispatch, state = props.state;\n    var theme = state.theme;\n    var handleChange = function (e) {\n        var value = e.target.value;\n        dispatch({\n            type: 'graph/theme',\n            payload: value,\n        });\n    };\n    return (external_window_React_default.a.createElement(\"div\", null,\n        external_window_React_default.a.createElement(external_window_antd_[\"Radio\"].Group, { name: \"radiogroup\", onChange: handleChange, value: theme },\n            external_window_React_default.a.createElement(external_window_antd_[\"Radio\"], { value: \"light\" }, \"\\u767D\\u5929\\u4E3B\\u9898\"),\n            external_window_React_default.a.createElement(external_window_antd_[\"Radio\"], { value: \"dark\", disabled: true }, \"\\u9ED1\\u591C\\u4E3B\\u9898\"))));\n};\n/* harmony default export */ var Setting_Theme = (Theme);\n\n// EXTERNAL MODULE: ./node_modules/react-color/lib/index.js\nvar lib = __webpack_require__(34);\n\n// CONCATENATED MODULE: ./src/Core/Styling/ColorPicker.tsx\nvar ColorPicker_assign = (undefined && undefined.__assign) || function () {\n    ColorPicker_assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return ColorPicker_assign.apply(this, arguments);\n};\nvar ColorPicker_read = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\n\n\nvar ColorSpan = function (props) {\n    var color = props.color, onClick = props.onClick;\n    var styles = {\n        background: color,\n        height: '20px',\n        width: '20px',\n        borderRadius: '4px',\n    };\n    var text = '';\n    return (external_window_React_default.a.createElement(\"div\", { role: \"button\", tabIndex: 0, style: styles, onClick: onClick, onKeyPress: onClick }, text));\n};\nvar ColorPicker = function (props) {\n    var defaultColor = props.defaultColor;\n    var _a = ColorPicker_read(Object(external_window_React_[\"useState\"])({\n        color: defaultColor,\n        isOpen: false,\n    }), 2), state = _a[0], setState = _a[1];\n    var type = props.type, name = props.name;\n    var color = state.color, isOpen = state.isOpen;\n    var toogleColorPicker = function () {\n        setState(ColorPicker_assign(ColorPicker_assign({}, state), { isOpen: !isOpen }));\n    };\n    var changeColor = function (e) {\n        setState(ColorPicker_assign(ColorPicker_assign({}, state), { color: e.hex }));\n        props.onChange(props.type, e.hex);\n    };\n    var styles = {\n        display: 'flex',\n        justifyContent: 'space-between',\n        padding: '15px',\n    };\n    return (external_window_React_default.a.createElement(\"div\", null,\n        external_window_React_default.a.createElement(\"div\", { style: styles },\n            name,\n            \" \",\n            type,\n            external_window_React_default.a.createElement(ColorSpan, { isOpen: isOpen, color: color, onClick: toogleColorPicker })),\n        isOpen && external_window_React_default.a.createElement(lib[\"TwitterPicker\"], { color: color, onChangeComplete: changeColor })));\n};\n/* harmony default export */ var Styling_ColorPicker = (ColorPicker);\n\n// CONCATENATED MODULE: ./src/Service/Storage/LocalStorage.ts\nvar LocalStorage_assign = (undefined && undefined.__assign) || function () {\n    LocalStorage_assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return LocalStorage_assign.apply(this, arguments);\n};\nvar LocalStorage_read = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar LocalStorage_spread = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(LocalStorage_read(arguments[i]));\n    return ar;\n};\nvar getType = function (value) {\n    return Object.prototype.toString.call(value);\n};\nvar mapToJson = function (map) {\n    return JSON.stringify(LocalStorage_spread(map));\n};\nvar jsonToMap = function (jsonStr) {\n    return new Map(JSON.parse(jsonStr));\n};\nvar LocalStorage = /** @class */ (function () {\n    function LocalStorage(namespace) {\n        var _this = this;\n        this.setVersion = function (version) {\n            if (_this.get('version') !== version) {\n                // version 为undefined 则表明第一次或者是清空缓存后的情况\n                // version 为0.1.x 则表明是上一次缓存策略，不与现在符合也得清除\n                _this.clear();\n                _this.set('version', version);\n            }\n        };\n        this.getNamespaceKey = function (key) {\n            return _this.namespace + \"_\" + key;\n        };\n        this.get = function (key) {\n            var namespaceKey = _this.getNamespaceKey(key);\n            if (_this.storage.getItem(namespaceKey)) {\n                return _this.toJson(_this.storage.getItem(namespaceKey), namespaceKey);\n            }\n            return undefined;\n        };\n        this.set = function (key, value) {\n            var namespaceKey = _this.getNamespaceKey(key);\n            _this.setInnerType(namespaceKey, value);\n            _this.storage.setItem(namespaceKey, _this.toString(value));\n        };\n        this.remove = function (key) {\n            var namespaceKey = _this.getNamespaceKey(key);\n            _this.storage.removeItem(namespaceKey);\n        };\n        this.clear = function () {\n            _this.storage.clear();\n        };\n        this.setInnerType = function (key, value) {\n            var _a;\n            var types = _this.getInnerType();\n            var newTypes = LocalStorage_assign(LocalStorage_assign({}, types), (_a = {}, _a[key] = getType(value), _a));\n            _this.storage.setItem(_this.innerValueType, JSON.stringify(newTypes));\n        };\n        this.getInnerType = function (key) {\n            var typesJSON = _this.storage.getItem(_this.innerValueType) || '{}';\n            var types = JSON.parse(typesJSON);\n            if (key) {\n                return types[key];\n            }\n            return types;\n        };\n        this.toJson = function (value, key) {\n            var type = _this.getInnerType(key);\n            if (type === '[object Map]') {\n                // 这里存在的问题是：已经序列化的值如何判断出是Map类型\n                return jsonToMap(value);\n            }\n            return JSON.parse(value);\n        };\n        // eslint-disable-next-line\n        this.toString = function (value) {\n            if (getType(value) === '[object Map]') {\n                return mapToJson(value);\n            }\n            return JSON.stringify(value);\n        };\n        this.namespace = namespace; // 比如ILINK，后续功能加上\n        this.storage = window.localStorage;\n        this.innerValueType = this.namespace + \"_inner_value_type\";\n    }\n    return LocalStorage;\n}());\n/* harmony default export */ var Storage_LocalStorage = (LocalStorage);\n\n// CONCATENATED MODULE: ./src/Service/Storage/index.ts\n\n/* harmony default export */ var Storage = (Storage_LocalStorage);\n\n// CONCATENATED MODULE: ./src/Core/Styling/NodeColorPicker.tsx\nvar NodeColorPicker_assign = (undefined && undefined.__assign) || function () {\n    NodeColorPicker_assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return NodeColorPicker_assign.apply(this, arguments);\n};\nvar NodeColorPicker_read = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\n\n\n\nvar NodeColorPicker = function (props) {\n    var storage = new Storage('graphin-studio');\n    var bizTypes = storage.get('bizTypes');\n    var initialNodeState = bizTypes.map(function (item) {\n        return {\n            type: item.type,\n            name: item.name,\n            color: item.style.primaryColor,\n        };\n    });\n    var _a = NodeColorPicker_read(Object(external_window_React_[\"useState\"])({\n        nodeTypes: initialNodeState,\n    }), 2), state = _a[0], setState = _a[1];\n    var nodeTypes = state.nodeTypes;\n    var onChange = function (type, color) {\n        var nodes = nodeTypes.map(function (node) {\n            if (node.type === type) {\n                return NodeColorPicker_assign(NodeColorPicker_assign({}, node), { color: color });\n            }\n            return node;\n        });\n        setState({\n            nodeTypes: nodes,\n        });\n        var newBizTypes = bizTypes.map(function (item) {\n            if (item.type === type) {\n                return NodeColorPicker_assign(NodeColorPicker_assign({}, item), { style: NodeColorPicker_assign(NodeColorPicker_assign({}, item.style), { primaryColor: color }) });\n            }\n            return item;\n        });\n        storage.set('bizTypes', newBizTypes);\n        var matchBizType = newBizTypes.find(function (item) { return item.type === type; });\n        var graph = props.graph, dispatch = props.dispatch;\n        var preData = graph.save();\n        var newNodes = preData.nodes.map(function (node) {\n            return NodeColorPicker_assign(NodeColorPicker_assign({}, node), { style: node.data.type === type ? matchBizType.style : node.style });\n        });\n        var newData = {\n            nodes: newNodes,\n            edges: preData.edges,\n        };\n        dispatch({\n            type: 'graph/changeData',\n            payload: newData,\n        });\n        /** 调用G6的API实现刷新 */\n        // const graphNodes = graph.get('nodes') as GraphNode[];\n        // graphNodes.forEach(node => {\n        //     const nodeType = node.get('model').data.type;\n        //     if (type === nodeType) {\n        //         /**  只更新需要更新的节点类型 */\n        //         graph.update(node, {\n        //             style: matchBizType.style,\n        //         });\n        //     }\n        // });\n        /** end */\n    };\n    return (external_window_React_default.a.createElement(\"div\", null, nodeTypes.map(function (bizType) {\n        var type = bizType.type, name = bizType.name, color = bizType.color;\n        return external_window_React_default.a.createElement(Styling_ColorPicker, { key: type, type: type, name: name, onChange: onChange, defaultColor: color });\n    })));\n};\n/* harmony default export */ var Styling_NodeColorPicker = (NodeColorPicker);\n\n// CONCATENATED MODULE: ./src/Core/Setting/ToolbarConfig.tsx\n\n\nvar ToolbarConfig = function (props) {\n    var dispatch = props.dispatch, state = props.state;\n    var toolbar = state.toolbar;\n    var handleChange = function (e) {\n        var value = e.target.value;\n        dispatch({\n            type: 'graph/changeToolbar',\n            payload: {\n                direction: value,\n            },\n        });\n    };\n    return (external_window_React_default.a.createElement(\"div\", null,\n        external_window_React_default.a.createElement(external_window_antd_[\"Radio\"].Group, { name: \"radiogroup\", onChange: handleChange, value: toolbar.direction },\n            external_window_React_default.a.createElement(external_window_antd_[\"Radio\"], { value: \"vertical\" }, \"\\u7EB5\\u5411\\u5E03\\u5C40\"),\n            external_window_React_default.a.createElement(external_window_antd_[\"Radio\"], { value: \"horizontal\" }, \"\\u6A2A\\u5411\\u5E03\\u5C40\"))));\n};\n/* harmony default export */ var Setting_ToolbarConfig = (ToolbarConfig);\n\n// CONCATENATED MODULE: ./src/Core/Setting/index.tsx\nvar Setting_assign = (undefined && undefined.__assign) || function () {\n    Setting_assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return Setting_assign.apply(this, arguments);\n};\n\n\n\n\n// import NodeSizePicker from '../Styling/NodeSizePicker';\n\nvar Setting = function (props) {\n    var data = [\n        {\n            title: '切换主题',\n            children: external_window_React_default.a.createElement(Setting_Theme, Setting_assign({}, props)),\n        },\n        {\n            title: 'Toolbar',\n            children: external_window_React_default.a.createElement(Setting_ToolbarConfig, Setting_assign({}, props)),\n        },\n        {\n            title: '节点样式',\n            children: external_window_React_default.a.createElement(Styling_NodeColorPicker, Setting_assign({}, props)),\n        },\n    ];\n    return (external_window_React_default.a.createElement(\"div\", null,\n        external_window_React_default.a.createElement(Components_FoldingPanel_FoldingPanel, { data: data })));\n};\n/* harmony default export */ var Core_Setting = (Setting);\n\n// CONCATENATED MODULE: ./src/Service/Mock/nodeTypes.ts\nvar nodeTypes_nodeTypes = [\n    { name: '公司', nodeType: 'company' },\n    { name: '手机号码', nodeType: 'phone' },\n    { name: '邮箱', nodeType: 'email' },\n];\n/* harmony default export */ var Mock_nodeTypes = (nodeTypes_nodeTypes);\n\n// EXTERNAL MODULE: ../graphin/dist/index.esm.js\nvar index_esm = __webpack_require__(17);\n\n// EXTERNAL MODULE: external \"chineseRandomName\"\nvar external_chineseRandomName_ = __webpack_require__(35);\nvar external_chineseRandomName_default = /*#__PURE__*/__webpack_require__.n(external_chineseRandomName_);\n\n// CONCATENATED MODULE: ./src/Service/Mock/nodePropertiesSchema.ts\nvar nodePropertiesSchema_assign = (undefined && undefined.__assign) || function () {\n    nodePropertiesSchema_assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return nodePropertiesSchema_assign.apply(this, arguments);\n};\nvar province = [\n    '北京市',\n    '天津市',\n    '上海市',\n    '重庆市',\n    '河北省',\n    '山西省',\n    '辽宁省',\n    '吉林省',\n    '黑龙江省',\n    '江苏省',\n    '浙江省',\n    '安徽省',\n    '福建省',\n    '江西省',\n    '山东省',\n    '河南省',\n    '湖北省',\n    '湖南省',\n    '广东省',\n    '海南省',\n    '四川省',\n    '贵州省',\n    '云南省',\n    '陕西省',\n    '甘肃省',\n    '青海省',\n    '台湾省',\n    '内蒙古自治区',\n    '广西壮族自治区',\n    '西藏自治区',\n    '宁夏回族自治区',\n    '新疆维吾尔自治区',\n    '香港特别行政区',\n    '澳门',\n    '台湾',\n];\nvar provinceSchema = province.reduce(function (acc, curr) {\n    var _a;\n    return nodePropertiesSchema_assign(nodePropertiesSchema_assign({}, acc), (_a = {}, _a[curr] = { enumValueCode: curr, enumValueName: curr }, _a));\n}, {});\nvar nodePropertiesSchema = [\n    {\n        type: 'company',\n        typeName: '公司',\n        propertySchemaList: [\n            {\n                code: 'name',\n                name: 'name',\n                dataType: 'STRING',\n                desc: '公司名称',\n                enumValueSchemaMap: null,\n            },\n            {\n                code: 'companyType',\n                name: 'companyType',\n                dataType: 'ENUM',\n                desc: '类型',\n                enumValueSchemaMap: {\n                    OTHER: { enumValueCode: 'OTHER', enumValueName: '其他(非上市)' },\n                    Listed: { enumValueCode: 'Listed', enumValueName: '上市公司' },\n                },\n            },\n            {\n                code: 'industry',\n                name: 'industry',\n                dataType: 'STRING',\n                desc: '行业',\n                enumValueSchemaMap: null,\n            },\n            {\n                code: 'phone',\n                name: 'phone',\n                desc: '电话',\n                dataType: 'STRING',\n                enumValueSchemaMap: null,\n            },\n            {\n                code: 'USCC',\n                name: 'USCC',\n                desc: '统一社会信用代码',\n                dataType: 'NUMBER',\n                enumValueSchemaMap: null,\n            },\n            {\n                code: 'registered capital',\n                name: 'registered capital',\n                desc: '注册资本',\n                dataType: 'NUMBER',\n                enumValueSchemaMap: null,\n            },\n            {\n                code: 'number of participants',\n                name: 'number of participants',\n                dataType: 'NUMBER',\n                desc: '参保人数',\n                enumValueSchemaMap: null,\n            },\n            {\n                code: 'register prov',\n                name: 'register prov',\n                dataType: 'ENUM',\n                desc: '注册省份',\n                enumValueSchemaMap: provinceSchema,\n            },\n        ],\n    },\n];\n\n// CONCATENATED MODULE: ./src/Service/getNodeProperties.ts\nvar getNodeProperties_assign = (undefined && undefined.__assign) || function () {\n    getNodeProperties_assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return getNodeProperties_assign.apply(this, arguments);\n};\n\n\nvar nodePropertiesSchemaMap = nodePropertiesSchema.reduce(function (acc, curr) {\n    var _a;\n    return getNodeProperties_assign(getNodeProperties_assign({}, acc), (_a = {}, _a[curr.type] = curr, _a));\n}, {});\nvar getPropertyValue = function (property) {\n    var code = property.code;\n    switch (code) {\n        case 'name':\n            return external_chineseRandomName_default.a.generate() + \"\\u67D0\\u67D0\\u516C\\u53F8\";\n        case 'companyType':\n            return Math.random() - 0.5 > 0 ? '上市公司' : '非上市公司';\n        case 'industry':\n            return Math.random() - 0.5 > 0 ? '传统行业' : '互联网行业';\n        case 'number of participants':\n            return Math.round(Math.random() * 100);\n        case 'registered capital':\n            return Math.round(Math.random() * 1000000000) / 10000 + \"(\\u4E07\\u5143)\";\n        case 'register prov':\n            // const randomProvince = province.sort(() => {\n            //     return Math.random() - 0.5;\n            // });\n            return province.sort(function () {\n                return Math.random() - 0.5;\n            })[0];\n        case 'phone':\n            return Math.random()\n                .toString()\n                .slice(2, 11);\n        case 'USCC':\n            return Math.random()\n                .toString()\n                .slice(2, 20);\n        default:\n            return '...';\n    }\n};\n/**\n *\n * @param nodes nodes节点数组\n * @param nodes\n */\nvar getProperties = function (nodes) {\n    return nodes.map(function (node) {\n        var _a = node.type, type = _a === void 0 ? '' : _a;\n        if (!nodePropertiesSchemaMap[type]) {\n            return node;\n        }\n        var schemaProperties = nodePropertiesSchemaMap[type].propertySchemaList;\n        var propertiesMock = schemaProperties.map(function (property) {\n            return {\n                code: property.code,\n                name: property.desc,\n                value: getPropertyValue(property),\n            };\n        });\n        var displayName = propertiesMock.find(function (property) { return property.code === 'name'; }).value + \"(\" + node.id + \")\";\n        return getNodeProperties_assign(getNodeProperties_assign({}, node), { label: displayName, properties: propertiesMock });\n    });\n};\n/* harmony default export */ var getNodeProperties = (getProperties);\n\n// CONCATENATED MODULE: ./src/Service/getNodesById.ts\n\n/**\n *\n * @param nodeIds 节点的ID数组\n * @param nodeType 节点的类型，例如:\"UID\"\"PHONE\"等\n */\nvar getNodesById = function (nodeIds, nodeType) {\n    if (nodeType === void 0) { nodeType = 'UID'; }\n    var nodes = nodeIds.map(function (id) {\n        return {\n            id: \"node-\" + id,\n            label: \"node-\" + id,\n            type: nodeType,\n            properties: [],\n        };\n    });\n    return getNodeProperties(nodes);\n};\n/* harmony default export */ var Service_getNodesById = (getNodesById);\n\n// CONCATENATED MODULE: ./src/Custom/config.ts\nvar config_assign = (undefined && undefined.__assign) || function () {\n    config_assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return config_assign.apply(this, arguments);\n};\n\nvar colors = [\n    '#515151',\n    '#9900EF',\n    '#FF6900',\n    '#00D084',\n    '#ABB8C3',\n    '#0693E3',\n    '#FF7A45',\n    '#9254DE',\n    '#FF4D4F',\n    '#73D13D',\n    '#F759AC',\n    '#FFA941',\n    '#35CFC9',\n    '#FFC53D',\n    '#40A9FF',\n    '#597EF7',\n    '#FFEC3E',\n    '#BAE637',\n];\nvar floorRandom = function (number) {\n    return Math.floor(Math.random() * number);\n};\nvar randomColor = function (opacity) {\n    if (opacity === void 0) { opacity = 1; }\n    var r = floorRandom(255);\n    var g = floorRandom(255);\n    var b = floorRandom(255);\n    var color = \"rgba(\" + r + \",\" + g + \",\" + b + \",\" + opacity + \")\";\n    return color;\n};\nvar config_style = {\n    /** 节点的大小 */\n    nodeSize: 20,\n    /** 节点的主要颜色 */\n    primaryColor: '#9900EF',\n    /** 文本的字体大小 */\n    fontSize: 12,\n    /** 文本的字体颜色 */\n    fontColor: '#3b3b3b',\n    /** dark 置灰 */\n    dark: '#eee',\n};\nvar config_bizTypes = Mock_nodeTypes.map(function (node, index) {\n    return {\n        type: node.nodeType,\n        name: node.name,\n        style: config_assign(config_assign({}, config_style), { primaryColor: colors[index] || randomColor() }),\n    };\n});\n\n\n// CONCATENATED MODULE: ./src/Custom/transform.ts\n\n\nvar transform_storage = new Storage('graphin-studio');\nif (!transform_storage.get('bizTypes')) {\n    transform_storage.set('bizTypes', config_bizTypes);\n}\nvar transform = {\n    nodes: function (nodes) {\n        return nodes.map(function (node) {\n            var BizTypes = transform_storage.get('bizTypes');\n            var bizType = BizTypes.find(function (item) {\n                return item.type === node.type;\n            }) || { style: {} };\n            var type = node.type;\n            return {\n                id: node.id,\n                shape: type === 'phone' ? 'RectNode' : 'CircleNode',\n                data: node,\n                style: bizType.style,\n            };\n        });\n    },\n    edges: function (edges) {\n        return edges.map(function (edge) {\n            var source = edge.source, target = edge.target;\n            return {\n                source: source,\n                target: target,\n                data: edge,\n            };\n        });\n    },\n    data: function (data) {\n        return {\n            nodes: transform.nodes(data.nodes),\n            edges: transform.edges(data.edges),\n        };\n    },\n};\n/* harmony default export */ var Custom_transform = (transform);\n\n// CONCATENATED MODULE: ./src/Service/index.ts\n\n\n\n\n/**\n *\n * @param nodeIds 节点id数组\n * @param nodeType 节点类型\n */\n// eslint-disable-next-line\nvar queryNodes = function (nodeIds, nodeType) {\n    var nodes = Custom_transform.nodes(Service_getNodesById(nodeIds, nodeType));\n    return new Promise(function (resolve) { return resolve(nodes); });\n};\n/**\n *\n * @param count 节点的个数\n * @param mockType Mock的类型 random | circle\n * @param options Mock的配置参数 random:0.5 | circle:node-0\n */\n// eslint-disable-next-line\nvar queryGraph = function (count, mockType, options) {\n    var data = index_esm[\"a\" /* Utils */].mock(count)\n        .type('company')[mockType](options)\n        .value();\n    var nodes = getNodeProperties(data.nodes);\n    var graphinNodes = Custom_transform.nodes(nodes);\n    var graphinEdges = Custom_transform.edges(data.edges);\n    return new Promise(function (resolve) {\n        return resolve({\n            nodes: graphinNodes,\n            edges: graphinEdges,\n        });\n    });\n};\n/* harmony default export */ var Service = ({ queryNodes: queryNodes, queryGraph: queryGraph });\n\n// EXTERNAL MODULE: ./src/Core/AddNodes/index.less\nvar AddNodes = __webpack_require__(117);\n\n// CONCATENATED MODULE: ./src/Core/AddNodes/Normal.tsx\nvar Normal_assign = (undefined && undefined.__assign) || function () {\n    Normal_assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return Normal_assign.apply(this, arguments);\n};\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar Normal_read = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar Normal_spread = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(Normal_read(arguments[i]));\n    return ar;\n};\n\n\n\n\n\n\nvar TextArea = external_window_antd_[\"Input\"].TextArea;\nvar SelectOption = external_window_antd_[\"Select\"].Option;\nvar Normal = function (props) {\n    var dispatch = props.dispatch, graph = props.graph;\n    var _a = Normal_read(Object(external_window_React_[\"useState\"])({\n        type: 'company',\n        params: '',\n    }), 2), state = _a[0], setState = _a[1];\n    var _b = state.type, type = _b === void 0 ? 'company' : _b, _c = state.params, params = _c === void 0 ? '' : _c, _d = state.errormsg, errormsg = _d === void 0 ? '' : _d;\n    var handleClick = function () { return __awaiter(void 0, void 0, void 0, function () {\n        var ids, data, preData, nodes, edges;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!params) {\n                        setState(Normal_assign(Normal_assign({}, state), { errormsg: 'id不能为空' }));\n                        return [2 /*return*/];\n                    }\n                    setState(Normal_assign(Normal_assign({}, state), { params: '' }));\n                    ids = params.split(',');\n                    return [4 /*yield*/, Service.queryNodes(ids, type)];\n                case 1:\n                    data = (_a.sent());\n                    preData = graph.save();\n                    nodes = preData.nodes, edges = preData.edges;\n                    dispatch({\n                        type: 'graph/addNodes',\n                        payload: {\n                            nodes: Normal_spread(nodes, data),\n                            edges: edges,\n                        },\n                    });\n                    return [2 /*return*/];\n            }\n        });\n    }); };\n    var handleChangeNodeId = function (e) {\n        setState(Normal_assign(Normal_assign({}, state), { params: e.target.value, errormsg: '' }));\n    };\n    return (external_window_React_default.a.createElement(\"div\", null,\n        external_window_React_default.a.createElement(Components_Item_Item, { title: \"\\u5B9E\\u4F53\\u7C7B\\u578B\" },\n            external_window_React_default.a.createElement(external_window_antd_[\"Select\"], { placeholder: \"\\u8BF7\\u9009\\u62E9\\u5B9E\\u4F53\\u7C7B\\u578B\", style: { width: '100%' }, value: type, onChange: function (value) {\n                    setState(Normal_assign(Normal_assign({}, state), { type: value }));\n                } }, Mock_nodeTypes.map(function (item) {\n                var nodeType = item.nodeType, name = item.name;\n                return (external_window_React_default.a.createElement(SelectOption, { key: nodeType, value: nodeType }, name));\n            }))),\n        external_window_React_default.a.createElement(Components_Item_Item, { title: \"\\u8F93\\u5165ID\" },\n            external_window_React_default.a.createElement(TextArea, { rows: 4, placeholder: \"\\u8BF7\\u8F93\\u5165ID, \\u591A\\u4E2A\\u7684\\u8BDD\\u7528\\u9017\\u53F7\\u5206\\u9694\", value: params, onChange: handleChangeNodeId })),\n        errormsg && external_window_React_default.a.createElement(\"span\", { className: \"error_msg\" }, errormsg),\n        external_window_React_default.a.createElement(Components_Item_Item, { title: \"\" },\n            external_window_React_default.a.createElement(external_window_antd_[\"Button\"], { style: { width: '100%' }, onClick: handleClick }, \"\\u589E\\u91CF\\u6DFB\\u52A0\\u8282\\u70B9\"))));\n};\n/* harmony default export */ var AddNodes_Normal = (Normal);\n\n// CONCATENATED MODULE: ./src/Core/AddNodes/Random.tsx\nvar Random_assign = (undefined && undefined.__assign) || function () {\n    Random_assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return Random_assign.apply(this, arguments);\n};\nvar Random_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar Random_generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar Random_read = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\n\n\n\n\nvar Random_SelectOption = external_window_antd_[\"Select\"].Option;\nvar mockTypes = [\n    {\n        type: 'circle',\n        name: '选举连接中心点',\n        options: 'node-0',\n    },\n    {\n        type: 'random',\n        name: '随机裁剪边',\n        options: '0.3',\n    },\n];\nvar Random = function (props) {\n    var dispatch = props.dispatch;\n    var _a = Random_read(Object(external_window_React_[\"useState\"])({\n        nodeCount: 10,\n        mockType: 'circle',\n        options: 'node-0',\n    }), 2), state = _a[0], setState = _a[1];\n    var _b = state.mockType, mockType = _b === void 0 ? 'circle' : _b, _c = state.nodeCount, nodeCount = _c === void 0 ? 10 : _c, _d = state.options, options = _d === void 0 ? 'node-0' : _d;\n    var handleClick = function () { return Random_awaiter(void 0, void 0, void 0, function () {\n        var data;\n        return Random_generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, Service.queryGraph(nodeCount, mockType, options)];\n                case 1:\n                    data = _a.sent();\n                    dispatch({\n                        type: 'graph/changeData',\n                        payload: data,\n                    });\n                    return [2 /*return*/];\n            }\n        });\n    }); };\n    return (external_window_React_default.a.createElement(\"div\", null,\n        external_window_React_default.a.createElement(Components_Item_Item, { title: \"\\u8282\\u70B9\\u4E2A\\u6570\" },\n            external_window_React_default.a.createElement(external_window_antd_[\"Input\"], { placeholder: \"\\u8F93\\u5165\\u8282\\u70B9\\u6570\\u91CF\", style: { width: '100%' }, value: nodeCount, onChange: function (e) {\n                    setState(Random_assign(Random_assign({}, state), { nodeCount: Number(e.target.value) }));\n                } })),\n        external_window_React_default.a.createElement(Components_Item_Item, { title: \"\\u8FB9\\u7684\\u8FDE\\u63A5\\u5173\\u7CFB\" },\n            external_window_React_default.a.createElement(external_window_antd_[\"Select\"], { placeholder: \"\\u8BF7\\u9009\\u62E9\\u8FB9\\u7684\\u8FDE\\u63A5\\u5173\\u7CFB\", style: { width: '100%' }, value: mockType, onChange: function (value) {\n                    setState(Random_assign(Random_assign({}, state), { mockType: value, options: mockTypes.filter(function (mock) { return mock.type === value; })[0].options }));\n                } }, mockTypes.map(function (item) {\n                var type = item.type, name = item.name;\n                return (external_window_React_default.a.createElement(Random_SelectOption, { key: type, value: type }, name));\n            }))),\n        external_window_React_default.a.createElement(Components_Item_Item, { title: mockType === 'random' ? '随机参数' : '中心点' },\n            external_window_React_default.a.createElement(external_window_antd_[\"Input\"], { placeholder: \"\\u8F93\\u5165\" + (mockType === 'random' ? '随机参数' : '中心点'), style: { width: '100%' }, value: options, onChange: function (e) {\n                    setState(Random_assign(Random_assign({}, state), { options: e.target.value }));\n                } })),\n        external_window_React_default.a.createElement(Components_Item_Item, { title: \"\" },\n            external_window_React_default.a.createElement(external_window_antd_[\"Button\"], { style: { width: '100%' }, onClick: handleClick }, \"\\u5168\\u91CF\\u66FF\\u6362\\u8282\\u70B9\"))));\n};\n/* harmony default export */ var AddNodes_Random = (Random);\n\n// CONCATENATED MODULE: ./src/Core/AddNodes/index.tsx\nvar AddNodes_assign = (undefined && undefined.__assign) || function () {\n    AddNodes_assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return AddNodes_assign.apply(this, arguments);\n};\n\n\n\n\nvar AddNodes_AddNodes = function (props) {\n    var data = [\n        {\n            title: '增量添加节点',\n            children: external_window_React_default.a.createElement(AddNodes_Normal, AddNodes_assign({}, props)),\n        },\n        {\n            title: '全量替换节点',\n            children: external_window_React_default.a.createElement(AddNodes_Random, AddNodes_assign({}, props)),\n        },\n    ];\n    return (external_window_React_default.a.createElement(\"div\", null,\n        external_window_React_default.a.createElement(Components_FoldingPanel_FoldingPanel, { data: data })));\n};\n/* harmony default export */ var Core_AddNodes = (AddNodes_AddNodes);\n\n// CONCATENATED MODULE: ./src/Core/NodeAttr/index.tsx\n\n\nvar NodeAttr = function (props) {\n    var state = props.state;\n    var selectedNodes = state.selectedNodes;\n    var properties = selectedNodes[0].properties.map(function (property) {\n        var code = property.code, name = property.name, value = property.value;\n        return external_window_React_default.a.createElement(Components_Property, { key: code, name: name, value: value });\n    });\n    var source = [\n        {\n            title: '基础信息',\n            children: properties,\n        },\n    ];\n    return (external_window_React_default.a.createElement(\"div\", null,\n        external_window_React_default.a.createElement(Components_FoldingPanel, { data: source })));\n};\n/* harmony default export */ var Core_NodeAttr = (NodeAttr);\n\n// CONCATENATED MODULE: ./src/Core/EdgeAttr/index.tsx\n\nvar EdgeAttr = function () {\n    return external_window_React_default.a.createElement(\"div\", null, \"EdgeAttr\");\n};\n/* harmony default export */ var Core_EdgeAttr = (EdgeAttr);\n\n// CONCATENATED MODULE: ./src/Core/DiffusePanel/NodeType.tsx\n\n\n\nvar NodeType_options = Mock_nodeTypes.map(function (item) {\n    return {\n        label: item.name,\n        value: item.nodeType,\n    };\n});\nvar NodeType = function (props) {\n    var value = props.value, onChange = props.onChange;\n    return external_window_React_default.a.createElement(Components_EnhancedCheckbox, { options: NodeType_options, checkedList: value, onChange: onChange });\n};\n/* harmony default export */ var DiffusePanel_NodeType = (NodeType);\n\n// CONCATENATED MODULE: ./src/Service/Mock/edgeTypes.ts\nvar edgeTypes = [\n    { name: '强弱关系', nodeType: 'UID', children: [{ name: '强-综合', nodeType: 'STRONG_SUM' }] },\n    { name: '社会关系', nodeType: 'CERTNO', children: [{ name: '弱-社交', nodeType: 'WEAK_SNS' }] },\n    { name: '媒介关系', nodeType: 'BANKCARD', children: [{ name: '强-媒介', nodeType: 'STRONG_MEDIA' }] },\n];\n/* harmony default export */ var Mock_edgeTypes = (edgeTypes);\n\n// CONCATENATED MODULE: ./src/Core/DiffusePanel/EdgeType.tsx\n\n\n\nvar relationTypeData = Mock_edgeTypes.map(function (item) {\n    return {\n        title: item.name,\n        key: item.nodeType,\n        children: item.children && item.children.map(function (ele) { return ({ title: ele.name, key: ele.nodeType }); }),\n    };\n});\nvar EdgeType = function (props) {\n    var value = props.value, onChange = props.onChange;\n    return (external_window_React_default.a.createElement(Components_TreeSelector, { data: relationTypeData, defaultExpandedKey: relationTypeData[0].key, onChange: onChange, checkedList: value }));\n};\n/* harmony default export */ var DiffusePanel_EdgeType = (EdgeType);\n\n// EXTERNAL MODULE: ./src/Core/DiffusePanel/index.less\nvar DiffusePanel = __webpack_require__(118);\n\n// CONCATENATED MODULE: ./src/Core/DiffusePanel/index.tsx\nvar DiffusePanel_assign = (undefined && undefined.__assign) || function () {\n    DiffusePanel_assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return DiffusePanel_assign.apply(this, arguments);\n};\nvar DiffusePanel_read = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\n\n\n\n\n\n\nvar DiffusePanel_DiffusePanel = function (props) {\n    var dispatch = props.dispatch, propsData = props.state;\n    var selectedNodes = propsData.selectedNodes;\n    var _a = DiffusePanel_read(Object(external_window_React_[\"useState\"])({\n        selectedNodeTypes: [],\n        selectedEdgeTypes: [],\n    }), 2), state = _a[0], setState = _a[1];\n    var selectedNodeTypes = state.selectedNodeTypes, selectedEdgeTypes = state.selectedEdgeTypes;\n    var handleChangeNodeTypes = function (value) {\n        setState(DiffusePanel_assign(DiffusePanel_assign({}, state), { selectedNodeTypes: value }));\n    };\n    var handleChangeEdgeTypes = function (value) {\n        setState(DiffusePanel_assign(DiffusePanel_assign({}, state), { selectedEdgeTypes: value }));\n    };\n    var confirm = function () {\n        dispatch({\n            type: 'graph/diffuse',\n            payload: {\n                start: selectedNodes,\n            },\n        });\n    };\n    var data = [\n        {\n            title: '实体类型',\n            children: external_window_React_default.a.createElement(DiffusePanel_NodeType, { onChange: handleChangeNodeTypes, value: selectedNodeTypes }),\n        },\n        {\n            title: '关系类型',\n            children: external_window_React_default.a.createElement(DiffusePanel_EdgeType, { onChange: handleChangeEdgeTypes, value: selectedEdgeTypes }),\n        },\n    ];\n    return (external_window_React_default.a.createElement(\"div\", null,\n        external_window_React_default.a.createElement(Components_FoldingPanel, { data: data }),\n        external_window_React_default.a.createElement(\"div\", { style: {\n                width: propsData.drawer.width,\n            }, className: \"diffuse_confirm_wrapper\" },\n            external_window_React_default.a.createElement(external_window_antd_[\"Button\"], { className: \"diffuse_confirm_button\", onClick: confirm }, \"\\u786E\\u5B9A\"))));\n};\n/* harmony default export */ var Core_DiffusePanel = (DiffusePanel_DiffusePanel);\n\n// EXTERNAL MODULE: ./src/Core/GraphDrawer/index.less\nvar GraphDrawer = __webpack_require__(119);\n\n// CONCATENATED MODULE: ./src/Core/GraphDrawer/index.tsx\nvar GraphDrawer_assign = (undefined && undefined.__assign) || function () {\n    GraphDrawer_assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return GraphDrawer_assign.apply(this, arguments);\n};\n\n\n\n\n\n\n\n\nvar getComponent = function (component, props) {\n    switch (component) {\n        case 'setting':\n            return external_window_React_default.a.createElement(Core_Setting, GraphDrawer_assign({}, props));\n        case 'addNodes':\n            return external_window_React_default.a.createElement(Core_AddNodes, GraphDrawer_assign({}, props));\n        case 'nodeAttr':\n            return external_window_React_default.a.createElement(Core_NodeAttr, GraphDrawer_assign({}, props));\n        case 'edgeAttr':\n            return external_window_React_default.a.createElement(Core_EdgeAttr, GraphDrawer_assign({}, props));\n        case 'diffuse':\n            return external_window_React_default.a.createElement(Core_DiffusePanel, GraphDrawer_assign({}, props));\n        default:\n            return null;\n    }\n};\nvar handleClose = function (props) {\n    var dispatch = props.dispatch;\n    dispatch({ type: 'graph/drawer', payload: { visible: false, type: '', width: null } });\n};\nvar GraphDrawer_GraphDrawer = function (props) {\n    var drawer = props.state.drawer;\n    var type = drawer.type, visible = drawer.visible, width = drawer.width, title = drawer.title, _a = drawer.closeMask, closeMask = _a === void 0 ? false : _a;\n    var component = getComponent(type, props);\n    return (external_window_React_default.a.createElement(\"div\", null,\n        external_window_React_default.a.createElement(external_window_antd_[\"Drawer\"], { width: width, title: title, placement: \"right\", closable: true, mask: !closeMask, onClose: function () {\n                handleClose(props);\n            }, visible: visible }, component)));\n};\n/* harmony default export */ var Core_GraphDrawer = (GraphDrawer_GraphDrawer);\n\n// CONCATENATED MODULE: ./src/Core/Clear/index.tsx\n\n\nvar Clear = function () {\n    return (external_window_React_default.a.createElement(\"div\", null,\n        external_window_React_default.a.createElement(external_window_antd_[\"Icon\"], { type: \"info-circle\" }),\n        \" \\u6E05\\u7A7A\\u5F53\\u524D\\u753B\\u5E03\"));\n};\n/* harmony default export */ var Core_Clear = (Clear);\n\n// EXTERNAL MODULE: ./src/Core/Save/index.less\nvar Save = __webpack_require__(120);\n\n// CONCATENATED MODULE: ./src/Core/Save/index.tsx\n\n\nvar Save_Save = function (props) {\n    var graph = props.graph;\n    var url = graph.toDataURL();\n    return (external_window_React_default.a.createElement(\"div\", { className: \"graphin-studio-save\" },\n        external_window_React_default.a.createElement(\"img\", { src: url, alt: \"\", width: \"100%\" })));\n};\n/* harmony default export */ var Core_Save = (Save_Save);\n\n// CONCATENATED MODULE: ./src/Core/GraphModal/index.tsx\nvar GraphModal_assign = (undefined && undefined.__assign) || function () {\n    GraphModal_assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return GraphModal_assign.apply(this, arguments);\n};\n\n\n\n\nvar GraphModal_handleClose = function (props) {\n    var dispatch = props.dispatch;\n    dispatch({ type: 'graph/modal', payload: { visible: false, type: '' } });\n};\nvar GraphModal_getComponent = function (component, props) {\n    switch (component) {\n        case 'save':\n            return external_window_React_default.a.createElement(Core_Save, GraphModal_assign({}, props));\n        case 'clear':\n            return external_window_React_default.a.createElement(Core_Clear, GraphModal_assign({}, props));\n        default:\n            return null;\n    }\n};\nvar GraphModal = function (props) {\n    var modal = props.state.modal;\n    var _a = modal.title, title = _a === void 0 ? '' : _a, visible = modal.visible, _b = modal.type, type = _b === void 0 ? '' : _b, _c = modal.handleOk, handleOk = _c === void 0 ? function () { } : _c;\n    var component = GraphModal_getComponent(type, props);\n    return (external_window_React_default.a.createElement(\"div\", null,\n        external_window_React_default.a.createElement(external_window_antd_[\"Modal\"], { title: title, visible: visible, onOk: function () {\n                handleOk();\n                GraphModal_handleClose(props);\n            }, onCancel: function () {\n                GraphModal_handleClose(props);\n            } }, component)));\n};\n/* harmony default export */ var Core_GraphModal = (GraphModal);\n\n// CONCATENATED MODULE: ./src/Redux/store.ts\n\nvar store_storage = new Storage('graphin-studio');\nif (!store_storage.get('config')) {\n    store_storage.set('config', {\n        toolbar: {\n            direction: 'vertical',\n        },\n        theme: 'light',\n    });\n}\nvar initialState = {\n    data: {\n        nodes: [],\n        edges: [],\n    },\n    layout: {\n        name: 'force',\n        options: {\n            preset: {\n                name: 'concentric',\n            },\n        },\n    },\n    selectedNodes: [],\n    drawer: {\n        visible: false,\n        type: '',\n    },\n    modal: {\n        visible: false,\n    },\n    searchBar: {\n        visible: false,\n    },\n    toolbar: {\n        direction: store_storage.get('config').toolbar.direction,\n    },\n    theme: store_storage.get('config').theme,\n    graphRef: {\n        current: null,\n    },\n};\n/* harmony default export */ var Redux_store = (initialState);\n\n// EXTERNAL MODULE: ./node_modules/immutability-helper-x/lib/index.js\nvar immutability_helper_x_lib = __webpack_require__(7);\n\n// CONCATENATED MODULE: ./src/Utils/helper.ts\n/**\n * @example uniqueElementsBy(\n  [\n    { id: 0, value: 'a' },\n    { id: 1, value: 'b' },\n    { id: 2, value: 'c' },\n    { id: 1, value: 'd' },\n    { id: 0, value: 'e' }\n  ],\n  (a, b) => a.id == b.id\n); // [ { id: 0, value: 'a' }, { id: 1, value: 'b' }, { id: 2, value: 'c' } ]\n *\n * @param {*} arr\n * @param {*} fn\n * @category Utils\n */\nvar uniqueElementsBy = function (arr, // eslint-disable-line\nfn) {\n    return arr.reduce(function (acc, v) {\n        if (!acc.some(function (x) { return fn(v, x); }))\n            acc.push(v);\n        return acc;\n    }, []);\n};\n/* harmony default export */ var helper = (uniqueElementsBy);\n\n// CONCATENATED MODULE: ./src/Redux/reducer/diffuse.ts\nvar diffuse_assign = (undefined && undefined.__assign) || function () {\n    diffuse_assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return diffuse_assign.apply(this, arguments);\n};\nvar diffuse_read = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar diffuse_spread = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(diffuse_read(arguments[i]));\n    return ar;\n};\n\n\n\n\n\nvar diffuseReducer = function (state, startNodes) {\n    var count = Math.round((Math.random() + 1) * 5);\n    var _a = index_esm[\"a\" /* Utils */].mock(count)\n        .expand(startNodes)\n        .value(), nodes = _a.nodes, edges = _a.edges;\n    var data = Custom_transform.data({\n        nodes: getNodeProperties(nodes),\n        edges: edges,\n    });\n    var mergeNodes = helper(diffuse_spread(data.nodes, state.data.nodes), function (a, b) {\n        return a.id === b.id;\n    });\n    var mergeEdges = helper(diffuse_spread(data.edges, state.data.edges), function (a, b) {\n        return a.source === b.source && a.target === b.target;\n    });\n    var layout = state.layout;\n    return Object(immutability_helper_x_lib[\"updateChain\"])(state)\n        .$set('data', {\n        nodes: mergeNodes,\n        edges: mergeEdges,\n    })\n        .$set('drawer.visible', false)\n        .$set('drawer.type', '')\n        .$set('layout', {\n        name: layout.name,\n        options: diffuse_assign(diffuse_assign({}, layout.options), { preset: {\n                name: layout.name,\n            } }),\n    })\n        .value();\n};\n/* harmony default export */ var diffuse = (diffuseReducer);\n\n// CONCATENATED MODULE: ./src/Redux/reducer/changeToolbar.ts\nvar changeToolbar_assign = (undefined && undefined.__assign) || function () {\n    changeToolbar_assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return changeToolbar_assign.apply(this, arguments);\n};\n\n\nvar changeToolbarReducer = function (state, direction) {\n    var storage = new Storage('graphin-studio');\n    storage.set('config', changeToolbar_assign(changeToolbar_assign({}, storage.get('config')), { toolbar: {\n            direction: direction,\n        } }));\n    return Object(immutability_helper_x_lib[\"updateChain\"])(state)\n        .$set('toolbar.direction', direction)\n        .value();\n};\n/* harmony default export */ var changeToolbar = (changeToolbarReducer);\n\n// CONCATENATED MODULE: ./src/Redux/reducer/deleteNodes.ts\n\nvar deleteNodes_deleteNodes = function (state, selectedNodes) {\n    var _a = state.data, nodes = _a.nodes, edges = _a.edges;\n    var selectedNodeIds = selectedNodes.map(function (node) { return node.id; });\n    var newNodes = nodes.filter(function (node) { return !selectedNodeIds.includes(node.id); });\n    var newEdges = edges.filter(function (edge) { return !selectedNodeIds.includes(edge.source) && !selectedNodeIds.includes(edge.target); });\n    return Object(immutability_helper_x_lib[\"updateChain\"])(state)\n        .$set('drawer', { visible: false, type: '' })\n        .$set('selectedNodes', [])\n        .$set('data', { nodes: newNodes, edges: newEdges })\n        .value();\n};\n/* harmony default export */ var reducer_deleteNodes = (deleteNodes_deleteNodes);\n\n// CONCATENATED MODULE: ./src/Redux/reducer.ts\nvar reducer_assign = (undefined && undefined.__assign) || function () {\n    reducer_assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return reducer_assign.apply(this, arguments);\n};\n\n\n\n\n// eslint-disable-next-line\nvar reducer = function (state, action) {\n    var type = action.type, payload = action.payload;\n    switch (type) {\n        case 'graph/drawer':\n            return Object(immutability_helper_x_lib[\"updateChain\"])(state)\n                .$set('drawer.visible', payload.visible)\n                .$set('drawer.type', payload.type)\n                .$set('drawer.width', payload.width || 'none')\n                .$set('drawer.title', payload.title)\n                .$set('drawer.closeMask', payload.closeMask)\n                .value();\n        case 'graph/modal':\n            return Object(immutability_helper_x_lib[\"updateChain\"])(state)\n                .$set('modal.visible', payload.visible)\n                .$set('modal.type', payload.type)\n                .$set('modal.title', payload.title)\n                .$set('modal.handleOk', payload.handleOk)\n                .value();\n        case 'graph/searchBar':\n            return Object(immutability_helper_x_lib[\"updateChain\"])(state)\n                .$set('searchBar.visible', payload.visible)\n                .value();\n        case 'graph/addNodes':\n            return Object(immutability_helper_x_lib[\"updateChain\"])(state)\n                .$set('data', payload)\n                .value();\n        case 'graph/changeData':\n            return Object(immutability_helper_x_lib[\"updateChain\"])(state)\n                .$set('data', payload)\n                .value();\n        case 'graph/changeLayout':\n            return Object(immutability_helper_x_lib[\"updateChain\"])(state)\n                .$set('layout', {\n                name: payload.name,\n                options: reducer_assign({ preset: state.layout.name }, payload.options),\n            })\n                .value();\n        case 'graph/node-click':\n            return Object(immutability_helper_x_lib[\"updateChain\"])(state)\n                .$set('selectedNodes', payload.selectedNodes)\n                .$set('drawer.visible', payload.drawer.visible)\n                .$set('drawer.type', payload.drawer.type)\n                .$set('drawer.width', payload.drawer.width)\n                .$set('drawer.title', payload.drawer.title)\n                .$set('drawer.closeMask', payload.drawer.closeMask)\n                .value();\n        case 'graph/canvas-click':\n            return Object(immutability_helper_x_lib[\"updateChain\"])(state)\n                .$set('drawer', payload.drawer)\n                .$set('modal', payload.modal)\n                .$set('searchBar', payload.searchBar)\n                .$set('selectedNodes', payload.selectedNodes)\n                .value();\n        case 'graph/diffuse':\n            return diffuse(state, payload.start);\n        case 'graph/changeToolbar':\n            return changeToolbar(state, payload.direction);\n        case 'graph/deleteNodes':\n            return reducer_deleteNodes(state, payload.selectedNodes);\n        case 'graph/graphRef':\n            return Object(immutability_helper_x_lib[\"updateChain\"])(state)\n                .$set('graphRef', payload)\n                .value();\n        default:\n            return state;\n    }\n};\n/* harmony default export */ var Redux_reducer = (reducer);\n\n// EXTERNAL MODULE: ../graphin-components/dist/index.esm.js\nvar dist_index_esm = __webpack_require__(25);\n\n// CONCATENATED MODULE: ./src/Core/LayoutSelector/Radio.tsx\n\n\nvar radioStyle = {\n    display: 'block',\n    height: '30px',\n    lineHeight: '30px',\n};\nvar LayoutSelector = function (props) {\n    var value = props.value, onChange = props.onChange, layouts = props.layouts;\n    var handleChange = function (_a) {\n        var target = _a.target;\n        var layout = layouts.find(function (item) {\n            return item.name === target.value;\n        });\n        if (onChange) {\n            onChange({\n                name: layout.name,\n                options: layout.options,\n            });\n        }\n    };\n    return (external_window_React_default.a.createElement(\"div\", { className: \"layout-selector\" },\n        external_window_React_default.a.createElement(external_window_antd_[\"Radio\"].Group, { value: value.name, onChange: handleChange }, layouts.map(function (item) {\n            var name = item.name, icon = item.icon, disabled = item.disabled, desc = item.desc;\n            return (external_window_React_default.a.createElement(external_window_antd_[\"Radio\"], { key: name, value: name, disabled: disabled, style: radioStyle },\n                external_window_React_default.a.createElement(external_window_antd_[\"Icon\"], { type: icon }),\n                \" \\u00A0\",\n                desc));\n        }))));\n};\n/* harmony default export */ var Radio = (LayoutSelector);\n\n// CONCATENATED MODULE: ./src/Core/LayoutSelector/index.tsx\n\n/* harmony default export */ var Core_LayoutSelector = (Radio);\n\n// CONCATENATED MODULE: ./src/Custom/renderToolbar.tsx\nvar renderToolbar_assign = (undefined && undefined.__assign) || function () {\n    renderToolbar_assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return renderToolbar_assign.apply(this, arguments);\n};\nvar renderToolbar_read = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar renderToolbar_spread = (undefined && undefined.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(renderToolbar_read(arguments[i]));\n    return ar;\n};\n\n\nvar renderToolbar = function (renderProps, state, dispatch) {\n    var toolbarCfg = renderProps.toolbarCfg;\n    var layout = state.layout;\n    var layouts = renderProps.apis.getInfo().layouts;\n    var RadioLayouts = layouts.map(function (items) {\n        return renderToolbar_assign(renderToolbar_assign({}, items), { options: {} });\n    });\n    var items = [\n        {\n            id: 'layout',\n            name: \"\\u5E03\\u5C40\\u65B9\\u6848\",\n            icon: 'layout',\n            disabled: false,\n            action: function () { },\n            style: {},\n            renderTooltip: function () {\n                return (external_window_React_default.a.createElement(Core_LayoutSelector, { layouts: RadioLayouts, value: layout, onChange: function (params) {\n                        dispatch({\n                            type: 'graph/changeLayout',\n                            payload: {\n                                name: params.name,\n                                options: params.options,\n                            },\n                        });\n                    } }));\n            },\n        },\n    ];\n    return renderToolbar_spread(items, toolbarCfg);\n};\n/* harmony default export */ var Custom_renderToolbar = (renderToolbar);\n\n// EXTERNAL MODULE: ./node_modules/copy-to-clipboard/index.js\nvar copy_to_clipboard = __webpack_require__(38);\nvar copy_to_clipboard_default = /*#__PURE__*/__webpack_require__.n(copy_to_clipboard);\n\n// CONCATENATED MODULE: ./src/Custom/renderContextMenu.ts\n\n\nvar renderContextMenu = function (option) {\n    var selectedNodes = option.selectedNodes, dispatch = option.dispatch;\n    var openNotification = function (type, message, description) {\n        external_window_antd_[\"notification\"][type]({\n            message: message,\n            description: description,\n        });\n    };\n    var copyId = function () {\n        if (selectedNodes.length === 0) {\n            openNotification('info', '复制ID', '复制ID需要至少选中一个节点');\n            return;\n        }\n        var nodeIds = selectedNodes.map(function (node) { return node.id; }).join(',');\n        if (copy_to_clipboard_default()(nodeIds)) {\n            openNotification('success', '复制ID', '复制ID成功');\n        }\n        else {\n            openNotification('success', '复制ID', '复制ID失败');\n        }\n    };\n    var deleteNodes = function () {\n        if (selectedNodes.length === 0) {\n            openNotification('info', '删除实体', '删除实体需要至少选中一个节点');\n            return;\n        }\n        var nodeName = selectedNodes[0].id;\n        var content = selectedNodes.length === 1\n            ? \"\\u786E\\u5B9A\\u5220\\u9664\" + nodeName + \"\\u5B9E\\u4F53\\uFF1F\"\n            : \"\\u786E\\u5B9A\\u5220\\u9664\" + nodeName + \"\\u7B49\" + selectedNodes.length + \"\\u4E2A\\u5B9E\\u4F53\\uFF1F\";\n        external_window_antd_[\"Modal\"].confirm({\n            title: '确认',\n            content: content,\n            okText: '确定',\n            cancelText: '取消',\n            onOk: function () {\n                dispatch({\n                    type: 'graph/deleteNodes',\n                    payload: {\n                        selectedNodes: selectedNodes,\n                    },\n                });\n            },\n        });\n    };\n    var menu = [\n        {\n            key: 'copyId',\n            title: '复制ID',\n            iconType: 'iconfuzhiID',\n            visible: true,\n            onClick: copyId,\n        },\n        // {\n        //     key: 'dividing-line',\n        //     text: null,\n        //     onClick: () => {},\n        // },\n        {\n            key: 'deleteNode',\n            title: '删除实体',\n            iconType: 'iconfuzhiID',\n            visible: true,\n            onClick: deleteNodes,\n        },\n        {\n            key: 'invertSelect',\n            title: '反选实体',\n            iconType: 'iconfuzhiID',\n            visible: false,\n            onClick: function () { },\n        },\n    ];\n    return menu;\n};\n/* harmony default export */ var Custom_renderContextMenu = (renderContextMenu);\n\n// CONCATENATED MODULE: ./src/Extend/layout.ts\nvar layout_assign = (undefined && undefined.__assign) || function () {\n    layout_assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return layout_assign.apply(this, arguments);\n};\nvar layout_layout = function (graphin, props) {\n    return [\n        {\n            name: 'pomelo',\n            desc: '自定义随机布局',\n            icon: 'home',\n            layout: function () {\n                var nodes = props.data.nodes.map(function (node) {\n                    return layout_assign(layout_assign({}, node), { x: Math.round(Math.random() * 800), y: Math.round(Math.random() * 500) });\n                });\n                return {\n                    data: {\n                        nodes: nodes,\n                        edges: props.data.edges,\n                    },\n                };\n            },\n        },\n    ];\n};\n/* harmony default export */ var Extend_layout = (layout_layout);\n\n// CONCATENATED MODULE: ./src/Extend/RectNodeShape.ts\nvar RectNodeShape_assign = (undefined && undefined.__assign) || function () {\n    RectNodeShape_assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return RectNodeShape_assign.apply(this, arguments);\n};\nvar defaultStyles = {\n    /** container 容齐 */\n    containerWidth: 40,\n    containerStroke: '#0693E3',\n    containerFill: '#fff',\n    /** icon 图标 */\n    iconSize: 10,\n    iconFill: '#0693E3',\n    /** badge 徽标 */\n    badgeFill: 'red',\n    badgeFontColor: '#fff',\n    badgeSize: 10,\n    /** text 文本 */\n    fontColor: '#3b3b3b',\n    fontSize: 12,\n    /** state */\n    dark: '#eee',\n};\n// eslint-disable-next-line\nvar renderRectNode = function (node) {\n    var style = RectNodeShape_assign(RectNodeShape_assign({}, defaultStyles), node.style);\n    var badgeNumber = node.data.properties.length;\n    return {\n        shape: 'RectNode',\n        shapeComponents: [\n            {\n                shape: 'rect',\n                attrs: {\n                    id: 'rect-container',\n                    x: 0,\n                    y: 0,\n                    width: style.containerWidth,\n                    height: style.containerWidth,\n                    fill: style.containerFill,\n                    stroke: style.containerStroke,\n                    cursor: 'pointer',\n                    lineWidth: 2,\n                    radius: 2,\n                },\n            },\n            {\n                shape: 'circle',\n                attrs: {\n                    id: 'badge',\n                    x: style.containerWidth,\n                    y: 0,\n                    r: style.badgeSize,\n                    fill: style.badgeFill,\n                    cursor: 'pointer',\n                    lineWidth: 1,\n                },\n            },\n            {\n                shape: 'text',\n                attrs: {\n                    id: 'badge-text',\n                    x: style.containerWidth,\n                    y: -4,\n                    text: badgeNumber,\n                    fontSize: 10,\n                    cursor: 'pointer',\n                    fill: '#fff',\n                    textAlign: 'center',\n                    textBaseline: 'top',\n                },\n            },\n            {\n                shape: 'Marker',\n                attrs: {\n                    id: 'node-icon',\n                    symbol: node.data.type,\n                    x: style.containerWidth / 2,\n                    y: style.containerWidth / 2,\n                    r: style.iconSize,\n                    fill: style.iconFill,\n                },\n            },\n            {\n                shape: 'text',\n                attrs: {\n                    id: 'text-desc',\n                    text: node.data.label,\n                    x: 0,\n                    y: style.containerWidth * 1.3,\n                    cursor: 'pointer',\n                    fontSize: style.fontSize,\n                    fill: style.fontColor,\n                    fontWeight: 'lighter',\n                    fontFamily: 'Courier New',\n                    textAlign: 'center',\n                    textBaseline: 'top',\n                },\n            },\n        ],\n        state: {\n            selected: {\n                'rect-container': {\n                    stroke: style.containerStroke,\n                    fill: style.containerStroke,\n                    animate: {\n                        attrs: {\n                            lineWidth: 6,\n                            shadowOffsetX: 0,\n                            shadowOffsetY: 0,\n                            shadowBlur: 2,\n                            shadowColor: '#fff',\n                            repeat: false,\n                        },\n                        duration: 200,\n                        easing: 'easeCubic',\n                        callback: null,\n                        delay: 0,\n                    },\n                },\n                'node-icon': {\n                    fill: '#fff',\n                },\n                badge: {\n                    lineWidth: 6,\n                },\n            },\n        },\n        'highlight.dark': {\n            'rect-container': {\n                fill: style.dark,\n                stroke: style.dark,\n                lineWidth: 0,\n            },\n            'node-icon': {\n                fill: style.dark,\n            },\n            'text-desc': {\n                fill: '#eee',\n            },\n            badge: {\n                fill: style.dark,\n            },\n            'badge-text': {\n                fill: style.dark,\n            },\n        },\n    };\n};\n/* harmony default export */ var RectNodeShape = (renderRectNode);\n\n// CONCATENATED MODULE: ./src/Extend/marker.ts\nvar marker = function () {\n    return [\n        {\n            name: 'uid',\n            path: \"<path d=\\\"M417.72032 176.800427l-2.020693 66.020693L149.592747 242.82112l0 50.52416 269.47584 0 0 87.579307L196.75136 380.924587l0 47.834453 225.682773-2.024107 226.358613-2.020693-4.041387 16.16896c-10.10688 39.07584-53.224107 143.496533-61.30688 146.86208-4.717227 1.348267-37.727573-6.06208-74.779307-16.8448-112.50688-34.3552-168.424107-44.46208-244.548267-44.46208-77.47584 0.672427-128 14.824107-176.50688 49.179307-94.313813 67.36896-101.72416 199.41376-14.144853 272.8448 92.965547 78.148267 245.220693 85.5552 383.32416 18.189653 49.179307-23.579307 137.43104-87.579307 167.072427-120.589653l12.127573-14.15168 38.4 18.865493c38.4 19.534507 275.53792 129.348267 315.958613 146.189653l21.5552 9.43104 0-173.13792-58.610347-15.49312c-53.220693-14.15168-189.30688-56.589653-233.096533-73.437867l-16.8448-6.734507 22.234453-45.810347c23.579307-47.1552 70.73792-180.548267 70.73792-200.086187 0-9.43104-13.47584-10.779307-117.896533-10.779307l-117.89312 0L560.534187 293.34528l282.95168 0L843.485867 248.8832c0-2.020693-64-3.36896-141.47584-2.69312l-141.472427 0.672427L560.5376 111.45216l-140.8 0L417.72032 176.800427zM391.44448 616.0384c35.034453 12.130987 81.517227 30.993067 103.07584 42.4448l39.072427 20.886187-21.558613 26.944853c-12.12416 14.820693-39.744853 40.420693-62.651733 57.265493-76.8 57.258667-148.210347 79.49312-239.83104 74.103467-95.66208-5.389653-146.86208-44.46208-152.927573-117.220693-4.041387-45.13792 6.065493-70.73792 37.055147-94.317227 39.072427-29.6448 70.734507-36.375893 156.965547-34.3552C316.668587 593.810773 337.55136 597.85216 391.44448 616.0384L391.44448 616.0384z\\\" p-id=\\\"1822\\\"></path>\",\n        },\n        {\n            name: 'logo',\n            path: \"<path d=\\\"M599.965166 486.145766l222.109131-124.99509a85.542841 85.542841 0 0 0 25.204525 15.338814l0.158896 269.650979a86.044248 86.044248 0 0 0-54.734565 80.253352c0 6.31349 0.677959 12.464552 1.963255 18.396689l-222.398676 126.386318a85.069683 85.069683 0 0 0-55.507862-20.518842 85.090869 85.090869 0 0 0-56.754317 21.602869l-229.637297-133.15531a87.110621 87.110621 0 0 0 0.928662-12.711724c0-39.932469-27.083034-73.509076-63.805793-83.205297l-0.388414-263.584662c36.916966-9.55851 64.194207-43.230455 64.194207-83.304165 0-7.436359-0.939255-14.653793-2.704772-21.532249l219.856331-126.199172c15.338814 14.554924 36.027145 23.481379 58.791724 23.481379 47.294676 0 85.634648-38.516524 85.634648-86.026593S554.534877 0 507.240201 0C459.945525 0 421.605553 38.512993 421.605553 86.023062c0 5.162372 0.451972 10.222345 1.320606 15.134014L199.503484 229.404248a85.037903 85.037903 0 0 0-53.837683-19.127614C98.367594 210.273103 60.027622 248.789628 60.027622 296.299697a86.05131 86.05131 0 0 0 53.240937 79.656606l0.399007 270.618483A86.05131 86.05131 0 0 0 60.027622 726.393821c0 47.510069 38.339972 86.023062 85.634648 86.023062 23.615559 0 44.999503-9.604414 60.490152-25.133904l226.823062 131.523973a86.757517 86.757517 0 0 0-1.850262 17.874096c0 47.510069 38.339972 86.023062 85.634648 86.023062 47.294676 0 85.634648-38.512993 85.634648-86.023062 0-6.694841-0.762703-13.2096-2.199834-19.463062l221.794869-126.047338a85.083807 85.083807 0 0 0 56.348248 21.246235c47.294676 0 85.634648-38.512993 85.634648-86.023062 0-39.533462-26.546317-72.838179-62.711172-82.90869l-0.151835-264.237903C937.348449 369.233214 963.972449 335.886124 963.972449 296.299697c0-47.510069-38.339972-86.023062-85.634648-86.023063-47.294676 0-85.634648 38.512993-85.634648 86.023063 0 6.3488 0.685021 12.538703 1.984441 18.499089l-223.203752 125.60949a85.055559 85.055559 0 0 0-54.723972-19.855007c-47.294676 0-85.634648 38.512993-85.634648 86.023062 0 47.510069 38.339972 86.023062 85.634648 86.023062 47.294676 0 85.634648-38.512993 85.634648-86.023062 0-7.040883-0.840386-13.880497-2.429352-20.430565z\\\" p-id=\\\"741\\\" fill=\\\"#d81e06\\\"></path>\",\n        },\n        {\n            name: 'graphin',\n            path: \"<path d=\\\"M592.48246957 555.9190612l245.43974845 68.66999694a85.542841 85.542841 0 0 0 6.97611115 28.66846994l-190.55967937 190.78439224a86.044248 86.044248 0 0 0-95.45087149 18.04450734c-4.46431159 4.46431159-8.33437984 9.29315865-11.62019262 14.39665447l-246.62823443-67.89098942a85.069683 85.069683 0 0 0-24.74097331-53.75899795 85.090869 85.090869 0 0 0-55.40689757-24.85582725l-68.22306727-256.53311258a87.110621 87.110621 0 0 0 9.64520943-8.33188304c28.23651962-28.23651962 32.82816912-71.12936311 13.71752083-103.95253865l186.10785175-186.65715209c32.86312424 19.34534976 75.96070697 14.8236112 104.29709905-13.51278089 5.25829988-5.25829988 9.69764282-11.02594998 13.31303666-17.1381619l244.69819284 66.22561223c0.55429393 21.13806485 8.87119621 42.07888086 24.9681844 58.17586904 33.44238611 33.44238611 87.78813561 33.317545 121.38282757-0.27714696S904.11537193 180.038028 870.67298582 146.59564188C837.2305997 113.15325577 782.887347 113.27560009 749.29265503 146.87029206c-3.65034825 3.65034825-6.908697 7.54788194-9.76755446 11.63517338L490.85696701 91.20622187a85.037903 85.037903 0 0 0-24.54372516-51.5942563C432.87085573 6.16458586 378.52510553 6.28942769 344.93041356 39.88411965a86.05131 86.05131 0 0 0-18.67869868 93.97275386l-191.07402389 191.638305A86.05131 86.05131 0 0 0 40.80794193 344.00659128c-33.59469196 33.59469196-33.71703629 87.93794467-0.27465017 121.38033078 16.69872191 16.69872191 38.61079999 25.02810745 60.54535063 25.00064272l67.38663207 253.38961847a86.757517 86.757517 0 0 0-13.94722729 11.33056168c-33.59469196 33.59469196-33.71703629 87.93794467-0.27465018 121.38033079 33.44238611 33.44238611 87.78563882 33.32004179 121.38033079-0.27465018 4.73396747-4.73396747 8.80128527-9.8799102 12.20694558-15.31798066l245.96158335 67.70372845a85.083807 85.083807 0 0 0 24.82087143 54.86758511c33.44238611 33.44238611 87.78563882 33.32004179 121.38033078-0.27465017 27.95437906-27.95437906 32.73328953-70.27545107 14.28180194-102.96879189l186.7370495-186.95177662C913.71813516 711.81541015 956.12409958 707.06146762 984.11593055 679.06963664c33.59469196-33.59469196 33.71703629-87.93794467 0.27465088-121.38033149-33.44238611-33.44238611-87.78563882-33.32004179-121.38033149 0.27465088-4.48927953 4.48927953-8.38181892 9.35058491-11.67761959 14.48404297l-246.64820878-69.00956447a85.055559 85.055559 0 0 0-24.65608161-52.73530178c-33.44238611-33.44238611-87.78563882-33.32004179-121.38033078 0.27465017-33.59469196 33.59469196-33.71703629 87.93794467-0.27465018 121.38033078 33.44238611 33.44238611 87.78563882 33.32004179 121.38033079-0.27465017 4.97865611-4.97865611 9.22075092-10.40923619 12.72877978-16.16440233z\\\"></path>\",\n        },\n        {\n            name: 'phone',\n            path: \"<path d=\\\"M736 0 288 0c-52.8 0-96 43.2-96 96l0 832c0 52.8 43.2 96 96 96l448 0c52.8 0 96-43.2 96-96L832 96C832 43.2 788.8 0 736 0zM384 48l256 0 0 32L384 80 384 48zM512 960c-35.346 0-64-28.654-64-64s28.654-64 64-64 64 28.654 64 64S547.346 960 512 960zM768 768 256 768 256 128l512 0L768 768z\\\" p-id=\\\"1421\\\"></path>\",\n        },\n        {\n            name: 'company',\n            path: \"<path d=\\\"M831.808 869.184V171.168l-97.856-65.312-356.704 159.2v123.2l-197.12 68.64v412.288H160v48.992h64.352V485.472l261.472-85.696v518.4h181.024v-53.056h-40.224V391.584l-94.912-57.152-106.24 36.992V293.6l257.472-114.304v738.848H864v-48.992h-32.192v0.032zM256.544 595.68l189.056-61.216v-81.632l-189.056 65.312v77.536z m0 106.144l189.056-40.832v-81.632l-189.056 48.992v73.472z m0 110.208l189.056-24.512v-81.632l-189.056 28.576v77.568z m0 106.112l189.056-4.096v-81.632l-189.056 8.192v77.536z\\\" p-id=\\\"818\\\"></path>\",\n        },\n    ];\n};\n/* harmony default export */ var Extend_marker = (marker);\n\n// CONCATENATED MODULE: ./src/Extend/index.ts\n\n\n\nvar extend = {\n    layout: Extend_layout,\n    nodeShape: function () {\n        return [\n            {\n                name: 'RectNode',\n                render: RectNodeShape,\n            },\n        ];\n    },\n    marker: Extend_marker,\n};\n/* harmony default export */ var Extend = (extend);\n\n// CONCATENATED MODULE: ./src/Events/node-click.ts\nvar handleNodeClick = function (props) {\n    var dispatch = props.dispatch, e = props.e;\n    // 单选\n    var node = e.item.get('model').data; // TODO 多选\n    // 多选\n    dispatch({\n        type: 'graph/node-click',\n        payload: {\n            drawer: {\n                visible: true,\n                type: 'nodeAttr',\n                title: '实体属性面板',\n                width: 350,\n                closeMask: true,\n            },\n            selectedNodes: [node],\n        },\n    });\n};\n/* harmony default export */ var node_click = (handleNodeClick);\n\n// CONCATENATED MODULE: ./src/Events/canvas-click.ts\nvar handleCanvasClick = function (props) {\n    var drawer = props.drawer, modal = props.modal, selectedNodes = props.selectedNodes, searchBar = props.searchBar, dispatch = props.dispatch;\n    if (drawer.visible || modal.visible || selectedNodes.length !== 0 || searchBar.visible) {\n        dispatch({\n            type: 'graph/canvas-click',\n            payload: {\n                drawer: {\n                    visible: false,\n                    type: '',\n                    width: null,\n                },\n                modal: {\n                    visible: false,\n                    type: '',\n                },\n                searchBar: {\n                    visible: false,\n                },\n                selectedNodes: [],\n            },\n        });\n    }\n};\n/* harmony default export */ var canvas_click = (handleCanvasClick);\n\n// CONCATENATED MODULE: ./src/Events/useGraphEvents.ts\nvar useGraphEvents_assign = (undefined && undefined.__assign) || function () {\n    useGraphEvents_assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return useGraphEvents_assign.apply(this, arguments);\n};\n\n\n\n// eslint-disable-next-line\nvar useGraphEvents = function (state, graphRef, dispatch) {\n    Object(external_window_React_[\"useLayoutEffect\"])(function () {\n        var graph = graphRef.current.graph;\n        var events = {\n            'node:click': function (e) {\n                node_click(useGraphEvents_assign(useGraphEvents_assign({}, state), { e: e, dispatch: dispatch }));\n                console.log(e.item);\n            },\n            'canvas:click': function (e) {\n                canvas_click(useGraphEvents_assign(useGraphEvents_assign({}, state), { e: e, dispatch: dispatch }));\n            },\n        };\n        Object.keys(events).forEach(function (name) {\n            graph.on(name, events[name]);\n        });\n        return function () {\n            Object.keys(events).forEach(function (name) {\n                graph.off(name, events[name]);\n            });\n        };\n    }, [state]);\n};\n/* harmony default export */ var Events_useGraphEvents = (useGraphEvents);\n\n// EXTERNAL MODULE: ./src/Core/NodeEdgeCount/index.less\nvar NodeEdgeCount = __webpack_require__(125);\n\n// CONCATENATED MODULE: ./src/Core/NodeEdgeCount/index.tsx\n\n\nvar NodeEdgeCount_NodeEdgeCount = function (props) {\n    var _a = props.apis, apis = _a === void 0 ? {} : _a;\n    var _b = apis.getInfo().count, edges = _b.edges, nodes = _b.nodes;\n    return (external_window_React_default.a.createElement(\"div\", null,\n        external_window_React_default.a.createElement(\"div\", { className: \"graphin-studio-count\" },\n            external_window_React_default.a.createElement(\"span\", null,\n                \"\\u8282\\u70B9\\u6570\\u91CF (\",\n                nodes,\n                \")\"),\n            external_window_React_default.a.createElement(\"span\", { className: \"count-line\" }, \"|\"),\n            external_window_React_default.a.createElement(\"span\", null,\n                \"\\u8FB9\\u6570\\u91CF (\",\n                edges,\n                \")\"))));\n};\n/* harmony default export */ var Core_NodeEdgeCount = (NodeEdgeCount_NodeEdgeCount);\n\n// CONCATENATED MODULE: ./src/Graph.tsx\nvar Graph_assign = (undefined && undefined.__assign) || function () {\n    Graph_assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return Graph_assign.apply(this, arguments);\n};\n\n\n\n/** custom */\n\n\n/** custom  extend */\n\n\n/** components */\n\nvar Graphene = function (props) {\n    var graphRef = Object(external_window_React_[\"useRef\"])(null); // eslint-disable-line\n    var dispatch = props.dispatch, data = props.data, layout = props.layout, toolbar = props.toolbar, store = props.store;\n    Events_useGraphEvents(store, graphRef, dispatch);\n    external_window_React_default.a.useEffect(function () {\n        dispatch({\n            type: 'graph/graphRef',\n            payload: graphRef,\n        });\n        // 将graph实例传给全局\n    }, []);\n    // eslint-disable-next-line no-console\n    return (external_window_React_default.a.createElement(index_esm[\"b\" /* default */], { data: data, layout: layout, ref: graphRef, extend: Extend },\n        external_window_React_default.a.createElement(dist_index_esm[\"b\" /* Toolbar */], { direction: toolbar.direction, render: function (renderProps) {\n                return Custom_renderToolbar(renderProps, store, dispatch);\n            } }),\n        external_window_React_default.a.createElement(dist_index_esm[\"a\" /* ContextMenu */], { options: Custom_renderContextMenu(Graph_assign(Graph_assign({}, store), { dispatch: dispatch })) }),\n        external_window_React_default.a.createElement(Core_NodeEdgeCount, null)));\n};\n/* harmony default export */ var Graph = (Graphene);\n\n// CONCATENATED MODULE: ./src/GraphinStudio.tsx\nvar GraphinStudio_assign = (undefined && undefined.__assign) || function () {\n    GraphinStudio_assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return GraphinStudio_assign.apply(this, arguments);\n};\nvar GraphinStudio_read = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\n\n\n/** components */\n\n\n\n\n// import LayoutSelector from './Core/LayoutSelector';\n\n\n\nvar OnlyGraphinReady = function (props) {\n    var children = props.children, graphRef = props.graphRef;\n    if (graphRef && graphRef.current && graphRef.current.graph) {\n        var _a = graphRef.current, graph = _a.graph, apis = _a.apis;\n        var graphProps_1 = {\n            graph: graph,\n            apis: apis,\n        };\n        return (external_window_React_default.a.createElement(\"div\", null, external_window_React_default.a.Children.map(children, function (child) {\n            // 如果传入的是 DOM 元素或不是合法的 Element，不传入 props\n            if (!external_window_React_default.a.isValidElement(child) || typeof child.type === 'string') {\n                return child;\n            }\n            return external_window_React_default.a.cloneElement(child, GraphinStudio_assign({}, graphProps_1));\n        })));\n    }\n    return null;\n};\nvar GraphinStudio_Graphene = function () {\n    // const graphRef = useRef(null) as any; // eslint-disable-line\n    var _a = GraphinStudio_read(Object(external_window_React_[\"useReducer\"])(Redux_reducer, Redux_store), 2), state = _a[0], dispatch = _a[1];\n    var _b = state, data = _b.data, layout = _b.layout, toolbar = _b.toolbar, graphRef = _b.graphRef;\n    return (external_window_React_default.a.createElement(Components_Layout_Layout, null,\n        external_window_React_default.a.createElement(Layout_Header, null, \"This is Header\"),\n        external_window_React_default.a.createElement(Layout_Side, null,\n            external_window_React_default.a.createElement(OnlyGraphinReady, { graphRef: graphRef },\n                external_window_React_default.a.createElement(Core_OperatorBar, { dispatch: dispatch, state: state, graphRef: graphRef }))),\n        external_window_React_default.a.createElement(Layout_Main, null,\n            external_window_React_default.a.createElement(Graph, { data: data, layout: layout, toolbar: toolbar, dispatch: dispatch, store: state }),\n            external_window_React_default.a.createElement(OnlyGraphinReady, { graphRef: graphRef },\n                external_window_React_default.a.createElement(Core_GraphDrawer, { dispatch: dispatch, state: state }),\n                external_window_React_default.a.createElement(Core_GraphModal, { dispatch: dispatch, state: state }),\n                external_window_React_default.a.createElement(src_Core_SearchBar, { dispatch: dispatch, state: state }))),\n        external_window_React_default.a.createElement(Layout_Footer, null, \"This is Footer\")));\n};\n/* harmony default export */ var GraphinStudio = (GraphinStudio_Graphene);\n\n// CONCATENATED MODULE: ./src/Home/index.tsx\n\n\n\n\n\n\nvar propTypes = {};\nvar Home_Layout = function () {\n    return (external_window_React_default.a.createElement(\"div\", { className: \"container\" },\n        external_window_React_default.a.createElement(react_router_dom[\"a\" /* HashRouter */], null,\n            external_window_React_default.a.createElement(react_router[\"a\" /* Route */], { exact: true, path: \"/\", component: Home_Home }),\n            external_window_React_default.a.createElement(react_router[\"a\" /* Route */], { path: \"/graphin-studio\", component: GraphinStudio }))));\n};\nHome_Layout.propTypes = propTypes;\n/* harmony default export */ var src_Home_0 = (Object(root[\"hot\"])(Home_Layout));\n\n// CONCATENATED MODULE: ./src/index.tsx\n\n\n\nexternal_window_ReactDOM_default.a.render(external_window_React_default.a.createElement(src_Home_0, null), document.getElementById('root'));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL0hvbWUvSG9tZS50c3g/ZmEzOCIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9MYXlvdXQvTGF5b3V0LnRzeD8xZGE2Iiwid2VicGFjazovLy8uL3NyYy9Db21wb25lbnRzL0xheW91dC9TaWRlLnRzeD85NzIwIiwid2VicGFjazovLy8uL3NyYy9Db21wb25lbnRzL0xheW91dC9IZWFkZXIudHN4PzgyYTIiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvTGF5b3V0L01haW4udHN4P2U0Y2YiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvTGF5b3V0L0Zvb3Rlci50c3g/NjNiZCIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9MYXlvdXQvaW5kZXgudHN4PzI4OWEiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvVG9vbEJhci9Ub29sQmFyLnRzeD82OGFiIiwid2VicGFjazovLy8uL3NyYy9Db21wb25lbnRzL1Rvb2xCYXIvaW5kZXgudHM/NjMyZCIsIndlYnBhY2s6Ly8vLi9zcmMvQ29yZS9PcGVyYXRvckJhci9kaWZmdXNlLm9wZXJhdG9yLnRzeD8zMTdjIiwid2VicGFjazovLy8uL3NyYy9Db3JlL09wZXJhdG9yQmFyL2luZGV4LnRzeD9iMzA3Iiwid2VicGFjazovLy8uL3NyYy9Db21wb25lbnRzL0VuaGFuY2VkQ2hlY2tib3gvRW5oYW5jZWRDaGVja2JveC50c3g/MzdkZSIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9FbmhhbmNlZENoZWNrYm94L2luZGV4LnRzPzc0NzciLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvRm9sZGluZ1BhbmVsL0ZvbGRpbmdQYW5lbC50c3g/Y2E5OSIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9Gb2xkaW5nUGFuZWwvaW5kZXgudHM/ZjFlMCIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9JdGVtL0l0ZW0udHN4Pzk0NDMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvUHJvcGVydHkvUHJvcGVydHkudHN4P2I0NWIiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvUHJvcGVydHkvaW5kZXgudHM/ZDU3YSIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9TZWFyY2hCYXIvUGFuZWwudHN4PzNhNDciLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvU2VhcmNoQmFyL1NlYXJjaEJhci50c3g/MDE3NyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9TZWFyY2hCYXIvaW5kZXgudHM/NDEzYiIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9UcmVlU2VsZWN0b3IvZnVuY3Rpb25zL2dldENoZWNrZWRLZXlzLnRzP2RmZTkiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvVHJlZVNlbGVjdG9yL2Z1bmN0aW9ucy9pbmRleC50cz9kNGE1Iiwid2VicGFjazovLy8uL3NyYy9Db21wb25lbnRzL1RyZWVTZWxlY3Rvci9UcmVlU2VsZWN0b3IudHN4P2VlNjQiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvVHJlZVNlbGVjdG9yL2luZGV4LnRzPzgyYmYiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvaW5kZXgudHM/YTlkYiIsIndlYnBhY2s6Ly8vLi9zcmMvQ29yZS9TZWFyY2hCYXIvdHJhbnNmb3JtU2VhcmNoVmFsdWUudHN4P2I5ZTUiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvcmUvU2VhcmNoQmFyL2luZGV4LnRzeD9lYjFhIiwid2VicGFjazovLy8uL3NyYy9Db3JlL1NldHRpbmcvVGhlbWUudHN4PzgzNzUiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvcmUvU3R5bGluZy9Db2xvclBpY2tlci50c3g/N2NhYSIsIndlYnBhY2s6Ly8vLi9zcmMvU2VydmljZS9TdG9yYWdlL0xvY2FsU3RvcmFnZS50cz80NWIyIiwid2VicGFjazovLy8uL3NyYy9TZXJ2aWNlL1N0b3JhZ2UvaW5kZXgudHM/NmY0ZiIsIndlYnBhY2s6Ly8vLi9zcmMvQ29yZS9TdHlsaW5nL05vZGVDb2xvclBpY2tlci50c3g/MGY5NyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29yZS9TZXR0aW5nL1Rvb2xiYXJDb25maWcudHN4PzNjMmYiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvcmUvU2V0dGluZy9pbmRleC50c3g/ZTI4MyIsIndlYnBhY2s6Ly8vLi9zcmMvU2VydmljZS9Nb2NrL25vZGVUeXBlcy50cz9jODM2Iiwid2VicGFjazovLy8uL3NyYy9TZXJ2aWNlL01vY2svbm9kZVByb3BlcnRpZXNTY2hlbWEudHM/YzY0MSIsIndlYnBhY2s6Ly8vLi9zcmMvU2VydmljZS9nZXROb2RlUHJvcGVydGllcy50cz80NzBlIiwid2VicGFjazovLy8uL3NyYy9TZXJ2aWNlL2dldE5vZGVzQnlJZC50cz80ODJkIiwid2VicGFjazovLy8uL3NyYy9DdXN0b20vY29uZmlnLnRzP2JhNWEiLCJ3ZWJwYWNrOi8vLy4vc3JjL0N1c3RvbS90cmFuc2Zvcm0udHM/MTg2ZiIsIndlYnBhY2s6Ly8vLi9zcmMvU2VydmljZS9pbmRleC50cz8wMDNhIiwid2VicGFjazovLy8uL3NyYy9Db3JlL0FkZE5vZGVzL05vcm1hbC50c3g/OWNhOSIsIndlYnBhY2s6Ly8vLi9zcmMvQ29yZS9BZGROb2Rlcy9SYW5kb20udHN4P2ZmNDEiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvcmUvQWRkTm9kZXMvaW5kZXgudHN4P2I0MmQiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvcmUvTm9kZUF0dHIvaW5kZXgudHN4PzI5YmMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvcmUvRWRnZUF0dHIvaW5kZXgudHN4P2ZkYmQiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvcmUvRGlmZnVzZVBhbmVsL05vZGVUeXBlLnRzeD83YzRiIiwid2VicGFjazovLy8uL3NyYy9TZXJ2aWNlL01vY2svZWRnZVR5cGVzLnRzP2IwMGEiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvcmUvRGlmZnVzZVBhbmVsL0VkZ2VUeXBlLnRzeD9hOGY5Iiwid2VicGFjazovLy8uL3NyYy9Db3JlL0RpZmZ1c2VQYW5lbC9pbmRleC50c3g/NTAyYyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29yZS9HcmFwaERyYXdlci9pbmRleC50c3g/NTFmNyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29yZS9DbGVhci9pbmRleC50c3g/YTE2YiIsIndlYnBhY2s6Ly8vLi9zcmMvQ29yZS9TYXZlL2luZGV4LnRzeD84YzJmIiwid2VicGFjazovLy8uL3NyYy9Db3JlL0dyYXBoTW9kYWwvaW5kZXgudHN4PzI5ZmMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1JlZHV4L3N0b3JlLnRzP2IyNDgiLCJ3ZWJwYWNrOi8vLy4vc3JjL1V0aWxzL2hlbHBlci50cz8zYjQxIiwid2VicGFjazovLy8uL3NyYy9SZWR1eC9yZWR1Y2VyL2RpZmZ1c2UudHM/MzAyZiIsIndlYnBhY2s6Ly8vLi9zcmMvUmVkdXgvcmVkdWNlci9jaGFuZ2VUb29sYmFyLnRzP2E3N2EiLCJ3ZWJwYWNrOi8vLy4vc3JjL1JlZHV4L3JlZHVjZXIvZGVsZXRlTm9kZXMudHM/OTZhZiIsIndlYnBhY2s6Ly8vLi9zcmMvUmVkdXgvcmVkdWNlci50cz8xNzA0Iiwid2VicGFjazovLy8uL3NyYy9Db3JlL0xheW91dFNlbGVjdG9yL1JhZGlvLnRzeD8xNmJhIiwid2VicGFjazovLy8uL3NyYy9Db3JlL0xheW91dFNlbGVjdG9yL2luZGV4LnRzeD9lNmU3Iiwid2VicGFjazovLy8uL3NyYy9DdXN0b20vcmVuZGVyVG9vbGJhci50c3g/YzAxOCIsIndlYnBhY2s6Ly8vLi9zcmMvQ3VzdG9tL3JlbmRlckNvbnRleHRNZW51LnRzP2FkNDUiLCJ3ZWJwYWNrOi8vLy4vc3JjL0V4dGVuZC9sYXlvdXQudHM/M2U2ZSIsIndlYnBhY2s6Ly8vLi9zcmMvRXh0ZW5kL1JlY3ROb2RlU2hhcGUudHM/OWIyYSIsIndlYnBhY2s6Ly8vLi9zcmMvRXh0ZW5kL21hcmtlci50cz83YWNjIiwid2VicGFjazovLy8uL3NyYy9FeHRlbmQvaW5kZXgudHM/MTE4ZCIsIndlYnBhY2s6Ly8vLi9zcmMvRXZlbnRzL25vZGUtY2xpY2sudHM/NDgzYyIsIndlYnBhY2s6Ly8vLi9zcmMvRXZlbnRzL2NhbnZhcy1jbGljay50cz9hNWZkIiwid2VicGFjazovLy8uL3NyYy9FdmVudHMvdXNlR3JhcGhFdmVudHMudHM/YzcxNyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29yZS9Ob2RlRWRnZUNvdW50L2luZGV4LnRzeD8wZjA1Iiwid2VicGFjazovLy8uL3NyYy9HcmFwaC50c3g/NDRhYSIsIndlYnBhY2s6Ly8vLi9zcmMvR3JhcGhpblN0dWRpby50c3g/Y2ZhZCIsIndlYnBhY2s6Ly8vLi9zcmMvSG9tZS9pbmRleC50c3g/NTVjZCIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHN4P2Q5ODYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IExpbmsgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcbi8vIGltcG9ydCBsb2dvIGZyb20gJy4uL2xvZ28uc3ZnJztcblxuY29uc3QgSG9tZSA9ICgpID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkXCI+XG4gICAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgICAgICB3aWR0aD1cIjEwMCVcIlxuICAgICAgICAgICAgICAgICAgICBzcmM9XCJodHRwczovL2d3LmFsaXBheW9iamVjdHMuY29tL21kbi9ybXNfMDBlZGNiL2FmdHMvaW1nL0EqRWtKbVJybXVKQWdBQUFBQUFBQUFBQUJrQVJRbkFRXCJcbiAgICAgICAgICAgICAgICAgICAgYWx0PVwiXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmRcIj5cbiAgICAgICAgICAgICAgICA8TGluayB0bz1cIi9ncmFwaGluLXN0dWRpb1wiIGNsYXNzTmFtZT1cImNhcmQtaXRlbVwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtdGV4dFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICDmvJTnpLpkZW1v77yaR3JhcGhpbiBTdHVkaW9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0tIOmAmueUqOWbvuWIhuaekOW3peS9nOWPsFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgSG9tZTtcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBMYXlvdXRQcm9wcyB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5cbmNvbnN0IExheW91dDogUmVhY3QuRkM8TGF5b3V0UHJvcHM+ID0gcHJvcHMgPT4ge1xuICAgIGNvbnN0IHsgY2hpbGRyZW4gfSA9IHByb3BzO1xuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImdyYXBoaW4tc3R1ZGlvXCI+e2NoaWxkcmVufTwvZGl2Pjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IExheW91dDtcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBMYXlvdXRQcm9wcyB9IGZyb20gJy4vdHlwZXMnO1xuXG5jb25zdCBTaWRlOiBSZWFjdC5GQzxMYXlvdXRQcm9wcz4gPSBwcm9wcyA9PiB7XG4gICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gcHJvcHM7XG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwiZ3JhcGhpbi1zdHVkaW8tc2lkZVwiPntjaGlsZHJlbn08L2Rpdj47XG59O1xuXG5leHBvcnQgZGVmYXVsdCBTaWRlO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IExheW91dFByb3BzIH0gZnJvbSAnLi90eXBlcyc7XG5cbmNvbnN0IEhlYWRlcjogUmVhY3QuRkM8TGF5b3V0UHJvcHM+ID0gcHJvcHMgPT4ge1xuICAgIGNvbnN0IHsgY2hpbGRyZW4gfSA9IHByb3BzO1xuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImdyYXBoaW4tc3R1ZGlvLWhlYWRlclwiPntjaGlsZHJlbn08L2Rpdj47XG59O1xuXG5leHBvcnQgZGVmYXVsdCBIZWFkZXI7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgTGF5b3V0UHJvcHMgfSBmcm9tICcuL3R5cGVzJztcblxuY29uc3QgTWFpbjogUmVhY3QuRkM8TGF5b3V0UHJvcHM+ID0gcHJvcHMgPT4ge1xuICAgIGNvbnN0IHsgY2hpbGRyZW4gfSA9IHByb3BzO1xuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImdyYXBoaW4tc3R1ZGlvLW1haW5cIj57Y2hpbGRyZW59PC9kaXY+O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgTWFpbjtcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBMYXlvdXRQcm9wcyB9IGZyb20gJy4vdHlwZXMnO1xuXG5jb25zdCBGb290ZXI6IFJlYWN0LkZDPExheW91dFByb3BzPiA9IHByb3BzID0+IHtcbiAgICBjb25zdCB7IGNoaWxkcmVuIH0gPSBwcm9wcztcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJncmFwaGluLXN0dWRpby1mb290ZXJcIj57Y2hpbGRyZW59PC9kaXY+O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgRm9vdGVyO1xuIiwiaW1wb3J0IExheW91dCBmcm9tICcuL0xheW91dCc7XG5pbXBvcnQgU2lkZSBmcm9tICcuL1NpZGUnO1xuaW1wb3J0IEhlYWRlciBmcm9tICcuL0hlYWRlcic7XG5pbXBvcnQgTWFpbiBmcm9tICcuL01haW4nO1xuaW1wb3J0IEZvb3RlciBmcm9tICcuL0Zvb3Rlcic7XG5cbmV4cG9ydCB7IExheW91dCwgU2lkZSwgSGVhZGVyLCBNYWluLCBGb290ZXIgfTtcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBEaXZpZGVyLCBUb29sdGlwLCBCdXR0b24gfSBmcm9tICdhbnRkJztcbmltcG9ydCAnLi9pbmRleC5sZXNzJztcblxuaW50ZXJmYWNlIEl0ZW0ge1xuICAgIC8qKiBpZCAqL1xuICAgIGlkPzogc3RyaW5nO1xuICAgIC8qKiDlkI3np7AgKi9cbiAgICBuYW1lPzogc3RyaW5nO1xuICAgIC8qKiDlkI3np7AgKi9cbiAgICB0b29sdGlwPzogc3RyaW5nO1xuICAgIC8qKiDlm77moIflkI3np7DvvJrlj4LogINBbnRk55qE5Zu+5qCHICovXG4gICAgaWNvbj86IHN0cmluZztcbiAgICAvKiog5piv5ZCm56aB55So5oyJ6ZKuICovXG4gICAgZGlzYWJsZWQ/OiBib29sZWFuO1xuICAgIC8qKiDlvZNkaXNhYmxlZOS4unRydWXnmoTml7blgJnmmL7npLrnmoTmlofmoYggKi9cbiAgICByZWFzb24/OiBzdHJpbmc7XG4gICAgLyoqIOinpuWPkeeahOWKqOS9nCAqL1xuICAgIG9uQ2xpY2s/OiAoaXRlbTogSXRlbSkgPT4gdm9pZDtcbiAgICAvKiog5piv5ZCm5piv5YiG5Ymy57q/ICovXG4gICAgaXNEaXZpZGVyPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIFRvb2xCYXJQcm9wcyB7XG4gICAgZGF0YTogSXRlbVtdO1xuICAgIHN0eWxlPzogb2JqZWN0O1xuICAgIGNsYXNzTmFtZT86IHN0cmluZztcbn1cbmNvbnN0IFRvb2xCYXI6IFJlYWN0LkZDPFRvb2xCYXJQcm9wcz4gPSBwcm9wcyA9PiB7XG4gICAgY29uc3QgeyBkYXRhLCBzdHlsZSwgY2xhc3NOYW1lIH0gPSBwcm9wcztcbiAgICByZXR1cm4gKFxuICAgICAgICA8dWwgY2xhc3NOYW1lPXtgJHsnZ3JhcGhpbi1zdHVkaW8tdG9vbGJhcid9JHtjbGFzc05hbWUgPyBgICR7Y2xhc3NOYW1lfWAgOiAnJ31gfSBzdHlsZT17c3R5bGV9PlxuICAgICAgICAgICAge2RhdGEubWFwKGMgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgaXNEaXZpZGVyLCBvbkNsaWNrLCB0b29sdGlwLCBuYW1lLCBkaXNhYmxlZCwgaWNvbiwgaWQgfSA9IGM7XG4gICAgICAgICAgICAgICAgaWYgKGlzRGl2aWRlcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gPERpdmlkZXIga2V5PXtpZH0gLz47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxUb29sdGlwIGtleT17aWR9IHBsYWNlbWVudD1cInJpZ2h0XCIgdGl0bGU9e3Rvb2x0aXAgfHwgbmFtZX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb249e2ljb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCk6IHZvaWQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25DbGljaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljayhjKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pfVxuICAgICAgICA8L3VsPlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBUb29sQmFyO1xuIiwiaW1wb3J0IFRvb2xCYXIgZnJvbSAnLi9Ub29sQmFyJztcblxuZXhwb3J0IGRlZmF1bHQgVG9vbEJhcjtcbiIsImltcG9ydCB7IG5vdGlmaWNhdGlvbiB9IGZyb20gJ2FudGQnO1xuaW1wb3J0IHsgT3BlcmF0b3JCYXJQcm9wcyB9IGZyb20gJy4vaW5kZXgnO1xuXG5jb25zdCBkaWZmdXNlT3BlcmF0b3IgPSAocHJvcHM6IE9wZXJhdG9yQmFyUHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGRpc3BhdGNoLCBzdGF0ZSB9ID0gcHJvcHM7XG4gICAgY29uc3QgeyBzZWxlY3RlZE5vZGVzIH0gPSBzdGF0ZTtcbiAgICBpZiAoc2VsZWN0ZWROb2Rlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbm90aWZpY2F0aW9uLmluZm8oe1xuICAgICAgICAgICAgbWVzc2FnZTogJ+WFs+ezu+aJqeaVoycsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ+WFs+ezu+aJqeaVo+mcgOimgeiHs+WwkemAieS4reS4gOS4quiKgueCuScsXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdncmFwaC9kcmF3ZXInLFxuICAgICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgICAgIHRpdGxlOiAn5YWz57O75omp5pWjJyxcbiAgICAgICAgICAgICAgICB0eXBlOiAnZGlmZnVzZScsXG4gICAgICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB3aWR0aDogNTUwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IGRpZmZ1c2VPcGVyYXRvcjtcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgVG9vbEJhciBmcm9tICcuLi8uLi9Db21wb25lbnRzL1Rvb2xCYXInO1xuaW1wb3J0ICcuL2luZGV4Lmxlc3MnO1xuaW1wb3J0IGRpZmZ1c2VPcGVyYXRvciBmcm9tICcuL2RpZmZ1c2Uub3BlcmF0b3InO1xuaW1wb3J0IHsgR3JhcGhlbmVTdGF0ZSB9IGZyb20gJy4uLy4uL3R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBPcGVyYXRvckJhclByb3BzIHtcbiAgICBkaXNwYXRjaDogKHByb3BzOiBhbnkpID0+IGFueTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgIGdyYXBoUmVmPzogYW55OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgc3RhdGU6IEdyYXBoZW5lU3RhdGU7XG59XG5jb25zdCBPcGVyYXRvckJhcjogUmVhY3QuRkM8T3BlcmF0b3JCYXJQcm9wcz4gPSBwcm9wcyA9PiB7XG4gICAgY29uc3QgeyBkaXNwYXRjaCwgZ3JhcGhSZWYgfSA9IHByb3BzO1xuICAgIGNvbnN0IGFwaXMgPSBncmFwaFJlZi5jdXJyZW50LmdldEFwaXMoKTtcblxuICAgIGNvbnN0IG1lbnVzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ2FkZE5vZGUnLFxuICAgICAgICAgICAgbmFtZTogJ+a3u+WKoOWunuS9kycsXG4gICAgICAgICAgICBpY29uOiAnZmlsZS1hZGQnLFxuICAgICAgICAgICAgb25DbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2dyYXBoL2RyYXdlcicsXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5re75Yqg5a6e5L2TJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdhZGROb2RlcycsXG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDQ1MCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlTWFzazogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAnc2VhcmNoJyxcbiAgICAgICAgICAgIG5hbWU6ICfmkJzntKInLFxuICAgICAgICAgICAgaWNvbjogJ3NlYXJjaCcsXG4gICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZ3JhcGgvc2VhcmNoQmFyJyxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIC8vIHtcbiAgICAgICAgLy8gICAgIGlkOiAnZmlsdGVyJyxcbiAgICAgICAgLy8gICAgIG5hbWU6ICflm77nrZvpgIknLFxuICAgICAgICAvLyAgICAgaWNvbjogJ2ZpbHRlcicsXG4gICAgICAgIC8vICAgICBkaXNhYmxlZDogdHJ1ZSxcbiAgICAgICAgLy8gfSxcblxuICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ2RpdmlkZXIxJyxcbiAgICAgICAgICAgIGlzRGl2aWRlcjogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICdkaWZmdXNlJyxcbiAgICAgICAgICAgIG5hbWU6ICflhbPns7vmianmlaMnLFxuICAgICAgICAgICAgaWNvbjogJ2RlcGxveW1lbnQtdW5pdCcsXG4gICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZGlmZnVzZU9wZXJhdG9yKHByb3BzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIC8vIHtcbiAgICAgICAgLy8gICAgIGlkOiAnZGlzY292ZXInLFxuICAgICAgICAvLyAgICAgbmFtZTogJ+WFs+ezu+WPkeeOsCcsXG4gICAgICAgIC8vICAgICBkaXNhYmxlZDogdHJ1ZSxcbiAgICAgICAgLy8gICAgIGljb246ICdleWUnLFxuICAgICAgICAvLyB9LFxuICAgICAgICAvLyB7XG4gICAgICAgIC8vICAgICBpZDogJ2FuYWx5c2UnLFxuICAgICAgICAvLyAgICAgbmFtZTogJ+ekvue+pOWIhuaekCcsXG4gICAgICAgIC8vICAgICBkaXNhYmxlZDogdHJ1ZSxcbiAgICAgICAgLy8gICAgIGljb246ICdnYXRld2F5JyxcbiAgICAgICAgLy8gfSxcbiAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICdkaXZpZGVyMicsXG4gICAgICAgICAgICBpc0RpdmlkZXI6IHRydWUsXG4gICAgICAgIH0sXG5cbiAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICdzYXZlJyxcbiAgICAgICAgICAgIG5hbWU6ICfkv53lrZgnLFxuICAgICAgICAgICAgaWNvbjogJ3NhdmUnLFxuICAgICAgICAgICAgb25DbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2dyYXBoL21vZGFsJyxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfkv53lrZjnlLvluIMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NhdmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZU9rOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2F2ZSBncmFwaCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAnY2xlYXInLFxuICAgICAgICAgICAgbmFtZTogJ+a4heepuicsXG4gICAgICAgICAgICBpY29uOiAnZGVsZXRlJyxcbiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBkaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdncmFwaC9tb2RhbCcsXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5riF56m655S75biDJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjbGVhcicsXG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlT2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGlzLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY2xlYXIgZ3JhcGgnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ3NldHRpbmcnLFxuICAgICAgICAgICAgbmFtZTogJ+iuvue9ricsXG4gICAgICAgICAgICBpY29uOiAnc2V0dGluZycsXG4gICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZ3JhcGgvZHJhd2VyJyxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICforr7nva4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NldHRpbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAzNTAsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZU1hc2s6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIF07XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxUb29sQmFyIGRhdGE9e21lbnVzfSBjbGFzc05hbWU9XCJvcGVyYXRvci1iYXJcIiAvPjtcbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IE9wZXJhdG9yQmFyO1xuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBDaGVja2JveCwgUm93LCBDb2wgfSBmcm9tICdhbnRkJztcbmltcG9ydCB7IENoZWNrYm94Q2hhbmdlRXZlbnQgfSBmcm9tICdhbnRkL2VzL2NoZWNrYm94JztcbmltcG9ydCAnLi9pbmRleC5sZXNzJztcblxuY29uc3QgQ2hlY2tib3hHcm91cCA9IENoZWNrYm94Lkdyb3VwO1xuXG5leHBvcnQgdHlwZSBDaGVja2JveFZhbHVlVHlwZSA9IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW47XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2hlY2tib3hPcHRpb25UeXBlIHtcbiAgICBsYWJlbDogUmVhY3QuUmVhY3ROb2RlO1xuICAgIHZhbHVlOiBDaGVja2JveFZhbHVlVHlwZTtcbiAgICBkaXNhYmxlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2hlY2tib3hQcm9wcyB7XG4gICAgLyoqIOaMh+WumuWPr+mAiemhuSAgKi9cbiAgICBvcHRpb25zPzogQXJyYXk8Q2hlY2tib3hPcHRpb25UeXBlIHwgc3RyaW5nPjtcbiAgICAvKiog6KKr6YCJ5Lit5pe26LCD55SoICAqL1xuICAgIGNoZWNrZWRMaXN0PzogQXJyYXk8Q2hlY2tib3hWYWx1ZVR5cGU+O1xuICAgIC8qKiDlj5jljJbml7blm57osIPlh73mlbAgICovXG4gICAgb25DaGFuZ2U/OiAoY2hlY2tlZFZhbHVlOiBBcnJheTxDaGVja2JveFZhbHVlVHlwZT4pID0+IHZvaWQ7XG4gICAgLyoqIOagheagvOWNoOS9jeagvOaVsCAqL1xuICAgIHNwYW4/OiBudW1iZXI7XG4gICAgLyoqXG4gICAgICogPEBkZWZhdWx0PXRydWU+XG4gICAgICog5piv5ZCm6ZyA6KaB5YWo6YCJ6aG5XG4gICAgICovXG4gICAgaXNTZWxlY3RBbGw/OiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgSW5pdGlhbFN0YXRlIHtcbiAgICBpbmRldGVybWluYXRlOiBib29sZWFuO1xuICAgIGNoZWNrQWxsOiBib29sZWFuO1xufVxuXG5jb25zdCBFbmhhbmNlZENoZWNrYm94OiBSZWFjdC5TRkM8Q2hlY2tib3hQcm9wcz4gPSBwcm9wcyA9PiB7XG4gICAgY29uc3QgeyBvcHRpb25zID0gW10sIGNoZWNrZWRMaXN0ID0gW10sIG9uQ2hhbmdlLCBzcGFuLCBpc1NlbGVjdEFsbCA9IHRydWUgfSA9IHByb3BzO1xuXG4gICAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZTxJbml0aWFsU3RhdGU+KHtcbiAgICAgICAgaW5kZXRlcm1pbmF0ZTogdHJ1ZSxcbiAgICAgICAgY2hlY2tBbGw6IGZhbHNlLFxuICAgIH0pO1xuICAgIGNvbnN0IHsgaW5kZXRlcm1pbmF0ZSwgY2hlY2tBbGwgfSA9IHN0YXRlO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgbGV0IGlzUGFydCA9IHRydWU7XG4gICAgICAgIGxldCBpc0FsbCA9IGZhbHNlO1xuICAgICAgICBzd2l0Y2ggKHRydWUpIHtcbiAgICAgICAgICAgIGNhc2UgY2hlY2tlZExpc3QubGVuZ3RoID09PSBvcHRpb25zLmxlbmd0aDpcbiAgICAgICAgICAgICAgICBpc1BhcnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpc0FsbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGNoZWNrZWRMaXN0Lmxlbmd0aCA9PT0gMDpcbiAgICAgICAgICAgICAgICBpc1BhcnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgICBpbmRldGVybWluYXRlOiBpc1BhcnQsXG4gICAgICAgICAgICBjaGVja0FsbDogaXNBbGwsXG4gICAgICAgIH0pO1xuICAgIH0sIFtjaGVja2VkTGlzdC5sZW5ndGgsIG9wdGlvbnMubGVuZ3RoXSk7XG5cbiAgICBjb25zdCBvbkNoYW5nZVZhbHVlID0gKHZhbHVlOiBBcnJheTxDaGVja2JveFZhbHVlVHlwZT4pOiB2b2lkID0+IHtcbiAgICAgICAgaWYgKG9uQ2hhbmdlKSB7XG4gICAgICAgICAgICBvbkNoYW5nZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAgICAgaW5kZXRlcm1pbmF0ZTogISF2YWx1ZS5sZW5ndGggJiYgdmFsdWUubGVuZ3RoIDwgb3B0aW9ucy5sZW5ndGgsXG4gICAgICAgICAgICBjaGVja0FsbDogdmFsdWUubGVuZ3RoID09PSBvcHRpb25zLmxlbmd0aCxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGNvbnN0IG9uQ2hlY2tBbGxDaGFuZ2UgPSAoZTogQ2hlY2tib3hDaGFuZ2VFdmVudCk6IHZvaWQgPT4ge1xuICAgICAgICBjb25zdCBpc0NoZWNrQWxsID0gZS50YXJnZXQuY2hlY2tlZDtcbiAgICAgICAgaWYgKG9uQ2hhbmdlKSB7XG4gICAgICAgICAgICBjb25zdCBhbGxDaGVja2VkTGlzdCA9IG9wdGlvbnMubWFwKGl0ZW0gPT4gKHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJyA/IGl0ZW0gOiBpdGVtLnZhbHVlKSk7XG4gICAgICAgICAgICAvLyBpc0NoZWNrQWxsID8gb25DaGFuZ2UoYWxsQ2hlY2tlZExpc3QpIDogb25DaGFuZ2UoW10pO1xuICAgICAgICAgICAgaWYgKGlzQ2hlY2tBbGwpIHtcbiAgICAgICAgICAgICAgICBvbkNoYW5nZShhbGxDaGVja2VkTGlzdCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG9uQ2hhbmdlKFtdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICAgIGluZGV0ZXJtaW5hdGU6IGZhbHNlLFxuICAgICAgICAgICAgY2hlY2tBbGw6IGlzQ2hlY2tBbGwsXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBjb25zdCBmaWx0ZXJWYWx1ZSA9ICgpOiBBcnJheTxDaGVja2JveFZhbHVlVHlwZT4gPT4ge1xuICAgICAgICByZXR1cm4gY2hlY2tlZExpc3QuZmlsdGVyKHYgPT4ge1xuICAgICAgICAgICAgY29uc3QgYWxsQ2hlY2tlZExpc3QgPSBvcHRpb25zLm1hcChpdGVtID0+ICh0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycgPyBpdGVtIDogaXRlbS52YWx1ZSkpO1xuICAgICAgICAgICAgcmV0dXJuIGFsbENoZWNrZWRMaXN0LmluY2x1ZGVzKHYpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJlbmhhbmNlZF9jaGVja2JveF93cmFwcGVyXCI+XG4gICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhbGxfc2VsZWN0XCJcbiAgICAgICAgICAgICAgICBpbmRldGVybWluYXRlPXtpbmRldGVybWluYXRlfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtvbkNoZWNrQWxsQ2hhbmdlfVxuICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2NoZWNrQWxsfVxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IGRpc3BsYXk6IGlzU2VsZWN0QWxsID8gJ2luaW5lLWJsb2NrJyA6ICdub25lJyB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIOWFqOmAiVxuICAgICAgICAgICAgPC9DaGVja2JveD5cbiAgICAgICAgICAgIDxDaGVja2JveEdyb3VwIHZhbHVlPXtmaWx0ZXJWYWx1ZSgpfSBvbkNoYW5nZT17b25DaGFuZ2VWYWx1ZX0+XG4gICAgICAgICAgICAgICAgPFJvdz5cbiAgICAgICAgICAgICAgICAgICAge2lzU2VsZWN0QWxsID8gPENvbCBjbGFzc05hbWU9XCJzaW5nbGVfY2hlY2tib3hcIiAvPiA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIHtvcHRpb25zLm1hcChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnID8gaXRlbSA6IGl0ZW0udmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYWJlbCA9IHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJyA/IGl0ZW0gOiBpdGVtLmxhYmVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q29sIGtleT17U3RyaW5nKHZhbHVlKX0gc3Bhbj17c3BhbiB8fCB1bmRlZmluZWR9IGNsYXNzTmFtZT1cInNpbmdsZV9jaGVja2JveFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3ggdmFsdWU9e3ZhbHVlfT57bGFiZWx9PC9DaGVja2JveD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0NvbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgIDwvUm93PlxuICAgICAgICAgICAgPC9DaGVja2JveEdyb3VwPlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgRW5oYW5jZWRDaGVja2JveDtcbiIsImltcG9ydCBFbmhhbmNlZENoZWNrYm94IGZyb20gJy4vRW5oYW5jZWRDaGVja2JveCc7XG5cbmV4cG9ydCBkZWZhdWx0IEVuaGFuY2VkQ2hlY2tib3g7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQ29sbGFwc2UgfSBmcm9tICdhbnRkJztcbmltcG9ydCAnLi9Gb2xkaW5nUGFuZWwubGVzcyc7XG5cbmNvbnN0IHsgUGFuZWwgfSA9IENvbGxhcHNlO1xuXG5leHBvcnQgdHlwZSBUeXBlcyA9IHtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIEZvbGRpbmdQYW5lbFByb3BzIHtcbiAgICAvKiog5pWw5o2u5rqQICAqL1xuICAgIGRhdGE6IFR5cGVzW107XG59XG5cbi8qKlxuICog5o6l5pS25LiA5Liq5pWw57uE77yM5pWw57uE5YaF5Li66Iul5bmy5Liq5a+56LGh77yM5q+P5Liq5a+56LGh5pyJ5Lik5Liq5bGe5oCnXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHRpdGxlICAgICAgIOavj+S4qumdouadv+eahOagh+mimOWPimtleeWAvFxuICogQHBhcmFtICB7UmVhY3ROb2RlfSBjaGlsZHJlbiDpnaLmnb/lhoXmuLLmn5PnmoTlhoXlrrlcbiAqL1xuY29uc3QgRm9sZGluZ1BhbmVsOiBSZWFjdC5TRkM8Rm9sZGluZ1BhbmVsUHJvcHM+ID0gcHJvcHMgPT4ge1xuICAgIC8vIOm7mOiupOWxleW8gOaJgOacieWtkOmhuVxuICAgIGNvbnN0IGdldEFjdGl2ZUtleXMgPSAoZGF0YTogVHlwZXNbXSk6IHN0cmluZ1tdID0+IHtcbiAgICAgICAgY29uc3QgaW5pdGlhbFZhbHVlOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBjb25zdCBuZXdEYXRhID0gZGF0YS5zbGljZSgpO1xuICAgICAgICByZXR1cm4gbmV3RGF0YS5yZWR1Y2UoKGEsIGIpID0+IGEuY29uY2F0KFtiLnRpdGxlXSksIGluaXRpYWxWYWx1ZSk7IC8vIOi/lOWbnuaJgOaciWtleeWAvFxuICAgIH07XG4gICAgY29uc3QgeyBkYXRhIH0gPSBwcm9wcztcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxDb2xsYXBzZSBjbGFzc05hbWU9XCJwYW5lbFwiIGJvcmRlcmVkPXtmYWxzZX0gZGVmYXVsdEFjdGl2ZUtleT17Z2V0QWN0aXZlS2V5cyhkYXRhKX0gZXhwYW5kSWNvblBvc2l0aW9uPVwicmlnaHRcIj5cbiAgICAgICAgICAgIHsoZGF0YSB8fCBbXSkubWFwKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJuYW1lXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJtYXJrXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtpdGVtLnRpdGxlfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxQYW5lbCBoZWFkZXI9e2hlYWRlcn0ga2V5PXtpdGVtLnRpdGxlfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtpdGVtLmNoaWxkcmVufVxuICAgICAgICAgICAgICAgICAgICA8L1BhbmVsPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KX1cbiAgICAgICAgPC9Db2xsYXBzZT5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgRm9sZGluZ1BhbmVsO1xuIiwiaW1wb3J0IEZvbGRpbmdQYW5lbCBmcm9tICcuL0ZvbGRpbmdQYW5lbCc7XG5cbmV4cG9ydCBkZWZhdWx0IEZvbGRpbmdQYW5lbDtcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgJy4vaW5kZXgubGVzcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSXRlbVByb3BzIHtcbiAgICAvKiog6Ieq5a6a5LmJ5qC35byPICAqL1xuICAgIHN0eWxlPzogUmVhY3QuQ1NTUHJvcGVydGllcztcbiAgICAvKiog5qCH6aKYICovXG4gICAgdGl0bGU6IHN0cmluZztcbiAgICAvKiog5YaF5a655Yy65Z+fICovXG4gICAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTsgLy8gYW55IHwgSlNYLkVsZW1lbnRbXVxufVxuXG5jb25zdCBJdGVtOiBSZWFjdC5GQzxJdGVtUHJvcHM+ID0gKHsgdGl0bGUsIGNoaWxkcmVuIH0pID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIml0ZW1cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaXRlbS10aXRsZVwiPnt0aXRsZX08L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaXRlbS1jaGlsZHJlblwiPntjaGlsZHJlbn08L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEl0ZW07XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgVG9vbHRpcCB9IGZyb20gJ2FudGQnO1xuaW1wb3J0ICcuL2luZGV4Lmxlc3MnO1xuXG5pbnRlcmZhY2UgUHJvcGVydHlQcm9wcyB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHZhbHVlOiBzdHJpbmc7XG59XG5cbmNvbnN0IFByb3BlcnR5OiBSZWFjdC5GQzxQcm9wZXJ0eVByb3BzPiA9IHByb3BzID0+IHtcbiAgICBjb25zdCB7IG5hbWUsIHZhbHVlIH0gPSBwcm9wcztcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInByb3BlcnR5XCI+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0aXRsZVwiPntgJHtuYW1lfTogYH08L3NwYW4+XG4gICAgICAgICAgICA8VG9vbHRpcCB0aXRsZT17dmFsdWV9PlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImluZm9cIj57dmFsdWV9PC9zcGFuPlxuICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgUHJvcGVydHk7XG4iLCJpbXBvcnQgUHJvcGVydHkgZnJvbSAnLi9Qcm9wZXJ0eSc7XG5cbmV4cG9ydCBkZWZhdWx0IFByb3BlcnR5O1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEljb24gfSBmcm9tICdhbnRkJztcbmltcG9ydCBjbGFzc2VzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHsgU2VhcmNoQmFyUHJvcHMgfSBmcm9tICcuL1NlYXJjaEJhcic7XG5pbXBvcnQgeyBTZWFyY2hWYWx1ZSB9IGZyb20gJy4vaW50ZXJmYWNlJztcbmltcG9ydCAnLi9TZWFyY2hCYXIubGVzcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VhcmNoUGFuZWxQcm9wcyBleHRlbmRzIFNlYXJjaEJhclByb3BzIHtcbiAgICAvKiog5pCc57Si6Z2i5p2/5pWw5o2uICAqL1xuICAgIHJvd3M6IFNlYXJjaFZhbHVlW107XG4gICAgLyoqIOaQnOe0oumdouadv+aYr+WQpuWPr+ingSAgKi9cbiAgICBpc09wZW46IGJvb2xlYW47XG4gICAgLyoqIOWOhuWPsuiusOW9leaYr+WQpuWPr+ingSAgKi9cbiAgICBpc0hpc3Rvcnk6IGJvb2xlYW47XG4gICAgLyoqIOaQnOe0ouahhuWFs+mUruWtlyAgKi9cbiAgICBzZWFyY2hXb3Jkczogc3RyaW5nO1xuICAgIC8qKiDliKTmlq3mmK/lkKbmlbDnu4QgICovXG4gICAgaXNBcnJheTogKHJvd3M6IFNlYXJjaFZhbHVlW10pID0+IGJvb2xlYW47XG4gICAgLyoqIOWFs+mXreaQnOe0oumdouadvyAgKi9cbiAgICBoYW5kbGVDbG9zZVBhbmVsOiAoc2VhcmNoV29yZHM6IHN0cmluZykgPT4gdm9pZDtcbiAgICAvKiog5riF6Zmk5Y6G5Y+y6K6w5b2VICAqL1xuICAgIHJlc2V0U2VhcmNoSGlzdG9yeTogKCkgPT4gdm9pZDtcbn1cblxuY29uc3QgU2VhcmNoUGFuZWw6IFJlYWN0LlNGQzxTZWFyY2hQYW5lbFByb3BzPiA9IHByb3BzID0+IHtcbiAgICBjb25zdCB7XG4gICAgICAgIHJvd3MsXG4gICAgICAgIGlzT3BlbixcbiAgICAgICAgaXNIaXN0b3J5LFxuICAgICAgICBhbmNob3IgPSAncmlnaHQnLFxuICAgICAgICBhbGxvd0NsZWFyID0gZmFsc2UsXG4gICAgICAgIHNlYXJjaFdvcmRzLFxuICAgICAgICBpc0FycmF5LFxuICAgICAgICBoYW5kbGVDbG9zZVBhbmVsLFxuICAgICAgICByZXNldFNlYXJjaEhpc3RvcnksXG4gICAgfSA9IHByb3BzO1xuXG4gICAgY29uc3QgaGlnaGxpZ2h0ID0gKHdvcmRzOiBzdHJpbmcsIHN0cjogc3RyaW5nKSA9PiB7XG4gICAgICAgIC8vIOWvueaQnOe0oueahOWFs+mUruWtl+WIhuivje+8jOi/memHjOS9v+eUqOeugOWNleeahOepuuagvOWIhuivjVxuICAgICAgICBjb25zdCBzZWFyY2h3b3Jkc0FycmF5ID0gd29yZHMuc3BsaXQoJyAnKTtcbiAgICAgICAgbGV0IHN0cmluZyA9IHN0cjtcbiAgICAgICAgLy8g6L+Z6YeM5aaC5p6cbG9jYWxTdG9yYWdl5a2Y5YKo55qE5pWw5o2u5qC85byP5Y+R55Sf5Y+Y5YyW5a655piT5oql6ZSZ77yM6ZyA6KaBdHJ5Li4uY2F0Y2jkuIDkuItcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIOWvueavj+S4quWFs+mUruivjei/m+ihjHJlcGxhY2Xmm7/mjaJcbiAgICAgICAgICAgIHNlYXJjaHdvcmRzQXJyYXkuZm9yRWFjaChlID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWUudHJpbSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UoZSwgbWF0Y2ggPT4gYDxzcGFuIHN0eWxlPVwiZm9udC13ZWlnaHQ6NzAwXCI+JHttYXRjaH08L3NwYW4+YCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3Qgb25DbGljayA9IChpdGVtOiBTZWFyY2hWYWx1ZSkgPT4ge1xuICAgICAgICBpZiAocHJvcHMub25TZWxlY3QpIHtcbiAgICAgICAgICAgIHByb3BzLm9uU2VsZWN0KGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gaGFuZGxlQ2xvc2VQYW5lbChpdGVtLm5hbWUpLCAzMDApO1xuICAgIH07XG5cbiAgICBjb25zdCBibGFuayA9ICgpID0+IDxwIGNsYXNzTmFtZT1cInNlYXJjaC1ibGFua1wiPuaXoOaQnOe0ouWGheWuuTwvcD47XG5cbiAgICBjb25zdCByZW5kZXJIZWFkZXIgPSAoKSA9PiB7XG4gICAgICAgIGlmIChwcm9wcy5yZW5kZXJIZWFkZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9wcy5yZW5kZXJIZWFkZXIocm93cyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgaXNIaXN0b3J5ICYmIChcbiAgICAgICAgICAgICAgICA8bGkgY2xhc3NOYW1lPVwibGktcmVjZW50XCI+XG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cInJlY2VudC1pY29uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SWNvbiB0eXBlPVwiaGlzdG9yeVwiIHN0eWxlPXt7IGNvbG9yOiAnI2FkYjljNicgfX0gLz5cbiAgICAgICAgICAgICAgICAgICAgPC9pPlxuICAgICAgICAgICAgICAgICAgICDmnIDov5Horr/pl65cbiAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH07XG5cbiAgICBjb25zdCByZW5kZXJDb250ZW50ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gaXNBcnJheShyb3dzKSA/IChcbiAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9XCJzZWFyY2gtcGFuZWwtdWxcIj5cbiAgICAgICAgICAgICAgICB7cm93cy5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOm7mOiupOeahHJlbmRlckNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRleHQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wcy5yZW5kZXJDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gcHJvcHMucmVuZGVyQ29udGVudCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoV29yZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSBoaWdobGlnaHQoc2VhcmNoV29yZHMsIGl0ZW0ubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBrZXk9e0pTT04uc3RyaW5naWZ5KGl0ZW0pfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lICovfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9e2luZGV4fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3sgX19odG1sOiB0ZXh0IH19IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljayhpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25LZXlQcmVzcz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljayhpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgICBibGFuaygpXG4gICAgICAgICk7XG4gICAgfTtcblxuICAgIGNvbnN0IHJlc2V0ID0gKCkgPT4ge1xuICAgICAgICBpZiAocHJvcHMuY2xlYXJIaXN0b3J5KSB7XG4gICAgICAgICAgICBwcm9wcy5jbGVhckhpc3RvcnkoKTtcbiAgICAgICAgICAgIHJlc2V0U2VhcmNoSGlzdG9yeSgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IHJlbmRlckZvb3RlciA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgdmlzaWJsZSA9IGFsbG93Q2xlYXIgJiYgaXNIaXN0b3J5O1xuICAgICAgICByZXR1cm4gdmlzaWJsZSA/IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGktZm9vdGVyXCI+XG4gICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwicmVzZXQtaWNvblwiPlxuICAgICAgICAgICAgICAgICAgICA8SWNvbiB0eXBlPVwicmVzdFwiIHN0eWxlPXt7IGNvbG9yOiAnI2FkYjljNicgfX0gLz5cbiAgICAgICAgICAgICAgICA8L2k+XG4gICAgICAgICAgICAgICAgPHNwYW4gcm9sZT1cImJ1dHRvblwiIHRhYkluZGV4PXswfSBjbGFzc05hbWU9XCJyZXNldC1idXR0b25cIiBvbkNsaWNrPXtyZXNldH0gb25LZXlQcmVzcz17cmVzZXR9PlxuICAgICAgICAgICAgICAgICAgICDmuIXpmaTljoblj7LorrDlvZVcbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKSA6IG51bGw7XG4gICAgICAgIC8vIGlmIChwcm9wcy5yZW5kZXJGb290ZXIpIHtcbiAgICAgICAgLy8gICByZXR1cm4gcHJvcHMucmVuZGVyRm9vdGVyKHJvd3MpO1xuICAgICAgICAvLyB9XG4gICAgICAgIC8vIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICBjb25zdCByb290Q2xhc3MgPSBjbGFzc2VzKFxuICAgICAgICAnc2VhcmNoLXBhbmVsJyxcbiAgICAgICAgLy8gY3hbYHNlYXJjaC1kaXJlY3Rpb24tJHthbmNob3J9YF0sXG4gICAgICAgIGFuY2hvciA9PT0gJ2xlZnQnID8gJ3NlYXJjaC1kaXJlY3Rpb24tbGVmdCcgOiAnc2VhcmNoLWRpcmVjdGlvbi1yaWdodCcsIC8vIOS8uOe8qeeahOaWueWQkVxuICAgICAgICB7XG4gICAgICAgICAgICBjbG9zZTogIWlzT3BlbixcbiAgICAgICAgICAgIGJsYW5rOiAhaXNBcnJheShyb3dzKSxcbiAgICAgICAgfSxcbiAgICApO1xuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtyb290Q2xhc3N9PlxuICAgICAgICAgICAge3JlbmRlckhlYWRlcigpfVxuICAgICAgICAgICAge3JlbmRlckNvbnRlbnQoKX1cbiAgICAgICAgICAgIHtyZW5kZXJGb290ZXIoKX1cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFNlYXJjaFBhbmVsO1xuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IElucHV0LCBJY29uIH0gZnJvbSAnYW50ZCc7XG5pbXBvcnQgU2VhcmNoUGFuZWwgZnJvbSAnLi9QYW5lbCc7XG5pbXBvcnQgeyBTZWFyY2hWYWx1ZSwgQ29udGVudFByb3BzIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuaW1wb3J0ICcuL1NlYXJjaEJhci5sZXNzJztcblxuY29uc3QgREVCT1VOQ0VfVElNRSA9IDUwMDtcbmNvbnN0IEVOVEVSX0tFWSA9IDEzO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNlYXJjaEJhclByb3BzIHtcbiAgICAvKiog5paH5pys5qGG5YC85Y+Y5YyW5pe25Zue6LCDICAqL1xuICAgIG9uU2VhcmNoOiAodmFsdWU6IHN0cmluZykgPT4gUHJvbWlzZTxTZWFyY2hWYWx1ZVtdPjtcbiAgICAvKiog6KKr6YCJ5Lit5pe26LCD55SoICAqL1xuICAgIG9uU2VsZWN0PzogKGU6IFNlYXJjaFZhbHVlKSA9PiB2b2lkO1xuICAgIC8qKiDmn6Xor6Lljoblj7LorrDlvZUgICovXG4gICAgb25TZWFyY2hIaXN0b3J5PzogKCkgPT4gUHJvbWlzZTxTZWFyY2hWYWx1ZVtdPjtcbiAgICAvKiog5pCc57Si5Zue6L2m5LqL5Lu2ICAqL1xuICAgIG9uRW50ZXI/OiAodmFsdWU6IHN0cmluZykgPT4gUHJvbWlzZTxTZWFyY2hWYWx1ZVtdPjtcbiAgICAvKipcbiAgICAgKiA8QGRlZmF1bHQ9dHJ1ZT5cbiAgICAgKiDmkJzntKLmoYbmmK/lkKblj6/op4FcbiAgICAgKi9cbiAgICB2aXNpYmxlPzogYm9vbGVhbjtcbiAgICAvKipcbiAgICAgKiA8QGRlZmF1bHQ9J3JpZ2h0Jz5cbiAgICAgKiBzZWFyY2hiYXLlsZXlvIDnmoTmlrnlkJFcbiAgICAgKi9cbiAgICBhbmNob3I/OiAnbGVmdCcgfCAncmlnaHQnO1xuICAgIC8qKlxuICAgICAqIDxAZGVmYXVsdD1mYWxzZT5cbiAgICAgKiDmmK/lkKboh6rliqjogZrnhKZcbiAgICAgKi9cbiAgICBpc0ZvY3VzPzogYm9vbGVhbjtcbiAgICAvKipcbiAgICAgKiA8QGRlZmF1bHQ9ZmFsc2U+XG4gICAgICog5riF6Zmk5Y6G5Y+y6K6w5b2V5oyJ6ZKu5piv5ZCm5Y+v6KeBXG4gICAgICovXG4gICAgYWxsb3dDbGVhcj86IGJvb2xlYW47XG4gICAgLyoqIOi+k+WFpeahhuW6leaWhyAgKi9cbiAgICBwbGFjZWhvbGRlcj86IHN0cmluZztcbiAgICAvKiog6Ieq5a6a5LmJ5pCc57Si57uT5p6c6Z2i5p2/55qESGVhZGVyICAqL1xuICAgIHJlbmRlckhlYWRlcj86IChyb3dzOiBTZWFyY2hWYWx1ZVtdKSA9PiB2b2lkO1xuICAgIC8qKiDoh6rlrprkuYnmkJzntKLnu5PmnpzpnaLmnb/nmoRDb250ZW50ICAqL1xuICAgIHJlbmRlckNvbnRlbnQ/OiAob3B0aW9uczogQ29udGVudFByb3BzKSA9PiBzdHJpbmc7XG4gICAgLyoqIOeCueWHu+a4hemZpOWOhuWPsuiusOW9leaMiemSruWbnuiwgyAgKi9cbiAgICBjbGVhckhpc3Rvcnk/OiAoKSA9PiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgSW5pdGlhbFN0YXRlIHtcbiAgICByb3dzOiBTZWFyY2hWYWx1ZVtdO1xuICAgIHNlYXJjaFdvcmRzOiBzdHJpbmc7XG4gICAgaXNPcGVuOiBib29sZWFuO1xuICAgIGlzSGlzdG9yeTogYm9vbGVhbjtcbn1cblxuLy8g5Yik5pat5Lyg5YWl5pWw5o2u5piv5ZCm5Li65pWw57uE5LiU5LiN5Li656m6XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbmNvbnN0IGlzQXJyYXkgPSAoZGF0YTogYW55KTogYm9vbGVhbiA9PiB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgIHJldHVybiAhIWRhdGEubGVuZ3RoO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG5jb25zdCBTZWFyY2hCYXI6IFJlYWN0LlNGQzxTZWFyY2hCYXJQcm9wcz4gPSBwcm9wcyA9PiB7XG4gICAgY29uc3QgeyBpc0ZvY3VzID0gZmFsc2UsIHZpc2libGUgPSB0cnVlLCBwbGFjZWhvbGRlciB9ID0gcHJvcHM7XG4gICAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZTxJbml0aWFsU3RhdGU+KHtcbiAgICAgICAgaXNPcGVuOiBmYWxzZSxcbiAgICAgICAgaXNIaXN0b3J5OiBmYWxzZSxcbiAgICAgICAgc2VhcmNoV29yZHM6ICcnLFxuICAgICAgICByb3dzOiBbXSxcbiAgICB9KTtcbiAgICBjb25zdCB7IGlzT3BlbiwgaXNIaXN0b3J5LCBzZWFyY2hXb3Jkcywgcm93cyB9ID0gc3RhdGU7XG5cbiAgICAvLyDngrnlh7vnqbrnmb3mkJzntKLpnaLmnb/mtojlpLFcbiAgICBjb25zdCBoaWRlU2VhcmNoUGFuZWwgPSAoZTogTW91c2VFdmVudCk6IHZvaWQgPT4ge1xuICAgICAgICBjb25zdCB0bXBOb2RlOiBIVE1MRGl2RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb25zdCBub2RlOiBhbnkgPSBlLnRhcmdldDsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICB0bXBOb2RlLmFwcGVuZENoaWxkKG5vZGUuY2xvbmVOb2RlKHRydWUpKTtcbiAgICAgICAgaWYgKHRtcE5vZGUuaW5uZXJIVE1MLmluZGV4T2YoJ2lucHV0JykgIT09IDEgJiYgaXNPcGVuKSB7XG4gICAgICAgICAgICBzZXRTdGF0ZSh7IC4uLnN0YXRlLCBpc09wZW46IGZhbHNlIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IHF1ZXJ5RnV6enkgPSAobmV3U3RhdGU6IEluaXRpYWxTdGF0ZSk6IHZvaWQgPT4ge1xuICAgICAgICAvLyBjb25zdCB7IHNlYXJjaFdvcmRzIH0gPSBuZXdTdGF0ZTtcbiAgICAgICAgcHJvcHMub25TZWFyY2gobmV3U3RhdGUuc2VhcmNoV29yZHMpLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgIHNldFN0YXRlKHsgLi4ubmV3U3RhdGUsIHJvd3M6IHJlcywgaXNIaXN0b3J5OiBmYWxzZSB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGNvbnN0IHF1ZXJ5SGlzdG9yeSA9IChuZXdTdGF0ZTogSW5pdGlhbFN0YXRlKTogdm9pZCA9PiB7XG4gICAgICAgIGlmIChwcm9wcy5vblNlYXJjaEhpc3RvcnkpIHtcbiAgICAgICAgICAgIHByb3BzLm9uU2VhcmNoSGlzdG9yeSgpLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIC4uLm5ld1N0YXRlLFxuICAgICAgICAgICAgICAgICAgICByb3dzOiByZXMsXG4gICAgICAgICAgICAgICAgICAgIGlzSGlzdG9yeTogISFpc0FycmF5KHJlcyksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBvblNlYXJjaCA9IChuZXdTdGF0ZTogSW5pdGlhbFN0YXRlKTogdm9pZCA9PiB7XG4gICAgICAgIC8vIGNvbnN0IHsgc2VhcmNoV29yZHMgfSA9IG5ld1N0YXRlO1xuICAgICAgICBpZiAoIW5ld1N0YXRlLnNlYXJjaFdvcmRzICYmIHByb3BzLm9uU2VhcmNoSGlzdG9yeSkge1xuICAgICAgICAgICAgLy8g5b2T6L6T5YWl5Li656m655qE5pe25YCZ5pi+56S65Y6G5Y+y5pCc57Si6K6w5b2V77ya5Yid5qyh6L+b5YWlL+a4heepuuaQnOe0ouWtl+autVxuICAgICAgICAgICAgcXVlcnlIaXN0b3J5KG5ld1N0YXRlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHF1ZXJ5RnV6enkobmV3U3RhdGUpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IG9uRm9jdXMgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIC8vIOWOhuWPsua2iOaBr1xuICAgICAgICBpZiAoIXNlYXJjaFdvcmRzICYmIHByb3BzLm9uU2VhcmNoSGlzdG9yeSkge1xuICAgICAgICAgICAgcHJvcHMub25TZWFyY2hIaXN0b3J5KCkudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgIGlzT3BlbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNIaXN0b3J5OiAhIWlzQXJyYXkocmVzKSxcbiAgICAgICAgICAgICAgICAgICAgcm93czogcmVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9wcy5vblNlYXJjaChzZWFyY2hXb3JkcykudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgIHNldFN0YXRlKHsgLi4uc3RhdGUsIHJvd3M6IHJlcywgaXNPcGVuOiB0cnVlIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlQ2xvc2VQYW5lbCA9IChlID0gJycpOiB2b2lkID0+IHtcbiAgICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2VhcmNoV29yZHM6IGUsXG4gICAgICAgICAgICBpc0hpc3Rvcnk6IGZhbHNlLFxuICAgICAgICAgICAgaXNPcGVuOiBmYWxzZSxcbiAgICAgICAgICAgIHJvd3M6IFtdLFxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgY29uc3Qgb25FbnRlciA9IChlOiBSZWFjdC5LZXlib2FyZEV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KTogdm9pZCA9PiB7XG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IEVOVEVSX0tFWSAmJiBwcm9wcy5vbkVudGVyKSB7XG4gICAgICAgICAgICBwcm9wcy5vbkVudGVyKHNlYXJjaFdvcmRzKTtcbiAgICAgICAgICAgIGhhbmRsZUNsb3NlUGFuZWwoc2VhcmNoV29yZHMpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IG9uQ2hhbmdlID0gKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KTogdm9pZCA9PiB7XG4gICAgICAgIHNldFN0YXRlKHsgLi4uc3RhdGUsIHNlYXJjaFdvcmRzOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICB9O1xuXG4gICAgY29uc3QgcmVzZXRTZWFyY2hIaXN0b3J5ID0gKCk6IHZvaWQgPT4ge1xuICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICAgIGlzT3BlbjogdHJ1ZSxcbiAgICAgICAgICAgIGlzSGlzdG9yeTogZmFsc2UsXG4gICAgICAgICAgICByb3dzOiBbXSxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIOebtOaOpeWcqHVzZUVmZmVjdOWGheaJp+ihjGRlYm91bmNl5peg5pWI77yM5Y+v5Lul5L2/55SodXNlUmVm5oqK5Ye95pWw5a2Y6LW35p2lXG4gICAgLy8g5rOo5oSP77yadXNlUmVm5L+d5a2Y55qEc3RhdGXmmK/kuYvliY3nmoTvvIzlv4XpobvlsIblvZPliY3nmoRzdGF0ZeS9nOS4uuWPguaVsOS8oOi/m+adpe+8jOWQpuWImeWQjumdonNldFN0YXRl5Lya5pyJ6Zeu6aKYXG4gICAgY29uc3QgcmVmRGVib3VuY2UgPSB1c2VSZWYoZGVib3VuY2UoKG5ld1N0YXRlOiBJbml0aWFsU3RhdGUpID0+IG9uU2VhcmNoKG5ld1N0YXRlKSwgREVCT1VOQ0VfVElNRSkpO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoaWRlU2VhcmNoUGFuZWwpO1xuICAgICAgICByZXR1cm4gKCk6IHZvaWQgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoaWRlU2VhcmNoUGFuZWwpO1xuICAgICAgICB9O1xuICAgIH0pO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCF2aXNpYmxlKSB7XG4gICAgICAgICAgICBoYW5kbGVDbG9zZVBhbmVsKCk7XG4gICAgICAgIH1cbiAgICB9LCBbdmlzaWJsZV0pO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKHZpc2libGUpIHtcbiAgICAgICAgICAgIHJlZkRlYm91bmNlLmN1cnJlbnQoc3RhdGUpO1xuICAgICAgICB9XG4gICAgfSwgW3NlYXJjaFdvcmRzXSk7XG5cbiAgICByZXR1cm4gdmlzaWJsZSA/IChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3cmFwcGVyXCI+XG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAvLyByZWY9e2VsID0+IChlbCA/IGVsLmZvY3VzKCkgOiBudWxsKX1cbiAgICAgICAgICAgICAgICByZWY9eyhlbCk6IHZvaWQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWwgJiYgaXNGb2N1cyAmJiAhc2VhcmNoV29yZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIC8vIGFsbG93Q2xlYXJcbiAgICAgICAgICAgICAgICB2YWx1ZT17c2VhcmNoV29yZHN9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3BsYWNlaG9sZGVyfVxuICAgICAgICAgICAgICAgIHByZWZpeD17PEljb24gdHlwZT1cInNlYXJjaFwiIHN0eWxlPXt7IGNvbG9yOiAncmdiYSgwLCAwLCAwLCAuMjUpJyB9fSAvPn1cbiAgICAgICAgICAgICAgICBvbkZvY3VzPXtvbkZvY3VzfVxuICAgICAgICAgICAgICAgIG9uUHJlc3NFbnRlcj17b25FbnRlcn1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpOiB2b2lkID0+IG9uQ2hhbmdlKGUpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxTZWFyY2hQYW5lbFxuICAgICAgICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICAgICAgICByb3dzPXtyb3dzfVxuICAgICAgICAgICAgICAgIGlzT3Blbj17aXNPcGVufVxuICAgICAgICAgICAgICAgIGlzSGlzdG9yeT17aXNIaXN0b3J5fSAvLyDmmK/lkKbmmL7npLrljoblj7Lorr/pl67nmoRpbmZvXG4gICAgICAgICAgICAgICAgc2VhcmNoV29yZHM9e3NlYXJjaFdvcmRzfVxuICAgICAgICAgICAgICAgIGlzQXJyYXk9e2lzQXJyYXl9XG4gICAgICAgICAgICAgICAgaGFuZGxlQ2xvc2VQYW5lbD17aGFuZGxlQ2xvc2VQYW5lbH1cbiAgICAgICAgICAgICAgICByZXNldFNlYXJjaEhpc3Rvcnk9e3Jlc2V0U2VhcmNoSGlzdG9yeX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICkgOiBudWxsO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU2VhcmNoQmFyO1xuIiwiaW1wb3J0IFNlYXJjaEJhciBmcm9tICcuL1NlYXJjaEJhcic7XG5cbmV4cG9ydCBkZWZhdWx0IFNlYXJjaEJhcjtcbiIsImltcG9ydCB7IGNoYWluIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IENoZWNrYm94RGF0YVByb3BzLCBDaGVja2JveFZhbHVlVHlwZSB9IGZyb20gJy4uL2ludGVyZmFjZSc7XG5cbmludGVyZmFjZSBHcm91cGVkSXRlbXNQcm9wcyB7XG4gICAgZ3JvdXBzOiBBcnJheTxDaGVja2JveERhdGFQcm9wcz47XG4gICAga2V5OiBzdHJpbmc7XG59XG5cbi8vIOagkeiKgueCueeahOWLvumAieeKtuaAgVxuY29uc3QgZ2V0Q2hlY2tlZEtleXMgPSAoZGF0YTogQXJyYXk8Q2hlY2tib3hEYXRhUHJvcHM+LCBjaGVja2VkTGlzdDogQXJyYXk8Q2hlY2tib3hWYWx1ZVR5cGU+KSA9PiB7XG4gICAgY29uc3QgY2hlY2tlZDogQXJyYXk8c3RyaW5nPiA9IFtdO1xuICAgIGNvbnN0IGhhbGZDaGVja2VkOiBBcnJheTxzdHJpbmc+ID0gW107XG4gICAgY29uc3QgZ3JvdXBlZEl0ZW1zID0gY2hhaW4oZGF0YSlcbiAgICAgICAgLmdyb3VwQnkoKGl0ZW06IENoZWNrYm94RGF0YVByb3BzKSA9PiBpdGVtLmtleSlcbiAgICAgICAgLm1hcCgoZ3JvdXBzOiBBcnJheTxDaGVja2JveERhdGFQcm9wcz4sIGtleTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICBncm91cHMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KVxuICAgICAgICAudmFsdWUoKTtcblxuICAgIGdyb3VwZWRJdGVtcy5mb3JFYWNoKChpdGVtOiBHcm91cGVkSXRlbXNQcm9wcykgPT4ge1xuICAgICAgICBjb25zdCB7IGdyb3VwcyB9ID0gaXRlbTtcbiAgICAgICAgY29uc3QgZmlsdGVySXRlbXMgPSBncm91cHMuZmlsdGVyKGUgPT4gY2hlY2tlZExpc3QuaW5jbHVkZXMoZS52YWx1ZSkpO1xuXG4gICAgICAgIGlmIChncm91cHMubGVuZ3RoID09PSBmaWx0ZXJJdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNoZWNrZWQucHVzaChpdGVtLmtleSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmlsdGVySXRlbXMubGVuZ3RoICYmIGdyb3Vwcy5sZW5ndGggPiBmaWx0ZXJJdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGhhbGZDaGVja2VkLnB1c2goaXRlbS5rZXkpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBjaGVja2VkLFxuICAgICAgICBoYWxmQ2hlY2tlZCxcbiAgICB9O1xufTtcbmV4cG9ydCBkZWZhdWx0IGdldENoZWNrZWRLZXlzO1xuIiwiaW1wb3J0IGdldENoZWNrZWRLZXlzIGZyb20gJy4vZ2V0Q2hlY2tlZEtleXMnO1xuXG5leHBvcnQgZGVmYXVsdCBnZXRDaGVja2VkS2V5cztcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBUcmVlIH0gZnJvbSAnYW50ZCc7XG5pbXBvcnQgeyBpc0VxdWFsLCBkaWZmZXJlbmNlIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IEFudFRyZWVOb2RlQ2hlY2tlZEV2ZW50IH0gZnJvbSAnYW50ZC9lcy9UcmVlJztcbmltcG9ydCBFbmhhbmNlZENoZWNrYm94IGZyb20gJy4uL0VuaGFuY2VkQ2hlY2tib3gnO1xuaW1wb3J0IHsgQ2hlY2tib3hWYWx1ZVR5cGUsIENoZWNrYm94RGF0YVByb3BzLCBUcmVlRGF0YVByb3BzIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuaW1wb3J0IGdldENoZWNrZWRLZXlzIGZyb20gJy4vZnVuY3Rpb25zL2luZGV4JztcbmltcG9ydCAnLi9UcmVlU2VsZWN0b3IubGVzcyc7XG5cbmNvbnN0IHsgVHJlZU5vZGUgfSA9IFRyZWU7XG5cbmludGVyZmFjZSBDaGVja2VkS2V5cyB7XG4gICAgY2hlY2tlZDogQXJyYXk8c3RyaW5nPjtcbiAgICBoYWxmQ2hlY2tlZDogQXJyYXk8c3RyaW5nPjtcbn1cblxuaW50ZXJmYWNlIFRyZWVTZWxlY3RvclN0YXRlIHtcbiAgICBjaGVja2JveERhdGE6IEFycmF5PENoZWNrYm94RGF0YVByb3BzPjtcbiAgICBjaGVja2VkTGlzdDogQXJyYXk8Q2hlY2tib3hWYWx1ZVR5cGU+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRyZWVTZWxlY3RvclByb3BzIHtcbiAgICAvKiog5rqQ5pWw5o2u77yIa2V5IOWcqOaVtOS4quagkeiMg+WbtOWGheWUr+S4gO+8iSAgKi9cbiAgICBkYXRhOiBBcnJheTxUcmVlRGF0YVByb3BzPjtcbiAgICAvKiog5Y+z5L6n5a2Q6IqC54K55qCF5qC85Y2g5L2N5qC85pWwICAqL1xuICAgIHNwYW4/OiBudW1iZXI7XG4gICAgLyoqIOWuueWZqOeahOiHquWumuS5ieagt+W8jyAgKi9cbiAgICBzdHlsZT86IG9iamVjdDtcbiAgICAvKiog5bem5L6n5qCR6YCJ5oup5qGG5a655Zmo55qE6Ieq5a6a5LmJ5qC35byPICAqL1xuICAgIHRyZWVTdHlsZT86IG9iamVjdDtcbiAgICAvKiog6buY6K6k5bGV5byA5oyH5a6a55qE5qCR6IqC54K577yI5Y+q6IO95bGV5byA5LiA6aG577yJICAqL1xuICAgIGRlZmF1bHRFeHBhbmRlZEtleT86IHN0cmluZztcbiAgICAvKiog77yI5Y+X5o6n77yJ6YCJ5Lit5qCR55qE5a2Q6IqC54K577yI5rOo5oSP77ya5a2Q6IqC54K5IGtleSDkvKDlhaXvvIzniLboioLngrnoh6rliqjpgInkuK3vvIkgICovXG4gICAgY2hlY2tlZExpc3Q/OiBBcnJheTxDaGVja2JveFZhbHVlVHlwZT47XG4gICAgLyoqIOmAieS4reiKgueCueWPmOWMluaXtuWbnuiwgyAgKi9cbiAgICBvbkNoYW5nZT86IChjaGVja2VkVmFsdWU6IEFycmF5PENoZWNrYm94VmFsdWVUeXBlPikgPT4gdm9pZDtcbn1cblxuY2xhc3MgVHJlZVNlbGVjdG9yIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxUcmVlU2VsZWN0b3JQcm9wcywgVHJlZVNlbGVjdG9yU3RhdGU+IHtcbiAgICBjaGlsZE5vZGVzOiBBcnJheTxDaGVja2JveERhdGFQcm9wcz47XG5cbiAgICB0cmVlTm9kZUtleXM6IEFycmF5PENoZWNrYm94VmFsdWVUeXBlPjtcblxuICAgIGNoaWxkTm9kZUtleXM6IEFycmF5PENoZWNrYm94VmFsdWVUeXBlPjtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBUcmVlU2VsZWN0b3JQcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuY2hpbGROb2RlcyA9IFtdOyAvLyDmiYDmnInlrZDoioLngrnnmoTmlbDmja7pm4blkIhcbiAgICAgICAgdGhpcy50cmVlTm9kZUtleXMgPSBbXTsgLy8g6YCJ5Lit5qCR6IqC54K555qEa2V5XG4gICAgICAgIHRoaXMuY2hpbGROb2RlS2V5cyA9IFtdOyAvLyDpgInkuK3lrZDoioLngrnnmoRrZXlcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGNoZWNrYm94RGF0YTogW10sIC8vIOWtkOiKgueCueaVsOaNrlxuICAgICAgICAgICAgY2hlY2tlZExpc3Q6IFtdLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGRhdGEgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIHRoaXMuaW5pdChkYXRhKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBUcmVlU2VsZWN0b3JQcm9wcyk6IHZvaWQge1xuICAgICAgICAvLyDkvKDlhaXmlbDmja7lj5jljJbml7bvvIzph43mlrDliJ3lp4vljJbmlbDmja5cbiAgICAgICAgY29uc3QgeyBkYXRhLCBjaGVja2VkTGlzdCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgaWYgKCFpc0VxdWFsKHByZXZQcm9wcy5kYXRhLCBkYXRhKSkge1xuICAgICAgICAgICAgdGhpcy5jaGlsZE5vZGVLZXlzID0gY2hlY2tlZExpc3Q7XG4gICAgICAgICAgICB0aGlzLmluaXQoZGF0YSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDmlbDmja7liJ3lp4vljJZcbiAgICBpbml0ID0gKGRhdGE6IEFycmF5PFRyZWVEYXRhUHJvcHM+KTogdm9pZCA9PiB7XG4gICAgICAgIGNvbnN0IHsgZGVmYXVsdEV4cGFuZGVkS2V5IH0gPSB0aGlzLnByb3BzO1xuICAgICAgICB0aGlzLmNoaWxkTm9kZXMuc3BsaWNlKDApO1xuICAgICAgICB0aGlzLnJlbmRlckNoZWNrYm94Tm9kZXMoZGF0YSk7XG4gICAgICAgIGNvbnN0IGNoZWNrYm94RGF0YSA9IHRoaXMuY2hpbGROb2Rlcy5maWx0ZXIoaXRlbSA9PiBpdGVtLmtleSA9PT0gZGVmYXVsdEV4cGFuZGVkS2V5KTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGNoZWNrYm94RGF0YSB9KTtcbiAgICAgICAgLy8gcmV0dXJuIGNoZWNrYm94RGF0YTtcbiAgICB9O1xuXG4gICAgLy8g54K55Ye75qCR6IqC54K5XG4gICAgb25TZWxlY3QgPSAoc2VsZWN0ZWRLZXlzOiBBcnJheTxzdHJpbmc+KTogdm9pZCA9PiB7XG4gICAgICAgIGlmIChzZWxlY3RlZEtleXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBjaGVja2JveERhdGEgPSB0aGlzLmNoaWxkTm9kZXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5rZXkgPT09IHNlbGVjdGVkS2V5c1swXSk7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgY2hlY2tib3hEYXRhIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIOWLvumAieagkeiKgueCuVxuICAgIG9uQ2hlY2sgPSAoY2hlY2tlZEtleXM6IEFycmF5PHN0cmluZz4gfCBDaGVja2VkS2V5cywgZTogQW50VHJlZU5vZGVDaGVja2VkRXZlbnQpOiB2b2lkID0+IHtcbiAgICAgICAgY29uc3QgeyBjaGVja2VkTGlzdCwgb25DaGFuZ2UgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGNvbnN0IGNoZWNrZWQgPSBjaGVja2VkS2V5cyBpbnN0YW5jZW9mIEFycmF5ID8gY2hlY2tlZEtleXMgOiBjaGVja2VkS2V5cy5jaGVja2VkO1xuICAgICAgICBjb25zdCBjaGFuZ2VkS2V5cyA9IGUuY2hlY2tlZCA/IGRpZmZlcmVuY2UoY2hlY2tlZCwgdGhpcy50cmVlTm9kZUtleXMpIDogZGlmZmVyZW5jZSh0aGlzLnRyZWVOb2RlS2V5cywgY2hlY2tlZCk7XG4gICAgICAgIGNvbnN0IGNoZWNrYm94RGF0YSA9IHRoaXMuY2hpbGROb2Rlcy5maWx0ZXIoaXRlbSA9PiBjaGFuZ2VkS2V5cy5pbmNsdWRlcyhpdGVtLmtleSkpO1xuICAgICAgICBjb25zdCBvcmlnaW5WYWx1ZXMgPSBjaGVja2JveERhdGEubWFwKGl0ZW0gPT4gaXRlbS52YWx1ZSk7XG5cbiAgICAgICAgaWYgKGNoZWNrZWRMaXN0KSB7XG4gICAgICAgICAgICB0aGlzLmNoaWxkTm9kZUtleXMgPSBjaGVja2VkTGlzdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlLmNoZWNrZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY2hpbGROb2RlS2V5cy5wdXNoKC4uLm9yaWdpblZhbHVlcyk7XG4gICAgICAgICAgICB0aGlzLmNoaWxkTm9kZUtleXMgPSBbLi4ubmV3IFNldCh0aGlzLmNoaWxkTm9kZUtleXMpXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2hpbGROb2RlS2V5cyA9IGRpZmZlcmVuY2UodGhpcy5jaGlsZE5vZGVLZXlzLCBvcmlnaW5WYWx1ZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9uQ2hhbmdlKSB7XG4gICAgICAgICAgICBvbkNoYW5nZSh0aGlzLmNoaWxkTm9kZUtleXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBjaGVja2JveERhdGEsXG4gICAgICAgICAgICBjaGVja2VkTGlzdDogdGhpcy5jaGlsZE5vZGVLZXlzLFxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8g5Yu+6YCJ5a2Q6IqC54K5XG4gICAgb25DaGFuZ2VDaGlsZEtleXMgPSAoa2V5czogQXJyYXk8Q2hlY2tib3hWYWx1ZVR5cGU+KTogdm9pZCA9PiB7XG4gICAgICAgIGNvbnN0IHsgY2hlY2tlZExpc3QsIG9uQ2hhbmdlIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgICAgIGNvbnN0IHsgY2hlY2tib3hEYXRhIH0gPSB0aGlzLnN0YXRlO1xuICAgICAgICBjb25zdCBvcmlnaW5WYWx1ZXMgPSBjaGVja2JveERhdGEubWFwKGl0ZW0gPT4gaXRlbS52YWx1ZSk7XG4gICAgICAgIGNvbnN0IGNoYW5nZWRLZXlzID0gZGlmZmVyZW5jZShvcmlnaW5WYWx1ZXMsIGtleXMpO1xuXG4gICAgICAgIGlmIChjaGVja2VkTGlzdCkge1xuICAgICAgICAgICAgdGhpcy5jaGlsZE5vZGVLZXlzID0gY2hlY2tlZExpc3Q7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNoaWxkTm9kZUtleXMucHVzaCguLi5rZXlzKTtcbiAgICAgICAgdGhpcy5jaGlsZE5vZGVLZXlzID0gZGlmZmVyZW5jZShbLi4ubmV3IFNldCh0aGlzLmNoaWxkTm9kZUtleXMpXSwgY2hhbmdlZEtleXMpO1xuXG4gICAgICAgIGlmIChvbkNoYW5nZSkge1xuICAgICAgICAgICAgb25DaGFuZ2UodGhpcy5jaGlsZE5vZGVLZXlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBjaGVja2VkTGlzdDogdGhpcy5jaGlsZE5vZGVLZXlzIH0pO1xuICAgIH07XG5cbiAgICAvLyDmoLnmja7liJ3lp4vmlbDmja7lvpfliLDmiYDmnInlrZDoioLngrnnmoTmlbDmja7pm4blkIhcbiAgICByZW5kZXJDaGVja2JveE5vZGVzID0gKGRhdGE6IEFycmF5PFRyZWVEYXRhUHJvcHM+LCBrZXk/OiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgICAgICAgZGF0YS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNoZWNrYm94Tm9kZXMoaXRlbS5jaGlsZHJlbiwgaXRlbS5rZXkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoaWxkTm9kZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGl0ZW0udGl0bGUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLmtleSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJlbmRlclRyZWVOb2RlcyA9IChkYXRhOiBBcnJheTxUcmVlRGF0YVByb3BzPikgPT5cbiAgICAgICAgZGF0YS5tYXAoaXRlbSA9PiB7XG4gICAgICAgICAgICBpZiAoaXRlbS5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxUcmVlTm9kZSB0aXRsZT17aXRlbS50aXRsZX0ga2V5PXtpdGVtLmtleX0+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJUcmVlTm9kZXMoaXRlbS5jaGlsZHJlbil9XG4gICAgICAgICAgICAgICAgICAgIDwvVHJlZU5vZGU+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9KTtcblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgeyBjaGVja2JveERhdGEsIGNoZWNrZWRMaXN0OiBjaGVja2VkTGlzdFN0YXRlIH0gPSB0aGlzLnN0YXRlO1xuICAgICAgICBjb25zdCB7IGRhdGEsIHNwYW4sIHN0eWxlLCB0cmVlU3R5bGUsIGRlZmF1bHRFeHBhbmRlZEtleSwgY2hlY2tlZExpc3Q6IGNoZWNrZWRMaXN0UHJvcHMgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIC8vIGNvbnN0IGNoZWNrZWRMaXN0ID0gdGhpcy5wcm9wcy5jaGVja2VkTGlzdCA/IHRoaXMucHJvcHMuY2hlY2tlZExpc3QgOiB0aGlzLnN0YXRlLmNoZWNrZWRMaXN0O1xuICAgICAgICBsZXQgY2hlY2tlZExpc3QgPSBjaGVja2VkTGlzdFN0YXRlO1xuICAgICAgICBpZiAoY2hlY2tlZExpc3RQcm9wcykge1xuICAgICAgICAgICAgY2hlY2tlZExpc3QgPSBjaGVja2VkTGlzdFByb3BzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNoZWNrZWRLZXlzID0gZ2V0Q2hlY2tlZEtleXModGhpcy5jaGlsZE5vZGVzLCBjaGVja2VkTGlzdCk7XG4gICAgICAgIHRoaXMudHJlZU5vZGVLZXlzID0gY2hlY2tlZEtleXMuY2hlY2tlZDtcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJjaGVja2VkTGlzdFwiLCBjaGVja2VkTGlzdCk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidHJlZV9zZWxlY3Rvcl93cmFwcGVyXCIgc3R5bGU9e3N0eWxlfT5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRyZWVfd3JhcHBlclwiIHN0eWxlPXt0cmVlU3R5bGV9PlxuICAgICAgICAgICAgICAgICAgICA8VHJlZVxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2thYmxlXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja1N0cmljdGx5XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkS2V5cz17Y2hlY2tlZEtleXN9XG4gICAgICAgICAgICAgICAgICAgICAgICBvblNlbGVjdD17dGhpcy5vblNlbGVjdH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hlY2s9e3RoaXMub25DaGVja31cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRFeHBhbmRlZEtleXM9e1tkZWZhdWx0RXhwYW5kZWRLZXldfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJUcmVlTm9kZXMoZGF0YSl9XG4gICAgICAgICAgICAgICAgICAgIDwvVHJlZT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxpbmVcIiAvPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2hlY2tib3hfd3JhcHBlclwiPlxuICAgICAgICAgICAgICAgICAgICA8RW5oYW5jZWRDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucz17Y2hlY2tib3hEYXRhfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZExpc3Q9e2NoZWNrZWRMaXN0fVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25DaGFuZ2VDaGlsZEtleXN9XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1NlbGVjdEFsbD17ZmFsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFuPXtzcGFufVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUcmVlU2VsZWN0b3I7XG4iLCJpbXBvcnQgVHJlZVNlbGVjdG9yIGZyb20gJy4vVHJlZVNlbGVjdG9yJztcblxuZXhwb3J0IGRlZmF1bHQgVHJlZVNlbGVjdG9yO1xuIiwiaW1wb3J0IEVuaGFuY2VkQ2hlY2tib3ggZnJvbSAnLi9FbmhhbmNlZENoZWNrYm94JztcbmltcG9ydCBGb2xkaW5nUGFuZWwgZnJvbSAnLi9Gb2xkaW5nUGFuZWwnO1xuaW1wb3J0IEl0ZW0gZnJvbSAnLi9JdGVtL0l0ZW0nO1xuaW1wb3J0IHsgTGF5b3V0LCBTaWRlLCBIZWFkZXIsIE1haW4sIEZvb3RlciB9IGZyb20gJy4vTGF5b3V0JztcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuL1Byb3BlcnR5JztcbmltcG9ydCBTZWFyY2hCYXIgZnJvbSAnLi9TZWFyY2hCYXInO1xuaW1wb3J0IFRvb2xCYXIgZnJvbSAnLi9Ub29sQmFyJztcbmltcG9ydCBUcmVlU2VsZWN0b3IgZnJvbSAnLi9UcmVlU2VsZWN0b3InO1xuXG5leHBvcnQge1xuICAgIEVuaGFuY2VkQ2hlY2tib3gsXG4gICAgRm9sZGluZ1BhbmVsLFxuICAgIEl0ZW0sXG4gICAgTGF5b3V0LFxuICAgIFNpZGUsXG4gICAgSGVhZGVyLFxuICAgIE1haW4sXG4gICAgRm9vdGVyLFxuICAgIFByb3BlcnR5LFxuICAgIFNlYXJjaEJhcixcbiAgICBUb29sQmFyLFxuICAgIFRyZWVTZWxlY3Rvcixcbn07XG4iLCJpbXBvcnQgeyBTZWFyY2hWYWx1ZSB9IGZyb20gJy4vaW50ZXJmYWNlJztcblxuY29uc3QgZ2V0TWF0Y2hXb3JkcyA9IChpdGVtOiBTZWFyY2hWYWx1ZSkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgICAgZGF0YTogeyBpZCwgbGFiZWwgfSxcbiAgICAgICAgc2VhcmNoVHlwZXMsXG4gICAgfSA9IGl0ZW07XG4gICAgcmV0dXJuIHNlYXJjaFR5cGVzLnJlZHVjZSgoYWNjOiBzdHJpbmcsIGN1cnI6IHN0cmluZykgPT4ge1xuICAgICAgICBsZXQgY3VycmVudFRleHQgPSAnJztcbiAgICAgICAgc3dpdGNoIChjdXJyKSB7XG4gICAgICAgICAgICBjYXNlICdpZCc6XG4gICAgICAgICAgICAgICAgY3VycmVudFRleHQgPSBTdHJpbmcoaWQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbGFiZWwnOlxuICAgICAgICAgICAgICAgIGN1cnJlbnRUZXh0ID0gU3RyaW5nKGxhYmVsKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGAke2FjY30gICR7Y3VycmVudFRleHR9YDtcbiAgICB9LCAnJyk7XG59O1xuXG5jb25zdCB0cmFuc2Zvcm1TZWFyY2hWYWx1ZSA9IChkYXRhOiBTZWFyY2hWYWx1ZVtdKSA9PiB7XG4gICAgY29uc3QgZmlsdGVyRGF0YSA9IGRhdGEuZmlsdGVyKGl0ZW0gPT4ge1xuICAgICAgICBjb25zdCB7IHNlYXJjaFR5cGVzIH0gPSBpdGVtO1xuICAgICAgICByZXR1cm4gc2VhcmNoVHlwZXMuaW5kZXhPZigncHJvcGVydHknKSA9PT0gLTE7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZpbHRlckRhdGEubWFwKGl0ZW0gPT4ge1xuICAgICAgICBjb25zdCBtYXRjaFdvcmRzID0gZ2V0TWF0Y2hXb3JkcyhpdGVtKTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihpdGVtLCB7IG5hbWU6IG1hdGNoV29yZHMgfSk7XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdHJhbnNmb3JtU2VhcmNoVmFsdWU7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsYXNzZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgeyBTZWFyY2hCYXIgfSBmcm9tICdAY29tJztcbmltcG9ydCB7IFNlYXJjaFZhbHVlLCBDb250ZW50UHJvcHMsIFNlYXJjaEJhckNvbnRhaW5lckJhclByb3BzIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHRyYW5zZm9ybVNlYXJjaFZhbHVlIGZyb20gJy4vdHJhbnNmb3JtU2VhcmNoVmFsdWUnO1xuaW1wb3J0ICcuL2luZGV4Lmxlc3MnO1xuXG5jb25zdCBTZWFyY2hCYXJDb250YWluZXI6IFJlYWN0LkZDPFNlYXJjaEJhckNvbnRhaW5lckJhclByb3BzPiA9IHByb3BzID0+IHtcbiAgICBjb25zdCB7IHN0YXRlIH0gPSBwcm9wcztcbiAgICBjb25zdCB7XG4gICAgICAgIHNlYXJjaEJhcjogeyB2aXNpYmxlIH0sXG4gICAgICAgIGRhdGE6IHsgbm9kZXMgfSxcbiAgICAgICAgZ3JhcGhSZWYsXG4gICAgICAgIHRvb2xiYXI6IHsgZGlyZWN0aW9uIH0sXG4gICAgfSA9IHN0YXRlO1xuICAgIGNvbnN0IGFwaXMgPSBncmFwaFJlZi5jdXJyZW50LmdldEFwaXMoKTtcblxuICAgIGNvbnN0IG9uU2VhcmNoID0gKHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPFNlYXJjaFZhbHVlW10+KHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXBpcy5zZWFyY2godmFsdWUpO1xuICAgICAgICAgICAgLy8g5pWw5o2u5Lit5b+F6aG75YyF5ZCrbmFtZeWxnuaAp1xuICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtVmFsdWUgPSB0cmFuc2Zvcm1TZWFyY2hWYWx1ZShyZXN1bHQpO1xuICAgICAgICAgICAgcmVzb2x2ZSh0cmFuc2Zvcm1WYWx1ZSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBjb25zdCBvblNlYXJjaEhpc3RvcnkgPSAoKSA9PiB7XG4gICAgICAgIC8vIFRPRE866I635Y+W5b2T5YmN55S75biD55qE5pCc57Si5Y6G5Y+y6K6w5b2VXG4gICAgICAgIGNvbnN0IHJlc3VsdDogU2VhcmNoVmFsdWVbXSA9IFtdO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8U2VhcmNoVmFsdWVbXT4ocmVzb2x2ZSA9PiByZXNvbHZlKHJlc3VsdCkpO1xuICAgIH07XG5cbiAgICBjb25zdCBvblNlbGVjdCA9IChlOiBTZWFyY2hWYWx1ZSkgPT4ge1xuICAgICAgICBjb25zdCB7IGlkIH0gPSBlO1xuICAgICAgICBub2Rlcy5mb3JFYWNoKChpdGVtOiBTZWFyY2hWYWx1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGl0ZW0uaWQgPT09IGlkKSB7XG4gICAgICAgICAgICAgICAgYXBpcy5oaWdobGlnaHQoW2lkXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBUT0RPOuWOhuWPsuiusOW9leWtmOWCqOWIsGxvY2FsU3RvcmFnZeS4rVxuICAgIH07XG5cbiAgICBjb25zdCByZW5kZXJDb250ZW50ID0gKG9wdGlvbnM6IENvbnRlbnRQcm9wcykgPT4ge1xuICAgICAgICBjb25zdCB7IGl0ZW0sIGhpZ2hsaWdodCwgc2VhcmNoV29yZHMgfSA9IG9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHRleHQgPSBoaWdobGlnaHQoc2VhcmNoV29yZHMsIGl0ZW0ubmFtZSk7XG4gICAgICAgIHJldHVybiBgPHNwYW4+JHt0ZXh0fTwvc3Bhbj5gO1xuICAgIH07XG5cbiAgICBjb25zdCBjbGVhckhpc3RvcnkgPSAoKSA9PiB7XG4gICAgICAgIC8vIFRPRE865riF56m65b2T5YmN55S75biD55qE5pCc57Si5Y6G5Y+y6K6w5b2VXG4gICAgfTtcblxuICAgIGNvbnN0IHJvb3RDbGFzcyA9IGNsYXNzZXMoJ3NlYXJjaEJhci1jb250YWluZXInLCBkaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJyA/ICdzZWFyY2gtYmVsb3ctdG9vbGJhcicgOiAnJyk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17cm9vdENsYXNzfT5cbiAgICAgICAgICAgIDxTZWFyY2hCYXJcbiAgICAgICAgICAgICAgICB2aXNpYmxlPXt2aXNpYmxlfVxuICAgICAgICAgICAgICAgIGlzRm9jdXNcbiAgICAgICAgICAgICAgICBhbGxvd0NsZWFyXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCLor7fovpPlhaXmkJzntKLnmoToioLngrlpZOaIlmxhYmVsXCJcbiAgICAgICAgICAgICAgICBvblNlYXJjaD17b25TZWFyY2h9XG4gICAgICAgICAgICAgICAgb25TZWFyY2hIaXN0b3J5PXtvblNlYXJjaEhpc3Rvcnl9XG4gICAgICAgICAgICAgICAgb25TZWxlY3Q9e29uU2VsZWN0fVxuICAgICAgICAgICAgICAgIHJlbmRlckNvbnRlbnQ9e3JlbmRlckNvbnRlbnR9XG4gICAgICAgICAgICAgICAgY2xlYXJIaXN0b3J5PXtjbGVhckhpc3Rvcnl9XG4gICAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU2VhcmNoQmFyQ29udGFpbmVyO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFJhZGlvIH0gZnJvbSAnYW50ZCc7XG5pbXBvcnQgeyBSYWRpb0NoYW5nZUV2ZW50IH0gZnJvbSAnYW50ZC9saWIvcmFkaW8vaW50ZXJmYWNlJztcbmltcG9ydCB7IFRoZW1lUHJvcHMgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5cbmNvbnN0IFRoZW1lOiBSZWFjdC5GQzxUaGVtZVByb3BzPiA9IHByb3BzID0+IHtcbiAgICBjb25zdCB7IGRpc3BhdGNoLCBzdGF0ZSB9ID0gcHJvcHM7XG4gICAgY29uc3QgeyB0aGVtZSB9ID0gc3RhdGU7XG4gICAgY29uc3QgaGFuZGxlQ2hhbmdlID0gKGU6IFJhZGlvQ2hhbmdlRXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgeyB2YWx1ZSB9ID0gZS50YXJnZXQ7XG4gICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdncmFwaC90aGVtZScsXG4gICAgICAgICAgICBwYXlsb2FkOiB2YWx1ZSxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPFJhZGlvLkdyb3VwIG5hbWU9XCJyYWRpb2dyb3VwXCIgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX0gdmFsdWU9e3RoZW1lfT5cbiAgICAgICAgICAgICAgICA8UmFkaW8gdmFsdWU9XCJsaWdodFwiPueZveWkqeS4u+mimDwvUmFkaW8+XG4gICAgICAgICAgICAgICAgPFJhZGlvIHZhbHVlPVwiZGFya1wiIGRpc2FibGVkPlxuICAgICAgICAgICAgICAgICAgICDpu5HlpJzkuLvpophcbiAgICAgICAgICAgICAgICA8L1JhZGlvPlxuICAgICAgICAgICAgPC9SYWRpby5Hcm91cD5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFRoZW1lO1xuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgVHdpdHRlclBpY2tlciB9IGZyb20gJ3JlYWN0LWNvbG9yJztcbmltcG9ydCB7IENvbG9yUGlja2VyUHJvcHMsIENvbG9yUHJvcHMsIENvbG9yU3BhblByb3BzIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuXG5jb25zdCBDb2xvclNwYW4gPSAocHJvcHM6IENvbG9yU3BhblByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBjb2xvciwgb25DbGljayB9ID0gcHJvcHM7XG4gICAgY29uc3Qgc3R5bGVzID0ge1xuICAgICAgICBiYWNrZ3JvdW5kOiBjb2xvcixcbiAgICAgICAgaGVpZ2h0OiAnMjBweCcsXG4gICAgICAgIHdpZHRoOiAnMjBweCcsXG4gICAgICAgIGJvcmRlclJhZGl1czogJzRweCcsXG4gICAgfTtcbiAgICBjb25zdCB0ZXh0ID0gJyc7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiByb2xlPVwiYnV0dG9uXCIgdGFiSW5kZXg9ezB9IHN0eWxlPXtzdHlsZXN9IG9uQ2xpY2s9e29uQ2xpY2t9IG9uS2V5UHJlc3M9e29uQ2xpY2t9PlxuICAgICAgICAgICAge3RleHR9XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59O1xuXG5jb25zdCBDb2xvclBpY2tlcjogUmVhY3QuRkM8Q29sb3JQaWNrZXJQcm9wcz4gPSBwcm9wcyA9PiB7XG4gICAgY29uc3QgeyBkZWZhdWx0Q29sb3IgfSA9IHByb3BzO1xuICAgIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGUoe1xuICAgICAgICBjb2xvcjogZGVmYXVsdENvbG9yLFxuICAgICAgICBpc09wZW46IGZhbHNlLFxuICAgIH0pO1xuICAgIGNvbnN0IHsgdHlwZSwgbmFtZSB9ID0gcHJvcHM7XG4gICAgY29uc3QgeyBjb2xvciwgaXNPcGVuIH0gPSBzdGF0ZTtcblxuICAgIGNvbnN0IHRvb2dsZUNvbG9yUGlja2VyID0gKCkgPT4ge1xuICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICAgIGlzT3BlbjogIWlzT3BlbixcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBjaGFuZ2VDb2xvciA9IChlOiBDb2xvclByb3BzKSA9PiB7XG4gICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICAgIC4uLnN0YXRlLFxuICAgICAgICAgICAgY29sb3I6IGUuaGV4LFxuICAgICAgICB9KTtcblxuICAgICAgICBwcm9wcy5vbkNoYW5nZShwcm9wcy50eXBlLCBlLmhleCk7XG4gICAgfTtcblxuICAgIGNvbnN0IHN0eWxlcyA9IHtcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLFxuICAgICAgICBwYWRkaW5nOiAnMTVweCcsXG4gICAgfTtcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGRpdiBzdHlsZT17c3R5bGVzfT5cbiAgICAgICAgICAgICAgICB7bmFtZX0ge3R5cGV9XG4gICAgICAgICAgICAgICAgPENvbG9yU3BhbiBpc09wZW49e2lzT3Blbn0gY29sb3I9e2NvbG9yfSBvbkNsaWNrPXt0b29nbGVDb2xvclBpY2tlcn0gLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAge2lzT3BlbiAmJiA8VHdpdHRlclBpY2tlciBjb2xvcj17Y29sb3J9IG9uQ2hhbmdlQ29tcGxldGU9e2NoYW5nZUNvbG9yfSAvPn1cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IENvbG9yUGlja2VyO1xuIiwiZXhwb3J0IGNvbnN0IGdldFR5cGUgPSA8VD4odmFsdWU6IFQpID0+IHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKTtcbn07XG5leHBvcnQgY29uc3QgbWFwVG9Kc29uID0gPFQ+KG1hcDogTWFwPFQsIFQ+KSA9PiB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KFsuLi5tYXBdKTtcbn07XG5leHBvcnQgY29uc3QganNvblRvTWFwID0gKGpzb25TdHI6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiBuZXcgTWFwKEpTT04ucGFyc2UoanNvblN0cikpO1xufTtcbmNsYXNzIExvY2FsU3RvcmFnZSB7XG4gICAgbmFtZXNwYWNlOiBzdHJpbmc7XG5cbiAgICBzdG9yYWdlOiBTdG9yYWdlO1xuXG4gICAgaW5uZXJWYWx1ZVR5cGU6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKG5hbWVzcGFjZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMubmFtZXNwYWNlID0gbmFtZXNwYWNlOyAvLyDmr5TlpoJJTElOS++8jOWQjue7reWKn+iDveWKoOS4ilxuICAgICAgICB0aGlzLnN0b3JhZ2UgPSB3aW5kb3cubG9jYWxTdG9yYWdlO1xuICAgICAgICB0aGlzLmlubmVyVmFsdWVUeXBlID0gYCR7dGhpcy5uYW1lc3BhY2V9X2lubmVyX3ZhbHVlX3R5cGVgO1xuICAgIH1cblxuICAgIHNldFZlcnNpb24gPSAodmVyc2lvbj86IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAodGhpcy5nZXQoJ3ZlcnNpb24nKSAhPT0gdmVyc2lvbikge1xuICAgICAgICAgICAgLy8gdmVyc2lvbiDkuLp1bmRlZmluZWQg5YiZ6KGo5piO56ys5LiA5qyh5oiW6ICF5piv5riF56m657yT5a2Y5ZCO55qE5oOF5Ya1XG4gICAgICAgICAgICAvLyB2ZXJzaW9uIOS4ujAuMS54IOWImeihqOaYjuaYr+S4iuS4gOasoee8k+WtmOetlueVpe+8jOS4jeS4jueOsOWcqOespuWQiOS5n+W+l+a4hemZpFxuICAgICAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICAgICAgdGhpcy5zZXQoJ3ZlcnNpb24nLCB2ZXJzaW9uKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBnZXROYW1lc3BhY2VLZXkgPSAoa2V5OiBzdHJpbmcpID0+IHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMubmFtZXNwYWNlfV8ke2tleX1gO1xuICAgIH07XG5cbiAgICBnZXQgPSAoa2V5OiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3QgbmFtZXNwYWNlS2V5ID0gdGhpcy5nZXROYW1lc3BhY2VLZXkoa2V5KTtcbiAgICAgICAgaWYgKHRoaXMuc3RvcmFnZS5nZXRJdGVtKG5hbWVzcGFjZUtleSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvSnNvbih0aGlzLnN0b3JhZ2UuZ2V0SXRlbShuYW1lc3BhY2VLZXkpLCBuYW1lc3BhY2VLZXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcblxuICAgIHNldCA9IDxUPihrZXk6IHN0cmluZywgdmFsdWU6IFQpID0+IHtcbiAgICAgICAgY29uc3QgbmFtZXNwYWNlS2V5ID0gdGhpcy5nZXROYW1lc3BhY2VLZXkoa2V5KTtcbiAgICAgICAgdGhpcy5zZXRJbm5lclR5cGUobmFtZXNwYWNlS2V5LCB2YWx1ZSk7XG4gICAgICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKG5hbWVzcGFjZUtleSwgdGhpcy50b1N0cmluZyh2YWx1ZSkpO1xuICAgIH07XG5cbiAgICByZW1vdmUgPSAoa2V5OiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3QgbmFtZXNwYWNlS2V5ID0gdGhpcy5nZXROYW1lc3BhY2VLZXkoa2V5KTtcbiAgICAgICAgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0obmFtZXNwYWNlS2V5KTtcbiAgICB9O1xuXG4gICAgY2xlYXIgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuc3RvcmFnZS5jbGVhcigpO1xuICAgIH07XG5cbiAgICBzZXRJbm5lclR5cGUgPSA8VD4oa2V5OiBzdHJpbmcsIHZhbHVlOiBUKSA9PiB7XG4gICAgICAgIGNvbnN0IHR5cGVzID0gdGhpcy5nZXRJbm5lclR5cGUoKTtcbiAgICAgICAgY29uc3QgbmV3VHlwZXMgPSB7XG4gICAgICAgICAgICAuLi50eXBlcyxcbiAgICAgICAgICAgIFtrZXldOiBnZXRUeXBlKHZhbHVlKSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0odGhpcy5pbm5lclZhbHVlVHlwZSwgSlNPTi5zdHJpbmdpZnkobmV3VHlwZXMpKTtcbiAgICB9O1xuXG4gICAgZ2V0SW5uZXJUeXBlID0gKGtleT86IHN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCB0eXBlc0pTT04gPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbSh0aGlzLmlubmVyVmFsdWVUeXBlKSB8fCAne30nO1xuICAgICAgICBjb25zdCB0eXBlcyA9IEpTT04ucGFyc2UodHlwZXNKU09OKTtcbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVzW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHR5cGVzO1xuICAgIH07XG5cbiAgICB0b0pzb24gPSAodmFsdWU6IHN0cmluZywga2V5OiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3QgdHlwZSA9IHRoaXMuZ2V0SW5uZXJUeXBlKGtleSk7XG4gICAgICAgIGlmICh0eXBlID09PSAnW29iamVjdCBNYXBdJykge1xuICAgICAgICAgICAgLy8g6L+Z6YeM5a2Y5Zyo55qE6Zeu6aKY5piv77ya5bey57uP5bqP5YiX5YyW55qE5YC85aaC5L2V5Yik5pat5Ye65pivTWFw57G75Z6LXG4gICAgICAgICAgICByZXR1cm4ganNvblRvTWFwKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh2YWx1ZSk7XG4gICAgfTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICB0b1N0cmluZyA9ICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgIGlmIChnZXRUeXBlKHZhbHVlKSA9PT0gJ1tvYmplY3QgTWFwXScpIHtcbiAgICAgICAgICAgIHJldHVybiBtYXBUb0pzb24odmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgTG9jYWxTdG9yYWdlO1xuIiwiaW1wb3J0IExvY2FsU3RvcmFnZSBmcm9tICcuL0xvY2FsU3RvcmFnZSc7XG5cbmV4cG9ydCBkZWZhdWx0IExvY2FsU3RvcmFnZTtcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEdyYXBoTm9kZSB9IGZyb20gJ0BhbnR2L2dyYXBoaW4nO1xuaW1wb3J0IENvbG9yUGlja2VyIGZyb20gJy4vQ29sb3JQaWNrZXInO1xuaW1wb3J0IFN0b3JhZ2UgZnJvbSAnLi4vLi4vU2VydmljZS9TdG9yYWdlL2luZGV4JztcbmltcG9ydCB7IFN0eWxpbmdQcm9wcyB9IGZyb20gJy4vaW50ZXJmYWNlJztcbmltcG9ydCB7IEJpelR5cGUgfSBmcm9tICcuLi8uLi9DdXN0b20vY29uZmlnJztcblxuY29uc3QgTm9kZUNvbG9yUGlja2VyOiBSZWFjdC5GQzxTdHlsaW5nUHJvcHM+ID0gcHJvcHMgPT4ge1xuICAgIGNvbnN0IHN0b3JhZ2UgPSBuZXcgU3RvcmFnZSgnZ3JhcGhpbi1zdHVkaW8nKTtcbiAgICBjb25zdCBiaXpUeXBlcyA9IHN0b3JhZ2UuZ2V0KCdiaXpUeXBlcycpIGFzIEJpelR5cGVbXTtcblxuICAgIGNvbnN0IGluaXRpYWxOb2RlU3RhdGUgPSBiaXpUeXBlcy5tYXAoaXRlbSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBpdGVtLnR5cGUsXG4gICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUsXG4gICAgICAgICAgICBjb2xvcjogaXRlbS5zdHlsZS5wcmltYXJ5Q29sb3IsXG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZSh7XG4gICAgICAgIG5vZGVUeXBlczogaW5pdGlhbE5vZGVTdGF0ZSxcbiAgICB9KTtcbiAgICBjb25zdCB7IG5vZGVUeXBlcyB9ID0gc3RhdGU7XG5cbiAgICBjb25zdCBvbkNoYW5nZSA9ICh0eXBlOiBzdHJpbmcsIGNvbG9yOiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3Qgbm9kZXMgPSBub2RlVHlwZXMubWFwKG5vZGUgPT4ge1xuICAgICAgICAgICAgaWYgKG5vZGUudHlwZSA9PT0gdHlwZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLm5vZGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICAgIG5vZGVUeXBlczogbm9kZXMsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IG5ld0JpelR5cGVzID0gYml6VHlwZXMubWFwKGl0ZW0gPT4ge1xuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gdHlwZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5pdGVtLnN0eWxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpbWFyeUNvbG9yOiBjb2xvcixcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHN0b3JhZ2Uuc2V0KCdiaXpUeXBlcycsIG5ld0JpelR5cGVzKTtcbiAgICAgICAgY29uc3QgbWF0Y2hCaXpUeXBlID0gbmV3Qml6VHlwZXMuZmluZChpdGVtID0+IGl0ZW0udHlwZSA9PT0gdHlwZSk7XG5cbiAgICAgICAgY29uc3QgeyBncmFwaCwgZGlzcGF0Y2ggfSA9IHByb3BzO1xuICAgICAgICBjb25zdCBwcmVEYXRhID0gZ3JhcGguc2F2ZSgpO1xuICAgICAgICBjb25zdCBuZXdOb2RlcyA9IHByZURhdGEubm9kZXMubWFwKG5vZGUgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5ub2RlLFxuICAgICAgICAgICAgICAgIHN0eWxlOiBub2RlLmRhdGEudHlwZSA9PT0gdHlwZSA/IG1hdGNoQml6VHlwZS5zdHlsZSA6IG5vZGUuc3R5bGUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbmV3RGF0YSA9IHtcbiAgICAgICAgICAgIG5vZGVzOiBuZXdOb2RlcyxcbiAgICAgICAgICAgIGVkZ2VzOiBwcmVEYXRhLmVkZ2VzLFxuICAgICAgICB9O1xuICAgICAgICBkaXNwYXRjaCh7XG4gICAgICAgICAgICB0eXBlOiAnZ3JhcGgvY2hhbmdlRGF0YScsXG4gICAgICAgICAgICBwYXlsb2FkOiBuZXdEYXRhLFxuICAgICAgICB9KTtcblxuICAgICAgICAvKiog6LCD55SoRzbnmoRBUEnlrp7njrDliLfmlrAgKi9cbiAgICAgICAgLy8gY29uc3QgZ3JhcGhOb2RlcyA9IGdyYXBoLmdldCgnbm9kZXMnKSBhcyBHcmFwaE5vZGVbXTtcbiAgICAgICAgLy8gZ3JhcGhOb2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgICAvLyAgICAgY29uc3Qgbm9kZVR5cGUgPSBub2RlLmdldCgnbW9kZWwnKS5kYXRhLnR5cGU7XG4gICAgICAgIC8vICAgICBpZiAodHlwZSA9PT0gbm9kZVR5cGUpIHtcbiAgICAgICAgLy8gICAgICAgICAvKiogIOWPquabtOaWsOmcgOimgeabtOaWsOeahOiKgueCueexu+WeiyAqL1xuICAgICAgICAvLyAgICAgICAgIGdyYXBoLnVwZGF0ZShub2RlLCB7XG4gICAgICAgIC8vICAgICAgICAgICAgIHN0eWxlOiBtYXRjaEJpelR5cGUuc3R5bGUsXG4gICAgICAgIC8vICAgICAgICAgfSk7XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vIH0pO1xuICAgICAgICAvKiogZW5kICovXG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgICB7bm9kZVR5cGVzLm1hcChiaXpUeXBlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHR5cGUsIG5hbWUsIGNvbG9yIH0gPSBiaXpUeXBlO1xuICAgICAgICAgICAgICAgIHJldHVybiA8Q29sb3JQaWNrZXIga2V5PXt0eXBlfSB0eXBlPXt0eXBlfSBuYW1lPXtuYW1lfSBvbkNoYW5nZT17b25DaGFuZ2V9IGRlZmF1bHRDb2xvcj17Y29sb3J9IC8+O1xuICAgICAgICAgICAgfSl9XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBOb2RlQ29sb3JQaWNrZXI7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgUmFkaW8gfSBmcm9tICdhbnRkJztcbmltcG9ydCB7IFJhZGlvQ2hhbmdlRXZlbnQgfSBmcm9tICdhbnRkL2xpYi9yYWRpby9pbnRlcmZhY2UnO1xuaW1wb3J0IHsgVG9vbGJhckNvbmZpZ1Byb3BzIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuXG5jb25zdCBUb29sYmFyQ29uZmlnOiBSZWFjdC5GQzxUb29sYmFyQ29uZmlnUHJvcHM+ID0gcHJvcHMgPT4ge1xuICAgIGNvbnN0IHsgZGlzcGF0Y2gsIHN0YXRlIH0gPSBwcm9wcztcbiAgICBjb25zdCB7IHRvb2xiYXIgfSA9IHN0YXRlO1xuICAgIGNvbnN0IGhhbmRsZUNoYW5nZSA9IChlOiBSYWRpb0NoYW5nZUV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IHsgdmFsdWUgfSA9IGUudGFyZ2V0O1xuICAgICAgICBkaXNwYXRjaCh7XG4gICAgICAgICAgICB0eXBlOiAnZ3JhcGgvY2hhbmdlVG9vbGJhcicsXG4gICAgICAgICAgICBwYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiB2YWx1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxSYWRpby5Hcm91cCBuYW1lPVwicmFkaW9ncm91cFwiIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9IHZhbHVlPXt0b29sYmFyLmRpcmVjdGlvbn0+XG4gICAgICAgICAgICAgICAgPFJhZGlvIHZhbHVlPVwidmVydGljYWxcIj7nurXlkJHluIPlsYA8L1JhZGlvPlxuICAgICAgICAgICAgICAgIDxSYWRpbyB2YWx1ZT1cImhvcml6b250YWxcIj7mqKrlkJHluIPlsYA8L1JhZGlvPlxuICAgICAgICAgICAgPC9SYWRpby5Hcm91cD5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFRvb2xiYXJDb25maWc7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IEZvbGRpbmdQYW5lbCBmcm9tICcuLi8uLi9Db21wb25lbnRzL0ZvbGRpbmdQYW5lbC9Gb2xkaW5nUGFuZWwnO1xuaW1wb3J0IFRoZW1lIGZyb20gJy4vVGhlbWUnO1xuaW1wb3J0IE5vZGVDb2xvclBpY2tlciBmcm9tICcuLi9TdHlsaW5nL05vZGVDb2xvclBpY2tlcic7XG4vLyBpbXBvcnQgTm9kZVNpemVQaWNrZXIgZnJvbSAnLi4vU3R5bGluZy9Ob2RlU2l6ZVBpY2tlcic7XG5pbXBvcnQgVG9vbGJhckNvbmZpZyBmcm9tICcuL1Rvb2xiYXJDb25maWcnO1xuaW1wb3J0IHsgU2V0dGluZ1Byb3BzIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuXG5jb25zdCBTZXR0aW5nOiBSZWFjdC5GQzxTZXR0aW5nUHJvcHM+ID0gcHJvcHMgPT4ge1xuICAgIGNvbnN0IGRhdGEgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRpdGxlOiAn5YiH5o2i5Li76aKYJyxcbiAgICAgICAgICAgIGNoaWxkcmVuOiA8VGhlbWUgey4uLnByb3BzfSAvPixcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgdGl0bGU6ICdUb29sYmFyJyxcbiAgICAgICAgICAgIGNoaWxkcmVuOiA8VG9vbGJhckNvbmZpZyB7Li4ucHJvcHN9IC8+LFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICB0aXRsZTogJ+iKgueCueagt+W8jycsXG4gICAgICAgICAgICBjaGlsZHJlbjogPE5vZGVDb2xvclBpY2tlciB7Li4ucHJvcHN9IC8+LFxuICAgICAgICB9LFxuICAgICAgICAvLyB7XG4gICAgICAgIC8vICAgICB0aXRsZTogJ+iKgueCueWkp+WwjycsXG4gICAgICAgIC8vICAgICBjaGlsZHJlbjogPE5vZGVTaXplUGlja2VyIHsuLi5wcm9wc30gLz4sXG4gICAgICAgIC8vIH0sXG4gICAgXTtcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPEZvbGRpbmdQYW5lbCBkYXRhPXtkYXRhfSAvPlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU2V0dGluZztcbiIsInR5cGUgTm9kZVR5cGVzID0ge1xuICAgIC8qKiDnsbvlnovlkI3np7AgKi9cbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgLyoqIOexu+WeiyAqL1xuICAgIG5vZGVUeXBlOiBzdHJpbmc7XG59O1xuY29uc3Qgbm9kZVR5cGVzOiBOb2RlVHlwZXNbXSA9IFtcbiAgICB7IG5hbWU6ICflhazlj7gnLCBub2RlVHlwZTogJ2NvbXBhbnknIH0sXG4gICAgeyBuYW1lOiAn5omL5py65Y+356CBJywgbm9kZVR5cGU6ICdwaG9uZScgfSxcbiAgICB7IG5hbWU6ICfpgq7nrrEnLCBub2RlVHlwZTogJ2VtYWlsJyB9LFxuXTtcbmV4cG9ydCBkZWZhdWx0IG5vZGVUeXBlcztcbiIsImV4cG9ydCBjb25zdCBwcm92aW5jZTogc3RyaW5nW10gPSBbXG4gICAgJ+WMl+S6rOW4gicsXG4gICAgJ+Wkqea0peW4gicsXG4gICAgJ+S4iua1t+W4gicsXG4gICAgJ+mHjeW6huW4gicsXG4gICAgJ+ays+WMl+ecgScsXG4gICAgJ+Wxseilv+ecgScsXG4gICAgJ+i+veWugeecgScsXG4gICAgJ+WQieael+ecgScsXG4gICAgJ+m7kem+meaxn+ecgScsXG4gICAgJ+axn+iLj+ecgScsXG4gICAgJ+a1meaxn+ecgScsXG4gICAgJ+WuieW+veecgScsXG4gICAgJ+emj+W7uuecgScsXG4gICAgJ+axn+ilv+ecgScsXG4gICAgJ+WxseS4nOecgScsXG4gICAgJ+ays+WNl+ecgScsXG4gICAgJ+a5luWMl+ecgScsXG4gICAgJ+a5luWNl+ecgScsXG4gICAgJ+W5v+S4nOecgScsXG4gICAgJ+a1t+WNl+ecgScsXG4gICAgJ+Wbm+W3neecgScsXG4gICAgJ+i0teW3nuecgScsXG4gICAgJ+S6keWNl+ecgScsXG4gICAgJ+mZleilv+ecgScsXG4gICAgJ+eUmOiCg+ecgScsXG4gICAgJ+mdkua1t+ecgScsXG4gICAgJ+WPsOa5vuecgScsXG4gICAgJ+WGheiSmeWPpOiHquayu+WMuicsXG4gICAgJ+W5v+ilv+WjruaXj+iHquayu+WMuicsXG4gICAgJ+ilv+iXj+iHquayu+WMuicsXG4gICAgJ+WugeWkj+WbnuaXj+iHquayu+WMuicsXG4gICAgJ+aWsOeWhue7tOWQvuWwlOiHquayu+WMuicsXG4gICAgJ+mmmea4r+eJueWIq+ihjOaUv+WMuicsXG4gICAgJ+a+s+mXqCcsXG4gICAgJ+WPsOa5vicsXG5dO1xuY29uc3QgcHJvdmluY2VTY2hlbWEgPSBwcm92aW5jZS5yZWR1Y2UoKGFjYywgY3VycikgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmFjYyxcbiAgICAgICAgW2N1cnJdOiB7IGVudW1WYWx1ZUNvZGU6IGN1cnIsIGVudW1WYWx1ZU5hbWU6IGN1cnIgfSxcbiAgICB9O1xufSwge30pO1xuZXhwb3J0IGNvbnN0IG5vZGVQcm9wZXJ0aWVzU2NoZW1hID0gW1xuICAgIHtcbiAgICAgICAgdHlwZTogJ2NvbXBhbnknLFxuICAgICAgICB0eXBlTmFtZTogJ+WFrOWPuCcsXG4gICAgICAgIHByb3BlcnR5U2NoZW1hTGlzdDogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvZGU6ICduYW1lJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnbmFtZScsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdTVFJJTkcnLFxuICAgICAgICAgICAgICAgIGRlc2M6ICflhazlj7jlkI3np7AnLFxuICAgICAgICAgICAgICAgIGVudW1WYWx1ZVNjaGVtYU1hcDogbnVsbCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29kZTogJ2NvbXBhbnlUeXBlJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnY29tcGFueVR5cGUnLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnRU5VTScsXG4gICAgICAgICAgICAgICAgZGVzYzogJ+exu+WeiycsXG4gICAgICAgICAgICAgICAgZW51bVZhbHVlU2NoZW1hTWFwOiB7XG4gICAgICAgICAgICAgICAgICAgIE9USEVSOiB7IGVudW1WYWx1ZUNvZGU6ICdPVEhFUicsIGVudW1WYWx1ZU5hbWU6ICflhbbku5Yo6Z2e5LiK5biCKScgfSxcbiAgICAgICAgICAgICAgICAgICAgTGlzdGVkOiB7IGVudW1WYWx1ZUNvZGU6ICdMaXN0ZWQnLCBlbnVtVmFsdWVOYW1lOiAn5LiK5biC5YWs5Y+4JyB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvZGU6ICdpbmR1c3RyeScsXG4gICAgICAgICAgICAgICAgbmFtZTogJ2luZHVzdHJ5JyxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ1NUUklORycsXG4gICAgICAgICAgICAgICAgZGVzYzogJ+ihjOS4micsXG4gICAgICAgICAgICAgICAgZW51bVZhbHVlU2NoZW1hTWFwOiBudWxsLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb2RlOiAncGhvbmUnLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdwaG9uZScsXG4gICAgICAgICAgICAgICAgZGVzYzogJ+eUteivnScsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdTVFJJTkcnLFxuICAgICAgICAgICAgICAgIGVudW1WYWx1ZVNjaGVtYU1hcDogbnVsbCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29kZTogJ1VTQ0MnLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdVU0NDJyxcbiAgICAgICAgICAgICAgICBkZXNjOiAn57uf5LiA56S+5Lya5L+h55So5Luj56CBJyxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ05VTUJFUicsXG4gICAgICAgICAgICAgICAgZW51bVZhbHVlU2NoZW1hTWFwOiBudWxsLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb2RlOiAncmVnaXN0ZXJlZCBjYXBpdGFsJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAncmVnaXN0ZXJlZCBjYXBpdGFsJyxcbiAgICAgICAgICAgICAgICBkZXNjOiAn5rOo5YaM6LWE5pysJyxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ05VTUJFUicsXG4gICAgICAgICAgICAgICAgZW51bVZhbHVlU2NoZW1hTWFwOiBudWxsLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb2RlOiAnbnVtYmVyIG9mIHBhcnRpY2lwYW50cycsXG4gICAgICAgICAgICAgICAgbmFtZTogJ251bWJlciBvZiBwYXJ0aWNpcGFudHMnLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnTlVNQkVSJyxcbiAgICAgICAgICAgICAgICBkZXNjOiAn5Y+C5L+d5Lq65pWwJyxcbiAgICAgICAgICAgICAgICBlbnVtVmFsdWVTY2hlbWFNYXA6IG51bGwsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvZGU6ICdyZWdpc3RlciBwcm92JyxcbiAgICAgICAgICAgICAgICBuYW1lOiAncmVnaXN0ZXIgcHJvdicsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdFTlVNJyxcbiAgICAgICAgICAgICAgICBkZXNjOiAn5rOo5YaM55yB5Lu9JyxcbiAgICAgICAgICAgICAgICBlbnVtVmFsdWVTY2hlbWFNYXA6IHByb3ZpbmNlU2NoZW1hLFxuICAgICAgICAgICAgICAgIC8vIHtcbiAgICAgICAgICAgICAgICAvLyAgICAg56aP5bu655yBOiB7IGVudW1WYWx1ZUNvZGU6ICfnpo/lu7rnnIEnLCBlbnVtVmFsdWVOYW1lOiAn56aP5bu655yBJyB9LFxuICAgICAgICAgICAgICAgIC8vICAgICDopb/ol4/oh6rmsrvljLo6IHsgZW51bVZhbHVlQ29kZTogJ+ilv+iXj+iHquayu+WMuicsIGVudW1WYWx1ZU5hbWU6ICfopb/ol4/oh6rmsrvljLonIH0sXG4gICAgICAgICAgICAgICAgLy8gICAgIOi0teW3nuecgTogeyBlbnVtVmFsdWVDb2RlOiAn6LS15bee55yBJywgZW51bVZhbHVlTmFtZTogJ+i0teW3nuecgScgfSxcbiAgICAgICAgICAgICAgICAvLyAgICAg5rmW5YyX55yBOiB7IGVudW1WYWx1ZUNvZGU6ICfmuZbljJfnnIEnLCBlbnVtVmFsdWVOYW1lOiAn5rmW5YyX55yBJyB9LFxuICAgICAgICAgICAgICAgIC8vICAgICDmuZbljZfnnIE6IHsgZW51bVZhbHVlQ29kZTogJ+a5luWNl+ecgScsIGVudW1WYWx1ZU5hbWU6ICfmuZbljZfnnIEnIH0sXG4gICAgICAgICAgICAgICAgLy8gICAgIOW5v+S4nOecgTogeyBlbnVtVmFsdWVDb2RlOiAn5bm/5Lic55yBJywgZW51bVZhbHVlTmFtZTogJ+W5v+S4nOecgScgfSxcbiAgICAgICAgICAgICAgICAvLyAgICAg6YeN5bqGOiB7IGVudW1WYWx1ZUNvZGU6ICfph43luoYnLCBlbnVtVmFsdWVOYW1lOiAn6YeN5bqG5biCJyB9LFxuICAgICAgICAgICAgICAgIC8vICAgICDmvrPpl6jnibnliKvooYzmlL/ljLo6IHsgZW51bVZhbHVlQ29kZTogJ+a+s+mXqOeJueWIq+ihjOaUv+WMuicsIGVudW1WYWx1ZU5hbWU6ICfmvrPpl6jnibnliKvooYzmlL/ljLonIH0sXG4gICAgICAgICAgICAgICAgLy8gICAgIOmmmea4r+eJueWIq+ihjOaUv+WMujogeyBlbnVtVmFsdWVDb2RlOiAn6aaZ5riv54m55Yir6KGM5pS/5Yy6JywgZW51bVZhbHVlTmFtZTogJ+mmmea4r+eJueWIq+ihjOaUv+WMuicgfSxcbiAgICAgICAgICAgICAgICAvLyAgICAg5Zub5bed55yBOiB7IGVudW1WYWx1ZUNvZGU6ICflm5vlt53nnIEnLCBlbnVtVmFsdWVOYW1lOiAn5Zub5bed55yBJyB9LFxuICAgICAgICAgICAgICAgIC8vICAgICDlronlvr3nnIE6IHsgZW51bVZhbHVlQ29kZTogJ+WuieW+veecgScsIGVudW1WYWx1ZU5hbWU6ICflronlvr3nnIEnIH0sXG4gICAgICAgICAgICAgICAgLy8gICAgIOaWsOeWhue7tOWQvuWwlOiHquayu+WMujoge1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgZW51bVZhbHVlQ29kZTogJ+aWsOeWhue7tOWQvuWwlOiHquayu+WMuicsXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBlbnVtVmFsdWVOYW1lOiAn5paw55aG57u05ZC+5bCU6Ieq5rK75Yy6JyxcbiAgICAgICAgICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgICAgICAgICAvLyAgICAg5rGf6IuP55yBOiB7IGVudW1WYWx1ZUNvZGU6ICfmsZ/oi4/nnIEnLCBlbnVtVmFsdWVOYW1lOiAn5rGf6IuP55yBJyB9LFxuICAgICAgICAgICAgICAgIC8vICAgICDlpKnmtKU6IHsgZW51bVZhbHVlQ29kZTogJ+Wkqea0pScsIGVudW1WYWx1ZU5hbWU6ICflpKnmtKXluIInIH0sXG4gICAgICAgICAgICAgICAgLy8gICAgIOWQieael+ecgTogeyBlbnVtVmFsdWVDb2RlOiAn5ZCJ5p6X55yBJywgZW51bVZhbHVlTmFtZTogJ+WQieael+ecgScgfSxcbiAgICAgICAgICAgICAgICAvLyAgICAg5a6B5aSP5Zue5peP6Ieq5rK75Yy6OiB7IGVudW1WYWx1ZUNvZGU6ICflroHlpI/lm57ml4/oh6rmsrvljLonLCBlbnVtVmFsdWVOYW1lOiAn5a6B5aSP5Zue5peP6Ieq5rK75Yy6JyB9LFxuICAgICAgICAgICAgICAgIC8vICAgICDmsrPljZfnnIE6IHsgZW51bVZhbHVlQ29kZTogJ+ays+WNl+ecgScsIGVudW1WYWx1ZU5hbWU6ICfmsrPljZfnnIEnIH0sXG4gICAgICAgICAgICAgICAgLy8gICAgIOays+WMl+ecgTogeyBlbnVtVmFsdWVDb2RlOiAn5rKz5YyX55yBJywgZW51bVZhbHVlTmFtZTogJ+ays+WMl+ecgScgfSxcbiAgICAgICAgICAgICAgICAvLyAgICAg5bm/6KW/5aOu5peP6Ieq5rK75Yy6OiB7IGVudW1WYWx1ZUNvZGU6ICflub/opb/lo67ml4/oh6rmsrvljLonLCBlbnVtVmFsdWVOYW1lOiAn5bm/6KW/5aOu5peP6Ieq5rK75Yy6JyB9LFxuICAgICAgICAgICAgICAgIC8vICAgICDkuIrmtbc6IHsgZW51bVZhbHVlQ29kZTogJ+S4iua1tycsIGVudW1WYWx1ZU5hbWU6ICfkuIrmtbfluIInIH0sXG4gICAgICAgICAgICAgICAgLy8gICAgIOa1t+WNl+ecgTogeyBlbnVtVmFsdWVDb2RlOiAn5rW35Y2X55yBJywgZW51bVZhbHVlTmFtZTogJ+a1t+WNl+ecgScgfSxcbiAgICAgICAgICAgICAgICAvLyAgICAg5rGf6KW/55yBOiB7IGVudW1WYWx1ZUNvZGU6ICfmsZ/opb/nnIEnLCBlbnVtVmFsdWVOYW1lOiAn5rGf6KW/55yBJyB9LFxuICAgICAgICAgICAgICAgIC8vICAgICDkupHljZfnnIE6IHsgZW51bVZhbHVlQ29kZTogJ+S6keWNl+ecgScsIGVudW1WYWx1ZU5hbWU6ICfkupHljZfnnIEnIH0sXG4gICAgICAgICAgICAgICAgLy8gICAgIOeUmOiCg+ecgTogeyBlbnVtVmFsdWVDb2RlOiAn55SY6IKD55yBJywgZW51bVZhbHVlTmFtZTogJ+eUmOiCg+ecgScgfSxcbiAgICAgICAgICAgICAgICAvLyAgICAg5bGx5Lic55yBOiB7IGVudW1WYWx1ZUNvZGU6ICflsbHkuJznnIEnLCBlbnVtVmFsdWVOYW1lOiAn5bGx5Lic55yBJyB9LFxuICAgICAgICAgICAgICAgIC8vICAgICDpmZXopb/nnIE6IHsgZW51bVZhbHVlQ29kZTogJ+mZleilv+ecgScsIGVudW1WYWx1ZU5hbWU6ICfpmZXopb/nnIEnIH0sXG4gICAgICAgICAgICAgICAgLy8gICAgIOa1meaxn+ecgTogeyBlbnVtVmFsdWVDb2RlOiAn5rWZ5rGf55yBJywgZW51bVZhbHVlTmFtZTogJ+a1meaxn+ecgScgfSxcbiAgICAgICAgICAgICAgICAvLyAgICAg5pyq55+lOiB7IGVudW1WYWx1ZUNvZGU6ICfmnKrnn6UnLCBlbnVtVmFsdWVOYW1lOiAn5pyq55+lJyB9LFxuICAgICAgICAgICAgICAgIC8vICAgICDlhoXokpnlj6Toh6rmsrvljLo6IHsgZW51bVZhbHVlQ29kZTogJ+WGheiSmeWPpOiHquayu+WMuicsIGVudW1WYWx1ZU5hbWU6ICflhoXokpnlj6Toh6rmsrvljLonIH0sXG4gICAgICAgICAgICAgICAgLy8gICAgIOmdkua1t+ecgTogeyBlbnVtVmFsdWVDb2RlOiAn6Z2S5rW355yBJywgZW51bVZhbHVlTmFtZTogJ+mdkua1t+ecgScgfSxcbiAgICAgICAgICAgICAgICAvLyAgICAg6L695a6B55yBOiB7IGVudW1WYWx1ZUNvZGU6ICfovr3lroHnnIEnLCBlbnVtVmFsdWVOYW1lOiAn6L695a6B55yBJyB9LFxuICAgICAgICAgICAgICAgIC8vICAgICDpu5HpvpnmsZ/nnIE6IHsgZW51bVZhbHVlQ29kZTogJ+m7kem+meaxn+ecgScsIGVudW1WYWx1ZU5hbWU6ICfpu5HpvpnmsZ/nnIEnIH0sXG4gICAgICAgICAgICAgICAgLy8gICAgIOWMl+S6rDogeyBlbnVtVmFsdWVDb2RlOiAn5YyX5LqsJywgZW51bVZhbHVlTmFtZTogJ+WMl+S6rOW4gicgfSxcbiAgICAgICAgICAgICAgICAvLyAgICAg5bGx6KW/55yBOiB7IGVudW1WYWx1ZUNvZGU6ICflsbHopb/nnIEnLCBlbnVtVmFsdWVOYW1lOiAn5bGx6KW/55yBJyB9LFxuICAgICAgICAgICAgICAgIC8vIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgIH0sXG5dO1xuIiwiaW1wb3J0IHJhbmRvbU5hbWUgZnJvbSAnY2hpbmVzZS1yYW5kb20tbmFtZSc7XG5pbXBvcnQgeyBwcm92aW5jZSwgbm9kZVByb3BlcnRpZXNTY2hlbWEgfSBmcm9tICcuL01vY2svbm9kZVByb3BlcnRpZXNTY2hlbWEnO1xuaW1wb3J0IHsgTm9kZURhdGEgfSBmcm9tICcuLi90eXBlcyc7XG5cbmludGVyZmFjZSBQcm9wZXJ0eSB7XG4gICAgY29kZTogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICB2YWx1ZTogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgU2NoZW1hUHJvcGVydHkge1xuICAgIGNvZGU6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgZGF0YVR5cGU6IHN0cmluZztcbiAgICBkZXNjOiBzdHJpbmc7XG4gICAgZW51bVZhbHVlU2NoZW1hTWFwOiBvYmplY3QgfCBudWxsO1xufVxuXG5jb25zdCBub2RlUHJvcGVydGllc1NjaGVtYU1hcDogb2JqZWN0ID0gbm9kZVByb3BlcnRpZXNTY2hlbWEucmVkdWNlKChhY2MsIGN1cnIpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5hY2MsXG4gICAgICAgIFtjdXJyLnR5cGVdOiBjdXJyLFxuICAgIH07XG59LCB7fSk7XG5jb25zdCBnZXRQcm9wZXJ0eVZhbHVlID0gKHByb3BlcnR5OiBTY2hlbWFQcm9wZXJ0eSkgPT4ge1xuICAgIGNvbnN0IHsgY29kZSB9ID0gcHJvcGVydHk7XG4gICAgc3dpdGNoIChjb2RlKSB7XG4gICAgICAgIGNhc2UgJ25hbWUnOlxuICAgICAgICAgICAgcmV0dXJuIGAke3JhbmRvbU5hbWUuZ2VuZXJhdGUoKX3mn5Dmn5Dlhazlj7hgO1xuICAgICAgICBjYXNlICdjb21wYW55VHlwZSc6XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAtIDAuNSA+IDAgPyAn5LiK5biC5YWs5Y+4JyA6ICfpnZ7kuIrluILlhazlj7gnO1xuICAgICAgICBjYXNlICdpbmR1c3RyeSc6XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAtIDAuNSA+IDAgPyAn5Lyg57uf6KGM5LiaJyA6ICfkupLogZTnvZHooYzkuJonO1xuICAgICAgICBjYXNlICdudW1iZXIgb2YgcGFydGljaXBhbnRzJzpcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDApO1xuICAgICAgICBjYXNlICdyZWdpc3RlcmVkIGNhcGl0YWwnOlxuICAgICAgICAgICAgcmV0dXJuIGAke01hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDAwMDApIC8gMTAwMDB9KOS4h+WFgylgO1xuICAgICAgICBjYXNlICdyZWdpc3RlciBwcm92JzpcbiAgICAgICAgICAgIC8vIGNvbnN0IHJhbmRvbVByb3ZpbmNlID0gcHJvdmluY2Uuc29ydCgoKSA9PiB7XG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgLSAwLjU7XG4gICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAgIHJldHVybiBwcm92aW5jZS5zb3J0KCgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAtIDAuNTtcbiAgICAgICAgICAgIH0pWzBdO1xuICAgICAgICBjYXNlICdwaG9uZSc6XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5yYW5kb20oKVxuICAgICAgICAgICAgICAgIC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgLnNsaWNlKDIsIDExKTtcblxuICAgICAgICBjYXNlICdVU0NDJzpcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpXG4gICAgICAgICAgICAgICAgLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAuc2xpY2UoMiwgMjApO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICcuLi4nO1xuICAgIH1cbn07XG4vKipcbiAqXG4gKiBAcGFyYW0gbm9kZXMgbm9kZXPoioLngrnmlbDnu4RcbiAqIEBwYXJhbSBub2Rlc1xuICovXG5jb25zdCBnZXRQcm9wZXJ0aWVzID0gKG5vZGVzOiBOb2RlRGF0YVtdKTogTm9kZURhdGFbXSA9PiB7XG4gICAgcmV0dXJuIG5vZGVzLm1hcChub2RlID0+IHtcbiAgICAgICAgY29uc3QgeyB0eXBlID0gJycgfSA9IG5vZGU7XG4gICAgICAgIGlmICghbm9kZVByb3BlcnRpZXNTY2hlbWFNYXBbdHlwZV0pIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNjaGVtYVByb3BlcnRpZXMgPSBub2RlUHJvcGVydGllc1NjaGVtYU1hcFt0eXBlXS5wcm9wZXJ0eVNjaGVtYUxpc3Q7XG4gICAgICAgIGNvbnN0IHByb3BlcnRpZXNNb2NrID0gc2NoZW1hUHJvcGVydGllcy5tYXAoKHByb3BlcnR5OiBTY2hlbWFQcm9wZXJ0eSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBwcm9wZXJ0eS5jb2RlLFxuICAgICAgICAgICAgICAgIG5hbWU6IHByb3BlcnR5LmRlc2MsXG4gICAgICAgICAgICAgICAgdmFsdWU6IGdldFByb3BlcnR5VmFsdWUocHJvcGVydHkpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gYCR7cHJvcGVydGllc01vY2suZmluZCgocHJvcGVydHk6IFByb3BlcnR5KSA9PiBwcm9wZXJ0eS5jb2RlID09PSAnbmFtZScpLnZhbHVlfSgke1xuICAgICAgICAgICAgbm9kZS5pZFxuICAgICAgICB9KWA7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5ub2RlLFxuICAgICAgICAgICAgbGFiZWw6IGRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgcHJvcGVydGllczogcHJvcGVydGllc01vY2ssXG4gICAgICAgIH07XG4gICAgfSk7XG59O1xuZXhwb3J0IGRlZmF1bHQgZ2V0UHJvcGVydGllcztcbiIsImltcG9ydCBnZXROb2RlUHJvcGVydGllcyBmcm9tICcuL2dldE5vZGVQcm9wZXJ0aWVzJztcbi8qKlxuICpcbiAqIEBwYXJhbSBub2RlSWRzIOiKgueCueeahElE5pWw57uEXG4gKiBAcGFyYW0gbm9kZVR5cGUg6IqC54K555qE57G75Z6L77yM5L6L5aaCOlwiVUlEXCJcIlBIT05FXCLnrYlcbiAqL1xuY29uc3QgZ2V0Tm9kZXNCeUlkID0gKG5vZGVJZHM6IHN0cmluZ1tdLCBub2RlVHlwZSA9ICdVSUQnKSA9PiB7XG4gICAgY29uc3Qgbm9kZXMgPSBub2RlSWRzLm1hcChpZCA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogYG5vZGUtJHtpZH1gLFxuICAgICAgICAgICAgbGFiZWw6IGBub2RlLSR7aWR9YCxcbiAgICAgICAgICAgIHR5cGU6IG5vZGVUeXBlLFxuICAgICAgICAgICAgcHJvcGVydGllczogW10sXG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIGdldE5vZGVQcm9wZXJ0aWVzKG5vZGVzKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGdldE5vZGVzQnlJZDtcbiIsImltcG9ydCBub2RlVHlwZXMgZnJvbSAnLi4vU2VydmljZS9Nb2NrL25vZGVUeXBlcyc7XG5cbmNvbnN0IGNvbG9ycyA9IFtcbiAgICAnIzUxNTE1MScsXG4gICAgJyM5OTAwRUYnLFxuICAgICcjRkY2OTAwJyxcbiAgICAnIzAwRDA4NCcsXG4gICAgJyNBQkI4QzMnLFxuICAgICcjMDY5M0UzJyxcbiAgICAnI0ZGN0E0NScsXG4gICAgJyM5MjU0REUnLFxuICAgICcjRkY0RDRGJyxcbiAgICAnIzczRDEzRCcsXG4gICAgJyNGNzU5QUMnLFxuICAgICcjRkZBOTQxJyxcbiAgICAnIzM1Q0ZDOScsXG4gICAgJyNGRkM1M0QnLFxuICAgICcjNDBBOUZGJyxcbiAgICAnIzU5N0VGNycsXG4gICAgJyNGRkVDM0UnLFxuICAgICcjQkFFNjM3Jyxcbl07XG5jb25zdCBmbG9vclJhbmRvbSA9IChudW1iZXI6IG51bWJlcikgPT4ge1xuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBudW1iZXIpO1xufTtcbmNvbnN0IHJhbmRvbUNvbG9yID0gKG9wYWNpdHkgPSAxKSA9PiB7XG4gICAgY29uc3QgciA9IGZsb29yUmFuZG9tKDI1NSk7XG4gICAgY29uc3QgZyA9IGZsb29yUmFuZG9tKDI1NSk7XG4gICAgY29uc3QgYiA9IGZsb29yUmFuZG9tKDI1NSk7XG4gICAgY29uc3QgY29sb3IgPSBgcmdiYSgke3J9LCR7Z30sJHtifSwke29wYWNpdHl9KWA7XG4gICAgcmV0dXJuIGNvbG9yO1xufTtcblxuY29uc3Qgc3R5bGUgPSB7XG4gICAgLyoqIOiKgueCueeahOWkp+WwjyAqL1xuICAgIG5vZGVTaXplOiAyMCxcbiAgICAvKiog6IqC54K555qE5Li76KaB6aKc6ImyICovXG4gICAgcHJpbWFyeUNvbG9yOiAnIzk5MDBFRicsXG4gICAgLyoqIOaWh+acrOeahOWtl+S9k+Wkp+WwjyAqL1xuICAgIGZvbnRTaXplOiAxMixcbiAgICAvKiog5paH5pys55qE5a2X5L2T6aKc6ImyICovXG4gICAgZm9udENvbG9yOiAnIzNiM2IzYicsXG4gICAgLyoqIGRhcmsg572u54GwICovXG4gICAgZGFyazogJyNlZWUnLFxufTtcbmV4cG9ydCBpbnRlcmZhY2UgQml6VHlwZSB7XG4gICAgLyoqIOiKgueCueeahOexu+WeiyAqL1xuICAgIHR5cGU6IHN0cmluZztcbiAgICAvKiog6IqC54K555qE57G75Z6L5ZCN56ewICovXG4gICAgbmFtZTogc3RyaW5nO1xuICAgIC8qKiDoioLngrnnmoTmoLflvI8gKi9cbiAgICBzdHlsZTogYW55OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG59XG5cbmNvbnN0IGJpelR5cGVzOiBCaXpUeXBlW10gPSBub2RlVHlwZXMubWFwKChub2RlLCBpbmRleCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IG5vZGUubm9kZVR5cGUsXG4gICAgICAgIG5hbWU6IG5vZGUubmFtZSxcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgIC4uLnN0eWxlLFxuICAgICAgICAgICAgcHJpbWFyeUNvbG9yOiBjb2xvcnNbaW5kZXhdIHx8IHJhbmRvbUNvbG9yKCksXG4gICAgICAgIH0sXG4gICAgfTtcbn0pO1xuXG5leHBvcnQgeyBjb2xvcnMsIGJpelR5cGVzIH07XG4iLCJpbXBvcnQgU3RvcmFnZSBmcm9tICcuLi9TZXJ2aWNlL1N0b3JhZ2UnO1xuaW1wb3J0IHsgYml6VHlwZXMsIEJpelR5cGUgfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgeyBOb2RlRGF0YSwgRWRnZURhdGEgfSBmcm9tICcuLi90eXBlcyc7XG5cbmNvbnN0IHN0b3JhZ2UgPSBuZXcgU3RvcmFnZSgnZ3JhcGhpbi1zdHVkaW8nKTtcblxuaWYgKCFzdG9yYWdlLmdldCgnYml6VHlwZXMnKSkge1xuICAgIHN0b3JhZ2Uuc2V0KCdiaXpUeXBlcycsIGJpelR5cGVzKTtcbn1cblxuY29uc3QgdHJhbnNmb3JtID0ge1xuICAgIG5vZGVzOiAobm9kZXM6IE5vZGVEYXRhW10pID0+IHtcbiAgICAgICAgcmV0dXJuIG5vZGVzLm1hcChub2RlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IEJpelR5cGVzID0gc3RvcmFnZS5nZXQoJ2JpelR5cGVzJykgYXMgQml6VHlwZVtdO1xuICAgICAgICAgICAgY29uc3QgYml6VHlwZSA9IEJpelR5cGVzLmZpbmQoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0udHlwZSA9PT0gbm9kZS50eXBlO1xuICAgICAgICAgICAgfSkgfHwgeyBzdHlsZToge30gfTtcblxuICAgICAgICAgICAgY29uc3QgeyB0eXBlIH0gPSBub2RlO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlkOiBub2RlLmlkLFxuICAgICAgICAgICAgICAgIHNoYXBlOiB0eXBlID09PSAncGhvbmUnID8gJ1JlY3ROb2RlJyA6ICdDaXJjbGVOb2RlJyxcbiAgICAgICAgICAgICAgICBkYXRhOiBub2RlLFxuICAgICAgICAgICAgICAgIHN0eWxlOiBiaXpUeXBlLnN0eWxlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBlZGdlczogKGVkZ2VzOiBFZGdlRGF0YVtdKSA9PiB7XG4gICAgICAgIHJldHVybiBlZGdlcy5tYXAoZWRnZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IHNvdXJjZSwgdGFyZ2V0IH0gPSBlZGdlO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzb3VyY2UsXG4gICAgICAgICAgICAgICAgdGFyZ2V0LFxuICAgICAgICAgICAgICAgIGRhdGE6IGVkZ2UsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGRhdGE6IChkYXRhOiB7IG5vZGVzOiBOb2RlRGF0YVtdOyBlZGdlczogRWRnZURhdGFbXSB9KSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBub2RlczogdHJhbnNmb3JtLm5vZGVzKGRhdGEubm9kZXMpLFxuICAgICAgICAgICAgZWRnZXM6IHRyYW5zZm9ybS5lZGdlcyhkYXRhLmVkZ2VzKSxcbiAgICAgICAgfTtcbiAgICB9LFxufTtcbmV4cG9ydCBkZWZhdWx0IHRyYW5zZm9ybTtcbiIsImltcG9ydCB7IFV0aWxzIH0gZnJvbSAnQGFudHYvZ3JhcGhpbic7XG5pbXBvcnQgZ2V0Tm9kZXNCeUlkIGZyb20gJy4vZ2V0Tm9kZXNCeUlkJztcbmltcG9ydCBnZXROb2RlUHJvcGVydGllcyBmcm9tICcuL2dldE5vZGVQcm9wZXJ0aWVzJztcbmltcG9ydCB0cmFuc2Zvcm0gZnJvbSAnLi4vQ3VzdG9tL3RyYW5zZm9ybSc7XG4vKipcbiAqXG4gKiBAcGFyYW0gbm9kZUlkcyDoioLngrlpZOaVsOe7hFxuICogQHBhcmFtIG5vZGVUeXBlIOiKgueCueexu+Wei1xuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbmNvbnN0IHF1ZXJ5Tm9kZXMgPSAobm9kZUlkczogYW55W10sIG5vZGVUeXBlOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBub2RlcyA9IHRyYW5zZm9ybS5ub2RlcyhnZXROb2Rlc0J5SWQobm9kZUlkcywgbm9kZVR5cGUpKTtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHJlc29sdmUobm9kZXMpKTtcbn07XG5cbi8qKlxuICpcbiAqIEBwYXJhbSBjb3VudCDoioLngrnnmoTkuKrmlbBcbiAqIEBwYXJhbSBtb2NrVHlwZSBNb2Nr55qE57G75Z6LIHJhbmRvbSB8IGNpcmNsZVxuICogQHBhcmFtIG9wdGlvbnMgTW9ja+eahOmFjee9ruWPguaVsCByYW5kb206MC41IHwgY2lyY2xlOm5vZGUtMFxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbmNvbnN0IHF1ZXJ5R3JhcGggPSAoY291bnQ6IG51bWJlciwgbW9ja1R5cGU6IHN0cmluZywgb3B0aW9uczogYW55KSA9PiB7XG4gICAgY29uc3QgZGF0YSA9IFV0aWxzLm1vY2soY291bnQpXG4gICAgICAgIC50eXBlKCdjb21wYW55JylcbiAgICAgICAgW21vY2tUeXBlXShvcHRpb25zKVxuICAgICAgICAudmFsdWUoKTtcbiAgICBjb25zdCBub2RlcyA9IGdldE5vZGVQcm9wZXJ0aWVzKGRhdGEubm9kZXMpO1xuICAgIGNvbnN0IGdyYXBoaW5Ob2RlcyA9IHRyYW5zZm9ybS5ub2Rlcyhub2Rlcyk7XG4gICAgY29uc3QgZ3JhcGhpbkVkZ2VzID0gdHJhbnNmb3JtLmVkZ2VzKGRhdGEuZWRnZXMpO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT5cbiAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgICBub2RlczogZ3JhcGhpbk5vZGVzLFxuICAgICAgICAgICAgZWRnZXM6IGdyYXBoaW5FZGdlcyxcbiAgICAgICAgfSksXG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHsgcXVlcnlOb2RlcywgcXVlcnlHcmFwaCB9O1xuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgU2VsZWN0LCBJbnB1dCwgQnV0dG9uIH0gZnJvbSAnYW50ZCc7XG5pbXBvcnQgbm9kZVR5cGVzIGZyb20gJ0BzZXJ2aWNlL01vY2svbm9kZVR5cGVzJztcbmltcG9ydCB7IEl0ZW0gfSBmcm9tICdAY29tJztcbmltcG9ydCBzZXJ2aWNlIGZyb20gJ0BzZXJ2aWNlJztcbmltcG9ydCB7IE5vcm1hbFByb3BzLCBOb3JtYWxTdGF0ZSB9IGZyb20gJy4vaW50ZXJmYWNlJztcbmltcG9ydCB7IE5vZGVEYXRhIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xuaW1wb3J0ICcuL2luZGV4Lmxlc3MnO1xuXG5jb25zdCB7IFRleHRBcmVhIH0gPSBJbnB1dDtcbmNvbnN0IFNlbGVjdE9wdGlvbiA9IFNlbGVjdC5PcHRpb247XG5cbmNvbnN0IE5vcm1hbDogUmVhY3QuRkM8Tm9ybWFsUHJvcHM+ID0gcHJvcHMgPT4ge1xuICAgIGNvbnN0IHsgZGlzcGF0Y2gsIGdyYXBoIH0gPSBwcm9wcztcbiAgICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlPE5vcm1hbFN0YXRlPih7XG4gICAgICAgIHR5cGU6ICdjb21wYW55JyxcbiAgICAgICAgcGFyYW1zOiAnJyxcbiAgICB9KTtcbiAgICBjb25zdCB7IHR5cGUgPSAnY29tcGFueScsIHBhcmFtcyA9ICcnLCBlcnJvcm1zZyA9ICcnIH0gPSBzdGF0ZTtcbiAgICBjb25zdCBoYW5kbGVDbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgaWYgKCFwYXJhbXMpIHtcbiAgICAgICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICAgICAgICBlcnJvcm1zZzogJ2lk5LiN6IO95Li656m6JyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNldFN0YXRlKHsgLi4uc3RhdGUsIHBhcmFtczogJycgfSk7XG4gICAgICAgIGNvbnN0IGlkcyA9IHBhcmFtcy5zcGxpdCgnLCcpO1xuICAgICAgICBjb25zdCBkYXRhID0gKGF3YWl0IHNlcnZpY2UucXVlcnlOb2RlcyhpZHMsIHR5cGUpKSBhcyBOb2RlRGF0YVtdO1xuICAgICAgICBjb25zdCBwcmVEYXRhID0gZ3JhcGguc2F2ZSgpO1xuICAgICAgICBjb25zdCB7IG5vZGVzLCBlZGdlcyB9ID0gcHJlRGF0YTtcblxuICAgICAgICBkaXNwYXRjaCh7XG4gICAgICAgICAgICB0eXBlOiAnZ3JhcGgvYWRkTm9kZXMnLFxuICAgICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgICAgIG5vZGVzOiBbLi4ubm9kZXMsIC4uLmRhdGFdLFxuICAgICAgICAgICAgICAgIGVkZ2VzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVDaGFuZ2VOb2RlSWQgPSAoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTFRleHRBcmVhRWxlbWVudD4pID0+IHtcbiAgICAgICAgc2V0U3RhdGUoeyAuLi5zdGF0ZSwgcGFyYW1zOiBlLnRhcmdldC52YWx1ZSwgZXJyb3Jtc2c6ICcnIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxJdGVtIHRpdGxlPVwi5a6e5L2T57G75Z6LXCI+XG4gICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIuivt+mAieaLqeWunuS9k+exu+Wei1wiXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScgfX1cbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3R5cGV9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodmFsdWU6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0U3RhdGUoeyAuLi5zdGF0ZSwgdHlwZTogdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7bm9kZVR5cGVzLm1hcChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbm9kZVR5cGUsIG5hbWUgfSA9IGl0ZW07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3RPcHRpb24ga2V5PXtub2RlVHlwZX0gdmFsdWU9e25vZGVUeXBlfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RPcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDwvSXRlbT5cbiAgICAgICAgICAgIDxJdGVtIHRpdGxlPVwi6L6T5YWlSURcIj5cbiAgICAgICAgICAgICAgICA8VGV4dEFyZWFcbiAgICAgICAgICAgICAgICAgICAgcm93cz17NH1cbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCLor7fovpPlhaVJRCwg5aSa5Liq55qE6K+d55So6YCX5Y+35YiG6ZqUXCJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3BhcmFtc31cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZU5vZGVJZH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9JdGVtPlxuICAgICAgICAgICAge2Vycm9ybXNnICYmIDxzcGFuIGNsYXNzTmFtZT1cImVycm9yX21zZ1wiPntlcnJvcm1zZ308L3NwYW4+fVxuICAgICAgICAgICAgPEl0ZW0gdGl0bGU9XCJcIj5cbiAgICAgICAgICAgICAgICA8QnV0dG9uIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScgfX0gb25DbGljaz17aGFuZGxlQ2xpY2t9PlxuICAgICAgICAgICAgICAgICAgICDlop7ph4/mt7vliqDoioLngrlcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvSXRlbT5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IE5vcm1hbDtcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFNlbGVjdCwgSW5wdXQsIEJ1dHRvbiB9IGZyb20gJ2FudGQnO1xuaW1wb3J0IHsgSXRlbSB9IGZyb20gJ0Bjb20nO1xuaW1wb3J0IHNlcnZpY2UgZnJvbSAnQHNlcnZpY2UnO1xuaW1wb3J0IHsgUmFuZG9tU3RhdGUsIFJhbmRvbVByb3BzIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuXG5jb25zdCBTZWxlY3RPcHRpb24gPSBTZWxlY3QuT3B0aW9uO1xuXG5jb25zdCBtb2NrVHlwZXMgPSBbXG4gICAge1xuICAgICAgICB0eXBlOiAnY2lyY2xlJyxcbiAgICAgICAgbmFtZTogJ+mAieS4vui/nuaOpeS4reW/g+eCuScsXG4gICAgICAgIG9wdGlvbnM6ICdub2RlLTAnLFxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiAncmFuZG9tJyxcbiAgICAgICAgbmFtZTogJ+maj+acuuijgeWJqui+uScsXG4gICAgICAgIG9wdGlvbnM6ICcwLjMnLFxuICAgIH0sXG5dO1xuXG5jb25zdCBSYW5kb206IFJlYWN0LkZDPFJhbmRvbVByb3BzPiA9IHByb3BzID0+IHtcbiAgICBjb25zdCB7IGRpc3BhdGNoIH0gPSBwcm9wcztcblxuICAgIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gdXNlU3RhdGU8UmFuZG9tU3RhdGU+KHtcbiAgICAgICAgbm9kZUNvdW50OiAxMCxcbiAgICAgICAgbW9ja1R5cGU6ICdjaXJjbGUnLFxuICAgICAgICBvcHRpb25zOiAnbm9kZS0wJyxcbiAgICB9KTtcbiAgICBjb25zdCB7IG1vY2tUeXBlID0gJ2NpcmNsZScsIG5vZGVDb3VudCA9IDEwLCBvcHRpb25zID0gJ25vZGUtMCcgfSA9IHN0YXRlO1xuICAgIGNvbnN0IGhhbmRsZUNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgc2VydmljZS5xdWVyeUdyYXBoKG5vZGVDb3VudCwgbW9ja1R5cGUsIG9wdGlvbnMpO1xuICAgICAgICBkaXNwYXRjaCh7XG4gICAgICAgICAgICB0eXBlOiAnZ3JhcGgvY2hhbmdlRGF0YScsXG4gICAgICAgICAgICBwYXlsb2FkOiBkYXRhLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8SXRlbSB0aXRsZT1cIuiKgueCueS4quaVsFwiPlxuICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIui+k+WFpeiKgueCueaVsOmHj1wiXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScgfX1cbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e25vZGVDb3VudH1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0U3RhdGUoeyAuLi5zdGF0ZSwgbm9kZUNvdW50OiBOdW1iZXIoZS50YXJnZXQudmFsdWUpIH0pO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0l0ZW0+XG4gICAgICAgICAgICA8SXRlbSB0aXRsZT1cIui+ueeahOi/nuaOpeWFs+ezu1wiPlxuICAgICAgICAgICAgICAgIDxTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCLor7fpgInmi6novrnnmoTov57mjqXlhbPns7tcIlxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogJzEwMCUnIH19XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXttb2NrVHlwZX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9ja1R5cGU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IG1vY2tUeXBlcy5maWx0ZXIobW9jayA9PiBtb2NrLnR5cGUgPT09IHZhbHVlKVswXS5vcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7bW9ja1R5cGVzLm1hcChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgdHlwZSwgbmFtZSB9ID0gaXRlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlbGVjdE9wdGlvbiBrZXk9e3R5cGV9IHZhbHVlPXt0eXBlfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TZWxlY3RPcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICA8L1NlbGVjdD5cbiAgICAgICAgICAgIDwvSXRlbT5cbiAgICAgICAgICAgIDxJdGVtIHRpdGxlPXttb2NrVHlwZSA9PT0gJ3JhbmRvbScgPyAn6ZqP5py65Y+C5pWwJyA6ICfkuK3lv4PngrknfT5cbiAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e2DovpPlhaUke21vY2tUeXBlID09PSAncmFuZG9tJyA/ICfpmo/mnLrlj4LmlbAnIDogJ+S4reW/g+eCuSd9YH1cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6ICcxMDAlJyB9fVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17b3B0aW9uc31cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0U3RhdGUoeyAuLi5zdGF0ZSwgb3B0aW9uczogZS50YXJnZXQudmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvSXRlbT5cbiAgICAgICAgICAgIDxJdGVtIHRpdGxlPVwiXCI+XG4gICAgICAgICAgICAgICAgPEJ1dHRvbiBzdHlsZT17eyB3aWR0aDogJzEwMCUnIH19IG9uQ2xpY2s9e2hhbmRsZUNsaWNrfT5cbiAgICAgICAgICAgICAgICAgICAg5YWo6YeP5pu/5o2i6IqC54K5XG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L0l0ZW0+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBSYW5kb207XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IEZvbGRpbmdQYW5lbCBmcm9tICcuLi8uLi9Db21wb25lbnRzL0ZvbGRpbmdQYW5lbC9Gb2xkaW5nUGFuZWwnO1xuaW1wb3J0IE5vcm1hbCBmcm9tICcuL05vcm1hbCc7XG5pbXBvcnQgUmFuZG9tIGZyb20gJy4vUmFuZG9tJztcbmltcG9ydCB7IEFkZE5vZGVzUHJvcHMgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5cbmNvbnN0IEFkZE5vZGVzOiBSZWFjdC5GQzxBZGROb2Rlc1Byb3BzPiA9IHByb3BzID0+IHtcbiAgICBjb25zdCBkYXRhID0gW1xuICAgICAgICB7XG4gICAgICAgICAgICB0aXRsZTogJ+WinumHj+a3u+WKoOiKgueCuScsXG4gICAgICAgICAgICBjaGlsZHJlbjogPE5vcm1hbCB7Li4ucHJvcHN9IC8+LFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICB0aXRsZTogJ+WFqOmHj+abv+aNouiKgueCuScsXG4gICAgICAgICAgICBjaGlsZHJlbjogPFJhbmRvbSB7Li4ucHJvcHN9IC8+LFxuICAgICAgICB9LFxuICAgIF07XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxGb2xkaW5nUGFuZWwgZGF0YT17ZGF0YX0gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEFkZE5vZGVzO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEZvbGRpbmdQYW5lbCwgUHJvcGVydHkgfSBmcm9tICdAY29tJztcblxuaW1wb3J0IHsgR3JhcGhlbmVTdGF0ZSB9IGZyb20gJy4uLy4uL3R5cGVzJztcblxuaW50ZXJmYWNlIE5vZGVBdHRyUHJvcHMge1xuICAgIHN0YXRlOiBHcmFwaGVuZVN0YXRlO1xufVxuXG5jb25zdCBOb2RlQXR0cjogUmVhY3QuRkM8Tm9kZUF0dHJQcm9wcz4gPSBwcm9wcyA9PiB7XG4gICAgY29uc3QgeyBzdGF0ZSB9ID0gcHJvcHM7XG4gICAgY29uc3QgeyBzZWxlY3RlZE5vZGVzIH0gPSBzdGF0ZTtcbiAgICBjb25zdCBwcm9wZXJ0aWVzID0gc2VsZWN0ZWROb2Rlc1swXS5wcm9wZXJ0aWVzLm1hcChwcm9wZXJ0eSA9PiB7XG4gICAgICAgIGNvbnN0IHsgY29kZSwgbmFtZSwgdmFsdWUgfSA9IHByb3BlcnR5O1xuICAgICAgICByZXR1cm4gPFByb3BlcnR5IGtleT17Y29kZX0gbmFtZT17bmFtZX0gdmFsdWU9e3ZhbHVlfSAvPjtcbiAgICB9KTtcbiAgICBjb25zdCBzb3VyY2UgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRpdGxlOiAn5Z+656GA5L+h5oGvJyxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBwcm9wZXJ0aWVzLFxuICAgICAgICB9LFxuICAgIF07XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxGb2xkaW5nUGFuZWwgZGF0YT17c291cmNlfSAvPlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgTm9kZUF0dHI7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgR3JhcGhlbmVTdGF0ZSB9IGZyb20gJy4uLy4uL3R5cGVzJztcblxuaW50ZXJmYWNlIEVkZ2VBdHRyUHJvcHMge1xuICAgIHN0YXRlOiBHcmFwaGVuZVN0YXRlO1xufVxuXG5jb25zdCBFZGdlQXR0cjogUmVhY3QuRkM8RWRnZUF0dHJQcm9wcz4gPSAoKSA9PiB7XG4gICAgcmV0dXJuIDxkaXY+RWRnZUF0dHI8L2Rpdj47XG59O1xuXG5leHBvcnQgZGVmYXVsdCBFZGdlQXR0cjtcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgbm9kZVR5cGVzIGZyb20gJ0BzZXJ2aWNlL01vY2svbm9kZVR5cGVzJztcbmltcG9ydCB7IEVuaGFuY2VkQ2hlY2tib3ggfSBmcm9tICdAY29tJztcbmltcG9ydCB7IFR5cGVQcm9wcyB9IGZyb20gJy4vaW50ZXJmYWNlJztcblxuY29uc3Qgb3B0aW9ucyA9IG5vZGVUeXBlcy5tYXAoaXRlbSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbGFiZWw6IGl0ZW0ubmFtZSxcbiAgICAgICAgdmFsdWU6IGl0ZW0ubm9kZVR5cGUsXG4gICAgfTtcbn0pO1xuXG5jb25zdCBOb2RlVHlwZTogUmVhY3QuRkM8VHlwZVByb3BzPiA9IHByb3BzID0+IHtcbiAgICBjb25zdCB7IHZhbHVlLCBvbkNoYW5nZSB9ID0gcHJvcHM7XG4gICAgcmV0dXJuIDxFbmhhbmNlZENoZWNrYm94IG9wdGlvbnM9e29wdGlvbnN9IGNoZWNrZWRMaXN0PXt2YWx1ZX0gb25DaGFuZ2U9e29uQ2hhbmdlfSAvPjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IE5vZGVUeXBlO1xuIiwidHlwZSBFZGdlVHlwZXMgPSB7XG4gICAgLyoqIOexu+Wei+WQjeensCAqL1xuICAgIG5hbWU6IHN0cmluZztcbiAgICAvKiog57G75Z6LICovXG4gICAgbm9kZVR5cGU6IHN0cmluZztcbiAgICBjaGlsZHJlbj86IEFycmF5PEVkZ2VUeXBlcz47XG59O1xuY29uc3QgZWRnZVR5cGVzOiBFZGdlVHlwZXNbXSA9IFtcbiAgICB7IG5hbWU6ICflvLrlvLHlhbPns7snLCBub2RlVHlwZTogJ1VJRCcsIGNoaWxkcmVuOiBbeyBuYW1lOiAn5by6Lee7vOWQiCcsIG5vZGVUeXBlOiAnU1RST05HX1NVTScgfV0gfSxcbiAgICB7IG5hbWU6ICfnpL7kvJrlhbPns7snLCBub2RlVHlwZTogJ0NFUlROTycsIGNoaWxkcmVuOiBbeyBuYW1lOiAn5byxLeekvuS6pCcsIG5vZGVUeXBlOiAnV0VBS19TTlMnIH1dIH0sXG4gICAgeyBuYW1lOiAn5aqS5LuL5YWz57O7Jywgbm9kZVR5cGU6ICdCQU5LQ0FSRCcsIGNoaWxkcmVuOiBbeyBuYW1lOiAn5by6LeWqkuS7iycsIG5vZGVUeXBlOiAnU1RST05HX01FRElBJyB9XSB9LFxuXTtcbmV4cG9ydCBkZWZhdWx0IGVkZ2VUeXBlcztcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgZWRnZVR5cGVzIGZyb20gJ0BzZXJ2aWNlL01vY2svZWRnZVR5cGVzJztcbmltcG9ydCB7IFRyZWVTZWxlY3RvciB9IGZyb20gJ0Bjb20nO1xuaW1wb3J0IHsgVHlwZVByb3BzIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuXG5jb25zdCByZWxhdGlvblR5cGVEYXRhID0gZWRnZVR5cGVzLm1hcChpdGVtID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0aXRsZTogaXRlbS5uYW1lLFxuICAgICAgICBrZXk6IGl0ZW0ubm9kZVR5cGUsXG4gICAgICAgIGNoaWxkcmVuOiBpdGVtLmNoaWxkcmVuICYmIGl0ZW0uY2hpbGRyZW4ubWFwKGVsZSA9PiAoeyB0aXRsZTogZWxlLm5hbWUsIGtleTogZWxlLm5vZGVUeXBlIH0pKSxcbiAgICB9O1xufSk7XG5cbmNvbnN0IEVkZ2VUeXBlOiBSZWFjdC5GQzxUeXBlUHJvcHM+ID0gcHJvcHMgPT4ge1xuICAgIGNvbnN0IHsgdmFsdWUsIG9uQ2hhbmdlIH0gPSBwcm9wcztcbiAgICByZXR1cm4gKFxuICAgICAgICA8VHJlZVNlbGVjdG9yXG4gICAgICAgICAgICBkYXRhPXtyZWxhdGlvblR5cGVEYXRhfVxuICAgICAgICAgICAgZGVmYXVsdEV4cGFuZGVkS2V5PXtyZWxhdGlvblR5cGVEYXRhWzBdLmtleX1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZX1cbiAgICAgICAgICAgIGNoZWNrZWRMaXN0PXt2YWx1ZX1cbiAgICAgICAgLz5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgRWRnZVR5cGU7XG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdhbnRkJztcbmltcG9ydCB7IEZvbGRpbmdQYW5lbCB9IGZyb20gJ0Bjb20nO1xuaW1wb3J0IE5vZGVUeXBlIGZyb20gJy4vTm9kZVR5cGUnO1xuaW1wb3J0IEVkZ2VUeXBlIGZyb20gJy4vRWRnZVR5cGUnO1xuaW1wb3J0IHsgQ2hlY2tib3hWYWx1ZVR5cGUsIERpZmZ1c2VQYW5lbFByb3BzLCBEaWZmdXNlUGFuZWxTdGF0ZSB9IGZyb20gJy4vaW50ZXJmYWNlJztcbmltcG9ydCAnLi9pbmRleC5sZXNzJztcblxuY29uc3QgRGlmZnVzZVBhbmVsOiBSZWFjdC5GQzxEaWZmdXNlUGFuZWxQcm9wcz4gPSBwcm9wcyA9PiB7XG4gICAgY29uc3QgeyBkaXNwYXRjaCwgc3RhdGU6IHByb3BzRGF0YSB9ID0gcHJvcHM7XG4gICAgY29uc3QgeyBzZWxlY3RlZE5vZGVzIH0gPSBwcm9wc0RhdGE7XG4gICAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSB1c2VTdGF0ZTxEaWZmdXNlUGFuZWxTdGF0ZT4oe1xuICAgICAgICBzZWxlY3RlZE5vZGVUeXBlczogW10sXG4gICAgICAgIHNlbGVjdGVkRWRnZVR5cGVzOiBbXSxcbiAgICB9KTtcbiAgICBjb25zdCB7IHNlbGVjdGVkTm9kZVR5cGVzLCBzZWxlY3RlZEVkZ2VUeXBlcyB9ID0gc3RhdGU7XG4gICAgY29uc3QgaGFuZGxlQ2hhbmdlTm9kZVR5cGVzID0gKHZhbHVlOiBDaGVja2JveFZhbHVlVHlwZVtdKSA9PiB7XG4gICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICAgIC4uLnN0YXRlLFxuICAgICAgICAgICAgc2VsZWN0ZWROb2RlVHlwZXM6IHZhbHVlLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IGhhbmRsZUNoYW5nZUVkZ2VUeXBlcyA9ICh2YWx1ZTogQ2hlY2tib3hWYWx1ZVR5cGVbXSkgPT4ge1xuICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICAgIHNlbGVjdGVkRWRnZVR5cGVzOiB2YWx1ZSxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBjb25maXJtID0gKCkgPT4ge1xuICAgICAgICBkaXNwYXRjaCh7XG4gICAgICAgICAgICB0eXBlOiAnZ3JhcGgvZGlmZnVzZScsXG4gICAgICAgICAgICBwYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgc3RhcnQ6IHNlbGVjdGVkTm9kZXMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IGRhdGEgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRpdGxlOiAn5a6e5L2T57G75Z6LJyxcbiAgICAgICAgICAgIGNoaWxkcmVuOiA8Tm9kZVR5cGUgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZU5vZGVUeXBlc30gdmFsdWU9e3NlbGVjdGVkTm9kZVR5cGVzfSAvPixcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgdGl0bGU6ICflhbPns7vnsbvlnosnLFxuICAgICAgICAgICAgY2hpbGRyZW46IDxFZGdlVHlwZSBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlRWRnZVR5cGVzfSB2YWx1ZT17c2VsZWN0ZWRFZGdlVHlwZXN9IC8+LFxuICAgICAgICB9LFxuICAgIF07XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxGb2xkaW5nUGFuZWwgZGF0YT17ZGF0YX0gLz5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogcHJvcHNEYXRhLmRyYXdlci53aWR0aCxcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImRpZmZ1c2VfY29uZmlybV93cmFwcGVyXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8QnV0dG9uIGNsYXNzTmFtZT1cImRpZmZ1c2VfY29uZmlybV9idXR0b25cIiBvbkNsaWNrPXtjb25maXJtfT5cbiAgICAgICAgICAgICAgICAgICAg56Gu5a6aXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IERpZmZ1c2VQYW5lbDtcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBEcmF3ZXIgfSBmcm9tICdhbnRkJztcbmltcG9ydCBTZXR0aW5nIGZyb20gJy4uL1NldHRpbmcnO1xuaW1wb3J0IEFkZE5vZGVzIGZyb20gJy4uL0FkZE5vZGVzJztcbmltcG9ydCBOb2RlQXR0ciBmcm9tICcuLi9Ob2RlQXR0cic7XG5pbXBvcnQgRWRnZUF0dHIgZnJvbSAnLi4vRWRnZUF0dHInO1xuaW1wb3J0IERpZmZ1c2VQYW5lbCBmcm9tICcuLi9EaWZmdXNlUGFuZWwnO1xuaW1wb3J0ICcuL2luZGV4Lmxlc3MnO1xuaW1wb3J0IHsgR3JhcGhEcmF3ZXJQcm9wcyB9IGZyb20gJy4vaW50ZXJmYWNlJztcblxuY29uc3QgZ2V0Q29tcG9uZW50ID0gKGNvbXBvbmVudDogc3RyaW5nLCBwcm9wczogR3JhcGhEcmF3ZXJQcm9wcykgPT4ge1xuICAgIHN3aXRjaCAoY29tcG9uZW50KSB7XG4gICAgICAgIGNhc2UgJ3NldHRpbmcnOlxuICAgICAgICAgICAgcmV0dXJuIDxTZXR0aW5nIHsuLi5wcm9wc30gLz47XG4gICAgICAgIGNhc2UgJ2FkZE5vZGVzJzpcbiAgICAgICAgICAgIHJldHVybiA8QWRkTm9kZXMgey4uLnByb3BzfSAvPjtcbiAgICAgICAgY2FzZSAnbm9kZUF0dHInOlxuICAgICAgICAgICAgcmV0dXJuIDxOb2RlQXR0ciB7Li4ucHJvcHN9IC8+O1xuICAgICAgICBjYXNlICdlZGdlQXR0cic6XG4gICAgICAgICAgICByZXR1cm4gPEVkZ2VBdHRyIHsuLi5wcm9wc30gLz47XG4gICAgICAgIGNhc2UgJ2RpZmZ1c2UnOlxuICAgICAgICAgICAgcmV0dXJuIDxEaWZmdXNlUGFuZWwgey4uLnByb3BzfSAvPjtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn07XG5jb25zdCBoYW5kbGVDbG9zZSA9IChwcm9wczogR3JhcGhEcmF3ZXJQcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgZGlzcGF0Y2ggfSA9IHByb3BzO1xuICAgIGRpc3BhdGNoKHsgdHlwZTogJ2dyYXBoL2RyYXdlcicsIHBheWxvYWQ6IHsgdmlzaWJsZTogZmFsc2UsIHR5cGU6ICcnLCB3aWR0aDogbnVsbCB9IH0pO1xufTtcbmNvbnN0IEdyYXBoRHJhd2VyOiBSZWFjdC5GQzxHcmFwaERyYXdlclByb3BzPiA9IHByb3BzID0+IHtcbiAgICBjb25zdCB7XG4gICAgICAgIHN0YXRlOiB7IGRyYXdlciB9LFxuICAgIH0gPSBwcm9wcztcbiAgICBjb25zdCB7IHR5cGUsIHZpc2libGUsIHdpZHRoLCB0aXRsZSwgY2xvc2VNYXNrID0gZmFsc2UgfSA9IGRyYXdlcjtcbiAgICBjb25zdCBjb21wb25lbnQgPSBnZXRDb21wb25lbnQodHlwZSwgcHJvcHMpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxEcmF3ZXJcbiAgICAgICAgICAgICAgICB3aWR0aD17d2lkdGh9XG4gICAgICAgICAgICAgICAgdGl0bGU9e3RpdGxlfVxuICAgICAgICAgICAgICAgIHBsYWNlbWVudD1cInJpZ2h0XCJcbiAgICAgICAgICAgICAgICBjbG9zYWJsZVxuICAgICAgICAgICAgICAgIG1hc2s9eyFjbG9zZU1hc2t9XG4gICAgICAgICAgICAgICAgb25DbG9zZT17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVDbG9zZShwcm9wcyk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICB2aXNpYmxlPXt2aXNpYmxlfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtjb21wb25lbnR9XG4gICAgICAgICAgICA8L0RyYXdlcj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEdyYXBoRHJhd2VyO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEljb24gfSBmcm9tICdhbnRkJztcbmltcG9ydCB7IEdyYXBoZW5lU3RhdGUgfSBmcm9tICcuLi8uLi90eXBlcyc7XG5cbmludGVyZmFjZSBDbGVhclByb3BzIHtcbiAgICBzdGF0ZTogR3JhcGhlbmVTdGF0ZTtcbn1cblxuY29uc3QgQ2xlYXI6IFJlYWN0LkZDPENsZWFyUHJvcHM+ID0gKCkgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8SWNvbiB0eXBlPVwiaW5mby1jaXJjbGVcIiAvPiDmuIXnqbrlvZPliY3nlLvluINcbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IENsZWFyO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEdyYXBoIH0gZnJvbSAnQGFudHYvZ3JhcGhpbic7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gJ2FudGQnO1xuaW1wb3J0IEl0ZW0gZnJvbSAnLi4vLi4vQ29tcG9uZW50cy9JdGVtL0l0ZW0nO1xuaW1wb3J0ICcuL2luZGV4Lmxlc3MnO1xuXG5pbnRlcmZhY2UgU2F2ZVByb3BzIHtcbiAgICBncmFwaD86IEdyYXBoO1xufVxuXG5jb25zdCBTYXZlOiBSZWFjdC5GQzxTYXZlUHJvcHM+ID0gcHJvcHMgPT4ge1xuICAgIGNvbnN0IHsgZ3JhcGggfSA9IHByb3BzO1xuXG4gICAgY29uc3QgdXJsID0gZ3JhcGgudG9EYXRhVVJMKCkgYXMgc3RyaW5nO1xuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JhcGhpbi1zdHVkaW8tc2F2ZVwiPlxuICAgICAgICAgICAgPGltZyBzcmM9e3VybH0gYWx0PVwiXCIgd2lkdGg9XCIxMDAlXCIgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFNhdmU7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgTW9kYWwgfSBmcm9tICdhbnRkJztcbmltcG9ydCB7IEdyYXBoICB9ICAgZnJvbSAnQGFudHYvZ3JhcGhpbidcbmltcG9ydCB7IEdyYXBoZW5lU3RhdGUsIERpc3BhdGNoIH0gZnJvbSAnc3JjL3R5cGVzJztcbmltcG9ydCBDbGVhciBmcm9tICcuLi9DbGVhcic7XG5pbXBvcnQgU2F2ZSBmcm9tICcuLi9TYXZlJztcblxuaW50ZXJmYWNlIEdyYXBoTW9kYWxQcm9wcyB7XG4gICAgZGlzcGF0Y2g6IERpc3BhdGNoO1xuICAgIHN0YXRlOiBHcmFwaGVuZVN0YXRlO1xuICAgIGdyYXBoPzogR3JhcGg7XG59XG5jb25zdCBoYW5kbGVDbG9zZSA9IChwcm9wczogR3JhcGhNb2RhbFByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBkaXNwYXRjaCB9ID0gcHJvcHM7XG4gICAgZGlzcGF0Y2goeyB0eXBlOiAnZ3JhcGgvbW9kYWwnLCBwYXlsb2FkOiB7IHZpc2libGU6IGZhbHNlLCB0eXBlOiAnJyB9IH0pO1xufTtcblxuY29uc3QgZ2V0Q29tcG9uZW50ID0gKGNvbXBvbmVudDogc3RyaW5nLCBwcm9wczogR3JhcGhNb2RhbFByb3BzKSA9PiB7XG4gICAgc3dpdGNoIChjb21wb25lbnQpIHtcbiAgICAgICAgY2FzZSAnc2F2ZSc6XG4gICAgICAgICAgICByZXR1cm4gPFNhdmUgey4uLnByb3BzfSAvPjtcbiAgICAgICAgY2FzZSAnY2xlYXInOlxuICAgICAgICAgICAgcmV0dXJuIDxDbGVhciB7Li4ucHJvcHN9IC8+O1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59O1xuXG5jb25zdCBHcmFwaE1vZGFsOiBSZWFjdC5GQzxHcmFwaE1vZGFsUHJvcHM+ID0gcHJvcHMgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgICAgc3RhdGU6IHsgbW9kYWwgfSxcbiAgICB9ID0gcHJvcHM7XG4gICAgY29uc3QgeyB0aXRsZSA9ICcnLCB2aXNpYmxlLCB0eXBlID0gJycsIGhhbmRsZU9rID0gKCkgPT4ge30gfSA9IG1vZGFsO1xuICAgIGNvbnN0IGNvbXBvbmVudCA9IGdldENvbXBvbmVudCh0eXBlLCBwcm9wcyk7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxNb2RhbFxuICAgICAgICAgICAgICAgIHRpdGxlPXt0aXRsZX1cbiAgICAgICAgICAgICAgICB2aXNpYmxlPXt2aXNpYmxlfVxuICAgICAgICAgICAgICAgIG9uT2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlT2soKTtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlQ2xvc2UocHJvcHMpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgb25DYW5jZWw9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlQ2xvc2UocHJvcHMpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge2NvbXBvbmVudH1cbiAgICAgICAgICAgIDwvTW9kYWw+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBHcmFwaE1vZGFsO1xuIiwiaW1wb3J0IHsgR3JhcGhlbmVTdGF0ZSB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCBTdG9yYWdlIGZyb20gJy4uL1NlcnZpY2UvU3RvcmFnZSc7XG5cbmNvbnN0IHN0b3JhZ2UgPSBuZXcgU3RvcmFnZSgnZ3JhcGhpbi1zdHVkaW8nKTtcblxuaWYgKCFzdG9yYWdlLmdldCgnY29uZmlnJykpIHtcbiAgICBzdG9yYWdlLnNldCgnY29uZmlnJywge1xuICAgICAgICB0b29sYmFyOiB7XG4gICAgICAgICAgICBkaXJlY3Rpb246ICd2ZXJ0aWNhbCcsXG4gICAgICAgIH0sXG4gICAgICAgIHRoZW1lOiAnbGlnaHQnLFxuICAgIH0pO1xufVxuXG5jb25zdCBpbml0aWFsU3RhdGU6IEdyYXBoZW5lU3RhdGUgPSB7XG4gICAgZGF0YToge1xuICAgICAgICBub2RlczogW10sXG4gICAgICAgIGVkZ2VzOiBbXSxcbiAgICB9LFxuICAgIGxheW91dDoge1xuICAgICAgICBuYW1lOiAnZm9yY2UnLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICBwcmVzZXQ6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnY29uY2VudHJpYycsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH0sXG5cbiAgICBzZWxlY3RlZE5vZGVzOiBbXSxcbiAgICBkcmF3ZXI6IHtcbiAgICAgICAgdmlzaWJsZTogZmFsc2UsXG4gICAgICAgIHR5cGU6ICcnLFxuICAgIH0sXG4gICAgbW9kYWw6IHtcbiAgICAgICAgdmlzaWJsZTogZmFsc2UsXG4gICAgfSxcbiAgICBzZWFyY2hCYXI6IHtcbiAgICAgICAgdmlzaWJsZTogZmFsc2UsXG4gICAgfSxcbiAgICB0b29sYmFyOiB7XG4gICAgICAgIGRpcmVjdGlvbjogc3RvcmFnZS5nZXQoJ2NvbmZpZycpLnRvb2xiYXIuZGlyZWN0aW9uLFxuICAgIH0sXG4gICAgdGhlbWU6IHN0b3JhZ2UuZ2V0KCdjb25maWcnKS50aGVtZSxcblxuICAgIGdyYXBoUmVmOiB7XG4gICAgICAgIGN1cnJlbnQ6IG51bGwsXG4gICAgfSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGluaXRpYWxTdGF0ZTtcbiIsIi8qKlxuICogQGV4YW1wbGUgdW5pcXVlRWxlbWVudHNCeShcbiAgW1xuICAgIHsgaWQ6IDAsIHZhbHVlOiAnYScgfSxcbiAgICB7IGlkOiAxLCB2YWx1ZTogJ2InIH0sXG4gICAgeyBpZDogMiwgdmFsdWU6ICdjJyB9LFxuICAgIHsgaWQ6IDEsIHZhbHVlOiAnZCcgfSxcbiAgICB7IGlkOiAwLCB2YWx1ZTogJ2UnIH1cbiAgXSxcbiAgKGEsIGIpID0+IGEuaWQgPT0gYi5pZFxuKTsgLy8gWyB7IGlkOiAwLCB2YWx1ZTogJ2EnIH0sIHsgaWQ6IDEsIHZhbHVlOiAnYicgfSwgeyBpZDogMiwgdmFsdWU6ICdjJyB9IF1cbiAqIFxuICogQHBhcmFtIHsqfSBhcnIgXG4gKiBAcGFyYW0geyp9IGZuIFxuICogQGNhdGVnb3J5IFV0aWxzXG4gKi9cbmNvbnN0IHVuaXF1ZUVsZW1lbnRzQnkgPSA8VD4oXG4gICAgYXJyOiBUW10sIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICBmbjogKGE6IFQsIGI6IFQpID0+IGJvb2xlYW4sIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbikgPT5cbiAgICBhcnIucmVkdWNlKChhY2MsIHYpID0+IHtcbiAgICAgICAgaWYgKCFhY2Muc29tZSh4ID0+IGZuKHYsIHgpKSkgYWNjLnB1c2godik7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwgW10pO1xuXG5leHBvcnQgZGVmYXVsdCB1bmlxdWVFbGVtZW50c0J5O1xuIiwiaW1wb3J0IHsgdXBkYXRlQ2hhaW4gfSBmcm9tICdpbW11dGFiaWxpdHktaGVscGVyLXgnO1xuaW1wb3J0IHsgVXRpbHMgfSBmcm9tICdAYW50di9ncmFwaGluJztcbmltcG9ydCB1bmlxdWVFbGVtZW50c0J5IGZyb20gJy4uLy4uL1V0aWxzL2hlbHBlcic7XG5pbXBvcnQgdHJhbnNmb3JtIGZyb20gJy4uLy4uL0N1c3RvbS90cmFuc2Zvcm0nO1xuaW1wb3J0IGdldE5vZGVQcm9wZXJ0aWVzIGZyb20gJy4uLy4uL1NlcnZpY2UvZ2V0Tm9kZVByb3BlcnRpZXMnO1xuaW1wb3J0IHsgTm9kZURhdGEsIEVkZ2VEYXRhLCBHcmFwaGVuZVN0YXRlIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xuXG5jb25zdCBkaWZmdXNlUmVkdWNlciA9IChzdGF0ZTogR3JhcGhlbmVTdGF0ZSwgc3RhcnROb2RlczogTm9kZURhdGFbXSkgPT4ge1xuICAgIGNvbnN0IGNvdW50ID0gTWF0aC5yb3VuZCgoTWF0aC5yYW5kb20oKSArIDEpICogNSk7XG5cbiAgICBjb25zdCB7IG5vZGVzLCBlZGdlcyB9ID0gVXRpbHMubW9jayhjb3VudClcbiAgICAgICAgLmV4cGFuZChzdGFydE5vZGVzKVxuICAgICAgICAudmFsdWUoKTtcblxuICAgIGNvbnN0IGRhdGEgPSB0cmFuc2Zvcm0uZGF0YSh7XG4gICAgICAgIG5vZGVzOiBnZXROb2RlUHJvcGVydGllcyhub2RlcyksXG4gICAgICAgIGVkZ2VzLFxuICAgIH0pO1xuXG4gICAgY29uc3QgbWVyZ2VOb2RlcyA9IHVuaXF1ZUVsZW1lbnRzQnkoWy4uLmRhdGEubm9kZXMsIC4uLnN0YXRlLmRhdGEubm9kZXNdLCAoYTogTm9kZURhdGEsIGI6IE5vZGVEYXRhKSA9PiB7XG4gICAgICAgIHJldHVybiBhLmlkID09PSBiLmlkO1xuICAgIH0pO1xuICAgIGNvbnN0IG1lcmdlRWRnZXMgPSB1bmlxdWVFbGVtZW50c0J5KFsuLi5kYXRhLmVkZ2VzLCAuLi5zdGF0ZS5kYXRhLmVkZ2VzXSwgKGE6IEVkZ2VEYXRhLCBiOiBFZGdlRGF0YSkgPT4ge1xuICAgICAgICByZXR1cm4gYS5zb3VyY2UgPT09IGIuc291cmNlICYmIGEudGFyZ2V0ID09PSBiLnRhcmdldDtcbiAgICB9KTtcbiAgICBjb25zdCB7IGxheW91dCB9ID0gc3RhdGU7XG5cbiAgICByZXR1cm4gdXBkYXRlQ2hhaW4oc3RhdGUpXG4gICAgICAgIC4kc2V0KCdkYXRhJywge1xuICAgICAgICAgICAgbm9kZXM6IG1lcmdlTm9kZXMsXG4gICAgICAgICAgICBlZGdlczogbWVyZ2VFZGdlcyxcbiAgICAgICAgfSlcbiAgICAgICAgLiRzZXQoJ2RyYXdlci52aXNpYmxlJywgZmFsc2UpXG4gICAgICAgIC4kc2V0KCdkcmF3ZXIudHlwZScsICcnKVxuICAgICAgICAuJHNldCgnbGF5b3V0Jywge1xuICAgICAgICAgICAgbmFtZTogbGF5b3V0Lm5hbWUsXG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgLi4ubGF5b3V0Lm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgcHJlc2V0OiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGxheW91dC5uYW1lLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgICAgICAudmFsdWUoKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGRpZmZ1c2VSZWR1Y2VyO1xuIiwiaW1wb3J0IHsgdXBkYXRlQ2hhaW4gfSBmcm9tICdpbW11dGFiaWxpdHktaGVscGVyLXgnO1xuaW1wb3J0IFN0b3JhZ2UgZnJvbSAnLi4vLi4vU2VydmljZS9TdG9yYWdlJztcbmltcG9ydCB7IEdyYXBoZW5lU3RhdGUgfSBmcm9tICcuLi8uLi90eXBlcyc7XG5cbmNvbnN0IGNoYW5nZVRvb2xiYXJSZWR1Y2VyID0gKHN0YXRlOiBHcmFwaGVuZVN0YXRlLCBkaXJlY3Rpb246IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHN0b3JhZ2UgPSBuZXcgU3RvcmFnZSgnZ3JhcGhpbi1zdHVkaW8nKTtcbiAgICBzdG9yYWdlLnNldCgnY29uZmlnJywge1xuICAgICAgICAuLi5zdG9yYWdlLmdldCgnY29uZmlnJyksXG4gICAgICAgIHRvb2xiYXI6IHtcbiAgICAgICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiB1cGRhdGVDaGFpbihzdGF0ZSlcbiAgICAgICAgLiRzZXQoJ3Rvb2xiYXIuZGlyZWN0aW9uJywgZGlyZWN0aW9uKVxuICAgICAgICAudmFsdWUoKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNoYW5nZVRvb2xiYXJSZWR1Y2VyO1xuIiwiaW1wb3J0IHsgdXBkYXRlQ2hhaW4gfSBmcm9tICdpbW11dGFiaWxpdHktaGVscGVyLXgnO1xuaW1wb3J0IHsgTm9kZURhdGEsIEdyYXBoZW5lU3RhdGUgfSBmcm9tICcuLi8uLi90eXBlcyc7XG5cbmNvbnN0IGRlbGV0ZU5vZGVzID0gKHN0YXRlOiBHcmFwaGVuZVN0YXRlLCBzZWxlY3RlZE5vZGVzOiBOb2RlRGF0YVtdKSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgICBkYXRhOiB7IG5vZGVzLCBlZGdlcyB9LFxuICAgIH0gPSBzdGF0ZTtcblxuICAgIGNvbnN0IHNlbGVjdGVkTm9kZUlkcyA9IHNlbGVjdGVkTm9kZXMubWFwKChub2RlOiBOb2RlRGF0YSkgPT4gbm9kZS5pZCk7XG4gICAgY29uc3QgbmV3Tm9kZXMgPSBub2Rlcy5maWx0ZXIobm9kZSA9PiAhc2VsZWN0ZWROb2RlSWRzLmluY2x1ZGVzKG5vZGUuaWQpKTtcbiAgICBjb25zdCBuZXdFZGdlcyA9IGVkZ2VzLmZpbHRlcihcbiAgICAgICAgZWRnZSA9PiAhc2VsZWN0ZWROb2RlSWRzLmluY2x1ZGVzKGVkZ2Uuc291cmNlKSAmJiAhc2VsZWN0ZWROb2RlSWRzLmluY2x1ZGVzKGVkZ2UudGFyZ2V0KSxcbiAgICApO1xuXG4gICAgcmV0dXJuIHVwZGF0ZUNoYWluKHN0YXRlKVxuICAgICAgICAuJHNldCgnZHJhd2VyJywgeyB2aXNpYmxlOiBmYWxzZSwgdHlwZTogJycgfSlcbiAgICAgICAgLiRzZXQoJ3NlbGVjdGVkTm9kZXMnLCBbXSlcbiAgICAgICAgLiRzZXQoJ2RhdGEnLCB7IG5vZGVzOiBuZXdOb2RlcywgZWRnZXM6IG5ld0VkZ2VzIH0pXG4gICAgICAgIC52YWx1ZSgpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZGVsZXRlTm9kZXM7XG4iLCJpbXBvcnQgeyB1cGRhdGVDaGFpbiB9IGZyb20gJ2ltbXV0YWJpbGl0eS1oZWxwZXIteCc7XG5pbXBvcnQgZGlmZnVzZVJlZHVjZXIgZnJvbSAnLi9yZWR1Y2VyL2RpZmZ1c2UnO1xuaW1wb3J0IGNoYW5nZVRvb2xiYXJSZWR1Y2VyIGZyb20gJy4vcmVkdWNlci9jaGFuZ2VUb29sYmFyJztcbmltcG9ydCBkZWxldGVOb2RlcyBmcm9tICcuL3JlZHVjZXIvZGVsZXRlTm9kZXMnO1xuaW1wb3J0IHsgR3JhcGhlbmVTdGF0ZSB9IGZyb20gJy4uL3R5cGVzJztcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG5jb25zdCByZWR1Y2VyID0gKHN0YXRlOiBHcmFwaGVuZVN0YXRlLCBhY3Rpb246IHsgdHlwZTogc3RyaW5nOyBwYXlsb2FkOiB7IFtrZXk6IHN0cmluZ106IGFueSB9IH0pID0+IHtcbiAgICBjb25zdCB7IHR5cGUsIHBheWxvYWQgfSA9IGFjdGlvbjtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAnZ3JhcGgvZHJhd2VyJzpcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVDaGFpbihzdGF0ZSlcbiAgICAgICAgICAgICAgICAuJHNldCgnZHJhd2VyLnZpc2libGUnLCBwYXlsb2FkLnZpc2libGUpXG4gICAgICAgICAgICAgICAgLiRzZXQoJ2RyYXdlci50eXBlJywgcGF5bG9hZC50eXBlKVxuICAgICAgICAgICAgICAgIC4kc2V0KCdkcmF3ZXIud2lkdGgnLCBwYXlsb2FkLndpZHRoIHx8ICdub25lJylcbiAgICAgICAgICAgICAgICAuJHNldCgnZHJhd2VyLnRpdGxlJywgcGF5bG9hZC50aXRsZSlcbiAgICAgICAgICAgICAgICAuJHNldCgnZHJhd2VyLmNsb3NlTWFzaycsIHBheWxvYWQuY2xvc2VNYXNrKVxuICAgICAgICAgICAgICAgIC52YWx1ZSgpO1xuICAgICAgICBjYXNlICdncmFwaC9tb2RhbCc6XG4gICAgICAgICAgICByZXR1cm4gdXBkYXRlQ2hhaW4oc3RhdGUpXG4gICAgICAgICAgICAgICAgLiRzZXQoJ21vZGFsLnZpc2libGUnLCBwYXlsb2FkLnZpc2libGUpXG4gICAgICAgICAgICAgICAgLiRzZXQoJ21vZGFsLnR5cGUnLCBwYXlsb2FkLnR5cGUpXG4gICAgICAgICAgICAgICAgLiRzZXQoJ21vZGFsLnRpdGxlJywgcGF5bG9hZC50aXRsZSlcbiAgICAgICAgICAgICAgICAuJHNldCgnbW9kYWwuaGFuZGxlT2snLCBwYXlsb2FkLmhhbmRsZU9rKVxuICAgICAgICAgICAgICAgIC52YWx1ZSgpO1xuICAgICAgICBjYXNlICdncmFwaC9zZWFyY2hCYXInOlxuICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUNoYWluKHN0YXRlKVxuICAgICAgICAgICAgICAgIC4kc2V0KCdzZWFyY2hCYXIudmlzaWJsZScsIHBheWxvYWQudmlzaWJsZSlcbiAgICAgICAgICAgICAgICAudmFsdWUoKTtcbiAgICAgICAgY2FzZSAnZ3JhcGgvYWRkTm9kZXMnOlxuICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUNoYWluKHN0YXRlKVxuICAgICAgICAgICAgICAgIC4kc2V0KCdkYXRhJywgcGF5bG9hZClcbiAgICAgICAgICAgICAgICAudmFsdWUoKTtcbiAgICAgICAgY2FzZSAnZ3JhcGgvY2hhbmdlRGF0YSc6XG4gICAgICAgICAgICByZXR1cm4gdXBkYXRlQ2hhaW4oc3RhdGUpXG4gICAgICAgICAgICAgICAgLiRzZXQoJ2RhdGEnLCBwYXlsb2FkKVxuICAgICAgICAgICAgICAgIC52YWx1ZSgpO1xuICAgICAgICBjYXNlICdncmFwaC9jaGFuZ2VMYXlvdXQnOlxuICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUNoYWluKHN0YXRlKVxuICAgICAgICAgICAgICAgIC4kc2V0KCdsYXlvdXQnLCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHBheWxvYWQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJlc2V0OiBzdGF0ZS5sYXlvdXQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnBheWxvYWQub3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC52YWx1ZSgpO1xuICAgICAgICBjYXNlICdncmFwaC9ub2RlLWNsaWNrJzpcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVDaGFpbihzdGF0ZSlcbiAgICAgICAgICAgICAgICAuJHNldCgnc2VsZWN0ZWROb2RlcycsIHBheWxvYWQuc2VsZWN0ZWROb2RlcylcbiAgICAgICAgICAgICAgICAuJHNldCgnZHJhd2VyLnZpc2libGUnLCBwYXlsb2FkLmRyYXdlci52aXNpYmxlKVxuICAgICAgICAgICAgICAgIC4kc2V0KCdkcmF3ZXIudHlwZScsIHBheWxvYWQuZHJhd2VyLnR5cGUpXG4gICAgICAgICAgICAgICAgLiRzZXQoJ2RyYXdlci53aWR0aCcsIHBheWxvYWQuZHJhd2VyLndpZHRoKVxuICAgICAgICAgICAgICAgIC4kc2V0KCdkcmF3ZXIudGl0bGUnLCBwYXlsb2FkLmRyYXdlci50aXRsZSlcbiAgICAgICAgICAgICAgICAuJHNldCgnZHJhd2VyLmNsb3NlTWFzaycsIHBheWxvYWQuZHJhd2VyLmNsb3NlTWFzaylcbiAgICAgICAgICAgICAgICAudmFsdWUoKTtcbiAgICAgICAgY2FzZSAnZ3JhcGgvY2FudmFzLWNsaWNrJzpcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVDaGFpbihzdGF0ZSlcbiAgICAgICAgICAgICAgICAuJHNldCgnZHJhd2VyJywgcGF5bG9hZC5kcmF3ZXIpXG4gICAgICAgICAgICAgICAgLiRzZXQoJ21vZGFsJywgcGF5bG9hZC5tb2RhbClcbiAgICAgICAgICAgICAgICAuJHNldCgnc2VhcmNoQmFyJywgcGF5bG9hZC5zZWFyY2hCYXIpXG4gICAgICAgICAgICAgICAgLiRzZXQoJ3NlbGVjdGVkTm9kZXMnLCBwYXlsb2FkLnNlbGVjdGVkTm9kZXMpXG4gICAgICAgICAgICAgICAgLnZhbHVlKCk7XG4gICAgICAgIGNhc2UgJ2dyYXBoL2RpZmZ1c2UnOlxuICAgICAgICAgICAgcmV0dXJuIGRpZmZ1c2VSZWR1Y2VyKHN0YXRlLCBwYXlsb2FkLnN0YXJ0KTtcbiAgICAgICAgY2FzZSAnZ3JhcGgvY2hhbmdlVG9vbGJhcic6XG4gICAgICAgICAgICByZXR1cm4gY2hhbmdlVG9vbGJhclJlZHVjZXIoc3RhdGUsIHBheWxvYWQuZGlyZWN0aW9uKTtcbiAgICAgICAgY2FzZSAnZ3JhcGgvZGVsZXRlTm9kZXMnOlxuICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZU5vZGVzKHN0YXRlLCBwYXlsb2FkLnNlbGVjdGVkTm9kZXMpO1xuXG4gICAgICAgIGNhc2UgJ2dyYXBoL2dyYXBoUmVmJzpcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVDaGFpbihzdGF0ZSlcbiAgICAgICAgICAgICAgICAuJHNldCgnZ3JhcGhSZWYnLCBwYXlsb2FkKVxuICAgICAgICAgICAgICAgIC52YWx1ZSgpO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IHJlZHVjZXI7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgSWNvbiwgUmFkaW8gfSBmcm9tICdhbnRkJztcbmltcG9ydCB7IFJhZGlvQ2hhbmdlRXZlbnQgfSBmcm9tICdhbnRkL2xpYi9yYWRpbyc7XG5cbmNvbnN0IHJhZGlvU3R5bGU6IFJlYWN0LkNTU1Byb3BlcnRpZXMgPSB7XG4gICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICBoZWlnaHQ6ICczMHB4JyxcbiAgICBsaW5lSGVpZ2h0OiAnMzBweCcsXG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIExheW91dFZhbHVlIHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBvcHRpb25zPzogYW55O1xuICAgIGRlc2M6IHN0cmluZztcbiAgICBpY29uOiBzdHJpbmc7XG4gICAgZGlzYWJsZWQ/OiBib29sZWFuO1xufVxuaW50ZXJmYWNlIFZhbHVlIHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBvcHRpb25zPzogYW55O1xufVxuXG5pbnRlcmZhY2UgTGF5b3V0U2VsZWN0b3JQcm9wcyB7XG4gICAgdmFsdWU6IFZhbHVlO1xuICAgIG9uQ2hhbmdlOiAodmFsdWU6IFZhbHVlKSA9PiB2b2lkO1xuICAgIGxheW91dHM6IExheW91dFZhbHVlW107XG59XG5cbmNvbnN0IExheW91dFNlbGVjdG9yID0gKHByb3BzOiBMYXlvdXRTZWxlY3RvclByb3BzKSA9PiB7XG4gICAgY29uc3QgeyB2YWx1ZSwgb25DaGFuZ2UsIGxheW91dHMgfSA9IHByb3BzO1xuXG4gICAgY29uc3QgaGFuZGxlQ2hhbmdlID0gKHsgdGFyZ2V0IH06IFJhZGlvQ2hhbmdlRXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgbGF5b3V0ID0gbGF5b3V0cy5maW5kKGl0ZW0gPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gdGFyZ2V0LnZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG9uQ2hhbmdlKSB7XG4gICAgICAgICAgICBvbkNoYW5nZSh7XG4gICAgICAgICAgICAgICAgbmFtZTogbGF5b3V0Lm5hbWUsXG4gICAgICAgICAgICAgICAgb3B0aW9uczogbGF5b3V0Lm9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsYXlvdXQtc2VsZWN0b3JcIj5cbiAgICAgICAgICAgIDxSYWRpby5Hcm91cCB2YWx1ZT17dmFsdWUubmFtZX0gb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX0+XG4gICAgICAgICAgICAgICAge2xheW91dHMubWFwKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG5hbWUsIGljb24sIGRpc2FibGVkLCBkZXNjIH0gPSBpdGVtO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPFJhZGlvIGtleT17bmFtZX0gdmFsdWU9e25hbWV9IGRpc2FibGVkPXtkaXNhYmxlZH0gc3R5bGU9e3JhZGlvU3R5bGV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uIHR5cGU9e2ljb259IC8+ICZuYnNwO3tkZXNjfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9SYWRpbz5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvUmFkaW8uR3JvdXA+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBMYXlvdXRTZWxlY3RvcjtcbiIsImltcG9ydCBMYXlvdXRTZWxlY3RvciBmcm9tICcuL1JhZGlvJztcblxuZXhwb3J0IGRlZmF1bHQgTGF5b3V0U2VsZWN0b3I7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgUmVuZGVyUHJvcHMgfSBmcm9tICdAYW50di9ncmFwaGluLWNvbXBvbmVudHMnO1xuaW1wb3J0IExheW91dFNlbGVjdG9yIGZyb20gJy4uL0NvcmUvTGF5b3V0U2VsZWN0b3InO1xuaW1wb3J0IHsgR3JhcGhlbmVTdGF0ZSwgRGlzcGF0Y2gsIExheW91dCB9IGZyb20gJy4uL3R5cGVzJztcblxuY29uc3QgcmVuZGVyVG9vbGJhciA9IChyZW5kZXJQcm9wczogUmVuZGVyUHJvcHMsIHN0YXRlOiBHcmFwaGVuZVN0YXRlLCBkaXNwYXRjaDogRGlzcGF0Y2gpID0+IHtcbiAgICBjb25zdCB7IHRvb2xiYXJDZmcgfSA9IHJlbmRlclByb3BzO1xuICAgIGNvbnN0IHsgbGF5b3V0IH0gPSBzdGF0ZTtcbiAgICBjb25zdCB7IGxheW91dHMgfSA9IHJlbmRlclByb3BzLmFwaXMuZ2V0SW5mbygpO1xuXG4gICAgY29uc3QgUmFkaW9MYXlvdXRzID0gbGF5b3V0cy5tYXAoaXRlbXMgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uaXRlbXMsXG4gICAgICAgICAgICBvcHRpb25zOiB7fSxcbiAgICAgICAgfTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGl0ZW1zID0gW1xuICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ2xheW91dCcsXG4gICAgICAgICAgICBuYW1lOiBg5biD5bGA5pa55qGIYCxcbiAgICAgICAgICAgIGljb246ICdsYXlvdXQnLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiB7fSxcbiAgICAgICAgICAgIHN0eWxlOiB7fSxcbiAgICAgICAgICAgIHJlbmRlclRvb2x0aXA6ICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8TGF5b3V0U2VsZWN0b3JcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheW91dHM9e1JhZGlvTGF5b3V0c31cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtsYXlvdXR9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHBhcmFtczogTGF5b3V0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZ3JhcGgvY2hhbmdlTGF5b3V0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcGFyYW1zLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBwYXJhbXMub3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgXTtcblxuICAgIHJldHVybiBbLi4uaXRlbXMsIC4uLnRvb2xiYXJDZmddO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgcmVuZGVyVG9vbGJhcjtcbiIsImltcG9ydCB7IG5vdGlmaWNhdGlvbiwgTW9kYWwgfSBmcm9tICdhbnRkJztcbmltcG9ydCBjb3B5MkNsaXBib2FyZCBmcm9tICdjb3B5LXRvLWNsaXBib2FyZCc7XG5pbXBvcnQgeyBHcmFwaGVuZVN0YXRlLCBEaXNwYXRjaCB9IGZyb20gJy4uL3R5cGVzJztcblxuaW50ZXJmYWNlIENvbnRleHRNZW51IGV4dGVuZHMgR3JhcGhlbmVTdGF0ZSB7XG4gICAgZGlzcGF0Y2g6IERpc3BhdGNoO1xufVxuY29uc3QgcmVuZGVyQ29udGV4dE1lbnUgPSAob3B0aW9uOiBDb250ZXh0TWVudSkgPT4gIHtcbiAgICBjb25zdCB7IHNlbGVjdGVkTm9kZXMsIGRpc3BhdGNoIH0gPSBvcHRpb247XG5cbiAgICBjb25zdCBvcGVuTm90aWZpY2F0aW9uID0gKHR5cGU6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nKSA9PiB7XG4gICAgICAgIG5vdGlmaWNhdGlvblt0eXBlXSh7XG4gICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBjb25zdCBjb3B5SWQgPSAoKSA9PiB7XG4gICAgICAgIGlmIChzZWxlY3RlZE5vZGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgb3Blbk5vdGlmaWNhdGlvbignaW5mbycsICflpI3liLZJRCcsICflpI3liLZJROmcgOimgeiHs+WwkemAieS4reS4gOS4quiKgueCuScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5vZGVJZHMgPSBzZWxlY3RlZE5vZGVzLm1hcChub2RlID0+IG5vZGUuaWQpLmpvaW4oJywnKTtcbiAgICAgICAgaWYgKGNvcHkyQ2xpcGJvYXJkKG5vZGVJZHMpKSB7XG4gICAgICAgICAgICBvcGVuTm90aWZpY2F0aW9uKCdzdWNjZXNzJywgJ+WkjeWItklEJywgJ+WkjeWItklE5oiQ5YqfJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvcGVuTm90aWZpY2F0aW9uKCdzdWNjZXNzJywgJ+WkjeWItklEJywgJ+WkjeWItklE5aSx6LSlJyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgZGVsZXRlTm9kZXMgPSAoKSA9PiB7XG4gICAgICAgIGlmIChzZWxlY3RlZE5vZGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgb3Blbk5vdGlmaWNhdGlvbignaW5mbycsICfliKDpmaTlrp7kvZMnLCAn5Yig6Zmk5a6e5L2T6ZyA6KaB6Iez5bCR6YCJ5Lit5LiA5Liq6IqC54K5Jyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgbm9kZU5hbWUgPSBzZWxlY3RlZE5vZGVzWzBdLmlkO1xuICAgICAgICBjb25zdCBjb250ZW50ID1cbiAgICAgICAgICAgIHNlbGVjdGVkTm9kZXMubGVuZ3RoID09PSAxXG4gICAgICAgICAgICAgICAgPyBg56Gu5a6a5Yig6ZmkJHtub2RlTmFtZX3lrp7kvZPvvJ9gXG4gICAgICAgICAgICAgICAgOiBg56Gu5a6a5Yig6ZmkJHtub2RlTmFtZX3nrYkke3NlbGVjdGVkTm9kZXMubGVuZ3RofeS4quWunuS9k++8n2A7XG4gICAgICAgIE1vZGFsLmNvbmZpcm0oe1xuICAgICAgICAgICAgdGl0bGU6ICfnoa7orqQnLFxuICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgIG9rVGV4dDogJ+ehruWumicsXG4gICAgICAgICAgICBjYW5jZWxUZXh0OiAn5Y+W5raIJyxcbiAgICAgICAgICAgIG9uT2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBkaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdncmFwaC9kZWxldGVOb2RlcycsXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTm9kZXMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgY29uc3QgbWVudSA9IFtcbiAgICAgICAge1xuICAgICAgICAgICAga2V5OiAnY29weUlkJyxcbiAgICAgICAgICAgIHRpdGxlOiAn5aSN5Yi2SUQnLFxuICAgICAgICAgICAgaWNvblR5cGU6ICdpY29uZnV6aGlJRCcsXG4gICAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxuICAgICAgICAgICAgb25DbGljazogY29weUlkLFxuICAgICAgICB9LFxuICAgICAgICAvLyB7XG4gICAgICAgIC8vICAgICBrZXk6ICdkaXZpZGluZy1saW5lJyxcbiAgICAgICAgLy8gICAgIHRleHQ6IG51bGwsXG4gICAgICAgIC8vICAgICBvbkNsaWNrOiAoKSA9PiB7fSxcbiAgICAgICAgLy8gfSxcbiAgICAgICAge1xuICAgICAgICAgICAga2V5OiAnZGVsZXRlTm9kZScsXG4gICAgICAgICAgICB0aXRsZTogJ+WIoOmZpOWunuS9kycsXG4gICAgICAgICAgICBpY29uVHlwZTogJ2ljb25mdXpoaUlEJyxcbiAgICAgICAgICAgIHZpc2libGU6IHRydWUsXG4gICAgICAgICAgICBvbkNsaWNrOiBkZWxldGVOb2RlcyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAga2V5OiAnaW52ZXJ0U2VsZWN0JyxcbiAgICAgICAgICAgIHRpdGxlOiAn5Y+N6YCJ5a6e5L2TJyxcbiAgICAgICAgICAgIGljb25UeXBlOiAnaWNvbmZ1emhpSUQnLFxuICAgICAgICAgICAgdmlzaWJsZTogZmFsc2UsXG4gICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB7fSxcbiAgICAgICAgfSxcbiAgICBdO1xuICAgIHJldHVybiBtZW51O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgcmVuZGVyQ29udGV4dE1lbnU7XG4iLCJpbXBvcnQgR3JhcGhpbiwgeyBEYXRhLCBHcmFwaGluUHJvcHMgfSBmcm9tICdAYW50di9ncmFwaGluJztcblxuY29uc3QgbGF5b3V0ID0gKGdyYXBoaW46IEdyYXBoaW4sIHByb3BzOiBHcmFwaGluUHJvcHMpID0+IHtcbiAgICByZXR1cm4gW1xuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAncG9tZWxvJyxcbiAgICAgICAgICAgIGRlc2M6ICfoh6rlrprkuYnpmo/mnLrluIPlsYAnLFxuICAgICAgICAgICAgaWNvbjogJ2hvbWUnLFxuICAgICAgICAgICAgbGF5b3V0OiAoKTogeyBkYXRhOiBEYXRhIH0gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vZGVzID0gcHJvcHMuZGF0YS5ub2Rlcy5tYXAobm9kZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5ub2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgeDogTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogODAwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDUwMCksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGdlczogcHJvcHMuZGF0YS5lZGdlcyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICBdO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgbGF5b3V0O1xuIiwiaW1wb3J0IHsgTm9kZSB9IGZyb20gJy4uL3R5cGVzJztcblxuY29uc3QgZGVmYXVsdFN0eWxlcyA9IHtcbiAgICAvKiogY29udGFpbmVyIOWuuem9kCAqL1xuICAgIGNvbnRhaW5lcldpZHRoOiA0MCxcbiAgICBjb250YWluZXJTdHJva2U6ICcjMDY5M0UzJyxcbiAgICBjb250YWluZXJGaWxsOiAnI2ZmZicsXG4gICAgLyoqIGljb24g5Zu+5qCHICovXG4gICAgaWNvblNpemU6IDEwLFxuICAgIGljb25GaWxsOiAnIzA2OTNFMycsXG4gICAgLyoqIGJhZGdlIOW+veaghyAqL1xuICAgIGJhZGdlRmlsbDogJ3JlZCcsXG4gICAgYmFkZ2VGb250Q29sb3I6ICcjZmZmJyxcbiAgICBiYWRnZVNpemU6IDEwLFxuICAgIC8qKiB0ZXh0IOaWh+acrCAqL1xuICAgIGZvbnRDb2xvcjogJyMzYjNiM2InLFxuICAgIGZvbnRTaXplOiAxMixcbiAgICAvKiogc3RhdGUgKi9cbiAgICBkYXJrOiAnI2VlZScsXG59O1xudHlwZSBTdHlsZSA9IHR5cGVvZiBkZWZhdWx0U3R5bGVzO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG5jb25zdCByZW5kZXJSZWN0Tm9kZSA9IChub2RlOiBOb2RlKSA9PiB7XG4gICAgY29uc3Qgc3R5bGU6IFN0eWxlID0ge1xuICAgICAgICAuLi5kZWZhdWx0U3R5bGVzLFxuICAgICAgICAuLi5ub2RlLnN0eWxlLFxuICAgIH07XG4gICAgY29uc3QgYmFkZ2VOdW1iZXIgPSBub2RlLmRhdGEucHJvcGVydGllcy5sZW5ndGg7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBzaGFwZTogJ1JlY3ROb2RlJyxcbiAgICAgICAgc2hhcGVDb21wb25lbnRzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc2hhcGU6ICdyZWN0JyxcbiAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICBpZDogJ3JlY3QtY29udGFpbmVyJyxcbiAgICAgICAgICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHN0eWxlLmNvbnRhaW5lcldpZHRoLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHN0eWxlLmNvbnRhaW5lcldpZHRoLFxuICAgICAgICAgICAgICAgICAgICBmaWxsOiBzdHlsZS5jb250YWluZXJGaWxsLFxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IHN0eWxlLmNvbnRhaW5lclN0cm9rZSxcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICAgICAgICAgICAgICAgIGxpbmVXaWR0aDogMixcbiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAyLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNoYXBlOiAnY2lyY2xlJyxcbiAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICBpZDogJ2JhZGdlJyxcbiAgICAgICAgICAgICAgICAgICAgeDogc3R5bGUuY29udGFpbmVyV2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICAgICAgICAgIHI6IHN0eWxlLmJhZGdlU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogc3R5bGUuYmFkZ2VGaWxsLFxuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgICAgICAgICAgICAgICAgbGluZVdpZHRoOiAxLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNoYXBlOiAndGV4dCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdiYWRnZS10ZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgeDogc3R5bGUuY29udGFpbmVyV2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIHk6IC00LFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBiYWRnZU51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IDEwLFxuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogJyNmZmYnLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0QWxpZ246ICdjZW50ZXInLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0QmFzZWxpbmU6ICd0b3AnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNoYXBlOiAnTWFya2VyJyxcbiAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICBpZDogJ25vZGUtaWNvbicsXG4gICAgICAgICAgICAgICAgICAgIHN5bWJvbDogbm9kZS5kYXRhLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHg6IHN0eWxlLmNvbnRhaW5lcldpZHRoIC8gMixcbiAgICAgICAgICAgICAgICAgICAgeTogc3R5bGUuY29udGFpbmVyV2lkdGggLyAyLFxuICAgICAgICAgICAgICAgICAgICByOiBzdHlsZS5pY29uU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogc3R5bGUuaWNvbkZpbGwsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc2hhcGU6ICd0ZXh0JyxcbiAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICBpZDogJ3RleHQtZGVzYycsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IG5vZGUuZGF0YS5sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgICAgICAgICAgeTogc3R5bGUuY29udGFpbmVyV2lkdGggKiAxLjMsXG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogc3R5bGUuZm9udFNpemUsXG4gICAgICAgICAgICAgICAgICAgIGZpbGw6IHN0eWxlLmZvbnRDb2xvcixcbiAgICAgICAgICAgICAgICAgICAgZm9udFdlaWdodDogJ2xpZ2h0ZXInLFxuICAgICAgICAgICAgICAgICAgICBmb250RmFtaWx5OiAnQ291cmllciBOZXcnLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0QWxpZ246ICdjZW50ZXInLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0QmFzZWxpbmU6ICd0b3AnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBzdGF0ZToge1xuICAgICAgICAgICAgc2VsZWN0ZWQ6IHtcbiAgICAgICAgICAgICAgICAncmVjdC1jb250YWluZXInOiB7XG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZTogc3R5bGUuY29udGFpbmVyU3Ryb2tlLFxuICAgICAgICAgICAgICAgICAgICBmaWxsOiBzdHlsZS5jb250YWluZXJTdHJva2UsXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVdpZHRoOiA2LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd09mZnNldFg6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93T2Zmc2V0WTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dCbHVyOiAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd0NvbG9yOiAnI2ZmZicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0OiBmYWxzZSwgLy8g5b6q546vXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDIwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VDdWJpYycsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5OiAwLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJ25vZGUtaWNvbic6IHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogJyNmZmYnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYmFkZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgbGluZVdpZHRoOiA2LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICAnaGlnaGxpZ2h0LmRhcmsnOiB7XG4gICAgICAgICAgICAncmVjdC1jb250YWluZXInOiB7XG4gICAgICAgICAgICAgICAgZmlsbDogc3R5bGUuZGFyayxcbiAgICAgICAgICAgICAgICBzdHJva2U6IHN0eWxlLmRhcmssXG4gICAgICAgICAgICAgICAgbGluZVdpZHRoOiAwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdub2RlLWljb24nOiB7XG4gICAgICAgICAgICAgICAgZmlsbDogc3R5bGUuZGFyayxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAndGV4dC1kZXNjJzoge1xuICAgICAgICAgICAgICAgIGZpbGw6ICcjZWVlJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBiYWRnZToge1xuICAgICAgICAgICAgICAgIGZpbGw6IHN0eWxlLmRhcmssXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2JhZGdlLXRleHQnOiB7XG4gICAgICAgICAgICAgICAgZmlsbDogc3R5bGUuZGFyayxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfTtcbn07XG5leHBvcnQgZGVmYXVsdCByZW5kZXJSZWN0Tm9kZTtcbiIsImNvbnN0IG1hcmtlciA9ICgpID0+IHtcbiAgICByZXR1cm4gW1xuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAndWlkJyxcbiAgICAgICAgICAgIHBhdGg6IGA8cGF0aCBkPVwiTTQxNy43MjAzMiAxNzYuODAwNDI3bC0yLjAyMDY5MyA2Ni4wMjA2OTNMMTQ5LjU5Mjc0NyAyNDIuODIxMTJsMCA1MC41MjQxNiAyNjkuNDc1ODQgMCAwIDg3LjU3OTMwN0wxOTYuNzUxMzYgMzgwLjkyNDU4N2wwIDQ3LjgzNDQ1MyAyMjUuNjgyNzczLTIuMDI0MTA3IDIyNi4zNTg2MTMtMi4wMjA2OTMtNC4wNDEzODcgMTYuMTY4OTZjLTEwLjEwNjg4IDM5LjA3NTg0LTUzLjIyNDEwNyAxNDMuNDk2NTMzLTYxLjMwNjg4IDE0Ni44NjIwOC00LjcxNzIyNyAxLjM0ODI2Ny0zNy43Mjc1NzMtNi4wNjIwOC03NC43NzkzMDctMTYuODQ0OC0xMTIuNTA2ODgtMzQuMzU1Mi0xNjguNDI0MTA3LTQ0LjQ2MjA4LTI0NC41NDgyNjctNDQuNDYyMDgtNzcuNDc1ODQgMC42NzI0MjctMTI4IDE0LjgyNDEwNy0xNzYuNTA2ODggNDkuMTc5MzA3LTk0LjMxMzgxMyA2Ny4zNjg5Ni0xMDEuNzI0MTYgMTk5LjQxMzc2LTE0LjE0NDg1MyAyNzIuODQ0OCA5Mi45NjU1NDcgNzguMTQ4MjY3IDI0NS4yMjA2OTMgODUuNTU1MiAzODMuMzI0MTYgMTguMTg5NjUzIDQ5LjE3OTMwNy0yMy41NzkzMDcgMTM3LjQzMTA0LTg3LjU3OTMwNyAxNjcuMDcyNDI3LTEyMC41ODk2NTNsMTIuMTI3NTczLTE0LjE1MTY4IDM4LjQgMTguODY1NDkzYzM4LjQgMTkuNTM0NTA3IDI3NS41Mzc5MiAxMjkuMzQ4MjY3IDMxNS45NTg2MTMgMTQ2LjE4OTY1M2wyMS41NTUyIDkuNDMxMDQgMC0xNzMuMTM3OTItNTguNjEwMzQ3LTE1LjQ5MzEyYy01My4yMjA2OTMtMTQuMTUxNjgtMTg5LjMwNjg4LTU2LjU4OTY1My0yMzMuMDk2NTMzLTczLjQzNzg2N2wtMTYuODQ0OC02LjczNDUwNyAyMi4yMzQ0NTMtNDUuODEwMzQ3YzIzLjU3OTMwNy00Ny4xNTUyIDcwLjczNzkyLTE4MC41NDgyNjcgNzAuNzM3OTItMjAwLjA4NjE4NyAwLTkuNDMxMDQtMTMuNDc1ODQtMTAuNzc5MzA3LTExNy44OTY1MzMtMTAuNzc5MzA3bC0xMTcuODkzMTIgMEw1NjAuNTM0MTg3IDI5My4zNDUyOGwyODIuOTUxNjggMEw4NDMuNDg1ODY3IDI0OC44ODMyYzAtMi4wMjA2OTMtNjQtMy4zNjg5Ni0xNDEuNDc1ODQtMi42OTMxMmwtMTQxLjQ3MjQyNyAwLjY3MjQyN0w1NjAuNTM3NiAxMTEuNDUyMTZsLTE0MC44IDBMNDE3LjcyMDMyIDE3Ni44MDA0Mjd6TTM5MS40NDQ0OCA2MTYuMDM4NGMzNS4wMzQ0NTMgMTIuMTMwOTg3IDgxLjUxNzIyNyAzMC45OTMwNjcgMTAzLjA3NTg0IDQyLjQ0NDhsMzkuMDcyNDI3IDIwLjg4NjE4Ny0yMS41NTg2MTMgMjYuOTQ0ODUzYy0xMi4xMjQxNiAxNC44MjA2OTMtMzkuNzQ0ODUzIDQwLjQyMDY5My02Mi42NTE3MzMgNTcuMjY1NDkzLTc2LjggNTcuMjU4NjY3LTE0OC4yMTAzNDcgNzkuNDkzMTItMjM5LjgzMTA0IDc0LjEwMzQ2Ny05NS42NjIwOC01LjM4OTY1My0xNDYuODYyMDgtNDQuNDYyMDgtMTUyLjkyNzU3My0xMTcuMjIwNjkzLTQuMDQxMzg3LTQ1LjEzNzkyIDYuMDY1NDkzLTcwLjczNzkyIDM3LjA1NTE0Ny05NC4zMTcyMjcgMzkuMDcyNDI3LTI5LjY0NDggNzAuNzM0NTA3LTM2LjM3NTg5MyAxNTYuOTY1NTQ3LTM0LjM1NTJDMzE2LjY2ODU4NyA1OTMuODEwNzczIDMzNy41NTEzNiA1OTcuODUyMTYgMzkxLjQ0NDQ4IDYxNi4wMzg0TDM5MS40NDQ0OCA2MTYuMDM4NHpcIiBwLWlkPVwiMTgyMlwiPjwvcGF0aD5gLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnbG9nbycsXG4gICAgICAgICAgICBwYXRoOiBgPHBhdGggZD1cIk01OTkuOTY1MTY2IDQ4Ni4xNDU3NjZsMjIyLjEwOTEzMS0xMjQuOTk1MDlhODUuNTQyODQxIDg1LjU0Mjg0MSAwIDAgMCAyNS4yMDQ1MjUgMTUuMzM4ODE0bDAuMTU4ODk2IDI2OS42NTA5NzlhODYuMDQ0MjQ4IDg2LjA0NDI0OCAwIDAgMC01NC43MzQ1NjUgODAuMjUzMzUyYzAgNi4zMTM0OSAwLjY3Nzk1OSAxMi40NjQ1NTIgMS45NjMyNTUgMTguMzk2Njg5bC0yMjIuMzk4Njc2IDEyNi4zODYzMThhODUuMDY5NjgzIDg1LjA2OTY4MyAwIDAgMC01NS41MDc4NjItMjAuNTE4ODQyIDg1LjA5MDg2OSA4NS4wOTA4NjkgMCAwIDAtNTYuNzU0MzE3IDIxLjYwMjg2OWwtMjI5LjYzNzI5Ny0xMzMuMTU1MzFhODcuMTEwNjIxIDg3LjExMDYyMSAwIDAgMCAwLjkyODY2Mi0xMi43MTE3MjRjMC0zOS45MzI0NjktMjcuMDgzMDM0LTczLjUwOTA3Ni02My44MDU3OTMtODMuMjA1Mjk3bC0wLjM4ODQxNC0yNjMuNTg0NjYyYzM2LjkxNjk2Ni05LjU1ODUxIDY0LjE5NDIwNy00My4yMzA0NTUgNjQuMTk0MjA3LTgzLjMwNDE2NSAwLTcuNDM2MzU5LTAuOTM5MjU1LTE0LjY1Mzc5My0yLjcwNDc3Mi0yMS41MzIyNDlsMjE5Ljg1NjMzMS0xMjYuMTk5MTcyYzE1LjMzODgxNCAxNC41NTQ5MjQgMzYuMDI3MTQ1IDIzLjQ4MTM3OSA1OC43OTE3MjQgMjMuNDgxMzc5IDQ3LjI5NDY3NiAwIDg1LjYzNDY0OC0zOC41MTY1MjQgODUuNjM0NjQ4LTg2LjAyNjU5M1M1NTQuNTM0ODc3IDAgNTA3LjI0MDIwMSAwQzQ1OS45NDU1MjUgMCA0MjEuNjA1NTUzIDM4LjUxMjk5MyA0MjEuNjA1NTUzIDg2LjAyMzA2MmMwIDUuMTYyMzcyIDAuNDUxOTcyIDEwLjIyMjM0NSAxLjMyMDYwNiAxNS4xMzQwMTRMMTk5LjUwMzQ4NCAyMjkuNDA0MjQ4YTg1LjAzNzkwMyA4NS4wMzc5MDMgMCAwIDAtNTMuODM3NjgzLTE5LjEyNzYxNEM5OC4zNjc1OTQgMjEwLjI3MzEwMyA2MC4wMjc2MjIgMjQ4Ljc4OTYyOCA2MC4wMjc2MjIgMjk2LjI5OTY5N2E4Ni4wNTEzMSA4Ni4wNTEzMSAwIDAgMCA1My4yNDA5MzcgNzkuNjU2NjA2bDAuMzk5MDA3IDI3MC42MTg0ODNBODYuMDUxMzEgODYuMDUxMzEgMCAwIDAgNjAuMDI3NjIyIDcyNi4zOTM4MjFjMCA0Ny41MTAwNjkgMzguMzM5OTcyIDg2LjAyMzA2MiA4NS42MzQ2NDggODYuMDIzMDYyIDIzLjYxNTU1OSAwIDQ0Ljk5OTUwMy05LjYwNDQxNCA2MC40OTAxNTItMjUuMTMzOTA0bDIyNi44MjMwNjIgMTMxLjUyMzk3M2E4Ni43NTc1MTcgODYuNzU3NTE3IDAgMCAwLTEuODUwMjYyIDE3Ljg3NDA5NmMwIDQ3LjUxMDA2OSAzOC4zMzk5NzIgODYuMDIzMDYyIDg1LjYzNDY0OCA4Ni4wMjMwNjIgNDcuMjk0Njc2IDAgODUuNjM0NjQ4LTM4LjUxMjk5MyA4NS42MzQ2NDgtODYuMDIzMDYyIDAtNi42OTQ4NDEtMC43NjI3MDMtMTMuMjA5Ni0yLjE5OTgzNC0xOS40NjMwNjJsMjIxLjc5NDg2OS0xMjYuMDQ3MzM4YTg1LjA4MzgwNyA4NS4wODM4MDcgMCAwIDAgNTYuMzQ4MjQ4IDIxLjI0NjIzNWM0Ny4yOTQ2NzYgMCA4NS42MzQ2NDgtMzguNTEyOTkzIDg1LjYzNDY0OC04Ni4wMjMwNjIgMC0zOS41MzM0NjItMjYuNTQ2MzE3LTcyLjgzODE3OS02Mi43MTExNzItODIuOTA4NjlsLTAuMTUxODM1LTI2NC4yMzc5MDNDOTM3LjM0ODQ0OSAzNjkuMjMzMjE0IDk2My45NzI0NDkgMzM1Ljg4NjEyNCA5NjMuOTcyNDQ5IDI5Ni4yOTk2OTdjMC00Ny41MTAwNjktMzguMzM5OTcyLTg2LjAyMzA2Mi04NS42MzQ2NDgtODYuMDIzMDYzLTQ3LjI5NDY3NiAwLTg1LjYzNDY0OCAzOC41MTI5OTMtODUuNjM0NjQ4IDg2LjAyMzA2MyAwIDYuMzQ4OCAwLjY4NTAyMSAxMi41Mzg3MDMgMS45ODQ0NDEgMTguNDk5MDg5bC0yMjMuMjAzNzUyIDEyNS42MDk0OWE4NS4wNTU1NTkgODUuMDU1NTU5IDAgMCAwLTU0LjcyMzk3Mi0xOS44NTUwMDdjLTQ3LjI5NDY3NiAwLTg1LjYzNDY0OCAzOC41MTI5OTMtODUuNjM0NjQ4IDg2LjAyMzA2MiAwIDQ3LjUxMDA2OSAzOC4zMzk5NzIgODYuMDIzMDYyIDg1LjYzNDY0OCA4Ni4wMjMwNjIgNDcuMjk0Njc2IDAgODUuNjM0NjQ4LTM4LjUxMjk5MyA4NS42MzQ2NDgtODYuMDIzMDYyIDAtNy4wNDA4ODMtMC44NDAzODYtMTMuODgwNDk3LTIuNDI5MzUyLTIwLjQzMDU2NXpcIiBwLWlkPVwiNzQxXCIgZmlsbD1cIiNkODFlMDZcIj48L3BhdGg+YCxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2dyYXBoaW4nLFxuICAgICAgICAgICAgcGF0aDogYDxwYXRoIGQ9XCJNNTkyLjQ4MjQ2OTU3IDU1NS45MTkwNjEybDI0NS40Mzk3NDg0NSA2OC42Njk5OTY5NGE4NS41NDI4NDEgODUuNTQyODQxIDAgMCAwIDYuOTc2MTExMTUgMjguNjY4NDY5OTRsLTE5MC41NTk2NzkzNyAxOTAuNzg0MzkyMjRhODYuMDQ0MjQ4IDg2LjA0NDI0OCAwIDAgMC05NS40NTA4NzE0OSAxOC4wNDQ1MDczNGMtNC40NjQzMTE1OSA0LjQ2NDMxMTU5LTguMzM0Mzc5ODQgOS4yOTMxNTg2NS0xMS42MjAxOTI2MiAxNC4zOTY2NTQ0N2wtMjQ2LjYyODIzNDQzLTY3Ljg5MDk4OTQyYTg1LjA2OTY4MyA4NS4wNjk2ODMgMCAwIDAtMjQuNzQwOTczMzEtNTMuNzU4OTk3OTUgODUuMDkwODY5IDg1LjA5MDg2OSAwIDAgMC01NS40MDY4OTc1Ny0yNC44NTU4MjcyNWwtNjguMjIzMDY3MjctMjU2LjUzMzExMjU4YTg3LjExMDYyMSA4Ny4xMTA2MjEgMCAwIDAgOS42NDUyMDk0My04LjMzMTg4MzA0YzI4LjIzNjUxOTYyLTI4LjIzNjUxOTYyIDMyLjgyODE2OTEyLTcxLjEyOTM2MzExIDEzLjcxNzUyMDgzLTEwMy45NTI1Mzg2NWwxODYuMTA3ODUxNzUtMTg2LjY1NzE1MjA5YzMyLjg2MzEyNDI0IDE5LjM0NTM0OTc2IDc1Ljk2MDcwNjk3IDE0LjgyMzYxMTIgMTA0LjI5NzA5OTA1LTEzLjUxMjc4MDg5IDUuMjU4Mjk5ODgtNS4yNTgyOTk4OCA5LjY5NzY0MjgyLTExLjAyNTk0OTk4IDEzLjMxMzAzNjY2LTE3LjEzODE2MTlsMjQ0LjY5ODE5Mjg0IDY2LjIyNTYxMjIzYzAuNTU0MjkzOTMgMjEuMTM4MDY0ODUgOC44NzExOTYyMSA0Mi4wNzg4ODA4NiAyNC45NjgxODQ0IDU4LjE3NTg2OTA0IDMzLjQ0MjM4NjExIDMzLjQ0MjM4NjExIDg3Ljc4ODEzNTYxIDMzLjMxNzU0NSAxMjEuMzgyODI3NTctMC4yNzcxNDY5NlM5MDQuMTE1MzcxOTMgMTgwLjAzODAyOCA4NzAuNjcyOTg1ODIgMTQ2LjU5NTY0MTg4QzgzNy4yMzA1OTk3IDExMy4xNTMyNTU3NyA3ODIuODg3MzQ3IDExMy4yNzU2MDAwOSA3NDkuMjkyNjU1MDMgMTQ2Ljg3MDI5MjA2Yy0zLjY1MDM0ODI1IDMuNjUwMzQ4MjUtNi45MDg2OTcgNy41NDc4ODE5NC05Ljc2NzU1NDQ2IDExLjYzNTE3MzM4TDQ5MC44NTY5NjcwMSA5MS4yMDYyMjE4N2E4NS4wMzc5MDMgODUuMDM3OTAzIDAgMCAwLTI0LjU0MzcyNTE2LTUxLjU5NDI1NjNDNDMyLjg3MDg1NTczIDYuMTY0NTg1ODYgMzc4LjUyNTEwNTUzIDYuMjg5NDI3NjkgMzQ0LjkzMDQxMzU2IDM5Ljg4NDExOTY1YTg2LjA1MTMxIDg2LjA1MTMxIDAgMCAwLTE4LjY3ODY5ODY4IDkzLjk3Mjc1Mzg2bC0xOTEuMDc0MDIzODkgMTkxLjYzODMwNUE4Ni4wNTEzMSA4Ni4wNTEzMSAwIDAgMCA0MC44MDc5NDE5MyAzNDQuMDA2NTkxMjhjLTMzLjU5NDY5MTk2IDMzLjU5NDY5MTk2LTMzLjcxNzAzNjI5IDg3LjkzNzk0NDY3LTAuMjc0NjUwMTcgMTIxLjM4MDMzMDc4IDE2LjY5ODcyMTkxIDE2LjY5ODcyMTkxIDM4LjYxMDc5OTk5IDI1LjAyODEwNzQ1IDYwLjU0NTM1MDYzIDI1LjAwMDY0MjcybDY3LjM4NjYzMjA3IDI1My4zODk2MTg0N2E4Ni43NTc1MTcgODYuNzU3NTE3IDAgMCAwLTEzLjk0NzIyNzI5IDExLjMzMDU2MTY4Yy0zMy41OTQ2OTE5NiAzMy41OTQ2OTE5Ni0zMy43MTcwMzYyOSA4Ny45Mzc5NDQ2Ny0wLjI3NDY1MDE4IDEyMS4zODAzMzA3OSAzMy40NDIzODYxMSAzMy40NDIzODYxMSA4Ny43ODU2Mzg4MiAzMy4zMjAwNDE3OSAxMjEuMzgwMzMwNzktMC4yNzQ2NTAxOCA0LjczMzk2NzQ3LTQuNzMzOTY3NDcgOC44MDEyODUyNy05Ljg3OTkxMDIgMTIuMjA2OTQ1NTgtMTUuMzE3OTgwNjZsMjQ1Ljk2MTU4MzM1IDY3LjcwMzcyODQ1YTg1LjA4MzgwNyA4NS4wODM4MDcgMCAwIDAgMjQuODIwODcxNDMgNTQuODY3NTg1MTFjMzMuNDQyMzg2MTEgMzMuNDQyMzg2MTEgODcuNzg1NjM4ODIgMzMuMzIwMDQxNzkgMTIxLjM4MDMzMDc4LTAuMjc0NjUwMTcgMjcuOTU0Mzc5MDYtMjcuOTU0Mzc5MDYgMzIuNzMzMjg5NTMtNzAuMjc1NDUxMDcgMTQuMjgxODAxOTQtMTAyLjk2ODc5MTg5bDE4Ni43MzcwNDk1LTE4Ni45NTE3NzY2MkM5MTMuNzE4MTM1MTYgNzExLjgxNTQxMDE1IDk1Ni4xMjQwOTk1OCA3MDcuMDYxNDY3NjIgOTg0LjExNTkzMDU1IDY3OS4wNjk2MzY2NGMzMy41OTQ2OTE5Ni0zMy41OTQ2OTE5NiAzMy43MTcwMzYyOS04Ny45Mzc5NDQ2NyAwLjI3NDY1MDg4LTEyMS4zODAzMzE0OS0zMy40NDIzODYxMS0zMy40NDIzODYxMS04Ny43ODU2Mzg4Mi0zMy4zMjAwNDE3OS0xMjEuMzgwMzMxNDkgMC4yNzQ2NTA4OC00LjQ4OTI3OTUzIDQuNDg5Mjc5NTMtOC4zODE4MTg5MiA5LjM1MDU4NDkxLTExLjY3NzYxOTU5IDE0LjQ4NDA0Mjk3bC0yNDYuNjQ4MjA4NzgtNjkuMDA5NTY0NDdhODUuMDU1NTU5IDg1LjA1NTU1OSAwIDAgMC0yNC42NTYwODE2MS01Mi43MzUzMDE3OGMtMzMuNDQyMzg2MTEtMzMuNDQyMzg2MTEtODcuNzg1NjM4ODItMzMuMzIwMDQxNzktMTIxLjM4MDMzMDc4IDAuMjc0NjUwMTctMzMuNTk0NjkxOTYgMzMuNTk0NjkxOTYtMzMuNzE3MDM2MjkgODcuOTM3OTQ0NjctMC4yNzQ2NTAxOCAxMjEuMzgwMzMwNzggMzMuNDQyMzg2MTEgMzMuNDQyMzg2MTEgODcuNzg1NjM4ODIgMzMuMzIwMDQxNzkgMTIxLjM4MDMzMDc5LTAuMjc0NjUwMTcgNC45Nzg2NTYxMS00Ljk3ODY1NjExIDkuMjIwNzUwOTItMTAuNDA5MjM2MTkgMTIuNzI4Nzc5NzgtMTYuMTY0NDAyMzN6XCI+PC9wYXRoPmAsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdwaG9uZScsXG4gICAgICAgICAgICBwYXRoOiBgPHBhdGggZD1cIk03MzYgMCAyODggMGMtNTIuOCAwLTk2IDQzLjItOTYgOTZsMCA4MzJjMCA1Mi44IDQzLjIgOTYgOTYgOTZsNDQ4IDBjNTIuOCAwIDk2LTQzLjIgOTYtOTZMODMyIDk2QzgzMiA0My4yIDc4OC44IDAgNzM2IDB6TTM4NCA0OGwyNTYgMCAwIDMyTDM4NCA4MCAzODQgNDh6TTUxMiA5NjBjLTM1LjM0NiAwLTY0LTI4LjY1NC02NC02NHMyOC42NTQtNjQgNjQtNjQgNjQgMjguNjU0IDY0IDY0UzU0Ny4zNDYgOTYwIDUxMiA5NjB6TTc2OCA3NjggMjU2IDc2OCAyNTYgMTI4bDUxMiAwTDc2OCA3Njh6XCIgcC1pZD1cIjE0MjFcIj48L3BhdGg+YCxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2NvbXBhbnknLFxuICAgICAgICAgICAgcGF0aDogYDxwYXRoIGQ9XCJNODMxLjgwOCA4NjkuMTg0VjE3MS4xNjhsLTk3Ljg1Ni02NS4zMTItMzU2LjcwNCAxNTkuMnYxMjMuMmwtMTk3LjEyIDY4LjY0djQxMi4yODhIMTYwdjQ4Ljk5Mmg2NC4zNTJWNDg1LjQ3MmwyNjEuNDcyLTg1LjY5NnY1MTguNGgxODEuMDI0di01My4wNTZoLTQwLjIyNFYzOTEuNTg0bC05NC45MTItNTcuMTUyLTEwNi4yNCAzNi45OTJWMjkzLjZsMjU3LjQ3Mi0xMTQuMzA0djczOC44NDhIODY0di00OC45OTJoLTMyLjE5MnYwLjAzMnpNMjU2LjU0NCA1OTUuNjhsMTg5LjA1Ni02MS4yMTZ2LTgxLjYzMmwtMTg5LjA1NiA2NS4zMTJ2NzcuNTM2eiBtMCAxMDYuMTQ0bDE4OS4wNTYtNDAuODMydi04MS42MzJsLTE4OS4wNTYgNDguOTkydjczLjQ3MnogbTAgMTEwLjIwOGwxODkuMDU2LTI0LjUxMnYtODEuNjMybC0xODkuMDU2IDI4LjU3NnY3Ny41Njh6IG0wIDEwNi4xMTJsMTg5LjA1Ni00LjA5NnYtODEuNjMybC0xODkuMDU2IDguMTkydjc3LjUzNnpcIiBwLWlkPVwiODE4XCI+PC9wYXRoPmAsXG4gICAgICAgIH0sXG4gICAgXTtcbn07XG5leHBvcnQgZGVmYXVsdCBtYXJrZXI7XG4iLCJpbXBvcnQgbGF5b3V0IGZyb20gJy4vbGF5b3V0JztcbmltcG9ydCBSZWN0Tm9kZVNoYXBlIGZyb20gJy4vUmVjdE5vZGVTaGFwZSc7XG5pbXBvcnQgbWFya2VyIGZyb20gJy4vbWFya2VyJztcblxuY29uc3QgZXh0ZW5kID0ge1xuICAgIGxheW91dCxcbiAgICBub2RlU2hhcGU6ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnUmVjdE5vZGUnLFxuICAgICAgICAgICAgICAgIHJlbmRlcjogUmVjdE5vZGVTaGFwZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF07XG4gICAgfSxcbiAgICBtYXJrZXIsXG59O1xuZXhwb3J0IGRlZmF1bHQgZXh0ZW5kO1xuIiwiaW1wb3J0IHsgRGlzcGF0Y2ggfSBmcm9tICcuLi90eXBlcyc7XG5cbmludGVyZmFjZSBIYW5kbGVOb2RlQ2xpY2tQcm9wcyB7XG4gICAgZGlzcGF0Y2g6IERpc3BhdGNoO1xuICAgIGU/OiBhbnk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbn1cblxuY29uc3QgaGFuZGxlTm9kZUNsaWNrID0gKHByb3BzOiBIYW5kbGVOb2RlQ2xpY2tQcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgZGlzcGF0Y2gsIGUgfSA9IHByb3BzO1xuICAgIC8vIOWNlemAiVxuICAgIGNvbnN0IG5vZGUgPSBlLml0ZW0uZ2V0KCdtb2RlbCcpLmRhdGE7IC8vIFRPRE8g5aSa6YCJXG4gICAgLy8g5aSa6YCJXG5cbiAgICBkaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdncmFwaC9ub2RlLWNsaWNrJyxcbiAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgZHJhd2VyOiB7XG4gICAgICAgICAgICAgICAgdmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnbm9kZUF0dHInLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAn5a6e5L2T5bGe5oCn6Z2i5p2/JyxcbiAgICAgICAgICAgICAgICB3aWR0aDogMzUwLFxuICAgICAgICAgICAgICAgIGNsb3NlTWFzazogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZWxlY3RlZE5vZGVzOiBbbm9kZV0sXG4gICAgICAgIH0sXG4gICAgfSk7XG59O1xuZXhwb3J0IGRlZmF1bHQgaGFuZGxlTm9kZUNsaWNrO1xuIiwiaW1wb3J0IHsgR3JhcGhFdmVudCB9IGZyb20gJ0BhbnR2L2dyYXBoaW4nO1xuXG5pbXBvcnQgeyBHcmFwaGVuZVN0YXRlLCBEaXNwYXRjaCB9IGZyb20gJy4uL3R5cGVzJztcblxuaW50ZXJmYWNlIEhhbmRsZUNhbnZhc0NsaWNrUHJvcHMgZXh0ZW5kcyBHcmFwaGVuZVN0YXRlIHtcbiAgICBkaXNwYXRjaDogRGlzcGF0Y2g7XG4gICAgZTogR3JhcGhFdmVudDtcbn1cblxuY29uc3QgaGFuZGxlQ2FudmFzQ2xpY2sgPSAocHJvcHM6IEhhbmRsZUNhbnZhc0NsaWNrUHJvcHMpID0+IHtcbiAgICBjb25zdCB7IGRyYXdlciwgbW9kYWwsIHNlbGVjdGVkTm9kZXMsIHNlYXJjaEJhciwgZGlzcGF0Y2ggfSA9IHByb3BzO1xuXG4gICAgaWYgKGRyYXdlci52aXNpYmxlIHx8IG1vZGFsLnZpc2libGUgfHwgc2VsZWN0ZWROb2Rlcy5sZW5ndGggIT09IDAgfHwgc2VhcmNoQmFyLnZpc2libGUpIHtcbiAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgICAgdHlwZTogJ2dyYXBoL2NhbnZhcy1jbGljaycsXG4gICAgICAgICAgICBwYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgZHJhd2VyOiB7XG4gICAgICAgICAgICAgICAgICAgIHZpc2libGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IG51bGwsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtb2RhbDoge1xuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJycsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZWFyY2hCYXI6IHtcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZE5vZGVzOiBbXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5leHBvcnQgZGVmYXVsdCBoYW5kbGVDYW52YXNDbGljaztcbiIsImltcG9ydCB7IHVzZUxheW91dEVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEc2RXZlbnQgfSBmcm9tICdAYW50di9ncmFwaGluL2Rpc3QvdHlwZXMnO1xuXG5pbXBvcnQgaGFuZGxlTm9kZUNsaWNrIGZyb20gJy4vbm9kZS1jbGljayc7XG5pbXBvcnQgaGFuZGxlQ2FudmFzQ2xpY2sgZnJvbSAnLi9jYW52YXMtY2xpY2snO1xuaW1wb3J0IHsgR3JhcGhlbmVTdGF0ZSB9IGZyb20gJy4uL3R5cGVzJztcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG5jb25zdCB1c2VHcmFwaEV2ZW50cyA9IChzdGF0ZTogR3JhcGhlbmVTdGF0ZSwgZ3JhcGhSZWY6IGFueSwgZGlzcGF0Y2g6IFJlYWN0LkRpc3BhdGNoPGFueT4pID0+IHtcbiAgICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgICAgICBjb25zdCB7IGdyYXBoIH0gPSBncmFwaFJlZi5jdXJyZW50O1xuICAgICAgICBjb25zdCBldmVudHMgPSB7XG4gICAgICAgICAgICAnbm9kZTpjbGljayc6IChlOiBHNkV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaGFuZGxlTm9kZUNsaWNrKHsgLi4uc3RhdGUsIGUsIGRpc3BhdGNoIH0pO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUuaXRlbSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2NhbnZhczpjbGljayc6IChlOiBHNkV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaGFuZGxlQ2FudmFzQ2xpY2soeyAuLi5zdGF0ZSwgZSwgZGlzcGF0Y2ggfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIE9iamVjdC5rZXlzKGV2ZW50cykuZm9yRWFjaCgobmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBncmFwaC5vbihuYW1lLCBldmVudHNbbmFtZV0pO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoZXZlbnRzKS5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgICAgICAgICAgIGdyYXBoLm9mZihuYW1lLCBldmVudHNbbmFtZV0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfSwgW3N0YXRlXSk7XG59O1xuZXhwb3J0IGRlZmF1bHQgdXNlR3JhcGhFdmVudHM7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0ICcuL2luZGV4Lmxlc3MnO1xuXG5pbnRlcmZhY2UgTm9kZUVkZ2VDb3VudFByb3BzIHtcbiAgICBhcGlzPzogYW55OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG59XG5jb25zdCBOb2RlRWRnZUNvdW50OiBSZWFjdC5GQzxOb2RlRWRnZUNvdW50UHJvcHM+ID0gcHJvcHMgPT4ge1xuICAgIGNvbnN0IHsgYXBpcyA9IHt9IH0gPSBwcm9wcztcbiAgICBjb25zdCB7IGVkZ2VzLCBub2RlcyB9ID0gYXBpcy5nZXRJbmZvKCkuY291bnQ7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JhcGhpbi1zdHVkaW8tY291bnRcIj5cbiAgICAgICAgICAgICAgICA8c3Bhbj7oioLngrnmlbDph48gKHtub2Rlc30pPC9zcGFuPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImNvdW50LWxpbmVcIj58PC9zcGFuPlxuICAgICAgICAgICAgICAgIDxzcGFuPui+ueaVsOmHjyAoe2VkZ2VzfSk8L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IE5vZGVFZGdlQ291bnQ7XG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IEdyYXBoaW4gZnJvbSAnQGFudHYvZ3JhcGhpbic7XG5pbXBvcnQgeyBUb29sYmFyLCBDb250ZXh0TWVudSB9IGZyb20gJ0BhbnR2L2dyYXBoaW4tY29tcG9uZW50cyc7XG5pbXBvcnQgeyBHcmFwaFByb3BzIH0gZnJvbSAnLi90eXBlcyc7XG4vKiogY3VzdG9tICovXG5pbXBvcnQgcmVuZGVyVG9vbGJhciBmcm9tICcuL0N1c3RvbS9yZW5kZXJUb29sYmFyJztcbmltcG9ydCByZW5kZXJDb250ZXh0TWVudSBmcm9tICcuL0N1c3RvbS9yZW5kZXJDb250ZXh0TWVudSc7XG5cbi8qKiBjdXN0b20gIGV4dGVuZCAqL1xuaW1wb3J0IGV4dGVuZCBmcm9tICcuL0V4dGVuZCc7XG5cbmltcG9ydCB1c2VHcmFwaEV2ZW50cyBmcm9tICcuL0V2ZW50cy91c2VHcmFwaEV2ZW50cyc7XG5cbi8qKiBjb21wb25lbnRzICovXG5pbXBvcnQgTm9kZUVkZ2VDb3VudCBmcm9tICcuL0NvcmUvTm9kZUVkZ2VDb3VudCc7XG5cbmNvbnN0IEdyYXBoZW5lID0gKHByb3BzOiBHcmFwaFByb3BzKSA9PiB7XG4gICAgY29uc3QgZ3JhcGhSZWYgPSB1c2VSZWYobnVsbCkgYXMgYW55OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgY29uc3QgeyBkaXNwYXRjaCwgZGF0YSwgbGF5b3V0LCB0b29sYmFyLCBzdG9yZSB9ID0gcHJvcHM7XG5cbiAgICB1c2VHcmFwaEV2ZW50cyhzdG9yZSwgZ3JhcGhSZWYsIGRpc3BhdGNoKTtcbiAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBkaXNwYXRjaCh7XG4gICAgICAgICAgICB0eXBlOiAnZ3JhcGgvZ3JhcGhSZWYnLFxuICAgICAgICAgICAgcGF5bG9hZDogZ3JhcGhSZWYsXG4gICAgICAgIH0pO1xuICAgICAgICAvLyDlsIZncmFwaOWunuS+i+S8oOe7meWFqOWxgFxuICAgIH0sIFtdKTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPEdyYXBoaW4gZGF0YT17ZGF0YX0gbGF5b3V0PXtsYXlvdXR9IHJlZj17Z3JhcGhSZWZ9IGV4dGVuZD17ZXh0ZW5kfT5cbiAgICAgICAgICAgIHsvKiog5a6Y5pa557uE5Lu2ICovfVxuICAgICAgICAgICAgPFRvb2xiYXJcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb249e3Rvb2xiYXIuZGlyZWN0aW9ufVxuICAgICAgICAgICAgICAgIHJlbmRlcj17cmVuZGVyUHJvcHMgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVuZGVyVG9vbGJhcihyZW5kZXJQcm9wcywgc3RvcmUsIGRpc3BhdGNoKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxDb250ZXh0TWVudSBvcHRpb25zPXtyZW5kZXJDb250ZXh0TWVudSh7IC4uLnN0b3JlLCBkaXNwYXRjaCB9KX0gLz5cbiAgICAgICAgICAgIDxOb2RlRWRnZUNvdW50IC8+XG5cbiAgICAgICAgICAgIHsvKiog6Ieq5a6a5LmJ57uE5Lu2ICAqL31cbiAgICAgICAgICAgIHsvKiA8T3BlcmF0b3JCYXIgZGlzcGF0Y2g9e2Rpc3BhdGNofSBzdGF0ZT17c3RhdGV9IC8+XG4gICAgICAgICAgXG4gICAgICAgICAgICA8U2VhcmNoQmFyIGRpc3BhdGNoPXtkaXNwYXRjaH0gc3RhdGU9e3N0YXRlfSAvPlxuICAgICAgICAgICAgPEdyYXBoRHJhd2VyIGRpc3BhdGNoPXtkaXNwYXRjaH0gc3RhdGU9e3N0YXRlfSAvPlxuICAgICAgICAgICAgPEdyYXBoTW9kYWwgZGlzcGF0Y2g9e2Rpc3BhdGNofSBzdGF0ZT17c3RhdGV9IC8+ICovfVxuICAgICAgICA8L0dyYXBoaW4+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEdyYXBoZW5lO1xuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZVJlZiwgdXNlUmVkdWNlciB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgR3JhcGhlbmVTdGF0ZSB9IGZyb20gJ3NyYy90eXBlcyc7XG5pbXBvcnQgeyBMYXlvdXQsIEhlYWRlciwgRm9vdGVyLCBNYWluLCBTaWRlIH0gZnJvbSAnLi9Db21wb25lbnRzL0xheW91dCc7XG5cbi8qKiBjb21wb25lbnRzICovXG5pbXBvcnQgT3BlcmF0b3JCYXIgZnJvbSAnLi9Db3JlL09wZXJhdG9yQmFyJztcbmltcG9ydCBOb2RlRWRnZUNvdW50IGZyb20gJy4vQ29yZS9Ob2RlRWRnZUNvdW50JztcbmltcG9ydCBTZWFyY2hCYXIgZnJvbSAnLi9Db3JlL1NlYXJjaEJhcic7XG5cbmltcG9ydCBHcmFwaERyYXdlciBmcm9tICcuL0NvcmUvR3JhcGhEcmF3ZXInO1xuaW1wb3J0IEdyYXBoTW9kYWwgZnJvbSAnLi9Db3JlL0dyYXBoTW9kYWwnO1xuLy8gaW1wb3J0IExheW91dFNlbGVjdG9yIGZyb20gJy4vQ29yZS9MYXlvdXRTZWxlY3Rvcic7XG5cbmltcG9ydCBpbml0aWFsU3RhdGUgZnJvbSAnLi9SZWR1eC9zdG9yZSc7XG5pbXBvcnQgcmVkdWNlciBmcm9tICcuL1JlZHV4L3JlZHVjZXInO1xuXG5pbXBvcnQgR3JhcGggZnJvbSAnLi9HcmFwaCc7XG5cbmNvbnN0IE9ubHlHcmFwaGluUmVhZHkgPSBwcm9wcyA9PiB7XG4gICAgY29uc3QgeyBjaGlsZHJlbiwgZ3JhcGhSZWYgfSA9IHByb3BzO1xuXG4gICAgaWYgKGdyYXBoUmVmICYmIGdyYXBoUmVmLmN1cnJlbnQgJiYgZ3JhcGhSZWYuY3VycmVudC5ncmFwaCkge1xuICAgICAgICBjb25zdCB7IGdyYXBoLCBhcGlzIH0gPSBncmFwaFJlZi5jdXJyZW50O1xuICAgICAgICBjb25zdCBncmFwaFByb3BzID0ge1xuICAgICAgICAgICAgZ3JhcGgsXG4gICAgICAgICAgICBhcGlzLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIHtSZWFjdC5DaGlsZHJlbi5tYXAoY2hpbGRyZW4sIGNoaWxkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5Lyg5YWl55qE5pivIERPTSDlhYPntKDmiJbkuI3mmK/lkIjms5XnmoQgRWxlbWVudO+8jOS4jeS8oOWFpSBwcm9wc1xuICAgICAgICAgICAgICAgICAgICBpZiAoIVJlYWN0LmlzVmFsaWRFbGVtZW50KGNoaWxkKSB8fCB0eXBlb2YgY2hpbGQudHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVhY3QuY2xvbmVFbGVtZW50KGNoaWxkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5ncmFwaFByb3BzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn07XG5cbmNvbnN0IEdyYXBoZW5lID0gKCkgPT4ge1xuICAgIC8vIGNvbnN0IGdyYXBoUmVmID0gdXNlUmVmKG51bGwpIGFzIGFueTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgIGNvbnN0IFtzdGF0ZSwgZGlzcGF0Y2hdID0gdXNlUmVkdWNlcihyZWR1Y2VyLCBpbml0aWFsU3RhdGUpO1xuICAgIGNvbnN0IHsgZGF0YSwgbGF5b3V0LCB0b29sYmFyLCBncmFwaFJlZiB9ID0gc3RhdGUgYXMgR3JhcGhlbmVTdGF0ZTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxMYXlvdXQ+XG4gICAgICAgICAgICA8SGVhZGVyPlRoaXMgaXMgSGVhZGVyPC9IZWFkZXI+XG4gICAgICAgICAgICA8U2lkZT5cbiAgICAgICAgICAgICAgICA8T25seUdyYXBoaW5SZWFkeSBncmFwaFJlZj17Z3JhcGhSZWZ9PlxuICAgICAgICAgICAgICAgICAgICA8T3BlcmF0b3JCYXIgZGlzcGF0Y2g9e2Rpc3BhdGNofSBzdGF0ZT17c3RhdGV9IGdyYXBoUmVmPXtncmFwaFJlZn0gLz5cbiAgICAgICAgICAgICAgICA8L09ubHlHcmFwaGluUmVhZHk+XG4gICAgICAgICAgICA8L1NpZGU+XG4gICAgICAgICAgICA8TWFpbj5cbiAgICAgICAgICAgICAgICA8R3JhcGggZGF0YT17ZGF0YX0gbGF5b3V0PXtsYXlvdXR9IHRvb2xiYXI9e3Rvb2xiYXJ9IGRpc3BhdGNoPXtkaXNwYXRjaH0gc3RvcmU9e3N0YXRlfSAvPlxuICAgICAgICAgICAgICAgIDxPbmx5R3JhcGhpblJlYWR5IGdyYXBoUmVmPXtncmFwaFJlZn0+XG4gICAgICAgICAgICAgICAgICAgIDxHcmFwaERyYXdlciBkaXNwYXRjaD17ZGlzcGF0Y2h9IHN0YXRlPXtzdGF0ZX0gLz5cbiAgICAgICAgICAgICAgICAgICAgPEdyYXBoTW9kYWwgZGlzcGF0Y2g9e2Rpc3BhdGNofSBzdGF0ZT17c3RhdGV9IC8+XG4gICAgICAgICAgICAgICAgICAgIDxTZWFyY2hCYXIgZGlzcGF0Y2g9e2Rpc3BhdGNofSBzdGF0ZT17c3RhdGV9IC8+XG4gICAgICAgICAgICAgICAgPC9Pbmx5R3JhcGhpblJlYWR5PlxuICAgICAgICAgICAgPC9NYWluPlxuICAgICAgICAgICAgPEZvb3Rlcj5UaGlzIGlzIEZvb3RlcjwvRm9vdGVyPlxuICAgICAgICA8L0xheW91dD5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgR3JhcGhlbmU7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgSGFzaFJvdXRlciBhcyBSb3V0ZXIsIFJvdXRlIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XG5pbXBvcnQgeyBob3QgfSBmcm9tICdyZWFjdC1ob3QtbG9hZGVyL3Jvb3QnO1xuaW1wb3J0IEhvbWUgZnJvbSAnLi9Ib21lJztcbmltcG9ydCAnLi9pbmRleC5jc3MnO1xuaW1wb3J0IEdyYXBoaW5TdHVkaW8gZnJvbSAnLi4vR3JhcGhpblN0dWRpbyc7XG5cbmNvbnN0IHByb3BUeXBlcyA9IHt9O1xuXG5jb25zdCBMYXlvdXQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXJcIj5cbiAgICAgICAgICAgIDxSb3V0ZXI+XG4gICAgICAgICAgICAgICAgPFJvdXRlIGV4YWN0IHBhdGg9XCIvXCIgY29tcG9uZW50PXtIb21lfSAvPlxuICAgICAgICAgICAgICAgIDxSb3V0ZSBwYXRoPVwiL2dyYXBoaW4tc3R1ZGlvXCIgY29tcG9uZW50PXtHcmFwaGluU3R1ZGlvfSAvPlxuICAgICAgICAgICAgPC9Sb3V0ZXI+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59O1xuXG5MYXlvdXQucHJvcFR5cGVzID0gcHJvcFR5cGVzO1xuXG5leHBvcnQgZGVmYXVsdCBob3QoTGF5b3V0KTtcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBBcHAgZnJvbSAnLi9Ib21lJztcblxuUmVhY3RET00ucmVuZGVyKDxBcHAgLz4sIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb290JykpO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBVUE7QUFFQTs7Ozs7Ozs7O0FDNUJBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUNUQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQ1JBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FDUkE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUNSQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7O0FDTkE7QUFDQTtBQUNBO0FBMEJBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFHQTtBQUVBOzs7QUN2REE7QUFFQTs7Ozs7O0FDRkE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbEpBO0FBQ0E7QUFFQTtBQUVBO0FBK0JBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFLQTtBQUVBOzs7QUNsSUE7QUFFQTs7Ozs7O0FDRkE7QUFDQTtBQUNBO0FBRUE7QUFZQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFFQTtBQUNBO0FBR0E7QUFLQTtBQUdBO0FBRUE7OztBQ2pEQTtBQUVBOzs7Ozs7QUNGQTtBQUNBO0FBV0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBRUE7Ozs7OztBQ3JCQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUVBOzs7QUNyQkE7QUFFQTs7Ozs7Ozs7O0FDRkE7QUFDQTtBQUNBO0FBR0E7QUFtQkE7QUFFQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBR0E7QUFHQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNwS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFnREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBTUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFZQTtBQUVBOzs7QUN4TkE7QUFFQTs7O0FDRkE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN4Q0E7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDRkE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUE2QkE7QUFBQTtBQU9BO0FBQUE7QUF5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQVRBO0FBNUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBa0dBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFVQTtBQUNBO0FBQUE7QUFFQTs7O0FDL01BO0FBRUE7OztBQ0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FDUEE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7O0FDbkNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQWFBO0FBRUE7OztBQ3ZFQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQU1BO0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzNCQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUFBO0FBQ0E7QUFFQTtBQUdBO0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM1REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUFBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7O0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBekVBO0FBQ0E7QUFDQTtBQUNBO0FBdUVBO0FBQUE7QUFFQTs7O0FDN0ZBO0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0ZBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7OztBQzlGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFJQTtBQUVBOzs7Ozs7Ozs7Ozs7OztBQzNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUVBO0FBR0E7QUFFQTs7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBd0NBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7OztBQ3BKQTtBQUNBO0FBaUJBOztBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBS0E7QUFDQTtBQUNBOzs7QUN0RkE7QUFDQTs7OztBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7Ozs7Ozs7O0FDbEJBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUVBOzs7QUNqRUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUtBO0FBQ0E7QUFHQTtBQUNBO0FBS0E7QUFHQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBTUE7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbkZBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7Ozs7QUFDQTs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBR0E7QUFDQTtBQUtBO0FBS0E7QUFHQTtBQUNBO0FBS0E7QUFHQTtBQUNBO0FBS0E7QUFDQTtBQUdBO0FBQ0E7QUFNQTtBQUVBOzs7Ozs7Ozs7Ozs7OztBQzNGQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFFQTs7O0FDeEJBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUVBOzs7QUM3QkE7QUFPQTtBQUNBO0FBQ0E7QUFFQTs7O0FDWEE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNaQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQVFBO0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQU1BO0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDL0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBT0E7QUFDQTtBQU9BO0FBRUE7OztBQ3hEQTtBQUNBO0FBT0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBOzs7Ozs7QUNoQkE7QUFJQTtBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFHQTtBQUVBOzs7Ozs7Ozs7Ozs7OztBQ3JCQTtBQUNBO0FBR0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBTUE7QUFFQTs7O0FDckRBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7QUNqREE7Ozs7Ozs7Ozs7Ozs7OztBQWVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFIQTtBQUtBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDekJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7Ozs7Ozs7O0FDOUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FDbEJBO0FBR0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7Ozs7Ozs7OztBQ3JCQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDL0VBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBc0JBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBOztBQUFBO0FBR0E7QUFJQTtBQUVBOzs7QUM1REE7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0ZBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7Ozs7OztBQ2hEQTtBQUNBO0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7Ozs7Ozs7O0FDckZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7Ozs7Ozs7QUN6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN0SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3hCQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbEJBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUNqQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUNoQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7QUFBQTtBQUFBO0FBSUE7QUFFQTs7Ozs7Ozs7Ozs7Ozs7QUNwQkE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQVVBO0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3BEQTtBQUdBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUVBOzs7QUN4RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUVBOzs7QUN0QkE7QUFDQTtBQUNBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///126\n")}]);